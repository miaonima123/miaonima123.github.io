<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Markdown学习</title>
      <link href="/2022/07/18/Markdown%E5%AD%A6%E4%B9%A0/"/>
      <url>/2022/07/18/Markdown%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="一级标题使用1个"><a href="#一级标题使用1个" class="headerlink" title="一级标题使用1个#"></a>一级标题使用1个#</h1><h2 id="二级标题使用2个"><a href="#二级标题使用2个" class="headerlink" title="二级标题使用2个#"></a>二级标题使用2个#</h2><p>###三级标题使用3个#</p><h4 id="四级标题使用4个"><a href="#四级标题使用4个" class="headerlink" title="四级标题使用4个#"></a>四级标题使用4个#</h4><h5 id="五级标题使用5个"><a href="#五级标题使用5个" class="headerlink" title="五级标题使用5个#"></a>五级标题使用5个#</h5><h6 id="六级标题使用6个"><a href="#六级标题使用6个" class="headerlink" title="六级标题使用6个#"></a>六级标题使用6个#</h6><h2 id="文字"><a href="#文字" class="headerlink" title="文字"></a>文字</h2><h3 id="删除线"><a href="#删除线" class="headerlink" title="删除线"></a>删除线</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~~删除线~~ 英文模式下波浪号</span><br></pre></td></tr></table></figure><p>效果：<del>删除线</del></p><p>快捷键：Alt+Shift+5</p><h3 id="斜体"><a href="#斜体" class="headerlink" title="斜体"></a>斜体</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*斜体* 英文模式下乘号</span><br></pre></td></tr></table></figure><p>效果：<em>斜体</em></p><p>快捷键：Ctrl+I</p><h3 id="加粗"><a href="#加粗" class="headerlink" title="加粗"></a>加粗</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**加粗** </span><br></pre></td></tr></table></figure><p>效果：<strong>加粗</strong></p><p>快捷键：Ctrl+B</p><h3 id="斜体-加粗"><a href="#斜体-加粗" class="headerlink" title="斜体+加粗"></a>斜体+加粗</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">***斜体+加粗*** </span><br></pre></td></tr></table></figure><p>效果：<em><strong>斜体+加粗</strong></em></p><h3 id="下划线"><a href="#下划线" class="headerlink" title="下划线"></a>下划线</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;u&gt;下划线&lt;/u&gt;</span><br></pre></td></tr></table></figure><p>效果：<u>下划线</u></p><p>快捷键：Ctrl+U</p><h3 id="高亮"><a href="#高亮" class="headerlink" title="高亮"></a>高亮</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">== 高亮 == 英文左右两个等号</span><br></pre></td></tr></table></figure><p>效果：==高亮==</p><p>下图画√都点上，去掉严格模式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![image-20220717205520868](http://miaochen.mcweblog.com/img/image-20220717205520868.png)</span><br></pre></td></tr></table></figure><h3 id="上标-amp-下标"><a href="#上标-amp-下标" class="headerlink" title="上标&amp;下标"></a>上标&amp;下标</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~2~ 下标：英文前后波浪号</span><br><span class="line">^2^ 上标：数字上6^号</span><br></pre></td></tr></table></figure><p>效果:水:H<del>2</del>o</p><p><code>效果：</code>面积^2^</p><h3 id="表情"><a href="#表情" class="headerlink" title="表情"></a>表情</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; [表情包大全](https://www.webfx.com/tools/emoji-cheat-sheet/)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:smile: 左右冒号</span><br></pre></td></tr></table></figure><p>效果：:smile:</p><p>快捷键：Win + .</p><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><p>使用<code>|</code>来分割不同单元格，使用<code>-</code>来分隔表头和其他航</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name | price</span><br><span class="line">--- | ---</span><br><span class="line">fried chicken | 10</span><br><span class="line">cola | 5</span><br></pre></td></tr></table></figure><blockquote><p>Markdown更清晰，<code>| </code>和<code>-</code>两侧需要至少一个空格（最左侧和最右侧的<code>|</code>不需要）</p></blockquote><table><thead><tr><th>name</th><th>price</th></tr></thead><tbody><tr><td>fried chicken</td><td>10</td></tr><tr><td>cola</td><td>5</td></tr></tbody></table><p>为了使其美观可以使用空格对齐不同行的单元格，并在左右两侧都使用<code>|</code>来标记单元格边界，在表头下方的分隔标线中假如<code>:</code>，即可标记下方单元格内容的对齐方式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| name | price |</span><br><span class="line">| :--- | :---:  |   //冒号在横线左为左对齐 右为右对齐 两侧冒号居中</span><br><span class="line">| fried chicken | 10 |</span><br><span class="line">| cola | 5 |</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">name</th><th align="center">price</th></tr></thead><tbody><tr><td align="left">fried chicken</td><td align="center">10</td></tr><tr><td align="left">cola</td><td align="center">5</td></tr></tbody></table><p>快捷键：Ctrl + T</p><h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&quot;引用xxx&quot;</span><br></pre></td></tr></table></figure><blockquote><p>引用xxx</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;嵌套引用</span><br><span class="line">&gt;&gt;xxx</span><br></pre></td></tr></table></figure><blockquote><p>嵌套引用</p><blockquote><p>xxx</p></blockquote></blockquote><p>##列表 </p><h3 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* `*`作为标记</span><br><span class="line">+ `+`作为标记</span><br><span class="line">- `-`作为标记</span><br><span class="line">任意符号 空格 &quot;xxxx&quot;</span><br></pre></td></tr></table></figure><ul><li><code>*</code>作为标记</li></ul><ul><li><code>+</code>作为标记</li></ul><ul><li><code>-</code>作为标记</li></ul><h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 有序列表以数字和`.`开始;</span><br><span class="line">3. 数字的序列并不会影响生成的列表序列;</span><br><span class="line">. 扔以自然顺序&#123;1.2.3.&#125;编写</span><br><span class="line">1. 空格 &quot;xxx&quot;</span><br></pre></td></tr></table></figure><ol><li><p>有序列表以数字和<code>.</code>开始;</p></li><li><p>数字的序列并不会影响生成的列表序列;</p></li><li><p>扔以自然顺序{1.2.3.}编写</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">可以使用：数字\.来取消显示列表&#123;用反斜杠进行转义&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">​``` 语言名称</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String[] args)</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="行内代码"><a href="#行内代码" class="headerlink" title="行内代码"></a>行内代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">``,插入行内代码</span><br><span class="line">`Java`</span><br></pre></td></tr></table></figure><p>示例：<code>Java</code></p><h2 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h2><p>可以在一行中三个或更多的<code>*</code>、<code>-</code>或<code>_</code>来添加分割线</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">***</span><br><span class="line">---</span><br><span class="line">___</span><br></pre></td></tr></table></figure><hr><hr><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Markdown &#123;.tabset&#125;</span><br><span class="line">## Plots</span><br><span class="line">\```&#123;r, fig.dim=c(5, 3)&#125;</span><br><span class="line">par(mar = c(4, 4, .5, .1))</span><br><span class="line">plot(mpg ~ hp, data = mtcars, pch = 19)</span><br><span class="line">\```</span><br><span class="line"></span><br><span class="line">## Tables</span><br><span class="line">\```&#123;r&#125;</span><br><span class="line">head(mtcars)</span><br><span class="line">\```</span><br></pre></td></tr></table></figure><h2 id="跳转"><a href="#跳转" class="headerlink" title="跳转"></a>跳转</h2><h3 id="外部跳转–超链接"><a href="#外部跳转–超链接" class="headerlink" title="外部跳转–超链接"></a>外部跳转–超链接</h3><p>格式为：<code>[link text](link)</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[百度](http://www.baidu.com)</span><br></pre></td></tr></table></figure><p><a href="http://www.baidu.com/">百度</a></p><h3 id="内部跳转–本文件跳转（Typora支持）"><a href="#内部跳转–本文件跳转（Typora支持）" class="headerlink" title="内部跳转–本文件跳转（Typora支持）"></a>内部跳转–本文件跳转（Typora支持）</h3><p>格式为：<code>[link text](#要去的目的地--标题)</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[跳转到某个标题](#xx标题)</span><br></pre></td></tr></table></figure><p><a href="##%E4%BB%A3%E7%A0%81">跳转到某个标题</a></p><h3 id="自动链接"><a href="#自动链接" class="headerlink" title="自动链接"></a>自动链接</h3><p>使用<code>&lt;&gt;</code>包括的URL或邮箱地址会被自动转换为超链接：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;http://www.baidu.com&gt;</span><br><span class="line">&lt;xx@qq.com&gt;</span><br></pre></td></tr></table></figure><p><a href="http://www.baidu.com/">http://www.baidu.com</a><br><a href="mailto:&#x78;&#120;&#64;&#x71;&#x71;&#46;&#99;&#x6f;&#109;">&#x78;&#120;&#64;&#x71;&#x71;&#46;&#99;&#x6f;&#109;</a></p><h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![图片名称](图片地址或图片本地存档路径)</span><br></pre></td></tr></table></figure><h3 id="网上图片"><a href="#网上图片" class="headerlink" title="网上图片"></a>网上图片</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!(网上图片)[http://www.xxx.com]</span><br></pre></td></tr></table></figure><h3 id="本地图片"><a href="#本地图片" class="headerlink" title="本地图片"></a>本地图片</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!(本地图片)[./xxx.jpg]</span><br></pre></td></tr></table></figure><h2 id="利用Markdown画图"><a href="#利用Markdown画图" class="headerlink" title="利用Markdown画图"></a>利用Markdown画图</h2><p><img src="http://miaochen.mcweblog.com/img/image-20220717215823888.png" alt="image-20220717215823888"></p><p>markdown画图也是轻量级的，功能并不全。</p><p>Mermaid 是一个用于画流程图、状态图、时序图、甘特图的库，使用 JS 进行本地渲染，广泛集成于许多 Markdown 编辑器中。Mermaid 作为一个使用 JS 渲染的库，生成的不是一个“图片”，而是一段 HTML 代码。</p><p><code>（不同的编辑器渲染的可能不一样）</code></p><h3 id="流程图-graph"><a href="#流程图-graph" class="headerlink" title="流程图(graph)"></a>流程图(graph)</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph 方向描述</span><br><span class="line"><span class="code">    图表中的其他语句...</span></span><br></pre></td></tr></table></figure><p>关键字graph表示一个流程图的开始，同时需要指定该图的方向。</p><p>其中“方向描述”为：</p><table><thead><tr><th align="left">用词</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">TB</td><td align="left">从上到下</td></tr><tr><td align="left">BT</td><td align="left">从下到上</td></tr><tr><td align="left">RL</td><td align="left">从右到左</td></tr><tr><td align="left">LR</td><td align="left">从左到右</td></tr></tbody></table><blockquote><p>T = TOP，B = BOTTOM，L = LEFT，R = RIGHT，D = DOWN</p></blockquote><p>最常用的布局方向是TB、LR。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph TB;</span><br><span class="line">A--&gt;B</span><br><span class="line">B--&gt;C</span><br><span class="line">C--&gt;A</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph TB;</span><br><span class="line"> A--&gt;B</span><br><span class="line"> B--&gt;C</span><br><span class="line"> C--&gt;A</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph LR;</span><br><span class="line"> A--&gt;B</span><br><span class="line"> B--&gt;C</span><br><span class="line"> C--&gt;A</span><br></pre></td></tr></table></figure><h4 id="流程图常用符号及含义"><a href="#流程图常用符号及含义" class="headerlink" title="流程图常用符号及含义"></a>流程图常用符号及含义</h4><h5 id="节点形状"><a href="#节点形状" class="headerlink" title="节点形状"></a>节点形状</h5><table><thead><tr><th align="left">表述</th><th align="left">说明</th><th>含义</th></tr></thead><tbody><tr><td align="left">id[文字]</td><td align="left">矩形节点</td><td>表示过程，也就是整个流程中的一个环节</td></tr><tr><td align="left">id(文字)</td><td align="left">圆角矩形节点</td><td>表示开始和结束</td></tr><tr><td align="left">id((文字))</td><td align="left">圆形节点</td><td>表示连接。为避免流程过长或有交叉，可将流程切开。成对</td></tr><tr><td align="left">id{文字}</td><td align="left">菱形节点</td><td>表示判断、决策</td></tr><tr><td align="left">id&gt;文字]</td><td align="left">右向旗帜状节点</td><td></td></tr></tbody></table><p><strong>单向箭头线段</strong>：表示流程进行方向</p><blockquote><p>id即为节点的唯一标识，A~F 是当前节点名字，类似于变量名，画图时便于引用</p><p>括号内是节点中要显示的文字，默认节点的名字和显示的文字都为A</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">  A</span><br><span class="line">  B(圆角矩形节点)</span><br><span class="line">  C[矩形节点]</span><br><span class="line">  D((圆形节点))</span><br><span class="line">  E&#123;菱形节点&#125;</span><br><span class="line">  F&gt;右向旗帜状节点] </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">  A</span><br><span class="line">  B(圆角矩形节点)</span><br><span class="line">  C[矩形节点]</span><br><span class="line">  D((圆形节点))</span><br><span class="line">  E&#123;菱形节点&#125;</span><br><span class="line">  F&gt;右向旗帜状节点]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">    begin(出门)--&gt; buy[买炸鸡]</span><br><span class="line">    buy --&gt; IsRemaining&#123;&quot;还有没有炸鸡？&quot;&#125;</span><br><span class="line">    IsRemaining --&gt;|有|happy[买完炸鸡开心]--&gt; goBack(回家)</span><br><span class="line">    IsRemaining --没有--&gt; sad[&quot;伤心&quot;]--&gt; goBack</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">    begin(出门)--&gt; buy[买炸鸡]</span><br><span class="line">    buy --&gt; IsRemaining&#123;&quot;还有没有炸鸡？&quot;&#125;</span><br><span class="line">    IsRemaining --&gt;|有|happy[买完炸鸡开心]--&gt; goBack(回家)</span><br><span class="line">    IsRemaining --没有--&gt; sad[&quot;伤心&quot;]--&gt; goBack</span><br></pre></td></tr></table></figure><h3 id="连线"><a href="#连线" class="headerlink" title="连线"></a>连线</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">  A1--&gt;B1</span><br><span class="line">  A2---B2</span><br><span class="line">  A3--text---B3</span><br><span class="line">  A4--text--&gt;B4</span><br><span class="line">  A5-.-B5</span><br><span class="line">  A6-.-&gt;B6</span><br><span class="line">  A7-.text.-B7</span><br><span class="line">  A8-.text.-&gt;B8</span><br><span class="line">  A9===B9</span><br><span class="line">  A10==&gt;B10</span><br><span class="line">  A11==text===B11</span><br><span class="line">  A12==text==&gt;B12</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">  A1--&gt;B1</span><br><span class="line">  A2---B2</span><br><span class="line">  A3--text---B3</span><br><span class="line">  A4--text--&gt;B4</span><br><span class="line">  A5-.-B5</span><br><span class="line">  A6-.-&gt;B6</span><br><span class="line">  A7-.text.-B7</span><br><span class="line">  A8-.text.-&gt;B8</span><br><span class="line">  A9===B9</span><br><span class="line">  A10==&gt;B10</span><br><span class="line">  A11==text===B11</span><br><span class="line">  A12==text==&gt;B12</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line"> A ---B</span><br></pre></td></tr></table></figure><h3 id="子图表"><a href="#子图表" class="headerlink" title="子图表"></a>子图表</h3><p>使用以下语法添加子图表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">subgraph 子图表名称</span><br><span class="line">    子图表中的描述语句...</span><br><span class="line">end</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">  subgraph 买炸鸡前</span><br><span class="line">    begin(出门)--&gt; buy[出门买炸鸡]</span><br><span class="line">    end</span><br><span class="line">    buy --&gt; IsRemaining&#123;&quot;还有没有炸鸡？&quot;&#125;</span><br><span class="line">    IsRemaining --没有--&gt; sad[&quot;伤心&quot;]--&gt; goBack(回家)</span><br><span class="line">    IsRemaining --&gt;|有|happy[买完炸鸡开心]--&gt; goBack</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">  subgraph 买炸鸡前</span><br><span class="line">    begin(出门)--&gt; buy[出门买炸鸡]</span><br><span class="line">    end</span><br><span class="line">    buy --&gt; IsRemaining&#123;&quot;还有没有炸鸡？&quot;&#125;</span><br><span class="line">    IsRemaining --没有--&gt; sad[&quot;伤心&quot;]--&gt; goBack(回家)</span><br><span class="line">    IsRemaining --&gt;|有|happy[买完炸鸡开心]--&gt; goBack</span><br></pre></td></tr></table></figure><h3 id="序列图-sequence-diagram"><a href="#序列图-sequence-diagram" class="headerlink" title="序列图(sequence diagram)"></a>序列图(sequence diagram)</h3><h4 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram </span><br><span class="line"><span class="code">[参与者1][消息线][参与者2]:消息体</span></span><br><span class="line"><span class="code">    ...</span></span><br></pre></td></tr></table></figure><blockquote><p><code>sequenceDiagram</code> 为每幅时序图的固定开头</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line"><span class="code">Title: 买炸鸡</span></span><br><span class="line"><span class="code">    救救-&gt;&gt;炸鸡店小哥: 还有炸鸡吗？</span></span><br><span class="line"><span class="code">    炸鸡店小哥--&gt;&gt;救救: 没有，要现炸</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">Title: 买炸鸡</span><br><span class="line">    救救-&gt;&gt;炸鸡店小哥: 还有炸鸡吗？</span><br><span class="line">    炸鸡店小哥--&gt;&gt;救救: 没有，要现炸</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="参与者（participant）"><a href="#参与者（participant）" class="headerlink" title="参与者（participant）"></a>参与者（participant）</h4><p>传统时序图概念中参与者有角色和类对象之分，但这里我们不做此区分，用参与者表示一切参与交互的事物，可以是人、类对象、系统等形式。中间竖直的线段从上至下表示时间的流逝。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line"><span class="code">    participant 参与者 1</span></span><br><span class="line"><span class="code">    participant 参与者 2</span></span><br><span class="line"><span class="code">    ...</span></span><br><span class="line"><span class="code">    participant 简称 as 参与者 3 #该语法可以在接下来的描述中使用简称来代替参与者 3</span></span><br></pre></td></tr></table></figure><blockquote><p><code>participant &lt;参与者名称&gt;</code> 声明参与者，语句次序即为参与者横向排列次序。</p></blockquote><h4 id="消息线"><a href="#消息线" class="headerlink" title="消息线"></a>消息线</h4><table><thead><tr><th align="left">类型</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">-&gt;</td><td align="left">无箭头的实线</td></tr><tr><td align="left">–&gt;</td><td align="left">无箭头的虚线</td></tr><tr><td align="left">-&gt;&gt;</td><td align="left">有箭头的实线（主动发出消息）</td></tr><tr><td align="left">–-&gt;&gt;</td><td align="left">有箭头的虚线（响应）</td></tr><tr><td align="left">-x</td><td align="left">末端为叉的实线（表示异步）</td></tr><tr><td align="left">–x</td><td align="left">末端为叉的虚线（表示异步）</td></tr></tbody></table><h4 id="处理中-激活框"><a href="#处理中-激活框" class="headerlink" title="处理中-激活框"></a>处理中-激活框</h4><p>从消息接收方的时间线上标记一小段时间，表示对消息进行处理的时间间隔。</p><p>在消息线末尾增加 <code>+</code> ，则消息接收者进入当前消息的“处理中”状态；<br>在消息线末尾增加 <code>-</code> ，则消息接收者离开当前消息的“处理中”状态。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line"><span class="code">    participant 99 as 救救</span></span><br><span class="line"><span class="code">    participant seller as 炸鸡店小哥</span></span><br><span class="line"><span class="code">    99 -&gt;&gt; seller: 还有炸鸡吗？</span></span><br><span class="line"><span class="code">    seller --&gt;&gt; 99: 没有，要现炸。</span></span><br><span class="line"><span class="code">    99 -x +seller:给我炸！</span></span><br><span class="line"><span class="code">    seller --&gt;&gt; -99: 您的炸鸡好了！</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant 99 as 救救</span><br><span class="line">    participant seller as 炸鸡店小哥</span><br><span class="line">    99 -&gt;&gt; seller: 还有炸鸡吗？</span><br><span class="line">    seller --&gt;&gt; 99: 没有，要现炸。</span><br><span class="line">    99 -x +seller:给我炸！</span><br><span class="line">    seller --&gt;&gt; -99: 您的炸鸡好了！</span><br><span class="line">    </span><br></pre></td></tr></table></figure><h4 id="注解（note）"><a href="#注解（note）" class="headerlink" title="注解（note）"></a>注解（note）</h4><p>语法如下</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Note 位置表述 参与者: 标注文字</span><br></pre></td></tr></table></figure><p>其中位置表述可以为</p><table><thead><tr><th align="left">表述</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">right of</td><td align="left">右侧</td></tr><tr><td align="left">left of</td><td align="left">左侧</td></tr><tr><td align="left">over</td><td align="left">在当中，可以横跨多个参与者</td></tr></tbody></table><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line"><span class="code">    participant 99 as 救救</span></span><br><span class="line"><span class="code">    participant seller as 炸鸡店小哥</span></span><br><span class="line"><span class="code">    Note over 99,seller : 热爱炸鸡</span></span><br><span class="line"><span class="code">    Note left of 99 : 女</span></span><br><span class="line"><span class="code">    Note right of seller : 男</span></span><br><span class="line"><span class="code">    99 -&gt;&gt; seller: 还有炸鸡吗？</span></span><br><span class="line"><span class="code">    seller --&gt;&gt; 99: 没有，要现炸。</span></span><br><span class="line"><span class="code">    99 -x +seller : 给我炸！</span></span><br><span class="line"><span class="code">    seller --&gt;&gt; -99: 您的炸鸡好了！</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant 99 as 救救</span><br><span class="line">    participant seller as 炸鸡店小哥</span><br><span class="line">    Note over 99,seller : 热爱炸鸡</span><br><span class="line">    Note left of 99 : 女</span><br><span class="line">    Note right of seller : 男</span><br><span class="line">    99 -&gt;&gt; seller: 还有炸鸡吗？</span><br><span class="line">    seller --&gt;&gt; 99: 没有，要现炸。</span><br><span class="line">    99 -x +seller : 给我炸！</span><br><span class="line">    seller --&gt;&gt; -99: 您的炸鸡好了！</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="循环（loop）"><a href="#循环（loop）" class="headerlink" title="循环（loop）"></a>循环（loop）</h4><p>在条件满足时，重复发出消息序列。（相当于编程语言中的 while 语句。）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line"><span class="code">    participant 99 as 救救</span></span><br><span class="line"><span class="code">    participant seller as 炸鸡店小哥</span></span><br><span class="line"><span class="code">   </span></span><br><span class="line"><span class="code">    99 -&gt;&gt; seller: 还有炸鸡吗？</span></span><br><span class="line"><span class="code">    seller --&gt;&gt; 99: 没有，要现炸。</span></span><br><span class="line"><span class="code">    99 -&gt;&gt; +seller:给我炸！</span></span><br><span class="line"><span class="code">    loop 三分钟一次</span></span><br><span class="line"><span class="code">        99 -&gt;&gt; seller : 我的炸鸡好了吗？</span></span><br><span class="line"><span class="code">        seller --&gt;&gt; 99 : 正在炸</span></span><br><span class="line"><span class="code">    end</span></span><br><span class="line"><span class="code">    seller --&gt;&gt; -99: 您的炸鸡好了！</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant 99 as 救救</span><br><span class="line">    participant seller as 炸鸡店小哥</span><br><span class="line">   </span><br><span class="line">    99 -&gt;&gt; seller: 还有炸鸡吗？</span><br><span class="line">    seller --&gt;&gt; 99: 没有，要现炸。</span><br><span class="line">    99 -&gt;&gt; +seller:给我炸！</span><br><span class="line">    loop 三分钟一次</span><br><span class="line">        99 -&gt;&gt; seller : 我的炸鸡好了吗？</span><br><span class="line">        seller --&gt;&gt; 99 : 正在炸</span><br><span class="line">    end</span><br><span class="line">    seller --&gt;&gt; -99: 您的炸鸡好了！</span><br></pre></td></tr></table></figure><h4 id="选择（alt）"><a href="#选择（alt）" class="headerlink" title="选择（alt）"></a>选择（alt）</h4><p>在多个条件中作出判断，每个条件将对应不同的消息序列。（相当于 if 及 else if 语句。）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram    </span><br><span class="line"><span class="code">    participant 99 as 救救</span></span><br><span class="line"><span class="code">    participant seller as 炸鸡店小哥</span></span><br><span class="line"><span class="code">    99 -&gt;&gt; seller : 现在就多少只炸好的炸鸡？</span></span><br><span class="line"><span class="code">    seller --&gt;&gt; 99 : 可卖的炸鸡数</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">    alt 可卖的炸鸡数 &gt; 3</span></span><br><span class="line"><span class="code">        99 -&gt;&gt; seller : 买三只！</span></span><br><span class="line"><span class="code">    else 1 &lt; 可卖的炸鸡数 &lt; 3</span></span><br><span class="line"><span class="code">        99 -&gt;&gt; seller : 有多少买多少</span></span><br><span class="line"><span class="code">    else 可卖的炸鸡数 &lt; 1</span></span><br><span class="line"><span class="code">        99 -&gt;&gt; seller : 那我明天再来</span></span><br><span class="line"><span class="code">    end</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    seller --&gt;&gt; 99 : 欢迎下次光临</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram    </span><br><span class="line">    participant 99 as 救救</span><br><span class="line">    participant seller as 炸鸡店小哥</span><br><span class="line">    99 -&gt;&gt; seller : 现在就多少只炸好的炸鸡？</span><br><span class="line">    seller --&gt;&gt; 99 : 可卖的炸鸡数</span><br><span class="line">    </span><br><span class="line">    alt 可卖的炸鸡数 &gt; 3</span><br><span class="line">        99 -&gt;&gt; seller : 买三只！</span><br><span class="line">    else 1 &lt; 可卖的炸鸡数 &lt; 3</span><br><span class="line">        99 -&gt;&gt; seller : 有多少买多少</span><br><span class="line">    else 可卖的炸鸡数 &lt; 1</span><br><span class="line">        99 -&gt;&gt; seller : 那我明天再来</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    seller --&gt;&gt; 99 : 欢迎下次光临</span><br></pre></td></tr></table></figure><h4 id="可选（opt）"><a href="#可选（opt）" class="headerlink" title="可选（opt）"></a>可选（opt）</h4><p>在某条件满足时执行消息序列，否则不执行。相当于单个分支的 if 语句。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line"><span class="code">    participant 99 as 救救</span></span><br><span class="line"><span class="code">    participant seller as 炸鸡店小哥</span></span><br><span class="line"><span class="code">    99 -&gt;&gt; seller : 买炸鸡</span></span><br><span class="line"><span class="code">    opt 全都卖完了</span></span><br><span class="line"><span class="code">        seller --&gt;&gt; 99 : 下次再来</span></span><br><span class="line"><span class="code">    end</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant 99 as 救救</span><br><span class="line">    participant seller as 炸鸡店小哥</span><br><span class="line">    99 -&gt;&gt; seller : 买炸鸡</span><br><span class="line">    opt 全都卖完了</span><br><span class="line">        seller --&gt;&gt; 99 : 下次再来</span><br><span class="line">    end</span><br></pre></td></tr></table></figure><h4 id="并行（Par）"><a href="#并行（Par）" class="headerlink" title="并行（Par）"></a>并行（Par）</h4><p>将消息序列分成多个片段，这些片段并行执行。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">   participant 99 as 救救</span><br><span class="line">   participant seller as 炸鸡店小哥</span><br><span class="line">   </span><br><span class="line"><span class="code">    99 -&gt;&gt; seller : 一个炸鸡，一杯可乐！</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    par 并行执行</span></span><br><span class="line"><span class="code">        seller -&gt;&gt; seller : 装可乐</span></span><br><span class="line"><span class="code">    and</span></span><br><span class="line"><span class="code">        seller -&gt;&gt; seller : 炸炸鸡</span></span><br><span class="line"><span class="code">    end</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    seller --&gt;&gt; 99 : 您的炸鸡好了！</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">   participant 99 as 救救</span><br><span class="line">   participant seller as 炸鸡店小哥</span><br><span class="line">   </span><br><span class="line">    99 -&gt;&gt; seller : 一个炸鸡，一杯可乐！</span><br><span class="line"></span><br><span class="line">    par 并行执行</span><br><span class="line">        seller -&gt;&gt; seller : 装可乐</span><br><span class="line">    and</span><br><span class="line">        seller -&gt;&gt; seller : 炸炸鸡</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    seller --&gt;&gt; 99 : 您的炸鸡好了！</span><br></pre></td></tr></table></figure><h3 id="饼图（Pie）"><a href="#饼图（Pie）" class="headerlink" title="饼图（Pie）"></a>饼图（Pie）</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pie</span><br><span class="line"><span class="code">    title Pie Chart</span></span><br><span class="line"><span class="code">    &quot;Dogs&quot; : 386</span></span><br><span class="line"><span class="code">    &quot;Cats&quot; : 85</span></span><br><span class="line"><span class="code">    &quot;Rats&quot; : 150 </span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pie</span><br><span class="line">    title Pie Chart</span><br><span class="line">    &quot;Dogs&quot; : 386</span><br><span class="line">    &quot;Cats&quot; : 85</span><br><span class="line">    &quot;Rats&quot; : 150 </span><br><span class="line">    &quot;panda&quot; : 200</span><br></pre></td></tr></table></figure><blockquote><p><a href="http://support.typora.io/Draw-Diagrams-With-Markdown/">Typora支持mermaid的官方链接</a></p></blockquote><h3 id="甘特图（gantt）"><a href="#甘特图（gantt）" class="headerlink" title="甘特图（gantt）"></a>甘特图（gantt）</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> title 标题</span><br><span class="line">dateFormat 日期格式</span><br><span class="line">section 部分名</span><br><span class="line">任务名:参数一, 参数二, 参数三, 参数四，参数五</span><br><span class="line"></span><br><span class="line"> //参数一：crit（是否重要，红框框） 或者 不填</span><br><span class="line"> //参数二：done（已完成）、active（正在进行） 或者 不填(表示为待完成状态)</span><br><span class="line"> //参数三：取小名 或者 不填</span><br><span class="line"> //参数四：任务开始时间</span><br><span class="line"> //参数五：任务结束时间</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://mermaid-js.github.io/mermaid/#/gantt">官方教程</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">gantt</span><br><span class="line">       dateFormat  YYYY-MM-DD</span><br><span class="line">       title Adding GANTT diagram functionality to mermaid</span><br><span class="line"></span><br><span class="line">       section A section</span><br><span class="line">       Completed task            :done,    des1, 2014-01-06,2014-01-08</span><br><span class="line">       Active task               :active,  des2, 2014-01-09, 3d</span><br><span class="line">       Future task               :         des3, after des2, 5d</span><br><span class="line">       Future task2              :         des4, after des3, 5d</span><br><span class="line"></span><br><span class="line">       section Critical tasks</span><br><span class="line">       Completed task in the critical line :crit, done, 2014-01-06,24h</span><br><span class="line">       Implement parser and jison          :crit, done, after des1, 2d</span><br><span class="line">       Create tests for parser             :crit, active, 3d</span><br><span class="line">       Future task in critical line        :crit, 5d</span><br><span class="line">       Create tests for renderer           :2d</span><br><span class="line">       Add to mermaid                      :1d</span><br><span class="line"></span><br><span class="line">       section Documentation</span><br><span class="line">       Describe gantt syntax               :active, a1, after des1, 3d</span><br><span class="line">       Add gantt diagram to demo page      :after a1  , 20h</span><br><span class="line">       Add another diagram to demo page    :doc1, after a1  , 48h</span><br><span class="line"></span><br><span class="line">       section Last section</span><br><span class="line">       Describe gantt syntax               :after doc1, 3d</span><br><span class="line">       Add gantt diagram to demo page      :20h</span><br><span class="line">       Add another diagram to demo page    :48h</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">gantt</span><br><span class="line">       dateFormat  YYYY-MM-DD</span><br><span class="line">       title Adding GANTT diagram functionality to mermaid</span><br><span class="line"></span><br><span class="line">       section A section</span><br><span class="line">       Completed task            :done,    des1, 2014-01-06,2014-01-08</span><br><span class="line">       Active task               :active,  des2, 2014-01-09, 3d</span><br><span class="line">       Future task               :         des3, after des2, 5d</span><br><span class="line">       Future task2              :         des4, after des3, 5d</span><br><span class="line"></span><br><span class="line">       section Critical tasks</span><br><span class="line">       Completed task in the critical line :crit, done, 2014-01-06,24h</span><br><span class="line">       Implement parser and jison          :crit, done, after des1, 2d</span><br><span class="line">       Create tests for parser             :crit, active, 3d</span><br><span class="line">       Future task in critical line        :crit, 5d</span><br><span class="line">       Create tests for renderer           :2d</span><br><span class="line">       Add to mermaid                      :1d</span><br><span class="line"></span><br><span class="line">       section Documentation</span><br><span class="line">       Describe gantt syntax               :active, a1, after des1, 3d</span><br><span class="line">       Add gantt diagram to demo page      :after a1  , 20h</span><br><span class="line">       Add another diagram to demo page    :doc1, after a1  , 48h</span><br><span class="line"></span><br><span class="line">       section Last section</span><br><span class="line">       Describe gantt syntax               :after doc1, 3d</span><br><span class="line">       Add gantt diagram to demo page      :20h</span><br><span class="line">       Add another diagram to demo page    :48h</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Snipaste</p><p>剪切完按空格 随意移动</p><p>按C可实现快速取色</p><p><a href="https://www.diagrams.net/">https://www.diagrams.net/</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Markdown 语法学习 </tag>
            
            <tag> 各类流程图学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVA</title>
      <link href="/2022/06/13/JAVA/"/>
      <url>/2022/06/13/JAVA/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>各项参考</title>
      <link href="/2022/05/09/%E5%B7%A5%E4%BD%9C%E5%8F%82%E8%80%83/"/>
      <url>/2022/05/09/%E5%B7%A5%E4%BD%9C%E5%8F%82%E8%80%83/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><!--         <div id="aplayer-NUoUzIuA" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-NUoUzIuA"),            narrow: false,            autoplay: false,            showlrc: 3,            music: {              title: "HeyHiHello",              author: "Hollywood",              url: "https://miaochen.mcweblog.com/Music%2FHollywood%20Wildlife%2CFran%20hall%20-%20Hey%20Hi%20Hello.mp3",              pic: "https://miaochen.mcweblog.com/img/..jpg",              lrc: "https://miaochen.mcweblog.com/Music%2FHey%20Hi%20Hello%20%20-%20Hollywood%20Wildlife%2CFran%20hall.lrc"            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script> -->    <div id="aplayer-LvWwADhz" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="4946715717" data-server="netease" data-type="playlist" data-mode="circulation" data-autoplay="true" data-mutex="false" data-listmaxheight="340px" data-preload="none" data-theme="#000000"    ></div><!--         <div id="aplayer-hjbVHYWW" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;"></div>  <script>  var options = {"narrow":false,"autoplay":false,"showlrc":0,"music":[{"title":"HeyHiHello","author":"Hollywood","url":"https://miaochen.mcweblog.com/Music%2FHollywood%20Wildlife%2CFran%20hall%20-%20Hey%20Hi%20Hello.mp3","pic":"https://miaochen.mcweblog.com/img/..jpg","lrc":"https://miaochen.mcweblog.com/Music%2FHey%20Hi%20Hello%20%20-%20Hollywood%20Wildlife%2CFran%20hall.lrc"},{"title":"HeyHiHello","author":"Hollywood","url":"https://miaochen.mcweblog.com/Music%2FHollywood%20Wildlife%2CFran%20hall%20-%20Hey%20Hi%20Hello.mp3","pic":"https://miaochen.mcweblog.com/img/..jpg","lrc":"https://miaochen.mcweblog.com/Music%2FHey%20Hi%20Hello%20%20-%20Hollywood%20Wildlife%2CFran%20hall.lrc"}]};  options.element = document.getElementById("aplayer-hjbVHYWW");  var ap = new APlayer(options);    window.aplayers || (window.aplayers = []);  window.aplayers.push(ap);  </script> --><h2 id="各项参考资料链接"><a href="#各项参考资料链接" class="headerlink" title="各项参考资料链接"></a>各项参考资料链接</h2><h3 id="监察法实施条例"><a href="#监察法实施条例" class="headerlink" title="监察法实施条例"></a><a href="http://m.dyzxw.org/?act=a&cid=2&aid=152940">监察法实施条例</a></h3><h3 id="十九届六中全会精神主要内容心得"><a href="#十九届六中全会精神主要内容心得" class="headerlink" title="十九届六中全会精神主要内容心得"></a><a href="http://www.happyhomeinlove.com/zuowendaquan/2021/1124/54024.html">十九届六中全会精神主要内容心得</a></h3><h3 id="北京市场监督管理局"><a href="#北京市场监督管理局" class="headerlink" title="北京市场监督管理局"></a><a href="http://scjgj.beijing.gov.cn/">北京市场监督管理局</a></h3><h3 id="进口冷链食品疫情防控工作相关文件"><a href="#进口冷链食品疫情防控工作相关文件" class="headerlink" title="进口冷链食品疫情防控工作相关文件"></a><a href="http://scjgj.beijing.gov.cn/ztzl/jkllspyqfkgzxgwj/index.html">进口冷链食品疫情防控工作相关文件</a></h3><h3 id="北京朝阳政府网站"><a href="#北京朝阳政府网站" class="headerlink" title="北京朝阳政府网站"></a><a href="http://www.bjchy.gov.cn/">北京朝阳政府网站</a></h3><h3 id="北京朝阳区新闻网"><a href="#北京朝阳区新闻网" class="headerlink" title="北京朝阳区新闻网"></a><a href="https://chynews.bjchy.gov.cn/web/992/index.html">北京朝阳区新闻网</a></h3><h3 id="北京疾病预防控制中心"><a href="#北京疾病预防控制中心" class="headerlink" title="北京疾病预防控制中心"></a><a href="https://www.bjcdc.org/article/70930/2022/3/1648599058866.html">北京疾病预防控制中心</a></h3><h2 id="写作格式注意"><a href="#写作格式注意" class="headerlink" title="写作格式注意"></a><strong>写作格式注意</strong></h2><p><img src="http://miaochen.mcweblog.com/img/202203282000573.jpg" alt="文档格式"></p><h2 id="市场组疫情监督检查要点清单"><a href="#市场组疫情监督检查要点清单" class="headerlink" title="市场组疫情监督检查要点清单"></a>市场组疫情监督检查要点清单</h2><h3 id="入口管理"><a href="#入口管理" class="headerlink" title="入口管理"></a>入口管理</h3><p>是否设置体温检测专岗，是否安排专门人员对进入人员检测体温，对体温异常者劝返就医。 </p><p>是否在出入口醒目位置张贴健康宝二维码,是否安排专门人员查验顾客健康宝状态，并对健康码异常者劝离。 </p><h3 id="场所管理"><a href="#场所管理" class="headerlink" title="场所管理"></a>场所管理</h3><p>人员密集、封闭拥挤场所是否有专岗检查顾客戴口罩，在场所内是否存在不佩戴口罩顾客。<br>是否在经营场所易聚集区域内设“一米线”，是否存在人员聚集现象。</p><h3 id="环境消杀"><a href="#环境消杀" class="headerlink" title="环境消杀"></a>环境消杀</h3><p>是否采取有效措施保持场所内通风换气。<br>是否明确专兼职消杀员，是否每日消杀如实记录并公示。<br>是否每日对场所及有关设施设备、工具及器具开展清洁并记录；是否保持场所内环境卫生清洁、室内无异味、无积水。</p><h3 id="人员防护"><a href="#人员防护" class="headerlink" title="人员防护"></a>人员防护</h3><p>是否对从业人员进行体温监测，是否查询从业人员“北京健康宝”，并记录相关情况。<br>从业人员上岗期间是否佩戴口罩，是否保持手卫生，在服务或交易时是否佩戴手套。<br>从事肉类、水产品等冰冻类、冰鲜类食品的人员佩戴手套是否出现破损或污染未及时更换。<br>进口冷链食品（肉类、水产品）从业人员是否每周开展核酸检测，其他从业人员是否按要求定期开展核酸检测，是否能提供检测报告。</p><h3 id="冷链存储经营管理"><a href="#冷链存储经营管理" class="headerlink" title="冷链存储经营管理"></a>冷链存储经营管理</h3><p>是否能够提供使用、存放、销售的此类产品同品种、同批次的核酸检测阴性报告、消毒证明、检验检疫证明。<br>经营者是否核对食品外包装消杀情况并记录，是否建有产品出入明细台账。<br>是否将此类产品信息上传至“北京市冷链食品追溯平台”。经营时是否在产品包装或货柜明显处一一对应加贴“北京冷链”电子追溯码。<br>是否设置单独冷柜或区域存放此类产品，是否做到进口与国产分开；经营时是否与直接入口食品做到分区域销售；是否配备一次性手套，是否设置标识引导消费者穿戴手套挑选商品。<br>冷库经营者是否采取分库或分区的方式分别存放，减少交叉污染。<br>此类产品装卸、加工、销售的人员是否采取防护措施避免直接接触可能被污染的产品。<br>冷库、售卖区是否具备与贮存温度相适应的设施设备及温度监测设备，是否定期测定并记录。<br>是否存在地下经营情况。</p><h3 id="冷链物流运输管理"><a href="#冷链物流运输管理" class="headerlink" title="冷链物流运输管理"></a>冷链物流运输管理</h3><p>车辆箱体是否保持清洁、无毒无害、无异味、无污染，是否按要求进行消毒。<br>车辆是否具备与贮存温度相适应的设施设备及温度监测设备，是否定期测定并记录。<br>作业人员是否采取防护措施避免直接接触可能被污染的产品。<br>车辆是否做到专车专运，不与其他产品混放运输。</p><h2 id="市场所疫情防控制度"><a href="#市场所疫情防控制度" class="headerlink" title="市场所疫情防控制度"></a>市场所疫情防控制度</h2><ol><li>营业前做好口罩、消毒剂等防疫物资储备，制定应急工作预案，设置应急处置区域，落实单位主体责任，加强人员培训。</li><li>建立员工健康监测制度，每日对员工健康状况进行登记，身体不适时应及时就医。</li><li>在商场入口处，增加体温测量设备，所有人员体温检测正常方可进入。</li><li>加强通风换气。如使用集中空调，保证空调运行正常，加大新风量，全空气系统关闭回风。</li><li>对经常接触的公共用品和设施（如存储柜、电梯间按钮、扶梯扶手、卫生间门把手、公共垃圾桶等）要做好清洁消毒。</li><li>保持电梯、咨询台和售货区等区域环境整洁，及时清理垃圾。</li><li>公用洗手间要配备足够的洗手液（或肥皂），保证水龙头等供水设施正常工作。</li><li>应设置“一米线”，提醒顾客排队付款结账时保持安全距离。</li><li>通过管控分流，减少商场内顾客人数。</li><li>推荐顾客自助购物、非接触扫码付费，尽量减少排队时间。</li><li>工作人员应加强个人防护，佩戴口罩；做好手卫生，打喷嚏时用纸巾遮住口鼻或采用肘臂遮挡等。</li><li>顾客佩戴口罩，乘电梯时注意人员之间保持距离。</li><li>顾客佩戴口罩，乘电梯时注意人员之间保持距离。</li><li>通过海报、电子屏和宣传栏等方式加强健康知识宣传。</li><li>当出现新冠肺炎病例时，应在当地疾病预防控制中心的指导下对场所进行终末消毒，同时对空调通风系统进行清洗和消毒处理，经卫生学评价合格后方可重新启用。</li><li>中、高风险地区，建议商场应缩短营业时间，并控制顾客数量。  阅读已结束，获取文档需</li></ol><h2 id="随笔记"><a href="#随笔记" class="headerlink" title="随笔记"></a>随笔记</h2><p>采购项目严格执行市场物资采购流程，包括固定资产、日常用品、电器设备等，由各区域经理审批通过后于每周一上报班子会进行审批，各班子成员、区域经理具有本部门办公用品领取的最终审批权限，其他人员签字无效，明确支出报销流程采购办凭会议纪要、发票、入库单、合同原件等资料报财务监察办审核，由财务监察办完善票据审核，转财务办主任签字，市场内需维修项目应确认维修周期，由各区域经理审批后于每周一上报班子会统一进行审批，特殊项目如自来水、电、气等紧急抢修可直接上报关茹诚，如不在可上报冯总。</p><p>为了全面贯彻落实中央、市委、区委关于全面从严治党的工作要求，进一步强化十八里店乡党委及各级党组织在党风廉政建设工作中的主体责任。<br>乡党委对全乡党风廉政建设负主体责任，乡党委书记是第一责任人，对全乡各单位党组织须履行以下责任：<br>（1）及时向各党组织传达上级有关工作精神及要求，并部署乡党委的工作任务；<br>（2）定期分析全乡党风廉政建设和反腐败工作形势，协调解决问题，统筹推动工作开展；<br>（3）加强对全乡各党组织落实党风廉政建设工作的领导、指导、督导和检查;<br>（4）与各党组织书记开展经常性的谈话谈心，强化日常教育、监督和管理;<br>（5）落实监督执纪“四种形态”实施办法和“第一种形态”实施细则，对存在工作推进不力、履职不到位的党总支书记实施约谈。<br>（6）按照《中国共产党问责条例》规定，对违反党章党纪党规的党组织和党组织主要领导进行问责。<br>2.企业党组织对本单位的党风廉政建设负主体责任，班子集体须承担以下责任：<br>（1）严格执行上级及乡党委关于党风廉政建设和反腐败工作的部署；<br>（2）定期组织党风廉政建设相关规定的学习，经常性开展廉政宣传教育，强化党员干部的教育、管理和监督。<br>（3）认真开展廉政风险防控管理工作，有效落实“三重一大”集体决策制度，建立科学有效的权力运行制约和监督机制。<br>（4）严格遵守中央八项规定精神及廉洁自律准则，带头做出廉政承诺。坚持做到“四风”问题常抓不懈，持之以恒，不断纠正损害群众利益的不正之风。<br>（5）定期对班子成员落实党风廉政建设“一岗双责”情况进行督促、检查与考核。<br>3. 企业党组织书记是党风廉政建设第一责任人，须承担以下责任：<br>（1）认真落实乡党委党风廉政建设的工作决策部署和有关要求，定期研究、布置、检查和报告本单位工作情况。<br>（2）对党员干部开展经常性廉政教育，针对履职、工作作风上存在的苗头性、倾向性问题，及时开展提醒谈话。<br>（3）严格遵守中央八项规定精神，加强对资金使用、工程项目等事项监督管理，严禁出现新增违法建设，杜绝损害群众利益的不正之风和腐败问题。<br>（4）落实以人民为中心的发展理念，落实好“接诉即办”工作要求，切实提高效率、强化效果，提升群众满意度。<br>（5）带头遵守法纪，做好家风建设，严禁出现酒驾醉驾、赌博嫖娼等违纪违法问题及不良作风。<br>（6）加强市场党员干部党风廉政建设，提高市场对商户的服务。</p><h2 id="Excel操作技巧"><a href="#Excel操作技巧" class="headerlink" title="Excel操作技巧"></a>Excel操作技巧</h2><h3 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h3><p>tab切换单元格</p><p>shift+tab返回上一个单元格</p><p>格子等宽可以对靠中间线双击</p><p>格子等宽选中所有列然后双击中间线   从A B C开始选列</p><p>ctrl+; 快速显示当日日期</p><p>ctrl+shift+↓ 选择整列</p><p>ctrl+shift+→ 任意方向键全选文档</p><p>左上角格式刷可先选中一个单位，然后给另外值进行单位添加</p><p>alt+= 快速相加求和</p><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>可用Ctrl框选多个不相连的范围数值</p><h3 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h3><p>绘制网格线时按shift切换橡皮 ESC键退出画笔模式</p><p>冻结窗格应该要冻结哪行的下一行，行和列都可以道理相同</p><p>视图→拆分 将页面一分为二方便比对两个表格</p><p>选用排序时只需选一个格，不能全选会打乱本身的顺序</p><h2 id="其他材料"><a href="#其他材料" class="headerlink" title="其他材料"></a>其他材料</h2><p><img src="http://miaochen.mcweblog.com/img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210917104439.jpg" alt="市场平面图"></p><p><img src="http://miaochen.mcweblog.com/img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210917104449.jpg" alt="市场平面图"></p>    <div class="row">        <embed src="https://miaochen.mcweblog.com/dayanglu%2Fmerged%20(pdf.io)%20(1).pdf" width="100%" height="1200" type="application/pdf">    </div>    ]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>工作相关</title>
      <link href="/2022/05/08/%E5%B7%A5%E4%BD%9C%E8%B5%84%E6%96%99%E5%A4%87%E9%98%85/"/>
      <url>/2022/05/08/%E5%B7%A5%E4%BD%9C%E8%B5%84%E6%96%99%E5%A4%87%E9%98%85/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="e2127019a1653d4ed5a34c03386b2a7d31403ec51f844204ee0e5bed449b2c3d">995a81a7ebbf3cb96856d48dcfe9eaa8398fe0402b8dffc53423b5209afd87fd64d9a25ad33949d996c80c8bdbeebcf95fa438b68a0a924f1ca0ea777765741f556b2a29686a1be9c3b1e14e283442caea84b76a7f90339b5956767caf43cc8a43c3c9738e55d291fe78109165cbf6d6e331a2baba1c78dd19e399082e613374a1e85b68475186dabca5cc7bd1c6867552a996da9b9399fcb107ac95a08eff7a3da2c102bd26b47e166c1eb70237bbe3ba455470a5286d30bd54608a71dab93a9c5e7306c68380b5ef5e514e404a2e8c9bdc824e9f67e07ed107c66c2bdb83ddbcda72b9fa7c48c7ee2fffd1d0ee44b970db6a301d3b39691d442f792c31e4aed0711dc414cb9914786222e1c42066c5a89e6108013f72d6e267d106578317dc45a94bf24ba7dcb270ff400e6f56a08dde3a0ef0c78c2e2aacb38fe9b8b9a80a383457030a78bbb8b49889ae2fca0ef620e2e05fe36324e7a224a8d67fb76670a1067221915879a7443d8d7e433c0e81dc5e7a3f981a6a2449dfa7e3227dbecc10d75000208cc512bdc152662e12d691440d26c0e4d874ae86c8b0661be53c4f36e943c3e65e6f857438e86845aafec8bfa753c1feef1384d9e2c854009f8b3ea18a2945b1cea8830b81453c30777fe839a749cb95c13d1cf4d2d4ae708060df35ab2e863c91707a6ab2dd36b630e4e6ec1a5aaeff323eeb3248ed2e1c2d8eb80cd72e326307c188e4ff36b79396971644f2f7505e34dca01d6a94251f313bb63b748eb11318f833469faa89c449d6f5032c0f6e0f7be95f5010ab9f556a33b0a2327f5fd6d85d518be98a0ee42853fdf4e989f784f784b6d7a4901a9ece426ce49d382625f50e0456b20e646c16568fb24ba06531d0a7ba4af036d270462113f7da87b72ea4b75075d2dfd4b0ab42543e4dc25eb365bd1db13dcafebc629dd0637e39f0de6b81a34224e556d363077c84b275b98bd506ae3b281846e8da01b6360959bd6dc5f81ba40cd29b2adce2c793156705dddd82e173d4c68d8f94f288efb3b22527626480dd87b4971c7b477e2bc23dbbe28c8b794f39bcabd0c49a25ef43662e692aae9dc5d86ee250dfe73b6fe02fab324a55a5cc80597fbb1c8f326c52ff15994307562fa739377b528b0852983584c17553e327dedb6a6666954fe034de56aad87bf9a692e44532f489b836bc63504c346761176f6ec5657e80463ea91b76f096627983b3d2dfe824b3b28af8bf2c83b0a878d6360bc2afacf6e47d340c4b5bbe0572817841f92616810b4065928fbfb3cfcce60990547cc9543920e8a5179fd496bef2b9f1186ee836c5cd23cef695260c735db967582a568f5832a8cfbd6438af00b66e74c3405a1198c244f15bd0134f259fface4812728c260ca80c6b77f24fbc4b5391d7793a227ab4db13e810825037ae2e64922240a7114d3ed50bcb4c29f358582f521a6517a61b5b878a712fcf0300b46cd92e028d78f1f88d13f30e9b15cef9365aa21e7a0cb28186f38e49afa35ecc279db8193aea410263e0ff1b0e9dc6c65dcca53a8f81cc26b19f8970ad773848edc47a59f1e522e1196cd457198175edb4d2fe6f83ea72f32518873839378d7d1430e54b14644055d5b9608d815bb0d3e55b42725dfba7d9720d73c88ce7cf1e7985575b682f4e188873e67f66a40451224e1df3b0f9ea265993d40fea423ff4dfe97d7a47d0637298aa56bb5a48b9fd23aca143b947a5e3a61ffef269799fd2aacc996211f71b71bbcb5649131d0d187ab3268c17d41c6f963b8d72943db0f6391c98f0984711943381a6fd3942f07cfdf38f692fc4d14bb1b76df96d65d858d2eca0020ba1563fc720addef994ed9a2558c782317e23336ccfd056578345e879894bb4f19c4cc56f6780bf9ee25be3a662ef24885a7d20ba3e790feb8002c2769e8546ae5739a5aff3783762cc785ef42d7ed4dd982e7d53c69fb33cf094837bbef1ef6038d8aa4222256e86a35d2ad49f88583055e23abdcd6085bd8fcdb9df70731ab1cbd828a6664bb3456606321788fa2c59ff4884ff0968609d2626808ec6d2f4d49eabb34d6470367f82f4cb715e46e711871a9bbac08959123516448156ce931417508f5181427dd98e3a7d4f44c9c3fb21d4a91ebf49a35a3ba9250e7d2dea253d999d3d1aa63695fe03b4d0efdde466655681b127483daa1bb882874ac0b1562e088666ad651cc5ebd118b524c86509375f4b22c4ceed1f4507eab24e2622e53be85709cf9ff8d08bb6877d33a679d43c33289dccfd37efb13c815c3c5125632c1ac91791f9779e6eca04971302421d4278795e7041b90214883ee686cf8b52de50840cf528fc2daec9203546a8d952986e59cff3c4b610aeae62aa7b142cc42e074e5272083e4fd3daa0b4c3dd20bfc8c344df60aab1b4af8f0b24ebb759637b2ef7388d484bdec3eb7805d643b535b0a13bef623ace6fc6dce62d462d3b17d0154a2d833c77f6586c78b7614762514eb3287bfe5f8c14cbb69cb343116c66806d794c4271cfd3d0fb2305ae7ae10a38ff7974ce2b1121725a49a1c97e9a33678e4176150f27a17e0a450b37b5ec173642b8ed456b80df3ebff8fb3f49594645fecb83f73e22cfc510c2170077d1aa4af7e69591e8ee959278a89c54b375c2e39b97233c4cd0a183d619e6e046eea6a25e0789a707a24b8cda78d69072f9a39bfed11aa0bdbaf50f4e41876a0c4c86043d903e8a8aedca2d6769dc470dac62bec4cfd5441cb3311c3c1432a19368cacc75168e68aab5190bb2e1946b11bf0ad2a94c77e6f0ef6559ddf95164c507f5e5c91398ecbd4319207b69472d636db44f8f81d376d85a27119dd2c5b6801d232c75e975bac6e885dfa66e8ee5109c0c1d6df0c05372e523b3b4ad0b0790f65e86fb3ac4d2499f1aaaeba483c17b95c5d682ff534f8e5b8cc645863598d6ccf83eba02845296b1c81fe220d377e5f2a70d0a671efab97da7e839f45209989a07d3083b18ce774c64e10941eb11d6d131f5664a75a9a4ee17968520f02a2ed41a0ed30ade24fd6538c4a8bde15a3f724fa4842e68f2fe6583aef88e5bfa42b0186836b0b1d22b883163388d0f3f2b36d252e2bbb40da97756fd3d6059dc01cd02c503526156718a79754625073e10c82cae049e5535d7e6b440e4736373734258c101115b4a5a5598bcb116481cc4cd1014819bd19fef8f0fdb271b7c6dcfa4ef6681ded032ba2fea931c24b38bbdb27acd5bb3577c781c66e36f1ebcdab69ccee5dabba4a45035f0caa8c0db8c566cc21fae2195a05edad3036f91672d9c100e4a77bf613540c73f03043b02d5e47efa232d71b4825347d902949b30a405e7403d143dd6f3f1d628d8e01c2b125a9f53c1c4c976993c67fcf5ba59e0fc2c4b15307ec8e285b46002b0f177f7007914416c01f94d1c8144032b41dfd7649ea86ac18023d579eca1560b99d9848160b88902a2c0037edc73a8c1ed9dfdbd723d18eb44ed5266f27fb84e8033fcba24248fb50de4e8552e5f45f0f167831cf4c0ad0b72f9d2feabadf51ebbb9669fc6d51571711af9ea0303570f7b0f3a380f7c9eb22eee1d4d5bebf900005a593e0e4716aa193d661ab2274a383afc0ecd547370c50aeb0e5f148444858ccd2cf45c96455b24f6b06fd1c8085534432184e1fe62fde9cdcc00b825b9e6599ac585de556382ca6f2d9c302a15be58b950cce1c069c947fa6d5ce2daddc717080ba8345b998cbc9fcd52f184a84190f380c8c31cf1b6a035b2eb5801ea6c04893b2ca5d5b2907e312f923e92484aa8bcb4d69740fb13d7a806a7b1422d45d92715693bfb90b5bc32a78a35802ff835247b1dbb31b71a708ec06438c88026c7de30290035e6df4105fc75d2aaf6f9cb83c127427cd3832dce91089a0f8a00e6402e35237b5aff102b565de43ead6275ed71b14bf09182f6aecc8ba26e0182638cfbe7a95e3d1c1d10c027cf2c6b6bcc104a339cb1a61c4da3e5224e40225c49b02393778bf54e02a8865e15b2f6c4cbc4141b40d7cdcaabf22bab51204f6395bf50dc0d749337ba804b9a5a34d10f745e03003dee59901087f6c89d0e57c5f655024fd494478a7ecb48733fb5a802684c8021e8a8a378098be5f6721ce69bb90b038a6b33f112e778c18e20425700700adaff77fb7db8ad0f32d88cc252f0e4f1fef63419552d08d86303569939714e5396db59df0b042223b81c6848e649d6c632c097f8f101149568aeffdf547c25be646cd32a7809e6533061bcff17270f1a8bf5c4bafbfacc39e777b3eccd2db07ec1b322aa3a7ec50448f128a08f1ce553e3359e72444174747cdd7d1171fe51135cf4d7a38cb53ca6dcd6374b07587dcbb27c8db895004c04ff31f0c1cce341f1e0b526f92a96514bbf46781f3f4d11a75481c8b2b5ea34e87ad25b5f22e82b4714acdf0d29e46615ab663e145883815578dd0d5a0b05611436b2626e9cb91c28f320aeb90bf0ac8b37de73aa94a5774b37f5fa187249bdf294e8ac7d41c6f318769eb14accf99c18be0cd42e580df80c2c1fbed134fc5b83fe368a593244fe0a692a04b462c817349a7de718e388368acf4642b63d16e37f963579aca9afe0a9be36120c2edf8d820bfe092d7225b538f08c3d241cea1d36b4a38d7f2cafbb6b378e482fcbd2b5c34defff8d0d3e66963a1a195f7bf3d75186585fa57825ff3b7b679ba1e10ae85a6b05ce92cac5fbaa13a55a40a01a1e00323c0ffb8393eaef3d93587f7dacbe775d3824b49bb15cb3b69480cb90bd4e30275afcb506c3dbf830c1e70091e0a1e62dc5e5f5c72a25e14f24dfaf11091d3e9ffa63283ab9a6ce47e38eda067cc5428a361613aa93ae3abc0d5dff3df5cd8b2537d8d4ba694809c4b87b175dca615716fd16d857367cf54dc8310c16432fa20cec0d58549e311c4ae412c92b7a382e2f6500f79df48b3a3f86908f4e97163fea6e3ceb26de1ed28f9883c141fe8b325232406b73b8557de6902baa94a43cb7f4dbc47982608e17a5256b8279e3e78ae2bf511c56fc6edeb0a7624d4793dde6685a775838bec56f2cf43d0aa89ceb8e977eb583030cb5b58c0c350124eb760cd7a3a05b4940e1d688225ad9cf4909e200d2aae01e29babe53fe0275c187ea9644deb9befc3062efc69817d2076cb9be263366302078dfa74181fe596897e9735fee692d64a2694761d85814c485eddbb224390a88689507193bbb6595c91ce249df28dc7f23a977be8cca31c211a3ce724aed9e2f1c78580c7c4ee277d4d73881c22e0db55c46c1f1a1ea30d4f5c96ab4e9617de38c19543cd73c288a1cf8e5fd639f2624723095dd09d3b360c175f700da065b99dfe8d56650dd395cda60f5541f71cfb3578d6d34896844a1f36ab19808a385d841d0643a6e6d369a258928f3c89b4e4a6b1619625a92cfd242c0a55e6551e15158448ebadc1a0db79228ae73fbdd799cbcc2ba4c02aa2236216376845d3dc92360a791eb0a1f3a95b060657e055dc3d59f573cc9301c216c0e7d0abbcafae2f8bde2a922e9e83f31e843303fc7781f0f6538760c8236d5fdca823447425f5c52667789ef98543fb37f118c15c70526d56f49a7961c91300be68cc1dcdc6ca433f6cc39e91e3cd3cfffc5fde8ce6c745c882fec39910610dc53034aa50edb9aa67060742e16e76b4a3cdc7213c189d769556488ea1c3c2f0f86950c6caf851f77c87394b2bf87d7a7b56903e361170fda8a6063adc14111e7b6f72cca0e2d9c3e7eb56eacedc2049c11f422d9d84f898484ab2f2845bc37a7390d26e3366e384b2b90ccb8daeaaba378eab24fe5bccd5cf859b92e22066671e632a7aec63faf74667680cc03c84c609e001ade33a1f68444ada19d5a12b8ccdfcea374acd8b33ecbacca154877124d548848a003a2db4b3669000e5b47ec3cfadf4335ad1164e25230d20adba34ce5404cabecb5eaff461bfb119903c2c152990169e90ece8cd351a842deba1e9e6e94d48a7cbe596f9ca39e0705b03d1a2b56084873f9ce37b5939b44438ac5e93677d304cebdbe3f3e5461fdb5346d668ec315a18da90a2520b78851982dd7834bd0b9234d141b8cc46b108acb65848da0052339c2460b289f1ced41e6d2bbaead8654e310eeb507a3a655704e68da980cb15f658e0287afb750d267ef9f01e0a2d2e478dd4fc0295f062a276dfa339dd4a57f41374afd7e3ce4c43a1619b449c31b1eb54955ea275fe4c29d52ba598a50a5ce9448cd84451283f20770bd07242b2e773699d0c5aa3154207ab3cb7b13d41dc779004ce763eaa40f9ebfa2e398cbc09cc12b9be980884b0f7354b18c867e8e5470475372c314f13bbf121e223e40d0202a61deeaa13f7d62ec23e2d5526e48f9e887c70d36789ae2d466f6546687856193852eb21e00cd7bf1fa0d57ed329aa938f16c09af27e5bdde9d77cddf654c3d0edbed5b1c3335cee2a21fb304c82c12fae05177b2fba6e362c3206a029fd03dd7d8d5b6d92a7417f6f9f271bd02fee793e7c37f03d6c723ccdb61cd9a5730301264e4bac1047eac22e7cd71f2ff07a69b05cb676a2b3a4e2cab6f6917a86185e5c944fd9d820b0c8f1d8c8bbce191dcc50d99b60c38b227c476594bfea6c3d9055ec2e5f0d8552ce884ad56492ce4ca9b1ac936b3d27f4872cc1b22e7b750bd97adab13268eeba6bb1afe7a1937a2c0dfe9078dcf52ba16388fc5a0bc03fe1cccf12a1b3816b124d0bceb13c28f883b8038e6f09a4d63211464b6bbd1bce90d7ddbb2a1a126464b2a6687a9c342caa99474f0362d7e3a625e83d09a05c9ef9ddb7175f345e54ae83d97d2bdf67f00dc55fe9c4060f9b30c7feb730c2b8e45b39b93bdf6ef92538897e919293d5b860cf7826bfb01b6cf386e6ad6a3c3a70738d6f82050b5e9416294fcc6be1b8cf1a17707af8ae00c14d9f1b3ef51f494d4129a305feec04b9a58a77053fbde9c3c3d7b749578df978d31f9415588c006560a4d0296a62c5388685786285d8f6367eafd5019c22adb2218cae55a8aabcdcad0df898cd8b23e3e33fa5506e9ff136264785a427b520ed9b9a7f0d1ff7200baaa8a875932e1e86b3d20b8e0722cfc6c6f216f461fe081572c330d9e0416018b4b862df9cb2b3f9f71d56fac94556efa7fc65db8d104094a7ad7e7d4ac334551f0e564d1c6c448388a63418c8645c5e331df4788736a96901a550df3a1e08b66f735810ffa0d9a3c28090d65f2ab50af5dfc90d5a84f0f0d0e41e43d541b47db7a4a00d374d6b30142b0267b4e8e0701c10893c9a0fd42c6045035417a440126ec74832253104c3547df8794a96efe2236490043886b2753cf72e7282434d19182807d969b8b9aa954014fab083d08de1dfc0f9e24ea91c0e78ccc48568c0676a9557e4647ece2f62c0ad21600b3025e0819a91f8471ee9780e740472a0c2ff4aa0e94266d7f2395cb5ffd0a6b2f3ddcad5c6e53ef92adc597fe1702a23e555fef6673fb5a06c86a65033cdd83ccf4860d172463c2ee4f6ea068458c14d9ba3c9fa99e675395647bef04c85af9d852df6d2d8f6f57270098580ee873287b8ee8ef644806a0b585654a28639b43e5810c3549d76ec1a942e0331c7189a217d8f957e70551445cb0869bad68499e9c0cc01c4db5faff964864ab4d0bb39a247039853932d728630d5102630668d82292da109a15eb041b86eb19b4e3124bca6a1a51bb035cbafe8a64ba67febde841ef85d2686fd5a28de41581132797cd5930b2aee8f577aa06434f8f5568e8036f25bd53be3983fb6968dff7575ba9f91562412b0e3a969151acf4bdd99589f5ca911861f688796247eeddadcb4bcdbb50b0f7ed9a23e0eea7675c4eb1f24dfa5c60092636b103d87ca13afa61b3d30ac5ed0cc8c98dc156c8e59e6144a1e4673e181eb7810616a6e1f8b5685dd6c332fcce934e900ecd7ce948a211fec30e1daa28d5eb5283a362dde796d9853f57ebb299e9a537cef9080a1d1e53f0bcc42037761ba23ba2748c70ffc940c6e578384f720ca42aafca62cee8cc555755045f5e4c9666b94004ec08c9188c3e036fd1ede333c473d7b16becc0ba99456179d72f5fb06a2faf0b9bec3e5a576d64162d8b5f43c36efdc1055058cdd2b139b697710e32f20a350c27f249714eb51820070bf98763a34915d81e29692f3d0a3086368b41e8ea6cb3150b86b2d11056c2c9ac25bf0db22f9c10cb385f1f4e679eb3702952d699d58f51faf771fdc1fe25f1045cc7f54ef8d3d35fe4212fae39d6ea639c7a106f23189dd3243ab5d57c37c14463a701eb9b7189fb58aad80964185b3b9031893ef8d8cb7b2a20270820a5f896cdcd871ccd13f3e0cd39ab12d9ac0dbe5908281265427c8855ce4bb4ff0eaa48b7b60e3ce815a1461eb4132713e4988cfba15e5869a062388df2ca3f6ac1360d9c9237d3d8e45a3f0b2e7fe902e0c99b8335ddcc09adeb88827eb4c3e7df50337efd872fc480ee765cdf9f997091b7a8e14e930cbd6c48d7e1a5d50c3c3397d15f7f12a5cf21628fc52a7a81d05541efcf578ab48721fb81bf2cbf9e611733640f4a2aaa4e29a5d836b1c90c420245cc9e5b0277917237c88f6a6833c9da25e8e7bfa9194282a73bdb3f6bfe4ee74816196d9609ad8b836394211b5cedc7c4e43673114e6af15877ec13723eb25a92aa557154f97779ca1b20f86875f5df315edbedd4485a5782141fb4cf55b59bdf3efa837e4f6be6ca7241163e3fd4b4fe1c1e741bcce0ee8f7f8cc1cfe169a2d1c512bde189a3260a0b64175d320265ec15fd207acdec7bb691d7075df3ce2e67d2ac480cd5b5c95cda59a0c7ae7fcef04d48791c585444e9af8627f736143a2169b0e74792b7d13e5feeef657cb9ce5a95a2675615c5d10f3b368b01b8592486247d22d65a637147a1c8ca7ee4f8c9e72b911e12c4d6bd3846b42534a2a5984564bdef93650468c85290479ab9bd8a85f634a5a07c19f965465a2565ef6502319ef405022e1b69cbce502cb004fb9c6f091042dea8066c507da067dc1282f8894133f02bef3e0b3e100558f7c532f77dda225ca757d85ce8ae55f18dde134e4b100ffbc2f7b09106f09030a4e3fcfe6a00ce2d46b9e9967ca3cc969f951d52af5311de01446f378b0ec79e3e0ca74e112f7dffe4e157cdbf5b88d65733580a476060b775d6676cd648d8d071df129e8feb766a2d710b80e3f784b1c5814d34555419ef380c1b48eee210bf1ed0d9d0535af7e89c4a2ea76d7226aca26b837d95d79e88d0144629e378457a81712b329c14dbacd408ac57fc086e9e8c7696c593f845a8538f2cd2289efa466fec1086def4b7abd4b333465fbc074e11378fdcb594e5f7302669d14d6fed3b49e28ba9a329bbae6c6977943392328d96f7a15547a5fb689d50362adf2e551c4d8796758052ff725878a9b6e815f644a2a822668a02dd904ae230fd0e684f8f0085adea7c9b62b3d81fab1d50fd38253643c1fedf6e1c04ae8dc5b1b390c3d8abfe479d431ad04458e573c8ea2135563a78ee45368e3ea254c3ab9fc2f2e7c478652935d917fe453456f914f39cff2a58e47559d8ab706134fbb49f7aab481b538e8cadb43c564427903a94338987289bb98dbee2d642faa14ab36f61816edad41e6ce6faa61e6ac03b8cdd0ad698a4ff15ad95e3d40b92</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>各种问题总结 😓</title>
      <link href="/2020/10/30/%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"/>
      <url>/2020/10/30/%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><blockquote><p>VScode工具每次打开会替换窗口</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">workbench.<span class="property">editor</span>.<span class="property">enablePreview</span>: <span class="literal">false</span></span><br></pre></td></tr></table></figure><blockquote><p>cnpm : 无法加载文件 node_global\cnpm.ps1，因为在此系统上禁止运行脚本</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//更改权限 </span><br><span class="line">以管理员身份打开PowerShell执行Start-Process powershell -Verb runAs</span><br><span class="line">继续重新执行set-ExecutionPolicy RemoteSigned 选择 Y</span><br></pre></td></tr></table></figure><blockquote><p>博客在上传云服务器时候报错 Error Deployer not found:git</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-de</span><br></pre></td></tr></table></figure><h2 id="nvm管理工具命令和用法"><a href="#nvm管理工具命令和用法" class="headerlink" title="nvm管理工具命令和用法"></a>nvm管理工具命令和用法</h2><p><a href="https://github.com/coreybutler/nvm-windows/releases">nvm下载地址</a></p><p><strong>nvm-setup.zip 安装版 推荐使用</strong></p><ol><li><p>查看当前系统nodejs版本和列表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm list [available]</span><br><span class="line">可选参数表示所有可下载列表</span><br></pre></td></tr></table></figure></li><li><p>安装版本号可自定义具体参数可按照第一条</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install 12.16.1</span><br></pre></td></tr></table></figure></li><li><p>使用特定版本（第一条列表里显示有的）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use 12.16.1</span><br></pre></td></tr></table></figure></li><li><p>卸载不需要版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm uninstall 版本号</span><br></pre></td></tr></table></figure></li></ol><p><strong>nvm -v</strong>检查当前nvm版本  常用功能就以上 其他命令可参考下面链接</p><blockquote><p><a href="https://www.cnblogs.com/gaozejie/p/10689742.html">https://www.cnblogs.com/gaozejie/p/10689742.html</a></p></blockquote><h2 id="Google无法安装"><a href="#Google无法安装" class="headerlink" title="Google无法安装"></a>Google无法安装</h2><p>文件后缀改为xxx.reg</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line"> </span><br><span class="line">;WARNING, this file will remove Google Chrome registry entries  </span><br><span class="line"> </span><br><span class="line">;from your Windows Registry. Consider backing up your registry before</span><br><span class="line"> </span><br><span class="line">; using this file: http://support.microsoft.com/kb/322756</span><br><span class="line"> </span><br><span class="line">; To run this file, save it as &#x27;remove.reg&#x27; on your desktop and double-click it.</span><br><span class="line"> </span><br><span class="line">[-HKEY_LOCAL_MACHINE\SOFTWARE\Classes\ChromeHTML] </span><br><span class="line"> </span><br><span class="line">[-HKEY_LOCAL_MACHINE\SOFTWARE\Clients\StartMenuInternet\chrome.exe] </span><br><span class="line"> </span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\RegisteredApplications]</span><br><span class="line"> </span><br><span class="line">&quot;Chrome&quot;=-</span><br><span class="line"> </span><br><span class="line">[-HKEY_CURRENT_USER\SOFTWARE\Classes\ChromeHTML] </span><br><span class="line"> </span><br><span class="line">[-HKEY_CURRENT_USER\SOFTWARE\Clients\StartMenuInternet\chrome.exe] </span><br><span class="line"> </span><br><span class="line">[HKEY_CURRENT_USER\SOFTWARE\RegisteredApplications]</span><br><span class="line"> </span><br><span class="line">&quot;Chrome&quot;=-</span><br><span class="line"> </span><br><span class="line">[-HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Uninstall\Chrome]</span><br><span class="line"> </span><br><span class="line">[-HKEY_CURRENT_USER\Software\Google\Update\Clients\&#123;8A69D345-D564-463c-AFF1-A69D9E530F96&#125;]</span><br><span class="line"> </span><br><span class="line">[-HKEY_CURRENT_USER\Software\Google\Update\ClientState\&#123;8A69D345-D564-463c-AFF1-A69D9E530F96&#125;]</span><br><span class="line"> </span><br><span class="line">[-HKEY_CURRENT_USER\Software\Google\Update\Clients\&#123;00058422-BABE-4310-9B8B-B8DEB5D0B68A&#125;]</span><br><span class="line"> </span><br><span class="line">[-HKEY_CURRENT_USER\Software\Google\Update\ClientState\&#123;00058422-BABE-4310-9B8B-B8DEB5D0B68A&#125;]</span><br><span class="line"> </span><br><span class="line">[-HKEY_LOCAL_MACHINE\SOFTWARE\Google\Update\ClientStateMedium\&#123;8A69D345-D564-463c-AFF1-A69D9E530F96&#125;]</span><br><span class="line"> </span><br><span class="line">[-HKEY_LOCAL_MACHINE\SOFTWARE\Google\Update\Clients\&#123;8A69D345-D564-463c-AFF1-A69D9E530F96&#125;]</span><br><span class="line"> </span><br><span class="line">[-HKEY_LOCAL_MACHINE\SOFTWARE\Google\Update\ClientState\&#123;8A69D345-D564-463c-AFF1-A69D9E530F96&#125;]</span><br><span class="line"> </span><br><span class="line">[-HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Google\Update\Clients\&#123;8A69D345-D564-463c-AFF1-A69D9E530F96&#125;]</span><br></pre></td></tr></table></figure><h2 id="Windows批处理编程笔记"><a href="#Windows批处理编程笔记" class="headerlink" title="Windows批处理编程笔记"></a>Windows批处理编程笔记</h2><p><a href="https://www.cnblogs.com/klchang/p/4771101.html">Windows系统自带工具cmd命令</a></p><p><a href="https://blog.csdn.net/qq_42402854/article/details/93162387">Win10 cmd命令大全与快捷键</a></p><p><a href="https://blog.csdn.net/weixin_41665162/article/details/118667170">同学笔记</a></p><p><a href="https://www.w3cschool.cn/dosmlxxsc1/qsvorb.html">DOS命令学习手册</a></p><p>Ctrl+c 暂停cmd命令行操作</p><p>win + r -&gt; notepad -&gt; 记事本</p><p>dir查看当前目录下文件</p><p>mkdir xx 创建xx目录</p><p>ipconfig 本机ip地址</p><p>net user 本机系统账号</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">net</span> user test /delete </span><br><span class="line">删除某用户</span><br></pre></td></tr></table></figure><p>netstat -an 查看本机网络连接</p><p>80端口http</p><p>443端口https</p><p>444端口木马</p><p>扩展名需为.bat</p><p>@echo off关闭回显</p><p>echo相当于console.log</p><p>cd .. 切换到上级目录</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">echo</span> &quot;hello world&quot;</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><p>结束 pause&gt;null</p><h2 id="批处理运算操作"><a href="#批处理运算操作" class="headerlink" title="批处理运算操作"></a>批处理运算操作</h2><h3 id="算数运算"><a href="#算数运算" class="headerlink" title="算数运算"></a>算数运算</h3><p>*/%+-   </p><p><strong>命令模式</strong></p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> /a <span class="number">1</span>+<span class="number">2</span></span><br><span class="line">每次只能编辑一条</span><br></pre></td></tr></table></figure><p><strong>文本模式</strong> </p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> /a var = <span class="number">1</span> + <span class="number">2</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%var%</span></span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><p><strong>分组优先级加括号()</strong></p><h3 id="重定向运算"><a href="#重定向运算" class="headerlink" title="重定向运算"></a>重定向运算</h3><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;或&lt;</span><br><span class="line"><span class="built_in">echo</span> &quot;hello world&quot; &gt; a.txt</span><br><span class="line"><span class="built_in">type</span> a.txt</span><br><span class="line">&gt; 左边内容保存到右边区域，反之一样</span><br><span class="line">&gt; 输出某个文件内，删除原文件内容从新覆写</span><br><span class="line"><span class="built_in">type</span> xxx.txt 查看具体内容</span><br></pre></td></tr></table></figure><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;或&lt;&lt;</span><br><span class="line"><span class="built_in">echo</span> &quot;hello world&quot; &gt;&gt; a.txt</span><br><span class="line"><span class="built_in">type</span> a.txt</span><br><span class="line">尖号&gt;&gt; 左边内容追加到右边区域，反之一样</span><br><span class="line">&gt;&gt; 输出内容追加某个文件内，不会修改原文件内容</span><br><span class="line"><span class="built_in">type</span> xxx.txt 查看具体内容</span><br></pre></td></tr></table></figure><h3 id="多命令运算"><a href="#多命令运算" class="headerlink" title="多命令运算"></a>多命令运算</h3><p>&amp;&amp; 具有断路，第一个命令错误不会执行第二个命令</p><p>|| 短路 第一个命令执行成功，就不会执行第二个命令</p><h3 id="管道符号"><a href="#管道符号" class="headerlink" title="管道符号"></a>管道符号</h3><p>|  A|B</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dir</span> | <span class="built_in">find</span> &quot;.txt&quot;</span><br><span class="line">寻找筛选出 .txt文件</span><br><span class="line"></span><br><span class="line">netstat -an |<span class="built_in">find</span> &quot; ESTABLISHED&quot;</span><br><span class="line">筛选出当前对应主机与其他地址建立连接的内容</span><br><span class="line">通过|右边命令对竖线左边数据进行操作</span><br></pre></td></tr></table></figure><h2 id="批处理基本命令"><a href="#批处理基本命令" class="headerlink" title="批处理基本命令"></a>批处理基本命令</h2><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令 子命令 参数 操作 选项</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令帮助信息查看 /?  /help获取详细信息</span><br></pre></td></tr></table></figure><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">net</span> user test /?</span><br><span class="line"></span><br><span class="line"><span class="built_in">NET</span> USER</span><br><span class="line">[username [password | *] [options]] [/DOMAIN]</span><br><span class="line">         username &#123;password | *&#125; /ADD [options] [/DOMAIN]</span><br><span class="line">         username [/DELETE] [/DOMAIN]</span><br><span class="line">         username [/TIMES:&#123;times | ALL&#125;]</span><br><span class="line">         username [/ACTIVE: &#123;YES | NO&#125;]</span><br><span class="line"><span class="function">C:\<span class="title">Users</span>\17463&gt;<span class="title">net</span> <span class="title">user</span> <span class="title">test</span> <span class="title">test</span> /<span class="title">add</span></span></span><br><span class="line"><span class="function">命令成功完成。</span></span><br><span class="line"><span class="function">               命令 子命令 用户名 用户密码 操作        </span></span><br><span class="line"><span class="function"><span class="title">net</span> <span class="title">user</span> /<span class="title">help</span></span></span><br></pre></td></tr></table></figure><h3 id="批处理文件参数传递"><a href="#批处理文件参数传递" class="headerlink" title="批处理文件参数传递"></a>批处理文件参数传递</h3><p>.bat文件接收参数使用 %num</p><p>net user %1 %2 /add</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> %<span class="number">1</span></span><br><span class="line"><span class="built_in">echo</span> %<span class="number">2</span></span><br><span class="line"><span class="built_in">net</span> user %<span class="number">1</span> %<span class="number">2</span> /add</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cmd</span> -&gt; xxx.bat 第一个参数值 第二个参数值  </span><br><span class="line">传参数时 注意空格隔开</span><br></pre></td></tr></table></figure><h3 id="注释符拓展"><a href="#注释符拓展" class="headerlink" title="注释符拓展"></a>注释符拓展</h3><p>rem xxx</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem program for add new user</span></span><br><span class="line"><span class="built_in">echo</span> %<span class="number">1</span></span><br><span class="line"><span class="built_in">echo</span> %<span class="number">2</span></span><br><span class="line"><span class="comment">rem use:1.bat user password</span></span><br><span class="line"><span class="built_in">net</span> user %<span class="number">1</span> %<span class="number">2</span> /add</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="更改cmd界面命令提示符"><a href="#更改cmd界面命令提示符" class="headerlink" title="更改cmd界面命令提示符"></a>更改cmd界面命令提示符</h3><p>颜色命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">color 0a</span><br><span class="line">color /?</span><br></pre></td></tr></table></figure><p>标题命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">title &quot;hack&quot;</span><br></pre></td></tr></table></figure><h3 id="时间与日期命令"><a href="#时间与日期命令" class="headerlink" title="时间与日期命令"></a>时间与日期命令</h3><p>时间</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time /t</span><br><span class="line">获取当前时间</span><br></pre></td></tr></table></figure><p>日期</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">date /t</span><br><span class="line">获取当前日期</span><br></pre></td></tr></table></figure><h3 id="启动命令"><a href="#启动命令" class="headerlink" title="启动命令"></a>启动命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start /B xxx.bat 参数 参数</span><br><span class="line">/B 不创建新窗口</span><br></pre></td></tr></table></figure><h3 id="调用其他bat文件"><a href="#调用其他bat文件" class="headerlink" title="调用其他bat文件"></a>调用其他bat文件</h3><p>call 调用其他bat文件执行命令行并传递参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">rem program for add new user</span><br><span class="line">echo %1</span><br><span class="line">echo %2</span><br><span class="line">rem use:1.bat user password</span><br><span class="line">net user %1 %2 /add</span><br><span class="line">rem 后面1%传入到2.bat文件内</span><br><span class="line">call 2.bat  %1</span><br><span class="line">pause</span><br></pre></td></tr></table></figure><h3 id="任务列表查看命令"><a href="#任务列表查看命令" class="headerlink" title="任务列表查看命令"></a>任务列表查看命令</h3><p>tasklist 该工具显示在本地或远程机器上当前运行的进程列表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tasklist /S 192.168.0.108 /U administrator /P 856261</span><br><span class="line">tasklist /FI &quot;STATUS eq RUNNING&quot;  用filter过滤器 eq代表等于 running正在运行的任务</span><br><span class="line">tasklist /FI &quot;PID EQ 12352&quot; /FO table &gt; test.csv</span><br><span class="line">FO:table、list、csv 输出格式 表格列表 </span><br></pre></td></tr></table></figure><p>*表示任意字符</p><h3 id="任务关闭命令"><a href="#任务关闭命令" class="headerlink" title="任务关闭命令"></a>任务关闭命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">taskkill 使用该工具按照进程id（pid）或映像名称终止任务</span><br><span class="line">taskkill /IM notepad.exe</span><br><span class="line">taskkill /pid 14268 /T</span><br><span class="line">/t 关闭任务子进程</span><br></pre></td></tr></table></figure><h3 id="文件结构查看命令"><a href="#文件结构查看命令" class="headerlink" title="文件结构查看命令"></a>文件结构查看命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tree [driver]/A /F</span><br><span class="line">[driver:]：可以使用具体路径</span><br><span class="line">F：显示每个文件夹中文件的名称</span><br><span class="line">A：使用ASCII字符，而不是用扩展字符</span><br></pre></td></tr></table></figure><h3 id="关机命令"><a href="#关机命令" class="headerlink" title="关机命令"></a>关机命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shutdown /i </span><br><span class="line">/i:打开图形化操作</span><br><span class="line">shutdown -p 关闭计算机</span><br></pre></td></tr></table></figure><h3 id="计划任务命令"><a href="#计划任务命令" class="headerlink" title="计划任务命令"></a>计划任务命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">at</span><br></pre></td></tr></table></figure><h3 id="批处理环境变量"><a href="#批处理环境变量" class="headerlink" title="批处理环境变量"></a>批处理环境变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set </span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1Ca4y1s7gh?spm_id_from=333.999.0.0">https://www.bilibili.com/video/BV1Ca4y1s7gh?spm_id_from=333.999.0.0</a></p><p><a href="https://www.bilibili.com/video/BV1U44y1T7W5?spm_id_from=333.851.b_7265636f6d6d656e64.7">https://www.bilibili.com/video/BV1U44y1T7W5?spm_id_from=333.851.b_7265636f6d6d656e64.7</a></p><p><a href="http://www.neat-reader.com/downloads/converter">http://www.neat-reader.com/downloads/converter</a></p><p><a href="https://www.bookzz.ren/Author/Kentaro%20Miura">https://www.bookzz.ren/Author/Kentaro%20Miura</a></p><p><a href="https://zh.ng1lib.org/s/JavaScript%201000?page=3">https://zh.ng1lib.org/s/JavaScript%201000?page=3</a></p><p><a href="https://www.bookmarkearth.com/plugin/index">https://www.bookmarkearth.com/plugin/index</a></p><p>npm install –save hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org #配置国内的镜像源</span><br><span class="line">npm info hexo # 测试查看hexo的安装信息，是否是taobao.org的源</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npmmirror.com  安装淘宝镜像</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo #通过npm安装hexo博客框架</span><br><span class="line"># -g 指定全局安装，可以使用hexo命令</span><br><span class="line">hexo init test 初始化创建，创建test文件夹</span><br><span class="line">cd test 进入目录</span><br><span class="line">npm install 进一步安装hexo所需文件</span><br></pre></td></tr></table></figure><h3 id="发现问题"><a href="#发现问题" class="headerlink" title="发现问题"></a>发现问题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hexo : 无法加载文件 D:\node\nvm\v16.13.2\hexo.ps1，因为在此系统上禁止运行脚本。有关详细信息，请参阅 https:/go.microsoft</span><br><span class="line">.com/fwlink/?LinkID=135170 中的 about_Execution_Policies。</span><br><span class="line">所在位置 行:1 字符: 1</span><br><span class="line">+ hexo -v</span><br><span class="line">+ ~~~~</span><br><span class="line">    + CategoryInfo          : SecurityError: (:) []，PSSecurityException</span><br><span class="line">    + FullyQualifiedErrorId : UnauthorizedAccess</span><br><span class="line">hexo框架权限不足</span><br></pre></td></tr></table></figure><p>解决问题</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、以管理员身份运行 Windows PowerShell(管理员)</span><br><span class="line">2、输入 set-ExecutionPolicy RemoteSigned ，然后输入A 回车</span><br><span class="line">3、还可以通过 get-ExecutionPolicy 查看当前的状态</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line"> <span class="attr">repo:</span> <span class="string">https://gitee.com/mcweblog/mcweblog</span></span><br><span class="line"> <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line"><span class="comment">#注：冒号后面需携空格</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">“ssh-keygen -t rsa -C  youremail@example.com”</span><br><span class="line">git config --global user.email *********@qq.com # 设置gitee邮箱（gitee的注册邮箱）</span><br><span class="line">git config --global user.name &#x27;****&#x27;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常见问题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>系统API</title>
      <link href="/2020/06/05/%E7%B3%BB%E7%BB%9Fapi/"/>
      <url>/2020/06/05/%E7%B3%BB%E7%BB%9Fapi/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="一-后端环境搭建"><a href="#一-后端环境搭建" class="headerlink" title="一. 后端环境搭建"></a>一. 后端环境搭建</h1><h2 id="1-基本配置"><a href="#1-基本配置" class="headerlink" title="1. 基本配置"></a>1. 基本配置</h2><p>基础配置 config/app.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">// 应用名称</span></span><br><span class="line">    <span class="string">&#x27;app_name&#x27;</span>               =&gt; <span class="string">&#x27;后台API&#x27;</span>,</span><br><span class="line">    <span class="comment">// 应用地址</span></span><br><span class="line">    <span class="string">&#x27;app_host&#x27;</span>               =&gt; <span class="string">&#x27;http://miaochen.cloud/&#x27;</span>,</span><br><span class="line">    <span class="comment">// 应用调试模式</span></span><br><span class="line">    <span class="string">&#x27;app_debug&#x27;</span>              =&gt; <span class="literal">true</span>,</span><br><span class="line">...</span><br><span class="line">    <span class="comment">// 是否强制使用路由</span></span><br><span class="line">    <span class="string">&#x27;url_route_must&#x27;</span>         =&gt; <span class="literal">true</span>,</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 路由是否完全匹配</span></span><br><span class="line">    <span class="string">&#x27;route_complete_match&#x27;</span>   =&gt; <span class="literal">true</span>,</span><br><span class="line">]   </span><br></pre></td></tr></table></figure><p>数据库配置 config/database.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">// 数据库类型</span></span><br><span class="line">    <span class="string">&#x27;type&#x27;</span>            =&gt; <span class="string">&#x27;mysql&#x27;</span>,</span><br><span class="line">    <span class="comment">// 服务器地址</span></span><br><span class="line">    <span class="string">&#x27;hostname&#x27;</span>        =&gt; <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="comment">// 数据库名</span></span><br><span class="line">    <span class="string">&#x27;database&#x27;</span>        =&gt; <span class="string">&#x27;qiushibkapi&#x27;</span>,</span><br><span class="line">    <span class="comment">// 用户名</span></span><br><span class="line">    <span class="string">&#x27;username&#x27;</span>        =&gt; <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="comment">// 密码</span></span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>        =&gt; <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="comment">// 端口</span></span><br><span class="line">    <span class="string">&#x27;hostport&#x27;</span>        =&gt; <span class="string">&#x27;3306&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 数据集返回类型</span></span><br><span class="line">    <span class="string">&#x27;resultset_type&#x27;</span>  =&gt; <span class="string">&#x27;collection&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="2-返回状态码"><a href="#2-返回状态码" class="headerlink" title="2.返回状态码"></a>2.返回状态码</h2><table><thead><tr><th align="left">状态码</th><th>含义</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">200</td><td>OK</td><td align="left">请求成功</td></tr><tr><td align="left">201</td><td>CREATED</td><td align="left">创建成功</td></tr><tr><td align="left">202</td><td>ACCEPTED</td><td align="left">更新成功</td></tr><tr><td align="left">400</td><td>BAD REQUEST</td><td align="left">请求的地址不存在或者包含不支持的参数</td></tr><tr><td align="left">401</td><td>UNAUTHORIZED</td><td align="left">未授权</td></tr><tr><td align="left">403</td><td>FORBIDDEN</td><td align="left">被禁止访问</td></tr><tr><td align="left">404</td><td>NOT FOUND</td><td align="left">请求的资源不存在</td></tr><tr><td align="left">500</td><td>INTERNAL SERVER ERROR</td><td align="left">内部错误</td></tr></tbody></table><h1 id="二-【api开发】登录模块开发"><a href="#二-【api开发】登录模块开发" class="headerlink" title="二.【api开发】登录模块开发"></a>二.【api开发】登录模块开发</h1><h2 id="1-数据表设计"><a href="#1-数据表设计" class="headerlink" title="1. 数据表设计"></a>1. 数据表设计</h2><blockquote><p>用户表         user</p><p>id<br>username    用户名<br>userpic         头像<br>password     密码<br>phone           手机号码<br>email             邮箱<br>create_time      创建时间</p><p>status                状态  0禁用 1启用</p></blockquote><blockquote><p>用户资料表        userinfo</p><p>id<br>user_id        用户id<br>sex               性别<br>age               年龄<br>qg             情感<br>job            工作<br>birthday           生日<br>path              家乡</p></blockquote><blockquote><p>第三方登录表    user_bind<br>id<br>type            第三方类型（微信，微博，QQ，其他）<br>openid           openid<br>userid            用户id（默认是0）<br>nickname          第三方昵称<br>avatarurl           第三方头像</p></blockquote><h2 id="2-封装全局异常类"><a href="#2-封装全局异常类" class="headerlink" title="2. 封装全局异常类"></a>2. 封装全局异常类</h2><h2 id="3-封装全局验证层"><a href="#3-封装全局验证层" class="headerlink" title="3. 封装全局验证层"></a>3. 封装全局验证层</h2><h2 id="4-封装基类控制器"><a href="#4-封装基类控制器" class="headerlink" title="4. 封装基类控制器"></a>4. 封装基类控制器</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//api返回结果</span></span><br><span class="line"><span class="built_in">static</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">showResCode</span>(<span class="params"><span class="variable">$msg</span>=<span class="string">&#x27;&#x27;</span>,<span class="variable">$data</span> = [], <span class="variable">$code</span>=<span class="number">200</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$res</span> = [</span><br><span class="line">        <span class="string">&#x27;msg&#x27;</span>=&gt; <span class="variable">$msg</span> ? <span class="variable">$msg</span>:<span class="string">&#x27;未定义消息&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;data&#x27;</span>=&gt; <span class="variable">$data</span> ? <span class="variable">$data</span>:[]</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">json</span>(<span class="variable">$res</span>,<span class="variable">$code</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//api返回无数据结果</span></span><br><span class="line"><span class="built_in">static</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">showResCodeWithOutData</span>(<span class="params"><span class="variable">$msg</span>=<span class="string">&#x27;&#x27;</span>,<span class="variable">$code</span>=<span class="number">200</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">showResCode</span>(<span class="variable">$msg</span>,[],<span class="variable">$code</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-手机验证码api"><a href="#5-手机验证码api" class="headerlink" title="5. 手机验证码api"></a>5. 手机验证码api</h2><h4 id="获取验证码流程："><a href="#获取验证码流程：" class="headerlink" title="获取验证码流程："></a>获取验证码流程：</h4><p>（1）接收手机号码</p><p>（2）验证手机号码合法性</p><p>（3）判断是否已经获取过验证码（判断缓存中是否存在当前手机号的验证码，有则提示“你已经获取过验证码了”）</p><p>（4）生成4位数随机数字</p><p>（5）发送短信（阿里大于）</p><p>（6）手机号=&gt;验证码 的形式保存在缓存中（60秒）</p><p>（7）提示成功</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 发送验证码</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sendCode</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 获取用户提交手机号码</span></span><br><span class="line">    <span class="variable">$phone</span> = <span class="title function_ invoke__">request</span>()-&gt;<span class="title function_ invoke__">param</span>(<span class="string">&#x27;phone&#x27;</span>);</span><br><span class="line">    <span class="comment">// 判断是否已经发送过</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">Cache</span>::<span class="title function_ invoke__">get</span>(<span class="variable">$phone</span>)) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;你操作得太快了&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">30001</span>]);</span><br><span class="line">    <span class="comment">// 生成4位验证码</span></span><br><span class="line">    <span class="variable">$code</span> = <span class="title function_ invoke__">random_int</span>(<span class="number">1000</span>,<span class="number">9999</span>);</span><br><span class="line">    <span class="comment">// 判断是否开启验证码功能</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.isopen&#x27;</span>))&#123;</span><br><span class="line">        <span class="title class_">Cache</span>::<span class="title function_ invoke__">set</span>(<span class="variable">$phone</span>,<span class="variable">$code</span>,<span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.expire&#x27;</span>));</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;验证码：&#x27;</span>.<span class="variable">$code</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">30005</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 发送验证码</span></span><br><span class="line">    <span class="variable">$res</span> = <span class="title class_">AlismsController</span>::<span class="title function_ invoke__">SendSMS</span>(<span class="variable">$phone</span>,<span class="variable">$code</span>);</span><br><span class="line">    <span class="comment">//发送成功 写入缓存</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$res</span>[<span class="string">&#x27;Code&#x27;</span>]==<span class="string">&#x27;OK&#x27;</span>) <span class="keyword">return</span> <span class="title class_">Cache</span>::<span class="title function_ invoke__">set</span>(<span class="variable">$phone</span>,<span class="variable">$code</span>,<span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.expire&#x27;</span>));</span><br><span class="line">    <span class="comment">// 无效号码</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$res</span>[<span class="string">&#x27;Code&#x27;</span>]==<span class="string">&#x27;isv.MOBILE_NUMBER_ILLEGAL&#x27;</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;无效号码&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">30002</span>]);</span><br><span class="line">    <span class="comment">// 触发日限制</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$res</span>[<span class="string">&#x27;Code&#x27;</span>]==<span class="string">&#x27;isv.DAY_LIMIT_CONTROL&#x27;</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;今日你已经发送超过限制，改日再来&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">30003</span>]);</span><br><span class="line">    <span class="comment">// 发送失败</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;发送失败&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">30004</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>config/api.php（自定义配置文件）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">// token失效时间，0代表永不失效</span></span><br><span class="line">    <span class="string">&#x27;token_expire&#x27;</span>=&gt;<span class="number">0</span>,</span><br><span class="line">    <span class="comment">// 阿里大于</span></span><br><span class="line">    <span class="string">&#x27;aliSMS&#x27;</span>=&gt;[</span><br><span class="line">        <span class="string">&#x27;isopen&#x27;</span>=&gt; <span class="literal">false</span>,<span class="comment">//开启阿里大于</span></span><br><span class="line">        <span class="string">&#x27;accessKeyId&#x27;</span>=&gt;<span class="string">&#x27;&lt;accessKeyId&gt;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;accessSecret&#x27;</span>=&gt;<span class="string">&#x27;&lt;accessSecret&gt;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;regionId&#x27;</span>=&gt;<span class="string">&#x27;cn-hangzhou&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;product&#x27;</span>=&gt;<span class="string">&#x27;Dysmsapi&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;version&#x27;</span>=&gt;<span class="string">&#x27;2017-05-25&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;SignName&#x27;</span>=&gt;<span class="string">&#x27;&lt;YourSignName&gt;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;TemplateCode&#x27;</span>=&gt;<span class="string">&#x27;&lt;YourTemplateCode&gt;&#x27;</span>,</span><br><span class="line">        <span class="comment">// 验证码发送时间间隔（60秒）</span></span><br><span class="line">        <span class="string">&#x27;expire&#x27;</span>=&gt;<span class="number">60</span></span><br><span class="line">    ]</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h4 id="对接阿里大于sdk"><a href="#对接阿里大于sdk" class="headerlink" title="对接阿里大于sdk"></a>对接阿里大于sdk</h4><blockquote><p>文档地址：</p><p><a href="https://help.aliyun.com/document_detail/112186.html?spm=a2c4g.11174283.6.635.37eb2c42jFVxfS">https://help.aliyun.com/document_detail/112186.html?spm=a2c4g.11174283.6.635.37eb2c42jFVxfS</a></p></blockquote><p>（1）composer安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require alibabacloud/client</span><br></pre></td></tr></table></figure><p>（2）使用<a href="https://api.aliyun.com/#/?product=Dysmsapi&lang=PHP">OpenAPI Explorer</a>来生成相关API的Demo</p><blockquote><p>OpenAPI Explorer地址：</p><p><a href="https://api.aliyun.com/?spm=a2c4g.11186623.2.13.6a294e6afatgeU#/?product=Dysmsapi&amp;lang=PHP">https://api.aliyun.com/?spm=a2c4g.11186623.2.13.6a294e6afatgeU#/?product=Dysmsapi&amp;lang=PHP</a></p></blockquote><p>（3）\app\common\controller\AliSMSController.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">app</span>\<span class="title class_">common</span>\<span class="title class_">controller</span>;</span><br><span class="line"><span class="comment">// 引入阿里sdk</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">AlibabaCloud</span>\<span class="title">Client</span>\<span class="title">AlibabaCloud</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">AlibabaCloud</span>\<span class="title">Client</span>\<span class="title">Exception</span>\<span class="title">ClientException</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">AlibabaCloud</span>\<span class="title">Client</span>\<span class="title">Exception</span>\<span class="title">ServerException</span>;</span><br><span class="line"><span class="comment">// 引入异常类</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">app</span>\<span class="title">lib</span>\<span class="title">exception</span>\<span class="title">BaseException</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlismsController</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">SendSMS</span>(<span class="params"><span class="variable">$phone</span>,<span class="variable">$code</span></span>)</span>&#123;</span><br><span class="line">        <span class="title class_">AlibabaCloud</span>::<span class="title function_ invoke__">accessKeyClient</span>(<span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.accessKeyId&#x27;</span>),<span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.accessSecret&#x27;</span>))-&gt;<span class="title function_ invoke__">regionId</span>(<span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.regionId&#x27;</span>))-&gt;<span class="title function_ invoke__">asGlobalClient</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable">$option</span>=[</span><br><span class="line">                <span class="string">&#x27;query&#x27;</span> =&gt; [</span><br><span class="line">                    <span class="string">&#x27;RegionId&#x27;</span> =&gt; <span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.regionId&#x27;</span>),</span><br><span class="line">                    <span class="string">&#x27;PhoneNumbers&#x27;</span> =&gt; <span class="variable">$phone</span>,</span><br><span class="line">                    <span class="string">&#x27;SignName&#x27;</span> =&gt;<span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.SignName&#x27;</span>),</span><br><span class="line">                    <span class="string">&#x27;TemplateCode&#x27;</span> =&gt;<span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.TemplateCode&#x27;</span>),</span><br><span class="line">                    <span class="string">&#x27;TemplateParam&#x27;</span> =&gt;<span class="string">&#x27;&#123;&quot;code&quot;:&quot;&#x27;</span>.<span class="variable">$code</span>.<span class="string">&#x27;&quot;&#125;&#x27;</span>,</span><br><span class="line">                ],</span><br><span class="line">            ];</span><br><span class="line">            <span class="variable">$result</span> = <span class="title class_">AlibabaCloud</span>::<span class="title function_ invoke__">rpcRequest</span>()</span><br><span class="line">                    -&gt;<span class="title function_ invoke__">product</span>(<span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.product&#x27;</span>))</span><br><span class="line">                    <span class="comment">// -&gt;scheme(&#x27;https&#x27;) // https | http</span></span><br><span class="line">                    -&gt;<span class="title function_ invoke__">version</span>(<span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.aliSMS.version&#x27;</span>))</span><br><span class="line">                    -&gt;<span class="title function_ invoke__">action</span>(<span class="string">&#x27;SendSms&#x27;</span>)</span><br><span class="line">                    -&gt;<span class="title function_ invoke__">method</span>(<span class="string">&#x27;GET&#x27;</span>)</span><br><span class="line">                    -&gt;<span class="title function_ invoke__">options</span>(<span class="variable">$option</span>)-&gt;<span class="title function_ invoke__">request</span>();</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$result</span>-&gt;<span class="title function_ invoke__">toArray</span>();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClientException <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getErrorMessage</span>(),<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">30000</span>]);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ServerException <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getErrorMessage</span>(),<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">30000</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（4）使用方法：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">app</span>\<span class="title">common</span>\<span class="title">controller</span>\<span class="title">AliSMSController</span>;</span><br><span class="line">...</span><br><span class="line"><span class="comment">// 生成验证码</span></span><br><span class="line"><span class="variable">$code</span> = <span class="title function_ invoke__">random_int</span>(<span class="number">1000</span>,<span class="number">9999</span>);</span><br><span class="line"><span class="comment">// 发送短信</span></span><br><span class="line"><span class="title class_">AliSMSController</span>::<span class="title function_ invoke__">SendSMS</span>(<span class="variable">$phone</span>,<span class="variable">$code</span>);</span><br></pre></td></tr></table></figure><h2 id="6-路由分组操作"><a href="#6-路由分组操作" class="headerlink" title="6.路由分组操作"></a>6.路由分组操作</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不需要验证token</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>(<span class="string">&#x27;api/:version/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 发送验证码</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">post</span>(<span class="string">&#x27;user/sendcode&#x27;</span>,<span class="string">&#x27;api/:version.User/sendCode&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="7-手机号登录api"><a href="#7-手机号登录api" class="headerlink" title="7. 手机号登录api"></a>7. 手机号登录api</h2><p>controller层：application\api\controller\v1\User.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 手机号码登录</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">phoneLogin</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 验证登录信息</span></span><br><span class="line">    (<span class="keyword">new</span> <span class="title class_">UserValidate</span>())-&gt;<span class="title function_ invoke__">goCheck</span>(<span class="string">&#x27;phonelogin&#x27;</span>);</span><br><span class="line">    <span class="comment">// 手机登录</span></span><br><span class="line">    <span class="variable">$token</span> = (<span class="keyword">new</span> <span class="title class_">UserModel</span>())-&gt;<span class="title function_ invoke__">phoneLogin</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">showResCode</span>(<span class="string">&#x27;登录成功&#x27;</span>,[<span class="string">&#x27;token&#x27;</span>=&gt;<span class="variable">$token</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>route层：route\route.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不需要验证token</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>(<span class="string">&#x27;api/:version/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 手机登录</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">post</span>(<span class="string">&#x27;user/phonelogin&#x27;</span>,<span class="string">&#x27;api/:version.User/phoneLogin&#x27;</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>validate层：application\common\validate\UserValidate.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="variable">$rule</span> = [</span><br><span class="line">    ...</span><br><span class="line">        <span class="string">&#x27;phone&#x27;</span>=&gt;<span class="string">&#x27;require|mobile&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;code&#x27;</span>=&gt;<span class="string">&#x27;require|number|length:4|isPefectCode&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$scene</span> = [</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;phonelogin&#x27;</span>=&gt;[<span class="string">&#x27;phone&#x27;</span>,<span class="string">&#x27;code&#x27;</span>]</span><br><span class="line">    ...</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>BaseValidate：application\common\validate\BaseValidate.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">// 验证码验证</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">isPefectCode</span>(<span class="params"><span class="variable">$value</span>, <span class="variable">$rule</span>=<span class="string">&#x27;&#x27;</span>, <span class="variable">$data</span>=<span class="string">&#x27;&#x27;</span>, <span class="variable">$field</span>=<span class="string">&#x27;&#x27;</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 验证码不存在</span></span><br><span class="line">    <span class="variable">$beforeCode</span> = <span class="title function_ invoke__">cache</span>(<span class="variable">$data</span>[<span class="string">&#x27;phone&#x27;</span>]);</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable">$beforeCode</span>) <span class="keyword">return</span> <span class="string">&quot;请重新获取验证码&quot;</span>;</span><br><span class="line">    <span class="comment">// 验证验证码</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$value</span> != <span class="variable">$beforeCode</span>) <span class="keyword">return</span> <span class="string">&quot;验证码错误&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>model层：application\common\model\User.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自动写入时间</span></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$autoWriteTimestamp</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定用户信息表</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">userinfo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">hasOne</span>(<span class="string">&#x27;Userinfo&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断用户是否存在</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isExist</span>(<span class="params"><span class="variable">$arr</span>=[]</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">is_array</span>(<span class="variable">$arr</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;phone&#x27;</span>,<span class="variable">$arr</span>)) &#123; <span class="comment">// 手机号码</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;phone&#x27;</span>,<span class="variable">$arr</span>[<span class="string">&#x27;phone&#x27;</span>])-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手机登录</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">phoneLogin</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 获取所有参数</span></span><br><span class="line">    <span class="variable">$param</span> = <span class="title function_ invoke__">request</span>()-&gt;<span class="title function_ invoke__">param</span>();</span><br><span class="line">    <span class="comment">// 验证用户是否存在</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">isExist</span>([<span class="string">&#x27;phone&#x27;</span>=&gt;<span class="variable">$param</span>[<span class="string">&#x27;phone&#x27;</span>]]);</span><br><span class="line">    <span class="comment">// 用户不存在，直接注册</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable">$user</span>)&#123;</span><br><span class="line">        <span class="comment">// 用户主表</span></span><br><span class="line">        <span class="variable">$user</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">create</span>([</span><br><span class="line">            <span class="string">&#x27;username&#x27;</span>=&gt;<span class="variable">$param</span>[<span class="string">&#x27;phone&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;phone&#x27;</span>=&gt;<span class="variable">$param</span>[<span class="string">&#x27;phone&#x27;</span>],</span><br><span class="line">            <span class="comment">// &#x27;password&#x27;=&gt;password_hash($param[&#x27;phone&#x27;],PASSWORD_DEFAULT)</span></span><br><span class="line">        ]);</span><br><span class="line">        <span class="comment">// 在用户信息表创建对应的记录（用户存放用户其他信息）</span></span><br><span class="line">        <span class="variable">$user</span>-&gt;<span class="title function_ invoke__">userinfo</span>()-&gt;<span class="title function_ invoke__">create</span>([ <span class="string">&#x27;user_id&#x27;</span>=&gt;<span class="variable">$user</span>-&gt;id ]);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">CreateSaveToken</span>(<span class="variable">$user</span>-&gt;<span class="title function_ invoke__">toArray</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 用户是否被禁用</span></span><br><span class="line">    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">checkStatus</span>(<span class="variable">$user</span>-&gt;<span class="title function_ invoke__">toArray</span>());</span><br><span class="line">    <span class="comment">// 登录成功，返回token</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">CreateSaveToken</span>(<span class="variable">$user</span>-&gt;<span class="title function_ invoke__">toArray</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成并保存token</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">CreateSaveToken</span>(<span class="params"><span class="variable">$arr</span>=[]</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 生成token</span></span><br><span class="line">    <span class="variable">$token</span> = <span class="title function_ invoke__">sha1</span>(<span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">uniqid</span>(<span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">microtime</span>(<span class="literal">true</span>)),<span class="literal">true</span>)));</span><br><span class="line">    <span class="variable">$arr</span>[<span class="string">&#x27;token&#x27;</span>] = <span class="variable">$token</span>;</span><br><span class="line">    <span class="comment">// 登录过期时间</span></span><br><span class="line">    <span class="variable">$expire</span> =<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;expires_in&#x27;</span>,<span class="variable">$arr</span>) ? <span class="variable">$arr</span>[<span class="string">&#x27;expires_in&#x27;</span>] : <span class="title function_ invoke__">config</span>(<span class="string">&#x27;api.token_expire&#x27;</span>);</span><br><span class="line">    <span class="comment">// 保存到缓存中</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Cache</span>::<span class="title function_ invoke__">set</span>(<span class="variable">$token</span>,<span class="variable">$arr</span>,<span class="variable">$expire</span>)) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>();</span><br><span class="line">    <span class="comment">// 返回token</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$token</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户是否被禁用</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkStatus</span>(<span class="params"><span class="variable">$arr</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$status</span> = <span class="variable">$arr</span>[<span class="string">&#x27;status&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$status</span>==<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;该用户已被禁用&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">20001</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$arr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>配置文件（config/api.php）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// token过期时间</span></span><br><span class="line">    <span class="string">&#x27;token_expire&#x27;</span>=&gt;<span class="number">0</span>,</span><br><span class="line">    ...</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h2 id="8-账号密码登录api"><a href="#8-账号密码登录api" class="headerlink" title="8. 账号密码登录api"></a>8. 账号密码登录api</h2><p>controller层：application\api\controller\v1\User.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 账号密码登录</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 验证登录信息</span></span><br><span class="line">    (<span class="keyword">new</span> <span class="title class_">UserValidate</span>())-&gt;<span class="title function_ invoke__">goCheck</span>(<span class="string">&#x27;login&#x27;</span>);</span><br><span class="line">    <span class="comment">// 登录</span></span><br><span class="line">    <span class="variable">$token</span> = (<span class="keyword">new</span> <span class="title class_">UserModel</span>())-&gt;<span class="title function_ invoke__">login</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">showResCode</span>(<span class="string">&#x27;登录成功&#x27;</span>,[<span class="string">&#x27;token&#x27;</span>=&gt;<span class="variable">$token</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>route层：route\route.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不需要验证token</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>(<span class="string">&#x27;api/:version/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 账号密码登录</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">post</span>(<span class="string">&#x27;user/login&#x27;</span>,<span class="string">&#x27;api/:version.User/login&#x27;</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>validate层：application\common\validate\UserValidate.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 验证规则</span></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$rule</span> = [</span><br><span class="line">    ...</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span>=&gt;<span class="string">&#x27;require&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;password&#x27;</span>=&gt;<span class="string">&#x27;require|alphaDash&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证场景</span></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$scene</span> = [</span><br><span class="line">    ...</span><br><span class="line">        <span class="string">&#x27;login&#x27;</span>=&gt;[<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;password&#x27;</span>],</span><br><span class="line">    ...</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>model层：application\common\model\User.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断用户是否存在（在前面课程的基础上扩充）</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isExist</span>(<span class="params"><span class="variable">$arr</span>=[]</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">is_array</span>(<span class="variable">$arr</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;phone&#x27;</span>,<span class="variable">$arr</span>)) &#123; <span class="comment">// 手机号码</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;phone&#x27;</span>,<span class="variable">$arr</span>[<span class="string">&#x27;phone&#x27;</span>])-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 用户id</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;id&#x27;</span>,<span class="variable">$arr</span>)) &#123; <span class="comment">// 用户名</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>,<span class="variable">$arr</span>[<span class="string">&#x27;id&#x27;</span>])-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;email&#x27;</span>,<span class="variable">$arr</span>)) &#123; <span class="comment">// 邮箱</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;email&#x27;</span>,<span class="variable">$arr</span>[<span class="string">&#x27;email&#x27;</span>])-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;username&#x27;</span>,<span class="variable">$arr</span>)) &#123; <span class="comment">// 用户名</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;username&#x27;</span>,<span class="variable">$arr</span>[<span class="string">&#x27;username&#x27;</span>])-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 账号登录</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 获取所有参数</span></span><br><span class="line">    <span class="variable">$param</span> = <span class="title function_ invoke__">request</span>()-&gt;<span class="title function_ invoke__">param</span>();</span><br><span class="line">    <span class="comment">// 验证用户是否存在</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">isExist</span>(<span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">filterUserData</span>(<span class="variable">$param</span>[<span class="string">&#x27;username&#x27;</span>]));</span><br><span class="line">    <span class="comment">// 用户不存在</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable">$user</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;昵称/邮箱/手机号错误&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">20000</span>]);</span><br><span class="line">    <span class="comment">// 用户是否被禁用</span></span><br><span class="line">    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">checkStatus</span>(<span class="variable">$user</span>-&gt;<span class="title function_ invoke__">toArray</span>());</span><br><span class="line">    <span class="comment">// 验证密码</span></span><br><span class="line">    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">checkPassword</span>(<span class="variable">$param</span>[<span class="string">&#x27;password&#x27;</span>],<span class="variable">$user</span>-&gt;password);</span><br><span class="line">    <span class="comment">// 登录成功 生成token，进行缓存，返回客户端</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">CreateSaveToken</span>(<span class="variable">$user</span>-&gt;<span class="title function_ invoke__">toArray</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证用户名是什么格式，昵称/邮箱/手机号</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">filterUserData</span>(<span class="params"><span class="variable">$data</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$arr</span>=[];</span><br><span class="line">    <span class="comment">// 验证是否是手机号码</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;^1(3|4|5|7|8)[0-9]\d&#123;8&#125;$^&#x27;</span>, <span class="variable">$data</span>))&#123;</span><br><span class="line">        <span class="variable">$arr</span>[<span class="string">&#x27;phone&#x27;</span>]=<span class="variable">$data</span>; </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$arr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 验证是否是邮箱</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]&#123;2,&#125;)$/&#x27;</span>, <span class="variable">$data</span>))&#123;</span><br><span class="line">        <span class="variable">$arr</span>[<span class="string">&#x27;email&#x27;</span>]=<span class="variable">$data</span>; </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$arr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$arr</span>[<span class="string">&#x27;username&#x27;</span>]=<span class="variable">$data</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$arr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证密码</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkPassword</span>(<span class="params"><span class="variable">$password</span>,<span class="variable">$hash</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable">$hash</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;密码错误&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">20002</span>]);</span><br><span class="line">    <span class="comment">// 密码错误</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">password_verify</span>(<span class="variable">$password</span>,<span class="variable">$hash</span>)) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;密码错误&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">20002</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="9-第三方登录api"><a href="#9-第三方登录api" class="headerlink" title="9. 第三方登录api"></a>9. 第三方登录api</h2><p>controller层：application\api\controller\v1\User.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第三方登录</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">otherLogin</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 验证登录信息</span></span><br><span class="line">    (<span class="keyword">new</span> <span class="title class_">UserValidate</span>())-&gt;<span class="title function_ invoke__">goCheck</span>(<span class="string">&#x27;otherlogin&#x27;</span>);</span><br><span class="line">    <span class="variable">$token</span> = (<span class="keyword">new</span> <span class="title class_">UserModel</span>())-&gt;<span class="title function_ invoke__">otherlogin</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">showResCode</span>(<span class="string">&#x27;登录成功&#x27;</span>,[<span class="string">&#x27;token&#x27;</span>=&gt;<span class="variable">$token</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>route层：route\route.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不需要验证token</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>(<span class="string">&#x27;api/:version/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 第三方登录</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">post</span>(<span class="string">&#x27;user/otherlogin&#x27;</span>,<span class="string">&#x27;api/:version.User/otherLogin&#x27;</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>validate层：application\common\validate\UserValidate.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 验证规则</span></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$rule</span> = [</span><br><span class="line">    ...</span><br><span class="line">        <span class="string">&#x27;provider&#x27;</span>=&gt;<span class="string">&#x27;require&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;openid&#x27;</span>=&gt;<span class="string">&#x27;require&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;nickName&#x27;</span>=&gt;<span class="string">&#x27;require&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;avatarUrl&#x27;</span>=&gt;<span class="string">&#x27;require&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;expires_in&#x27;</span>=&gt;<span class="string">&#x27;require&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证场景</span></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$scene</span> = [</span><br><span class="line">    ...</span><br><span class="line">        <span class="string">&#x27;otherlogin&#x27;</span>=&gt;[<span class="string">&#x27;provider&#x27;</span>,<span class="string">&#x27;openid&#x27;</span>,<span class="string">&#x27;nickName&#x27;</span>,<span class="string">&#x27;avatarUrl&#x27;</span>,<span class="string">&#x27;expires_in&#x27;</span>],</span><br><span class="line">    ...</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>model层：application\common\model\User.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绑定第三方登录</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">userbind</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">hasMany</span>(<span class="string">&#x27;UserBind&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断用户是否存在（在前面课程的基础上扩充）</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isExist</span>(<span class="params"><span class="variable">$arr</span>=[]</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">is_array</span>(<span class="variable">$arr</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;phone&#x27;</span>,<span class="variable">$arr</span>)) &#123; <span class="comment">// 手机号码</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;phone&#x27;</span>,<span class="variable">$arr</span>[<span class="string">&#x27;phone&#x27;</span>])-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 用户id</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;id&#x27;</span>,<span class="variable">$arr</span>)) &#123; <span class="comment">// 用户名</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>,<span class="variable">$arr</span>[<span class="string">&#x27;id&#x27;</span>])-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;email&#x27;</span>,<span class="variable">$arr</span>)) &#123; <span class="comment">// 邮箱</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;email&#x27;</span>,<span class="variable">$arr</span>[<span class="string">&#x27;email&#x27;</span>])-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;username&#x27;</span>,<span class="variable">$arr</span>)) &#123; <span class="comment">// 用户名</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;username&#x27;</span>,<span class="variable">$arr</span>[<span class="string">&#x27;username&#x27;</span>])-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 第三方参数</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;provider&#x27;</span>,<span class="variable">$arr</span>)) &#123;</span><br><span class="line">        <span class="variable">$where</span> = [</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span>=&gt;<span class="variable">$arr</span>[<span class="string">&#x27;provider&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;openid&#x27;</span>=&gt;<span class="variable">$arr</span>[<span class="string">&#x27;openid&#x27;</span>]</span><br><span class="line">        ];</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">userbind</span>()-&gt;<span class="title function_ invoke__">where</span>(<span class="variable">$where</span>)-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户是否被禁用（在前面课程基础上扩展）</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkStatus</span>(<span class="params"><span class="variable">$arr</span>,<span class="variable">$isReget</span> = <span class="literal">false</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$status</span> = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$isReget</span>) &#123;</span><br><span class="line">        <span class="comment">// 账号密码登录 和 第三方登录</span></span><br><span class="line">        <span class="variable">$userid</span> = <span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;user_id&#x27;</span>,<span class="variable">$arr</span>)?<span class="variable">$arr</span>[<span class="string">&#x27;user_id&#x27;</span>]:<span class="variable">$arr</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">        <span class="comment">// 判断第三方登录是否绑定了手机号码</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$userid</span> &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="variable">$arr</span>;</span><br><span class="line">        <span class="comment">// 查询user表</span></span><br><span class="line">        <span class="variable">$user</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">find</span>(<span class="variable">$userid</span>)-&gt;<span class="title function_ invoke__">toArray</span>();</span><br><span class="line">        <span class="comment">// 拿到status</span></span><br><span class="line">        <span class="variable">$status</span> = <span class="variable">$user</span>[<span class="string">&#x27;status&#x27;</span>];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable">$status</span> = <span class="variable">$arr</span>[<span class="string">&#x27;status&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$status</span>==<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;该用户已被禁用&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">20001</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$arr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三方登录</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">otherlogin</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 获取所有参数</span></span><br><span class="line">    <span class="variable">$param</span> = <span class="title function_ invoke__">request</span>()-&gt;<span class="title function_ invoke__">param</span>();</span><br><span class="line">    <span class="comment">// 解密过程（待添加）</span></span><br><span class="line">    <span class="comment">// 验证用户是否存在</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">isExist</span>([<span class="string">&#x27;provider&#x27;</span>=&gt;<span class="variable">$param</span>[<span class="string">&#x27;provider&#x27;</span>],<span class="string">&#x27;openid&#x27;</span>=&gt;<span class="variable">$param</span>[<span class="string">&#x27;openid&#x27;</span>]]);</span><br><span class="line">    <span class="comment">// 用户不存在，创建用户</span></span><br><span class="line">    <span class="variable">$arr</span> = [];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable">$user</span>) &#123;</span><br><span class="line">        <span class="variable">$user</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">userbind</span>()-&gt;<span class="title function_ invoke__">create</span>([</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span>=&gt;<span class="variable">$param</span>[<span class="string">&#x27;provider&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;openid&#x27;</span>=&gt;<span class="variable">$param</span>[<span class="string">&#x27;openid&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;nickname&#x27;</span>=&gt;<span class="variable">$param</span>[<span class="string">&#x27;nickName&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;avatarurl&#x27;</span>=&gt;<span class="variable">$param</span>[<span class="string">&#x27;avatarUrl&#x27;</span>],</span><br><span class="line">        ]);</span><br><span class="line">        <span class="variable">$arr</span> = <span class="variable">$user</span>-&gt;<span class="title function_ invoke__">toArray</span>();</span><br><span class="line">        <span class="variable">$arr</span>[<span class="string">&#x27;expires_in&#x27;</span>] = <span class="variable">$param</span>[<span class="string">&#x27;expires_in&#x27;</span>]; </span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">CreateSaveToken</span>(<span class="variable">$arr</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 用户是否被禁用</span></span><br><span class="line">    <span class="variable">$arr</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">checkStatus</span>(<span class="variable">$user</span>-&gt;<span class="title function_ invoke__">toArray</span>());</span><br><span class="line">    <span class="comment">// 登录成功，返回token</span></span><br><span class="line">    <span class="variable">$arr</span>[<span class="string">&#x27;expires_in&#x27;</span>] = <span class="variable">$param</span>[<span class="string">&#x27;expires_in&#x27;</span>]; </span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">CreateSaveToken</span>(<span class="variable">$arr</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="10-auth中间件封装"><a href="#10-auth中间件封装" class="headerlink" title="10. auth中间件封装"></a>10. auth中间件封装</h2><p>权限验证层</p><ol><li>创建中间件</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检测token合法性（用户是否已登陆）</span></span><br><span class="line">php think make:middleware ApiUserAuth</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 检测第三方登录用户是否已经绑定手机（如果没有绑定手机，在User主表中没有记录，没法进行下面操作）</span></span><br><span class="line">php think make:middleware ApiUserBindPhone</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 检测用户是否被禁用</span></span><br><span class="line">php think make:middleware ApiUserStatus</span><br></pre></td></tr></table></figure><ol start="2"><li>注册中间件（config/middleware.php）</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="string">&#x27;ApiUserAuth&#x27;</span> =&gt; app\http\middleware\<span class="title class_">ApiUserAuth</span>::<span class="variable language_">class</span>,</span><br><span class="line">    <span class="string">&#x27;ApiUserStatus&#x27;</span> =&gt; app\http\middleware\<span class="title class_">ApiUserStatus</span>::<span class="variable language_">class</span>,</span><br><span class="line">    <span class="string">&#x27;ApiUserBindPhone&#x27;</span> =&gt; app\http\middleware\<span class="title class_">ApiUserBindPhone</span>::<span class="variable language_">class</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><ol start="3"><li>中间件定义</li></ol><p>（1） 检测token合法性（app\http\middleware\ApiUserAuth.php）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">app</span>\<span class="title class_">http</span>\<span class="title class_">middleware</span>;</span><br><span class="line"><span class="comment">// 引入异常类</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">app</span>\<span class="title">lib</span>\<span class="title">exception</span>\<span class="title">BaseException</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApiUserAuth</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$request</span>, \<span class="built_in">Closure</span> <span class="variable">$next</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 获取头部信息</span></span><br><span class="line">        <span class="variable">$param</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">header</span>();</span><br><span class="line">        <span class="comment">// 不含token</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;token&#x27;</span>,<span class="variable">$param</span>)) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;非法token，禁止操作&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">20003</span>]);</span><br><span class="line">        <span class="comment">// 当前用户token是否存在（是否登录）</span></span><br><span class="line">        <span class="variable">$token</span> = <span class="variable">$param</span>[<span class="string">&#x27;token&#x27;</span>];</span><br><span class="line">        <span class="variable">$user</span> = \<span class="title class_">Cache</span>::<span class="title function_ invoke__">get</span>(<span class="variable">$token</span>);</span><br><span class="line">        <span class="comment">// 验证失败（未登录或已过期）</span></span><br><span class="line">        <span class="keyword">if</span>(!<span class="variable">$user</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;非法token，请重新登录&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">20003</span>]);</span><br><span class="line">        <span class="comment">// 将token和userid这类常用参数放在request中</span></span><br><span class="line">        <span class="variable">$request</span>-&gt;userToken = <span class="variable">$token</span>;</span><br><span class="line">        <span class="variable">$request</span>-&gt;userId = <span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;type&#x27;</span>,<span class="variable">$user</span>) ? <span class="variable">$user</span>[<span class="string">&#x27;user_id&#x27;</span>] : <span class="variable">$user</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">        <span class="variable">$request</span>-&gt;userTokenUserInfo = <span class="variable">$user</span>; </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$next</span>(<span class="variable">$request</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>（2）检测第三方登录用户是否已经绑定手机（app\http\middleware\ApiUserBindPhone.php）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">app</span>\<span class="title class_">http</span>\<span class="title class_">middleware</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">app</span>\<span class="title">common</span>\<span class="title">model</span>\<span class="title">User</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApiUserBindPhone</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$request</span>, \<span class="built_in">Closure</span> <span class="variable">$next</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$param</span> = <span class="variable">$request</span>-&gt;userTokenUserInfo;</span><br><span class="line">        (<span class="keyword">new</span> <span class="title class_">User</span>()) -&gt; <span class="title function_ invoke__">OtherLoginIsBindPhone</span>(<span class="variable">$param</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$next</span>(<span class="variable">$request</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>model层：application\common\model\User.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 验证第三方登录是否绑定手机</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">OtherLoginIsBindPhone</span>(<span class="params"><span class="variable">$user</span></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 验证是否是第三方登录</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;type&#x27;</span>,<span class="variable">$user</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$user</span>[<span class="string">&#x27;user_id&#x27;</span>]&lt;<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;请先绑定手机！&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">20008</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$user</span>[<span class="string">&#x27;user_id&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 账号密码登录</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$user</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（3）检测用户是否被禁用（app\http\middleware\ApiUserStatus.php）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">app</span>\<span class="title class_">http</span>\<span class="title class_">middleware</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">app</span>\<span class="title">common</span>\<span class="title">model</span>\<span class="title">User</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApiUserStatus</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$request</span>, \<span class="built_in">Closure</span> <span class="variable">$next</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$param</span> = <span class="variable">$request</span>-&gt;userTokenUserInfo;</span><br><span class="line">        (<span class="keyword">new</span> <span class="title class_">User</span>()) -&gt; <span class="title function_ invoke__">checkStatus</span>(<span class="variable">$param</span>,<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$next</span>(<span class="variable">$request</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>model层：application\common\model\User.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户是否被禁用（在前面课程的基础上扩充）</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkStatus</span>(<span class="params"><span class="variable">$arr</span>,<span class="variable">$isReget</span> = <span class="literal">false</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$status</span> = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$isReget</span>) &#123;</span><br><span class="line">        <span class="comment">// 账号密码登录</span></span><br><span class="line">        <span class="variable">$userid</span> = <span class="title function_ invoke__">array_key_exists</span>(<span class="string">&#x27;user_id&#x27;</span>,<span class="variable">$arr</span>)?<span class="variable">$arr</span>[<span class="string">&#x27;user_id&#x27;</span>]:<span class="variable">$arr</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">        <span class="variable">$user</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">find</span>(<span class="variable">$userid</span>)-&gt;<span class="title function_ invoke__">toArray</span>();</span><br><span class="line">        <span class="variable">$status</span> = <span class="variable">$user</span>[<span class="string">&#x27;status&#x27;</span>];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable">$status</span> = <span class="variable">$arr</span>[<span class="string">&#x27;status&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$status</span>==<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;该用户已被禁用&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">20001</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$arr</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>中间件使用（在路由中使用 route/route.php）</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需要验证token</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>(<span class="string">&#x27;api/:version/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;)-&gt;<span class="title function_ invoke__">middleware</span>([<span class="string">&#x27;ApiUserAuth&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 需要验证token，是否绑定手机，用户是否禁用（必须按顺序）</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>(<span class="string">&#x27;api/:version/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;)-&gt;<span class="title function_ invoke__">middleware</span>([<span class="string">&#x27;ApiUserAuth&#x27;</span>,<span class="string">&#x27;ApiUserBindPhone&#x27;</span>,<span class="string">&#x27;ApiUserStatus&#x27;</span>]);</span><br></pre></td></tr></table></figure><h2 id="11-退出登录api"><a href="#11-退出登录api" class="headerlink" title="11. 退出登录api"></a>11. 退出登录api</h2><p>controller层：application\api\controller\v1\User.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 退出登录</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">logout</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 退出登录</span></span><br><span class="line">    (<span class="keyword">new</span> <span class="title class_">UserModel</span>())-&gt;<span class="title function_ invoke__">logout</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">showResCodeWithOutData</span>(<span class="string">&#x27;退出成功&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>route层：route\route.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需要验证token</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>(<span class="string">&#x27;api/:version/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 退出登录</span></span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">post</span>(<span class="string">&#x27;user/logout&#x27;</span>,<span class="string">&#x27;api/:version.User/logout&#x27;</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;)-&gt;<span class="title function_ invoke__">middleware</span>([<span class="string">&#x27;ApiUserAuth&#x27;</span>]);</span><br></pre></td></tr></table></figure><p>model层：application\common\model\User.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 退出登录</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">logout</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Cache</span>::<span class="title function_ invoke__">pull</span>(<span class="title function_ invoke__">request</span>()-&gt;userToken)) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>([<span class="string">&#x27;code&#x27;</span>=&gt;<span class="number">200</span>,<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;你已经退出了&#x27;</span>,<span class="string">&#x27;errorCode&#x27;</span>=&gt;<span class="number">30006</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="三-【api开发】文章分类模块开发"><a href="#三-【api开发】文章分类模块开发" class="headerlink" title="三.【api开发】文章分类模块开发"></a>三.【api开发】文章分类模块开发</h1><h2 id="1-数据表设计-1"><a href="#1-数据表设计-1" class="headerlink" title="1. 数据表设计"></a>1. 数据表设计</h2><blockquote><p>文章分类表 post_class</p><p>id<br>classname      分类名称<br>create_time    创建时间<br>status          分类状态  0禁用1启用</p></blockquote><h2 id="2-文章分类api开发"><a href="#2-文章分类api开发" class="headerlink" title="2.文章分类api开发"></a>2.文章分类api开发</h2><p>创建文章分类相关文件</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建文章分类控制器</span></span><br><span class="line">php think make:controller api/v1/PostClass</span><br><span class="line"><span class="comment">// 创建文章分类模型</span></span><br><span class="line">php think make:model PostClass</span><br></pre></td></tr></table></figure><p>controller层：application\api\controller\v1\PostClass.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">app</span>\<span class="title">common</span>\<span class="title">model</span>\<span class="title">PostClass</span> <span class="keyword">as</span> <span class="title">PostClassModel</span>;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 获取文章分类列表</span></span><br><span class="line">    <span class="variable">$list</span>=(<span class="keyword">new</span> PostClassModel)-&gt;<span class="title function_ invoke__">getPostClassList</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">showResCode</span>(<span class="string">&#x27;获取成功&#x27;</span>,[<span class="string">&#x27;list&#x27;</span>=&gt;<span class="variable">$list</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>route层：route\route.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不需要验证token</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>(<span class="string">&#x27;api/:version/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 获取文章分类</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;postclass&#x27;</span>, <span class="string">&#x27;api/:version.PostClass/index&#x27;</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>model层：application\common\model\PostClass.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取所有文章分类</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPostClassList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">field</span>(<span class="string">&#x27;id,classname&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;status&#x27;</span>,<span class="number">1</span>)-&gt;<span class="title function_ invoke__">select</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="四-【api开发】话题分类模块"><a href="#四-【api开发】话题分类模块" class="headerlink" title="四.【api开发】话题分类模块"></a>四.【api开发】话题分类模块</h1><h2 id="1-数据表设计（同文章分类）"><a href="#1-数据表设计（同文章分类）" class="headerlink" title="1. 数据表设计（同文章分类）"></a>1. 数据表设计（同文章分类）</h2><h2 id="2-话题分类api开发"><a href="#2-话题分类api开发" class="headerlink" title="2. 话题分类api开发"></a>2. 话题分类api开发</h2><p>创建话题分类相关文件</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建话题分类控制器</span></span><br><span class="line">php think make:controller api/v1/TopicClass</span><br><span class="line"><span class="comment">// 创建话题分类模型</span></span><br><span class="line">php think make:model TopicClass</span><br></pre></td></tr></table></figure><p>controller层：application\api\controller\v1\TopicClass.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">app</span>\<span class="title">common</span>\<span class="title">model</span>\<span class="title">TopicClass</span> <span class="keyword">as</span> <span class="title">TopicClassModel</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 获取话题分类列表</span></span><br><span class="line">    <span class="variable">$list</span>=(<span class="keyword">new</span> TopicClassModel)-&gt;<span class="title function_ invoke__">getTopicClassList</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">showResCode</span>(<span class="string">&#x27;获取成功&#x27;</span>,[<span class="string">&#x27;list&#x27;</span>=&gt;<span class="variable">$list</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>route层：route\route.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不需要验证token</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>(<span class="string">&#x27;api/:version/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 获取话题分类</span></span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;topicclass&#x27;</span>,<span class="string">&#x27;api/v1.TopicClass/index&#x27;</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>model层：application\common\model\TopicClass.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取所有话题分类</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTopicClassList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">field</span>(<span class="string">&#x27;id,classname&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;status&#x27;</span>,<span class="number">1</span>)-&gt;<span class="title function_ invoke__">select</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2020/06/05/tySEy4.png" alt="tySEy4.png"></p>]]></content>
      
      
      <categories>
          
          <category> 系统API </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客整体搭建流程</title>
      <link href="/2019/10/17/blog/"/>
      <url>/2019/10/17/blog/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="Hexo生成"><a href="#Hexo生成" class="headerlink" title="Hexo生成"></a>Hexo生成</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br><span class="line">npm install</span><br><span class="line">npm install --save hexo-deployer-git</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><blockquote><p>关于博客内部主题配置参考相对应主题文档。</p><p>butterfly:<a href="https://jerryc.me/posts/21cfbf15/">https://jerryc.me/posts/21cfbf15/</a> </p></blockquote><p><strong>我的域名和服务器都是阿里的，这里推荐还是搞腾讯的吧，阿里虽然便宜坑蛮多的。</strong></p><p><a href="https://www.aliyun.com/">阿里云</a></p><p><strong>正常买域名和服务器备案即可，时间大概得一个月吧。</strong></p><h2 id="服务器部署"><a href="#服务器部署" class="headerlink" title="服务器部署"></a>服务器部署</h2><blockquote><p>之前是在git仓库跑起来的，后来觉得速度太慢就从阿里买了服务器和域名。</p><p>Linux这块真是卡了我好久 orz  这里参考了很多优秀博客文章。</p></blockquote><h3 id="生成git公钥"><a href="#生成git公钥" class="headerlink" title="生成git公钥"></a><strong>生成git公钥</strong></h3><p>在本地WIN10系统里弄</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line">直接回车三次就行。</span><br></pre></td></tr></table></figure><p> <strong>生成的文件默认在~/.ssh目录中，看到有id_rsa，id_rsa.pub这些文件即可，Win10中就是 我的电脑/C盘/用户/你自己的用户名/.shh/ 就可以看到了 ！</strong></p><h3 id="阿里云Centos搭建环境"><a href="#阿里云Centos搭建环境" class="headerlink" title="阿里云Centos搭建环境"></a><strong>阿里云Centos搭建环境</strong></h3><p><strong>注意：这是在你远程链接阿里云服务器后</strong>！！！</p><p>下个Xhell5，哈哈因为5免费。</p><p><strong>安装git</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git</span><br></pre></td></tr></table></figure><p><strong>创建git账户（这部分基本Linux学习范围了，仅供参考）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adduser git</span><br></pre></td></tr></table></figure><p><strong>添加用户权限</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod 740 /etc/sudoers</span><br><span class="line">vim /etc/sudoers   //vim 是编辑的意思</span><br><span class="line">ESC键 :set nu 然后 i 是编辑的意思</span><br><span class="line">ESC键 :wq 是保存退出</span><br></pre></td></tr></table></figure><p><strong>添加以下内容</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ALL = (ALL)  ALL</span><br></pre></td></tr></table></figure><p><strong>保存退出并修改权限</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 400 /etc/sudoers</span><br></pre></td></tr></table></figure><p><strong>设置git账户密码</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd git</span><br></pre></td></tr></table></figure><p><strong>切换至git用户，创建 ~/.ssh 文件夹和 ~/.ssh/authorized_keys 文件，并赋予相应的权限</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">su git</span><br><span class="line">mkdir ~/.ssh</span><br><span class="line">vim ~/.ssh/authorized_keys</span><br><span class="line"># 然后将win10中生成的id_rsa.pub文件中的公钥复制到authorized_keys</span><br><span class="line">chmod 600 /home/git/.ssh/authorized_keys</span><br><span class="line">chmod 700 /home/git/.ssh</span><br></pre></td></tr></table></figure><p><strong>在本地Git终端中测试是否能免密登录git，其中SERVER为填写自己的云主机IP，执行输入yes后不用密码就说明好了</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 注意此步骤跟xshell无关 是本机电脑用 git bash </span><br><span class="line">ssh -v git@SERVER</span><br><span class="line">server是你的服务器公共地址</span><br></pre></td></tr></table></figure><p><strong>创建目录 回到xshell</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#repo作为为Git仓库目录</span><br><span class="line">mkdir /var/repo</span><br><span class="line">chown -R git:git /var/repo</span><br><span class="line">chmod -R 755 /var/repo</span><br><span class="line">#hexo作为网站根目录</span><br><span class="line">mkdir /var/www/hexo</span><br><span class="line">chown -R git:git /var/www/hexo</span><br><span class="line">chmod -R 755 /var/www/hexo</span><br></pre></td></tr></table></figure><p><strong>然后创建一个裸的 Git 仓库</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd var/repo</span><br><span class="line">git init --bare hexoBlog.git</span><br></pre></td></tr></table></figure><p> 创建一个新的 Git 钩子，用于自动部署<br>在 /var/repo/hexoBlog.git 下，有一个自动生成的 hooks 文件夹。我们需要在里边新建一个新的钩子文件 post-receive。 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /var/repo/hexoBlog.git/hooks/post-receive</span><br></pre></td></tr></table></figure><p><strong>按 i 键进入文件的编辑模式，在该文件中添加两行代码（将下边的代码粘贴进去)，指定 Git 的工作树（源代码）和 Git 目录（配置文件等</strong>）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">git --work-tree=/var/www/hexo --git-dir=/var/repo/hexoBlog.git checkout -f</span><br></pre></td></tr></table></figure><p><strong>修改文件权限，使得其可执行</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown -R git:git /var/repo/hexoBlog.git/hooks/post-receive</span><br><span class="line">chmod +x /var/repo/hexoBlog.git/hooks/post-receive</span><br></pre></td></tr></table></figure><p>到这里，我们的 Git 仓库算是完全搭建好了。下面进行 Nginx 的配置。</p><h2 id="阿里云Centos配置Nginx"><a href="#阿里云Centos配置Nginx" class="headerlink" title="阿里云Centos配置Nginx"></a>阿里云Centos配置Nginx</h2><p><strong>注意： Linux面板6.0安装命令(暂时仅兼容Centos7.x，其它系统版本请安装5.9稳定版) ，这块就看你在买服务器时候选的系统版本。</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; bash install.sh</span><br></pre></td></tr></table></figure><p>**Linux面板6.0升级专业版 **</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://download.bt.cn/install/update6.sh|bash</span><br></pre></td></tr></table></figure><p> 安装完成后会显示面板后台地址·账号·密码。</p><p>打开面板后台地址登陆面板，选择Nginx的部署方案，静静等待部署。<br>部署完成，点击网站-添加站点-输入域名(没有域名的输入自己的IP地址)-底部的PHP版本选择”纯静态”(其他不改<br>或者根据自己的习惯来改)-提交。<br>网站创建完成后点击设置-配置文件 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    # server_name 填写自己的域名</span><br><span class="line">    server_name ali6.cn blog.ali6.cn;</span><br><span class="line">    index index.php index.html index.htm default.php default.htm default.html;</span><br><span class="line">    # 这里root填写自己的网站根目录，修改为/var/www/hexo</span><br><span class="line">    root /var/www/hexo;</span><br></pre></td></tr></table></figure><p>保存</p><p>点击设置-网站目录，修改为/var/www/hexo ，保存</p><p>重启宝塔面板服务，面板上有重启键，点下就行，都是图形界面简单。</p><h2 id="本地Win10安装部署Hexo"><a href="#本地Win10安装部署Hexo" class="headerlink" title="本地Win10安装部署Hexo"></a>本地Win10安装部署Hexo</h2><p><strong>配置git本地</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#定义邮箱(更换为你的邮箱地址就行)</span><br><span class="line">git config --global user.email &quot;you@example.com&quot;</span><br><span class="line">#定义名称(更换自定义一个名称就行)</span><br><span class="line">git config --global user.name &quot;Your Name&quot;</span><br></pre></td></tr></table></figure><p><strong>更改你博客里面的配置文件_config.yml</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  #server改为你的服务IP地址或解析后的域名</span><br><span class="line">  #例如我改为repo: git@mcweblog.com:/var/repo/blog.git</span><br><span class="line">  repo: git@server:/var/repo/blog.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><h2 id="博客速度优化"><a href="#博客速度优化" class="headerlink" title="博客速度优化"></a>博客速度优化</h2><p><strong>用的是3.9的gulp，4.0的不会….</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i -g gulp@3.9.1   //或者</span><br><span class="line">npm install --save-dev gulp@3.9.1</span><br></pre></td></tr></table></figure><p><strong>安装5个模块</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify gulp-imagemin --save</span><br></pre></td></tr></table></figure><h5 id="添加gulpfile-js（在博客根目录下）"><a href="#添加gulpfile-js（在博客根目录下）" class="headerlink" title="添加gulpfile.js（在博客根目录下）"></a>添加gulpfile.js（在博客根目录下）</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">&#x27;gulp-minify-css&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">&#x27;gulp-uglify&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlmin&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlclean&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> imagemin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-imagemin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩html</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-html&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/**/*.html&#x27;</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">htmlclean</span>())</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">htmlmin</span>(&#123;</span><br><span class="line">            <span class="attr">removeComments</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">minifyJS</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">minifyCSS</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">minifyURLs</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;))</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩css</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-css&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/**/*.css&#x27;</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">minifycss</span>(&#123;</span><br><span class="line">            <span class="attr">compatibility</span>: <span class="string">&#x27;ie8&#x27;</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩js</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-js&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/js/**/*.js&#x27;</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">uglify</span>())</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩图片</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-images&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/images/**/*.*&#x27;</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">imagemin</span>(</span><br><span class="line">        [imagemin.<span class="title function_">gifsicle</span>(&#123;<span class="string">&#x27;optimizationLevel&#x27;</span>: <span class="number">3</span>&#125;), </span><br><span class="line">        imagemin.<span class="title function_">jpegtran</span>(&#123;<span class="string">&#x27;progressive&#x27;</span>: <span class="literal">true</span>&#125;), </span><br><span class="line">        imagemin.<span class="title function_">optipng</span>(&#123;<span class="string">&#x27;optimizationLevel&#x27;</span>: <span class="number">7</span>&#125;), </span><br><span class="line">        imagemin.<span class="title function_">svgo</span>()],</span><br><span class="line">        &#123;<span class="string">&#x27;verbose&#x27;</span>: <span class="literal">true</span>&#125;))</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public/images&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 默认任务</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, [</span><br><span class="line">    <span class="string">&#x27;minify-html&#x27;</span>,<span class="string">&#x27;minify-css&#x27;</span>,<span class="string">&#x27;minify-js&#x27;</span>,<span class="string">&#x27;minify-images&#x27;</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure><blockquote><p>hexo g 或者 hexo g &amp;&amp; gulp </p></blockquote><p><strong>注意：nodejs需要10.0以下版本</strong></p><p>坑还是挺多的，有空在继续写。</p>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站收录</title>
      <link href="/2019/07/07/%E5%B8%B8%E7%94%A8%E7%BD%91%E7%AB%99/"/>
      <url>/2019/07/07/%E5%B8%B8%E7%94%A8%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="常用工具网站"><a href="#常用工具网站" class="headerlink" title="常用工具网站"></a>常用工具网站</h2><ul><li><a href="https://imgchr.com/">路过图床</a></li><li><a href="https://smallpdf.com/cn">在线转pdf文档</a></li><li><a href="https://www.bootcdn.cn/">BootCdn</a></li><li><a href="https://www.mspeed19.com/">喵MSS翻墙</a></li><li><a href="https://www.toolfk.com/">toolfk在线转换工具以及相关文档</a></li><li><a href="http://mackxin.com/nav.html#xin13">馨客栈</a></li><li><a href="https://www.cnblogs.com/pengchenggang/p/10349622.html">vscode打开新文件不替换旧文件</a></li><li><a href="http://tools.jb51.net/#home">脚本之家和相关技术文档</a></li><li><a href="https://www.itjc8.com/">IT教程吧</a></li><li><a href="https://w3techs.com/technologies/overview/javascript_library/all">相关框架库技术统计</a></li><li><a href="https://www.emojicopy.com/#emojicodes">emoji表情</a></li><li><a href="http://haojen.github.io/2016/09/03/Emoji-Demo/">emoji表情包使用方法</a></li><li><a href="https://blog.csdn.net/qq_22551385/article/details/82287502">vscode预览模式问题</a></li><li><a href="https://blog.51cto.com/zlong37/1975418">集成终端改成cmd</a></li><li><a href="https://codesandbox.io/">开发沙盒工具</a></li></ul><h2 id="前端学习文档"><a href="#前端学习文档" class="headerlink" title="前端学习文档"></a>前端学习文档</h2><ul><li><a href="https://developer.mozilla.org/zh-CN/">MDN</a></li><li><a href="https://wangdoc.com/">网道</a></li><li><a href="https://humanwhocodes.com/">国外技术博客</a></li><li><a href="http://www.ecma-international.org/ecma-262/5.1/index.html#sec-11.2.5">ES5学习规范</a></li><li><a href="http://www.html5plus.org/doc/zh_cn/webview.html">H5+官网</a></li><li><a href="https://github.com/JacksonTian/fks">前端路线</a></li><li><a href="http://nav.web-hub.cn/">前端网站大全</a></li><li><a href="https://www.zhangxinxu.com/">张鑫旭博客</a></li><li><a href="https://www.html.cn/">HTML学习网</a></li><li><a href="http://www.pianshen.com/">程序员大本营</a></li><li><a href="https://www.jqhtml.com/category/article/framework">hello girl</a></li><li><a href="http://www.html5plus.org/doc/zh_cn/camera.html">H5+</a></li><li><a href="https://www.jianshu.com/p/288963680642">postcss学习</a></li><li><a href="https://www.omyleon.com/">web学习博客</a></li><li><a href="https://www.jianshu.com/u/cb593334c8bc">it老马</a></li><li><a href="http://komavideo.com/">小马视频</a></li><li><a href="https://stackoverflow.com/">国外问题技术论坛</a></li><li><a href="https://www.jianshu.com/p/97ba64888894">Postman教程大全 - 简书</a></li><li><a href="https://github.com/fouber/blog/issues/10">前端工程——基础篇 · Issue #10 · fouber/blog · GitHub</a></li></ul><h2 id="Nodejs"><a href="#Nodejs" class="headerlink" title="Nodejs"></a>Nodejs</h2><ul><li><a href="https://www.jianshu.com/p/c06fa1e1282a">Nodejs配置环境变量</a></li><li><a href="https://www.cnblogs.com/benpaodexiaopangzi/p/5856642.html">热部署</a></li></ul><h2 id="JavaScript技术文档"><a href="#JavaScript技术文档" class="headerlink" title="JavaScript技术文档"></a>JavaScript技术文档</h2><ul><li><a href="https://www.cnblogs.com/diligenceday/p/4175721.html">DOM几级事件文档</a></li><li><a href="https://www.jianshu.com/p/8c41a302bb17">DOM事件级别</a></li><li><a href="https://blog.csdn.net/qq_35087256/article/details/82669618">JS中的super和this</a></li><li><a href="https://juejin.im/post/5c52da9ee51d45221f242804#heading-5">前端路由跳转原理</a></li><li><a href="https://blog.csdn.net/u010176097/article/details/80348447">call、apply、bind区别</a></li><li><a href="https://www.cnblogs.com/blogs-8888/p/6518683.html">js中操作数组一些方法</a></li><li><a href="https://segmentfault.com/a/1190000016068235">es6学习笔记</a></li><li><a href="https://www.jianshu.com/p/e375ba1cfc47">js reduce使用</a></li><li><a href="https://tomotoes.com/blog/simplified-chinese-and-traditional-chinese-switching/">繁简切换字体</a></li><li><a href="https://www.cnblogs.com/mengfangui/p/9150458.html">es6动态计算属性名</a></li></ul><h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><ul><li><a href="https://www.jianshu.com/p/81078efbef47">Ajax请求PHP接口</a></li><li><a href="https://www.cnblogs.com/lauhp/p/8979393.html">HTTP简介</a></li><li><a href="https://www.cnblogs.com/Brose/p/cors_ajax_withCredentials_firefox.html">ajax withCredentials在firefox下问题的解释</a></li><li><a href="https://www.cnblogs.com/twoeggg/p/8046183.html">跨域三种解决方式</a></li><li><a href="https://www.cnblogs.com/52fhy/p/5436673.html">http相关</a></li><li><a href="https://blog.csdn.net/fxbin123/article/details/80428216">postman相关</a></li></ul><h2 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h2><ul><li><a href="https://www.jqhtml.com/6750.html">viewer图片插件</a></li><li><a href="https://api.jquery.com/category/attributes/">jQuery文档</a></li><li><a href="https://www.cnblogs.com/cqlb/p/9118186.html">jQuery获取当前屏幕各种高度</a></li></ul><h2 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h2><ul><li><a href="https://ustbhuangyi.github.io/vue-analysis/">vue.js技术揭秘</a></li><li><a href="https://cli.vuejs.org/zh/">VUE-CLI构建工具</a></li><li><a href="https://segmentfault.com/a/1190000011007043">vue-cli本地环境API代理设置和解决跨域</a></li><li><a href="https://blog.csdn.net/qq_33295794/article/details/79024915">vue全家桶介绍</a></li><li><a href="https://blog.csdn.net/weixin_33908217/article/details/86025085">vue获取自定义属性的值</a></li><li><a href="https://www.zhihu.com/question/51907207">Vue2.0 中，“渐进式框架”和“自底向上增量开发的设计”这两个概念是什么？</a></li><li><a href="https://www.cnblogs.com/lemoncool/p/9645587.html">解决Vuex持久化插件-在F5刷新页面后数据不见的问题</a></li><li><a href="https://blog.csdn.net/sayoko06/article/details/85321802">hash和history区别</a></li><li><a href="https://www.cnblogs.com/lulianlian/p/7682790.html"> vue 路由传参 params 与 query两种方式的区别</a></li><li><a href="https://www.cnblogs.com/snowhite/p/7872503.html">vue中使用axios跨域</a></li><li><a href="https://www.jianshu.com/p/6262772bdc9c">vue首次加载缓慢解决办法</a></li><li><a href="https://www.cnblogs.com/ajuan/p/10070908.html">VUE浏览器关闭时清空localstrorge</a></li><li><a href="https://blog.csdn.net/dkr380205984/article/details/82185740">state,mapState,…mapState对象展开符详解</a></li><li><a href="https://www.cnblogs.com/hity-tt/p/7169307.html">基于vue的SPA单页面开发—性能篇</a></li><li><a href="https://blog.csdn.net/sone_yoonyul/article/details/78421717">使用vue默认选中单选框</a></li><li><a href="https://www.cnblogs.com/LoveAndPeace/p/7273648.html">vue组件中传值</a></li><li><a href="https://www.cnblogs.com/xiaotanke/p/7427636.html">vue中兄弟组件传值</a></li><li><a href="https://blog.csdn.net/wang_meiwei/article/details/75948844">vue2.0子同级之间组件交互</a></li><li><a href="https://blog.csdn.net/wxl1555/article/details/84646832">vue – 非父子组件传值，事件总线（eventbus）的使用方式</a></li><li><a href="https://blog.csdn.net/qq_36575992/article/details/80338538">axios使用学习</a></li><li><a href="https://segmentfault.com/a/1190000015684864">vue和微信小程序区别</a></li><li><a href="https://blog.csdn.net/zmkyf1993/article/details/80320802">vue中子组件methods获取props中的值</a></li><li><a href="https://www.cnblogs.com/beka/p/8583924.html">v-router路由传参</a></li><li><a href="https://blog.csdn.net/meng_suiga/article/details/77840890">vue实现双向绑定原理</a></li><li><a href="https://blog.csdn.net/huangxiaoguo1/article/details/80163585">vue实现Mint-ui实现下拉刷新</a></li><li><a href="https://www.cnblogs.com/liaoanran/p/8042893.html">用cli搭个项目</a></li><li><a href="https://www.jianshu.com/p/22f214bb4294?tdsourcetag=s_pcqq_aiomsg">vue在自定义组件中使用v-model</a></li><li><a href="https://www.cnblogs.com/shiningly/p/9471067.html">vue中watch详细用法</a></li><li><a href="https://www.jianshu.com/p/cc4253745b0f">vue.js做国际化</a></li><li><a href="https://www.jianshu.com/p/0d78ff9fe6ed">vue3.0使用</a></li><li><a href="https://www.jianshu.com/p/6c6cc02a9001">关于 The template root requires exactly one element 报错的解决方案</a></li></ul><h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><ul><li><a href="http://react.shengxinjing.cn/">蜗牛老师</a></li></ul><h2 id="angular"><a href="#angular" class="headerlink" title="angular"></a>angular</h2><ul><li><a href="https://angular.io/cli">官网</a></li></ul><h2 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h2><ul><li><a href="https://blog.csdn.net/cris_zz/article/details/82911393#_5">史上最完美的 markdown 配置全流程</a></li><li><a href="https://blog.csdn.net/cris_zz/article/details/82911393#_5">Markdown基本语法</a></li><li><a href="https://blog.csdn.net/cris_zz/article/details/82919401">typora用法</a></li><li><a href="https://blog.csdn.net/testcs_dn/article/details/45719357/#comments">Markdown编辑器语法</a></li><li><a href="https://www.jianshu.com/p/b421cc723da5">画流程图</a></li><li><a href="https://blog.csdn.net/lis_12/article/details/80693975">画图</a></li></ul><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/">官网</a></li></ul><h2 id="微信小程序"><a href="#微信小程序" class="headerlink" title="微信小程序"></a>微信小程序</h2><ul><li><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html">官网</a></li><li><a href="https://blog.csdn.net/u011973968/article/details/80367921">微信小程序开发问题汇总</a></li><li><a href="https://segmentfault.com/a/1190000017288987">记录使用微信小程序的开发过程中遇到的各种难点及教程（不定时更新）</a></li><li><a href="https://segmentfault.com/a/1190000017288987">webview详解</a></li><li><a href="https://www.jianshu.com/p/d3edf5fa51cb?utm_campaign=maleskine&utm_content=note&utm_medium=seo_notes&utm_source=recommendation">webview使用</a></li><li><a href="https://blog.csdn.net/kingrome2017/article/details/80499184">微信小程序开发者文档 API 面试问答宝典</a></li><li><a href="https://blog.csdn.net/kingrome2017/article/details/80499184">微信小程序面试相关</a></li><li><a href="https://blog.csdn.net/sophie_u/article/details/71745125">微信小程序Tab选项卡：左右相互切换</a></li><li><a href="https://www.jianshu.com/p/04bf1103e40a">小程序自定义tabbar</a></li></ul><h2 id="uni-app"><a href="#uni-app" class="headerlink" title="uni-app"></a>uni-app</h2><p><a href="https://uniapp.dcloud.io/api/router?id=animation">官网</a></p><h2 id="canvas"><a href="#canvas" class="headerlink" title="canvas"></a>canvas</h2><ul><li><a href="https://www.cnblogs.com/qingqinglanlan/p/8334481.html">echarts配置相关</a></li></ul><h2 id="面试相关"><a href="#面试相关" class="headerlink" title="面试相关"></a>面试相关</h2><ul><li><a href="https://blog.csdn.net/valada/article/details/89472483?utm_source=feed1904231">前端面试</a></li><li><a href="https://www.cnblogs.com/ahao68/p/5431250.html">对css兼容性问题认识和解决</a></li><li><a href="https://www.cnblogs.com/haoyijing/p/5789348.html">前端面试题整理</a></li><li><a href="https://www.cnblogs.com/haoyijing/p/5815394.html#css1">css常见布局问题整理</a></li></ul><h2 id="适配"><a href="#适配" class="headerlink" title="适配"></a>适配</h2><ul><li><a href="https://blog.csdn.net/valada/article/details/89472483?utm_source=feed1904231">移动端H5适配</a></li></ul><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><ul><li><a href="https://www.cnblogs.com/5201351/p/4208277.html">Linux清屏几种方式</a></li><li><a href="https://mirrors.ustc.edu.cn/">Another infinity系统下载站</a></li><li><a href="https://jingyan.baidu.com/article/cbf0e50091dd362eaa2893e3.html">vm报错</a></li><li><a href="https://zhidao.baidu.com/question/1578182316614871500.html">linux怎么通过shell查找到某一个文件的绝对路径</a></li></ul><h2 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h2><ul><li><a href="https://blog.csdn.net/weixin_42420703/article/details/81384901">js实现Base64编码以及解码</a></li><li><a href="https://blog.csdn.net/weixin_42420703/article/details/88422441">js中的btoa和atob函数</a></li></ul><h2 id="手机底层"><a href="#手机底层" class="headerlink" title="手机底层"></a>手机底层</h2><ul><li><a href="https://blog.csdn.net/qq_36538012/article/details/79805673">H5调用底层知识</a></li><li><a href="https://blog.csdn.net/super_DuoLa/article/details/90207965">网页中实现安卓手机在线预览PDF文件</a></li></ul><h2 id="博客搭建"><a href="#博客搭建" class="headerlink" title="博客搭建"></a>博客搭建</h2><ul><li><a href="http://106.14.196.85:8888/cbe837e2/">宝塔面板</a></li><li><a href="https://blog.csdn.net/qq_38378384/article/details/79876344">用GitHub搭建一个自己网站</a></li><li><a href="https://juejin.im/entry/59ba97216fb9a00a6b6e50bf">hexo主题开发详谈</a></li><li><a href="https://github.com/hakimel/reveal.js/">把markdown变成PPT</a></li><li><a href="https://valine.js.org/#/configuration">valine评论</a></li><li><a href="http://106.14.196.85:8888/">宝塔地址</a></li><li><a href="https://segmentfault.com/a/1190000015131514?utm_source=tag-newest">用vue搭建博客</a></li><li><a href="https://www.jianshu.com/p/e1ccd49b4e5d">部署阿里云</a></li><li><a href="https://qiming.info/%E9%98%BF%E9%87%8C%E4%BA%91CentOS%E4%B8%8BHexo+Nginx%E5%BB%BA%E7%AB%99%E8%BF%87%E7%A8%8B/">阿里云CentOS下Hexo+Nginx建站过程</a></li><li><a href="https://www.jianshu.com/p/0f9dfa9c141b">阿里云Centos7+Nginx部署Hexo静态博客</a></li><li><a href="https://juejin.im/post/5c7f66bff265da2db4144ba2">在 CentOS 系统服务器上利用 Hexo 和 Nginx 搭建个人博客</a></li><li><a href="https://www.cnblogs.com/fly_dragon/p/8718614.html"><a href="https://www.cnblogs.com/fly_dragon/p/8718614.html">CentOS搭建Git服务器及权限管理</a></a></li><li><a href="https://www.jianshu.com/p/70bf58c48010">HEXO 部署到云服务器详细指南</a></li><li><a href="https://www.jianshu.com/p/93b63852f0b3">Hexo博客之速度优化</a></li><li><a href="https://jerryc.me/">butterfly主题博客详细设置</a></li><li><a href="http://106.14.196.85:8888/">宝塔面板后台</a></li></ul><h2 id="Pets3"><a href="#Pets3" class="headerlink" title="Pets3"></a>Pets3</h2><ul><li><a href="http://tiku.ek100.cn/Learn/Index/433?Token=$Token$">未来教育刷题库</a></li></ul><h2 id="nas"><a href="#nas" class="headerlink" title="nas"></a>nas</h2><ul><li><a href="https://jingyan.baidu.com/article/ce43664932610f3773afd32f.html">怎么用群晖webdav实现外网映射网络驱动器</a></li><li><a href="http://littleroach110.net/2018/05/30/Personal-NAS-Server.html">基于Gen10和黑群晖的个人NAS服务器构建</a></li></ul><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul><li><a href="http://miaosu.ys168.com/">miaoss翻墙下载地址</a></li><li><a href="https://www.processon.com/">在线作流程图网站</a></li><li><a href="https://www.typingclub.com/">打字俱乐部（练习打字速度）</a></li><li><a href="https://www.cnblogs.com/beli/p/6297741.html">十大排序算法</a></li><li><a href="https://segmentfault.com/q/1010000011384017">网站多语言实现</a></li><li><a href="https://www.cnblogs.com/ywffoo/p/5984590.html">F12防止扒代码</a></li><li><a href="https://segmentfault.com/a/1190000008168184">Iview作者自述</a></li><li><a href="https://www.xiaokesoso.com/s/search?q=es6&currentPage=1">小可搜搜技术文档相关</a></li><li><a href="https://www.jianshu.com/p/d0472c608d2f">开发环境和生产环境区别</a></li><li><a href="http://code.tarena.com.cn/WEBCode/wfd1810/">笔记下载</a></li><li><a href="http://jxjygl.bjut.edu.cn/entity/student/main_frame.jsp">工大网址</a></li><li><a href="https://doc.apipost.cn/4a77c87f97fb686b">APIpost使用文档</a></li><li><a href="https://blog.csdn.net/qq_33745501/article/details/80271129">npm安装时–save 和 –dev区别</a></li><li><a href="https://blog.csdn.net/xiaomobeila/article/details/54945844">Hbuilder使用文档</a></li><li><a href="http://niuini.com/">NUUINI3D模型网</a></li><li><a href="http://bm.ruankao.org.cn/sign/welcome">计算机软考</a></li><li><a href="https://github.com/bytebook/blog">总结的项目库</a></li><li><a href="https://segmentfault.com/a/1190000015646531">解决npm ERR! Unexpected end of JSON input while parsing near的方法汇总</a></li><li><a href="https://www.jianshu.com/p/caa1801213ee">gulp4降低版本</a></li><li><a href="https://squoosh.app/">图片瘦身</a></li><li><a href="https://www.snipaste.com/">截屏工具</a></li><li><a href="http://www.net.cn/static/customercare/yourip.asp">万网获取本地公网ip地址</a></li><li><a href="https://www.bootcss.com/p/git-guide/">git操作简易指南</a></li><li><a href="https://blog.csdn.net/xvshu/article/details/80571897">二维码登录概要设计</a></li><li><a href="https://www.cnblogs.com/meishandehaizi/p/5863241.html">使用sentry集中管理</a></li><li><a href="https://yeasy.gitbooks.io/docker_practice/">docker学习</a></li><li><a href="https://blog.csdn.net/weixin_42703239/article/details/81638325">超链打开QQ对话框</a></li><li><a href="https://www.html.cn/doc/webpack2/">webpack学习文档</a></li><li><a href="https://blog.csdn.net/sma2mmm/article/details/83827813">webpack学习</a></li><li><a href="https://cloud.tencent.com/document/product/382/9557">腾讯云短信学习</a></li><li><a href="https://www.w3cplus.com/mobile/vw-layout-in-vue.html">移动端适配</a></li><li><a href="https://github.com/whxaxes/node-test">实例资料</a></li><li><a href="https://www.myperfectresume.com/">简历制作</a></li><li><a href="https://blog.csdn.net/qq_38698753/article/details/93190356">vscode使用技巧</a></li><li><a href="http://miaosu.ys168.com/">秒速翻墙</a></li></ul><h2 id="英语"><a href="#英语" class="headerlink" title="英语"></a>英语</h2><ul><li><a href="https://www.bilibili.com/video/av27791861">零基础快速入门自学48个国际音标元音辅音发音读法_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</a></li><li><a href="https://www.bilibili.com/video/av69564237">不死记硬背如何快速掌握英语入门日常1500基础词汇量的背单词方法_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</a></li><li><a href="https://www.bilibili.com/video/av51510495">2019英语零基础语法入门班,系列自学课程之初高中英语语法_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</a></li></ul><h2 id="娱乐"><a href="#娱乐" class="headerlink" title="娱乐"></a>娱乐</h2><ul><li><a href="http://bbs.itzmx.com/thread-19539-1-1.html"><strong>SSTAP游戏加速器搭建一个自己的服务端教程</strong></a></li><li><a href="https://www.993dy.com/">LOL电影天堂</a></li><li><a href="https://www.hdchina.net/">HDCHINA</a></li><li><a href="http://www.4kjia.com/4kuhd">4k家园</a></li><li><a href="http://www.4btbtt.com/">bt之家</a></li><li><a href="https://wallhaven.cc/">国外壁纸站</a></li><li><a href="https://wallhere.com/zh/login">国外壁纸站</a></li><li><a href="https://unsplash.com/">Unsplash 图库</a></li><li><a href="https://pics.alphacoders.com/,https://wall.alphacoders.com/">img深渊</a></li><li><a href="http://www.mangabz.com/">Mangbz漫画网</a></li><li><a href="http://www.yinfans.me/">4K电影网</a></li></ul><h2 id="偷个懒"><a href="#偷个懒" class="headerlink" title="偷个懒"></a>偷个懒</h2><ul><li><p><a href="http://code.tarena.com.cn/">code.tarena.com.cn</a></p><p><a href="https://blog.csdn.net/Li_dengke/article/details/101385345">Vue项目打包成移动端APP_JavaScript_追梦&amp;天空的博客-CSDN博客</a></p><p><a href="https://www.cnblogs.com/ljy-/articles/12131510.html">uni-app引入官方uni.css样式库 - 本溢 - 博客园</a></p><p><a href="https://daneden.github.io/animate.css/">Animate.css</a></p><p><a href="https://www.cnblogs.com/putao1/p/10141875.html">uni-app的专属强大自适应单位upx，但是这个这是一个大坑，不能动态赋值解决办法 - 蒲涛- - 博客园</a></p><p><a href="https://www.cnblogs.com/wuyuchao/p/8483919.html">大型vue单页面项目优化总结 - 卢沟晓月 - 博客园</a></p><p><a href="https://192.168.0.101:5001/">苗宸</a></p><p><a href="http://www.itmk8.com/forum.php?mod=forumdisplay&fid=37&page=1">web前端IT慕课吧 -</a></p><p><a href="https://blog.csdn.net/xr510002594/article/details/82683693">(3条消息)关于Invalid prop: type check failed for prop row. Expected String, got Object.的问题及审查办法_JavaScript_Dreamer_xr的博客-CSDN博客</a></p><p><a href="https://tool.lu/">在线工具 - 程序员的工具箱</a></p><p><a href="https://xoyozo.net/Blog/Details/dcloud-uni-app-debug">使用 DCloud 工具 HBuilder X 开发 uni-app 项目踩过的一些坑 - XOYOZO</a></p><p><a href="https://www.pinterest.com.mx/pin/807692514405845761/?nic_v1=1aYW2AJ38IlmV4VEa4FE/r92b95PbMvG/cYpoXNkKLVdQ90D8sJvJbPYLmUDIZCAsi">(58) Pinterest</a></p><p><a href="https://caniuse.com/#home">Can I use… Support tables for HTML5, CSS3, etc</a></p><p><a href="https://www.pexels.com/video/waves-rushing-to-the-shore-1128104/">Waves Rushing To The Shore · Free Stock Video</a></p><p><a href="https://developer.aliyun.com/mirror/NPM?from=tnpm">NPM镜像-NPM下载地址-NPM安装教程-阿里巴巴开源镜像站</a></p><p><a href="https://developer.aliyun.com/learning/roadmap/frontend?spm=a2c6h.12883283.1362935.3.200e201cKC05sh">前端开发学习路线（学+测） - 阿里云开发者社区</a></p><p><a href="https://developer.aliyun.com/?spm=a2c6h.14029880.1364563.1.735975d7rdYalA">阿里云开发者社区-阿里云官网开发者社区_云计算社区</a></p><p><a href="https://www.bilibili.com/video/BV1hW411i7wK?from=search&seid=3646154184767855781">毕业论文格式设置方法（Microsoft word）_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</a></p><p><a href="https://www.jianshu.com/p/0c1c288ee8fc">marquee 标签参数详细说明 - 简书</a></p><p><a href="https://ask.dcloud.net.cn/docs/">文档 - DCloud问答</a></p><p><a href="http://127.0.0.1:5500/page.html">消息</a></p><p><a href="https://blog.csdn.net/qq_34926773/article/details/77861832">(3条消息)大三期末前端页面开发论文_JavaScript_qq_34926773的博客-CSDN博客</a></p><p><a href="https://baijiahao.baidu.com/s?id=1635111761268888039&wfr=spider&for=pc">直接拿来用！前端如何快速实现跨平台开发？</a></p><p><a href="https://www.cnblogs.com/suihang/p/10998997.html">uni-app中onLoad不起作用 - 一只菜鸟攻城狮啊 - 博客园</a></p><p><a href="https://www.jb51.net/article/72680.htm">Navicat for MySQL(mysql图形化管理工具)是什么？_Mysql_脚本之家</a></p><p><a href="https://www.jianshu.com/p/7125360f3d2a">uni-app开发app之一uni-app优缺点 - 简书</a></p><p><a href="https://cli.im/">草料二维码生成器</a></p><p><a href="http://www.ruanyifeng.com/blog/2020/01/deno-intro.html">Deno 运行时入门教程：Node.js 的替代品 - 阮一峰的网络日志</a></p><p><a href="https://www.52pojie.cn/thread-1063977-1-1.html">求uni-app实战仿微信app开发全套 - 『悬赏问答区』 - 吾爱破解 - LCG - LSG |安卓破解|病毒分析|www.52pojie.cn</a></p><p><a href="https://learnku.com/articles/34942">uni-App 仿微信 App 即时通讯|vue+uniapp 聊天 | Vue.js 技术论坛</a></p><p><a href="https://github.com/YuPeng1115/uni-app-miliao">YuPeng1115/uni-app-miliao: 基于uni-app开发的与机器人聊天界面，跨平台多端开发H5/微信小程序/APP等的单应用程序。</a></p><p><a href="https://www.zhihu.com/question/27024197?sort=created">简洁的界面怎么样让用户觉得很有细节？ - 知乎</a></p><p><a href="https://wenku.baidu.com/view/83899998f705cc17552709ba.html">软件开发基本原则 - 百度文库</a></p><p><a href="http://www.360doc.com/content/15/0310/10/15989917_453992159.shtml">软件开发基本原则</a></p><p>[VideoSrt - 自动识别,为视频生成中英字幕<a href="https://www.appinn.com/videosrt-for-windows/">Win 开源] - 小众软件</a></p><p><a href="https://zhidao.baidu.com/question/377513684.html">linux 下目录的含义，比如lib是放什么文件的，还有dev什么的，有好几个文件名称，都分别是什么意思_百度知道</a></p><p><a href="https://www.php.cn/php-weizijiaocheng-416401.html">如何在Windows上安装PHP7？-php教程-PHP中文网</a></p><p><a href="https://blog.csdn.net/weixin_44542598/article/details/86504818">vscode 打开新文件覆盖窗口，始终显示一个窗口_开发工具_weixin_44542598的博客-CSDN博客</a></p><p><a href="https://www.xiwnn.com/">茜文的博客</a></p><p><a href="http://www.1ppt.com/tags/2556/">论文答辩PPT - 第一PPT</a></p><p><a href="https://zhidao.baidu.com/question/200567393.html">JAVA中protected的作用_百度知道</a></p><p><a href="https://www.bt.cn/bbs/thread-21690-1-1.html">SSH连接失败的解决办法 - Linux面板 - 宝塔面板论坛</a></p><p>[使用composer提示<a href="https://www.tuhongwei.com/web/414">ErrorException]proc_get_status() has been disabled for security reasons的解决方法 | 涂红伟</a></p><p><a href="https://blog.csdn.net/weixin_41326021/article/details/81004981">微信小程序开发聊天室——实时聊天，支持图片预览_网络_weixin_41326021的博客-CSDN博客</a></p><p><a href="http://106.14.196.85:8888/">宝塔Linux面板</a></p><p><a href="https://blog.csdn.net/fengtao0821/article/details/106355066">✍Hexo博客搭建✍搭建个人博客Hexo框架出现hexo:无法加载文件脚本文件解决方案_fengtao0821的博客-CSDN博客_hexo:无法加载文件c:\users\覃海冰\appdata\roaming\npm\hex</a></p><p><a href="http://xh.5156edu.com/page/z1015m9220j18754.html">颜色表及html代码</a></p><p><a href="https://www.jianshu.com/p/84568e364ee8">深入理解什么是RESTful API ？ - 简书</a></p><p><a href="https://blog.csdn.net/jiezhang656/article/details/102573935">关于前后端分离的几点学习_jiezhang656的专栏-CSDN博客</a></p><p><a href="https://www.zhihu.com/question/304700221/answer/549267236">为什么苹果允许用户安装未受信任的企业级开发者所开发的软件？ - 知乎</a></p><p><a href="https://uniapp.dcloud.io/frame?id=%E5%B0%BA%E5%AF%B8%E5%8D%95%E4%BD%8D">框架简介 - uni-app官网</a></p></li></ul><p><a href="https://www.yujianxinliu.com/ecy/826.html">《Wallpaper Engine》动态壁纸推荐：静守时光，以待流年_ACG资源「遇见心流」</a></p><p><a href="https://segmentfault.com/a/1190000017342116">Vue学习路线图 - 个人文章 - SegmentFault 思否</a></p><p><a href="http://www.kaoshi5.com/">2020年考试时间表 - 各种证书考证日历安排</a></p><p><a href="https://petschko.org/tools/mv_decrypter/#restore-images">Petschko的RPG-Maker-MV解密器</a></p><p><a href="https://blog.csdn.net/llwy1428/article/details/92834705">谷歌浏览器截取长屏幕（全屏截图）_一花一世界-CSDN博客_谷歌浏览器长截图</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具网站 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript（下）</title>
      <link href="/2019/07/05/JavaScript%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
      <url>/2019/07/05/JavaScript%EF%BC%88%E4%B8%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="RegEXP对象"><a href="#RegEXP对象" class="headerlink" title="RegEXP对象"></a>RegEXP对象</h2><ul><li><p>什么是: 专门保存一条正则表达式，并提供用<strong>正则表达式执行验证</strong>和<strong>查找功能的API</strong> 的对象</p></li><li><p>何时: 只要在程序中保存一条正则表达式或使用正则表达式<strong>执行验证</strong>和<strong>查找</strong>时</p><p><strong>两种创建方式</strong></p></li><li><p><code>用//: var reg=/正则/ig</code><br>问题: 正则是写死的，无法再运行时动态生成正则表达式</p></li><li><p><code>用new: var reg=new RegExp(“正则”,”ig”)</code><br>好处: 参数是一个字符串格式的正则表达式，所以可以用任何程序的手段先动态生成字符串，再传给new RegExp变为正则表达式对象——动态生成正则<br><strong>API:</strong> </p><ol><li><p>验证: 验证一个字符串的格式是否符合正则表达式的要求。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bool=reg.<span class="title function_">test</span>(str)</span><br><span class="line">验证str是否符合reg的格式要求</span><br><span class="line">问题: test其实是只要找到符合规则的，就返回<span class="literal">true</span>，不要求从头到尾完整匹配</span><br><span class="line">比如: <span class="regexp">/\d&#123;6&#125;/</span>.<span class="title function_">test</span>(“123456a”) -&gt; <span class="literal">true</span></span><br><span class="line">解决: 今后只要验证，必须前加^，后加$，表示必须从头到尾完全匹配才行</span><br><span class="line">比如: <span class="regexp">/^\d&#123;6&#125;$/</span>.<span class="title function_">test</span>(“123456a”) -&gt; <span class="literal">false</span></span><br><span class="line">   其实: reg.<span class="title function_">test</span>()也可判断一句话中是否包含敏感词，且更简单。</span><br><span class="line">比如: <span class="keyword">if</span>(reg.<span class="title function_">test</span>(msg)) 如果msg中包含符合eg的敏感词</span><br></pre></td></tr></table></figure></li><li><p>查找: 既查找每个关键词的内容，又查找每个关键词的位置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=reg.<span class="title function_">exec</span>(str)</span><br><span class="line"> 让reg去str中找下一个符合规则的关键词的内容和位置</span><br><span class="line"> 返回值: 和str.<span class="title function_">match</span>()不加g的情况是一样的</span><br><span class="line">arr[“<span class="number">0</span>”: 关键词, “index”: i ]</span><br><span class="line">如果找不到了，返回<span class="literal">null</span></span><br><span class="line"> vs str.<span class="title function_">match</span>() :</span><br><span class="line">str.<span class="title function_">match</span>()始终只能找第一个关键词</span><br><span class="line">reg.<span class="title function_">exec</span>()反复调用时，可自动向后找下一个</span><br></pre></td></tr></table></figure></li></ol></li></ul><p><strong>总结: 查找关键词: 5种</strong></p><ol><li><p>只判断是否包含: <code>var bool=reg.test(str)</code></p></li><li><p>查找一个固定关键词的位置:<code> var i=str.indexOf(“关键词”)</code></p></li><li><p>查找一个可变关键词的位置:<code> var i=str.search(/正则/i)</code></p></li><li><p>查找第一个关键词的内容和位置:<br><code>var arr=str.match(/正则/i)</code><br><code> arr[“0”:关键词, “index”: i ]</code></p></li><li><p>查找所有关键词的内容: </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=str.<span class="title function_">match</span>(<span class="regexp">/正则/ig</span>)</span><br><span class="line">arr[关键词<span class="number">1</span>, 关键词<span class="number">2</span>, … ]</span><br><span class="line">\<span class="number">6.</span> 查找所有关键词的内容和位置: </span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr=reg.<span class="title function_">exec</span>(str);</span><br><span class="line">    <span class="keyword">if</span>(arr!=<span class="literal">null</span>)</span><br><span class="line">        arr[“<span class="number">0</span>”:关键词, “index”: i ]</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;<span class="keyword">while</span>(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure></li></ol><h2 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h2><ul><li><p>什么是: 保存一段可重用的代码段的程序结构，再起一个名字</p></li><li><p>何时: 如果一段代码可能被反复使用</p></li><li><p>程序的重要设计原则之一: DRY Don’t Repeat Yourself</p><p><strong>创建: 3种:</strong> </p></li></ul><ol><li><strong>用声明方式</strong> </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名(形参列表)&#123; 函数体; <span class="keyword">return</span> 返回值 &#125;</span><br></pre></td></tr></table></figure><p>​      <code>问题: 会被声明提前(hoist)</code></p><p>​       回顾: 声明提前: 当程序开始执行前，先将var声明的变量和function声明的函数提前到当前作用域的顶部，集中创建。<strong>赋值留在原地</strong>。</p><p>​      习惯: 所有声明都集中放在当前作用域的顶部。</p><ol start="2"><li><strong>用赋值方式</strong>: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span>函数名=<span class="keyword">function</span> (<span class="params">形参列表</span>)&#123; 函数体; <span class="keyword">return</span> 返回值 &#125;</span><br></pre></td></tr></table></figure><p>揭露了js中函数的本质: 函数其实是一个保存代码片段的对象，函数名其实就是一个普通的变量。</p><p><code>不会被声明提前！</code></p><ol start="3"><li><strong>用new:</strong> </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 函数名 = <span class="keyword">new</span> <span class="title class_">Function</span>(“形参<span class="number">1</span>”,…,”函数体; <span class="keyword">return</span> 返回值”)</span><br></pre></td></tr></table></figure><h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a><strong>匿名函数</strong></h3><ul><li>什么是: 定义函数时不指定函数名的函数</li><li>为什么: 节约内存</li><li>匿名函数用完后，不再被任何变量引用着，就被垃圾回收！</li><li>何时: 如果一个函数只用一次时</li></ul><p><strong>两个场景:</strong> </p><ol><li><strong>回调函数</strong>: </li></ol><p><code>什么是: 自己定义函数，却给别人去调用</code></p><ol start="2"><li><strong>自调函数</strong>:</li></ol><ul><li>自调：函数定义后，立刻自己调用自己执行一次</li><li>为什么: 避免使用全局变量，避免全局污染</li><li>何时: 用匿名函数划分临时作用域，避免使用全局变量</li><li>如何: (function(){ … })()</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//function是创建一个函数的意思——动作</span></span><br><span class="line"><span class="comment">//返回函数地址，比如0x1234</span></span><br><span class="line"><span class="comment">//0x1234() 调用匿名函数</span></span><br></pre></td></tr></table></figure><h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><ul><li>作用域英文原文为<strong>scope</strong>，本意就是”<strong>范围</strong>“的意思</li><li>作用域是指一个数据的可用范围</li><li>定义作用域是为了<strong>避免内外不同范围的数据之间不互相干扰</strong></li><li><strong>JavaScript</strong>程序中，也包含<strong>两级作用域</strong>：<ul><li>全局作用域：指的是从任何范围都可访问</li><li>函数作用域：指仅限于函数内才可访问的范围</li></ul></li><li>定义在不同范围的变量也有不同的名称。<ul><li>全局变量：是指保存在全局作用域中的变量。全局变量可在程序中的任何位置都可访问。</li><li>局部变量：是指保存在某一个函数内的变量。局部变量只能在函数内部使用。</li></ul></li><li>函数执行时，也有两级范围的数据可用，分别是：<ul><li>自己的函数作用域：其中包含自家的数据</li><li>全局作用域：整个全局的数据</li></ul></li></ul><p><code>使用时，按照就近原则，优先使用自己函数作用域中的变量，自己没有，才使用全局范围内的。</code></p><blockquote><p>作用域链，就是由多级作用域组成的链式结构</p></blockquote><ul><li><p>当调用函数时，函数将自己能用到的所有作用域都用”锁链”串联（引用）起来。</p><p><strong>作用链：</strong></p><ol><li>串联着当前函数所使用的所有作用域范围，保存着当前函数可用的所有变量</li><li>控制着变量的使用顺序：先局部，后全局，只要局部有就不会去全局查找数据。</li></ol></li></ul><h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><ul><li>为一个函数保护一个专属的变量：<ul><li>使用闭包原因：变量在函数外部很容易会造成全局污染，函数在调用后不会保留内部数据，即调用一次便会重新定义一次就是不可重用的意思，闭包，是既重用变量又保护变量不会被篡改的一种编程方法。</li></ul></li><li>闭包：<ul><li>在函数的外部包裹一个函数把要保护的变量包裹起来。</li><li>想用获取到内层被包裹的函数就要用到外层函数的返回值return</li><li>调用外层函数：获得内层函数，保存到全局变量中：由此返回的东西变成了变量的值，变成了函数名：由于内层函数变成了外层函数的孩子，他们之间有total链接，所以外层函数的变量 不会被重置。</li></ul></li></ul><p><code>只要希望既重用变量，又保护变量不会被篡改时，就要用闭包为一个函数保管专属的变量。</code></p><ul><li><strong>步骤：</strong><ul><li>外层函数包裹内层函数和要保护的变量</li><li>外层函数返回内层函数对象到外部</li><li>外部使用者调用外层函数，获得内层函数对象，并保存在外部变量中反复使用。</li></ul></li></ul><p><code>创建内层函数时，内层函数[[scope]]属性，始终拴着自己可用的外层函数作用域</code></p><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><ul><li>什么是: 程序都是用对象结构来描述现实中一个具体事物的属性和功能</li><li>为什么: 便于大量数据的管理和维护</li><li>如何: 三大特点: <strong>封装，继承，多态</strong></li></ul><h4 id="封装"><a href="#封装" class="headerlink" title="封装:"></a><strong>封装:</strong></h4><ul><li>什么是: 用对象结构集中存储一个事物的所有属性和功能</li><li><code>为什么: 便于大量数据的管理和维护</code></li><li>何时: 今后，只要使用面向对象思想，都要先将零散的数据封装为对象</li></ul><p><strong>三种创建方式</strong>： </p><ol><li><strong>用{}创建对象:</strong> </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  属性名:值,</span><br><span class="line">     … : …,</span><br><span class="line">  方法名:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    … <span class="variable language_">this</span>.属性名 …</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>访问对象成员(属性+方法): 对象.成员名</li><li><code>问题: 对象自己的方法内，要使用当前对象自己的属性，不能直接写属性名——报错！未定义</code></li><li>原因: 对象不是作用域！所以不在方法的作用域链上，所以，即使自己的方法，也不能直接访问自己对象的属性</li></ul><p>解决: </p><ul><li>不好的解决: 写死“对象名.属性名”</li><li>问题: 如果对象名发生改变，被迫同时修改方法内的语句</li><li>好的解决: “this.属性名”</li><li>this: 自动引用正在调用当前方法的.前的对象</li><li>何时: 只要对象自己的方法，要访问自己的属性时，必须加this.</li></ul><p><code>常犯错误: 以定义方法的位置来判断this的指向。</code></p><ul><li>正确: this与定义的位置无关，只与调用时.前的对象有关。2种:<ul><li>obj.fun() this-&gt;obj</li><li>fun()  this默认-&gt;window</li></ul></li></ul><ol start="2"><li><strong>用new的方式创建:</strong> </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=<span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">      obj.属性名=值</span><br><span class="line">  obj.方法名=<span class="keyword">function</span>(<span class="params"></span>)&#123; … &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>js中对象的本质: js中一切对象底层都是关联数组</li><li><strong>访问对象的成员: 2种:</strong><ul><li>obj[“属性名”]=obj.属性名</li></ul></li><li>如果属性名是动态变化的，必须用<code>obj[表达式] !!!!!</code></li><li>访问对象中不存在的属性: 不报错！返回<code>undefined</code></li><li>随时可给对象添加任何新属性: 不报错！而是自动创建</li><li>前两种方式: 一次只能创建一个对象</li><li>如果反复创建多个相同结构的对象时，代码大量冗余——不便于维护</li></ul><ol start="3"><li><strong>用构造函数创建对象</strong> </li></ol><ul><li>什么是构造函数: 描述一类对象相同结构的函数</li><li>为什么**: 代码重用**</li><li>何时: 反复创建多个相同结构的对象时</li></ul><p>创建方式:</p><ol><li><strong>定义构造函数:</strong> </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> 类型名()&#123;</span><br><span class="line">  <span class="variable language_">this</span>.属性名=值;</span><br><span class="line">  <span class="variable language_">this</span>.方法名=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">     … <span class="variable language_">this</span>.属性名 …</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><strong>用构造函数反复创建多个相同结构的对象</strong></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=<span class="keyword">new</span> 类型名();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>new: 4件事:</strong> </p><ol><li>创建一个空对象</li><li>自动设置继承关系</li><li>调用构造函数，并将构造函数中的所有this，自动替换为新的空对象通过强行给新对象赋值的方式，向新对象中添加新属性</li><li>返回新对象地址</li></ol><p>  <strong>构造函数的问题：如果将方法定义放在构造函数中，会导致每次创建新对象时，都重复创建方法的副本——浪费内存</strong></p><p><code>  解决: 保存在一处，共用！</code></p><h4 id="继承"><a href="#继承" class="headerlink" title="继承:"></a>继承:</h4><ul><li>什么是: 父对象的成员，子对象无需重复创建，就可直接使用</li><li>为什么: 代码重用，节约内存</li><li>何时: 所有子对象，需要相同的方法或属性时，只要在父对象中添加一次，所有子对象就可共用</li><li>如何: js中继承，都是继承原型对象(prototype)</li></ul><blockquote><p>创建原型对象: 不用创建，买一增一</p></blockquote><ul><li><p>每创建一个构造函数，都附赠一个空的原型对象</p></li><li><p>构造函数.prototype=自己的原型对象</p><p><strong>何时继承:</strong> </p></li></ul><ol><li><p><strong>new的第2步，自动设置继承关系</strong></p></li><li><p><strong>子对象. _<em>proto</em>_ = 构造函数.prototytpe</strong></p><p><strong>如何向原型对象中添加共有成员: 强行赋值:</strong> </p></li></ol><p>​     <code>构造函数.prototype.共有成员=值</code></p><p>  <strong>11种内置类型，也都有原型对象:</strong> </p><ul><li><p>将来只要能new的都是一种类型</p></li><li><p>只要是一种类型，都包含2部分组成: </p><ul><li>构造函数: 专门用于创建该类型的子对象</li><li>原型对象:专门用于保存该类型的子对象共有的成员</li></ul><p> <strong>比如: Array, Date, RegExp, Function, …</strong></p><p><strong>原型链:</strong> </p></li><li><p>什么是: 由多级父元素逐级继承形成的链式结构</p></li><li><p>保存着: 所有对象可访问的属性和方法</p></li><li><p>控制着属性和方法的使用顺序: 先用自己的，自己没有才延原型链向上找</p></li></ul><h4 id="多态"><a href="#多态" class="headerlink" title="多态:"></a>多态:</h4><ul><li><p>什么是: 一个函数在不同情况下表现出不同的状态</p><p><strong>包括: 2种:</strong> </p></li></ul><ol><li><strong>重载:</strong></li></ol><ul><li><p>什么是: 多个相同名称不同参数列表的函数，调用时可自动根据传入参数的不同，选择对应的函数执行。</p></li><li><p>为什么: 减少API的个数，减轻调用者的负担</p></li><li><p>何时: 1件事，可能根据传入参数不同，执行不同的处理过程时</p><p><code>问题: js语法默认不支持重载效果</code></p></li><li><p>为什么: js中不允许多个同名函数同时存在</p><ul><li>如果同时存在，最后一个同名函数会覆盖之前所有</li></ul></li></ul><p><code>解决: 变通实现</code></p><ol><li>只定义一个函数，不定义参数列表</li><li>调用函数时，按需传入参数</li><li>所有参数都会被函数中的内置对象arguments自动接收。</li><li>arguments: 每个函数中自动创建的可接受所有实参列表的类数组对象(长的像数组的对象) 与数组相比<ol><li>数组: 相同: 1. 下标, 2. .length, 3. 遍历</li></ol></li></ol><p>​          不同: 不是数组类型，API不通用！</p><ol start="5"><li>函数中根据参数列表的个数和内容，动态选择执行一种处理逻辑</li><li><strong>重写(override)</strong></li></ol><ul><li>什么是重写: 子对象觉得父对象的成员不好用，可在本地定义自有同名成员，覆盖父对象的成员</li><li>何时: 只要觉得父对象的成员不好用，都可重写一个新的</li><li>如何: 只要在子对象本地定义同名成员即可</li></ul><h2 id="静态方法与实例方法"><a href="#静态方法与实例方法" class="headerlink" title="静态方法与实例方法"></a>静态方法与实例方法</h2><ul><li>什么是实例方法: 给某个类型的子对象调用的方法</li><li>何时: 如果要求，方法执行时，必须先有一个具体的子对象，才能用。</li><li>如何: 要么直接定义在对象上，要么定义在对象的原型对象上</li><li>什么是静态方法: 不需要具体对象，也可直接执行的方法<ul><li>何时: 如果不需要任何具体对象，也想调用函数时</li><li>如何: 将函数定义在构造函数对象上<ul><li>构造函数.静态方法=function(){ … }</li><li>调用时: 构造函数.静态方法();</li></ul></li></ul></li></ul><h2 id="自定义继承关系"><a href="#自定义继承关系" class="headerlink" title="自定义继承关系"></a><strong>自定义继承关系</strong></h2><ol><li>只修改一个对象的父对象: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">child.<span class="property">__proto__</span>=father</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(child,father)</span><br><span class="line">设置set  child 的<span class="keyword">of</span>  爹prototype 为 father</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>问题: 一次只能改一个子对象的父类</code></p><ol start="2"><li>同时修改所有子对象的原型对象</li></ol><ul><li>其实就是修改构造函数的prototype属性</li><li>构造函数.prototype = father</li><li>时机: 必须在定义完构造函数后，开始创建子对象之前，就要更换。</li></ul><ol start="3"><li>正式的两种类型间的继承: </li></ol><p><code> 问题: 两种类型间包含了部分相同的属性结构和方法定义</code></p><p> <code>解决: 抽象父类型: </code></p><p>  <strong>步骤:</strong> </p><ul><li><p>定义抽象父类型: </p><ul><li>在父类型构造函数中包含相同的属性定义</li><li>在父类型的原型对象中包含相同的方法定义</li><li>删除子类型中相同的内容</li></ul></li><li><p>让子类型继承抽象父类型: </p><ul><li><p>让子类型构造函数继承父类型构造函数</p></li><li><p>```js<br>Object.setPrototypeOf(<br> 子类型.prototype, 父类型.prototype<br>)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 让子类型构造函数借用父类型构造函数</span><br><span class="line"></span><br><span class="line">**错误: 直接调用父类型构造:** </span><br><span class="line"></span><br><span class="line"> 父类型(参数值)</span><br><span class="line"></span><br><span class="line">后果: 父类型构造函数中的this-&gt;window</span><br><span class="line"></span><br><span class="line">`解决: 函数内的this不是想要的，都可用.call()的方式，将正确的this注射进函数内，替换其中错误的this`</span><br><span class="line"></span><br><span class="line">**正确的方法:**</span><br><span class="line"></span><br><span class="line"> 父类型构造.call(正确的this,参数值..)</span><br><span class="line"></span><br><span class="line">结果: 执行时，父类型构造中的this，被外部正确的this给替换了！</span><br><span class="line"></span><br><span class="line">## ES5</span><br><span class="line"></span><br><span class="line">### 严格模式</span><br><span class="line"></span><br><span class="line">- 比普通js运行机制要求跟严格的执行模式</span><br><span class="line">- 何时: 今后，所有项目代码，都必须运行在严格模式下！</span><br><span class="line">- 如何: 在当前作用域顶部: “**use strict**”;</span><br><span class="line">  - 如果加载&lt; script &gt;元素或js文件顶部，则整段js代码都启用严格模式</span><br><span class="line">  - 如果只加在函数内的顶部，则仅函数内启用严格模式</span><br><span class="line"></span><br><span class="line">**要求:** </span><br><span class="line"></span><br><span class="line">1. 禁止给未声明的变量赋值: </span><br><span class="line"></span><br><span class="line">普通js中，可以给未声明的变量赋值</span><br><span class="line"></span><br><span class="line">结果: 会自动在全局创建该变量</span><br><span class="line"></span><br><span class="line">2. 静默失败升级为错误: </span><br><span class="line"></span><br><span class="line">静默失败: 执行不成功，也不报错！</span><br><span class="line"></span><br><span class="line">3. 普通函数调用/匿名函数自调中的this，不再指向window，而是undefined</span><br><span class="line">4. 屏蔽了arguments.callee</span><br><span class="line"></span><br><span class="line">- 什么是arguments.callee: 函数内自动创建的，引用当前函数本身的关键字。</span><br><span class="line">- 何时: 在使用递归算法时，可在函数内避免写死当前函数名。</span><br><span class="line">- 屏蔽arguments.callee是在屏蔽递归算法</span><br><span class="line">- 为什么: 递归算法效率极低，重复计算量太大！</span><br><span class="line"></span><br><span class="line">### **保护对象**</span><br><span class="line"></span><br><span class="line">1. 保护单个属性:</span><br><span class="line"></span><br><span class="line">**ES5将对象属性划分为两大类:**</span><br><span class="line"></span><br><span class="line">- **命名属性: 凡是可用.直接访问到的属性**</span><br><span class="line">  - 又被分为两大类: </span><br><span class="line">    - 数据属性: 直接存储属性值的属性</span><br><span class="line">    - 访问器属性: 不直接存储属性值，专门提供对另一个数据属性的保护</span><br><span class="line">- **内部属性: 不能用.直接访问的属性**</span><br><span class="line"></span><br><span class="line">**ES5将每个数据属性，都变成一个缩微的小对象：**</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">  &#123; //四大特性: </span><br><span class="line">    value: //实际存储属性值,</span><br><span class="line">    writable: true/false, //控制是否可修改</span><br><span class="line">    enumerable: true/false, //控制是否可被for in遍历</span><br><span class="line">    //但是，用.依然可强行访问该属性</span><br><span class="line">    configurable: true/false, //控制是否可删除该属性</span><br><span class="line">    //控制是否可修改另外两个特性</span><br><span class="line">    //一旦改为false不可逆</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul><p><strong>四大特性: value, writable, enumerable, configurable</strong></p><p><code>获取: var 属性对象=Object.getOwnPropertyDescriptor(obj,”属性名”)</code></p><p><strong>修改四大特性:</strong> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj,”属性名”,&#123;</span><br><span class="line">   开关: <span class="literal">true</span>/<span class="literal">false</span>,</span><br><span class="line">     … : …</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>问题: 一次只能修改一个属性的四大特性</code></p><p><strong>解决：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperties</span>(obj,&#123;</span><br><span class="line">  属性名:&#123;</span><br><span class="line">    开关: <span class="literal">true</span>/<span class="literal">false</span>,</span><br><span class="line">     … : … </span><br><span class="line">&#125;,</span><br><span class="line">  属性名:&#123;</span><br><span class="line">    开关: <span class="literal">true</span>/<span class="literal">false</span>,</span><br><span class="line">     … : … </span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>问题: 无法使用自定义的规则保护属性</code></p><p> <strong>解决：</strong></p><ul><li>访问器属性: 访问器属性是不保存属性值，仅提供对另一个数据属性的保护</li><li>何时: 使用自定义规则保护属性时</li><li>前提: 先有一个实际存储数据的隐藏的数据属性</li></ul><p><strong>定义访问器:</strong> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperties</span>(obj,&#123;</span><br><span class="line">        _数据属性:&#123; <span class="attr">enumerable</span>:<span class="literal">false</span>,<span class="attr">configurable</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">        访问器属性:&#123;</span><br><span class="line">          <span class="attr">get</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_</span>数据属性&#125;,</span><br><span class="line">          <span class="attr">set</span>:<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(value符合规则)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">_</span>数据属性=value;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(“自定义错误信息”)</span><br><span class="line">&#125;,</span><br><span class="line">        <span class="attr">enumerable</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="attr">configurable</span>:<span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <strong>保护对象的结构: 3个层次:</strong> </p><ol><li>防扩展: 禁止给对象添加新属性</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`Object.preventExtensions(obj)`</span></span><br><span class="line">          阻止    扩展</span><br><span class="line">设置obj对象，禁止扩展新属性</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>密封: 在防扩展基础上，再禁止删除所有属性</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title class_">Object</span>.<span class="title function_">seal</span>(obj)</span><br><span class="line">本质: 在设置防扩展同时，自动设置所有属性的configurable为<span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>冻结: 在密封基础上禁止修改属性值</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">freeze</span>(obj)</span><br><span class="line">本质: 在密封基础上，自动将所有属性的writable设置为<span class="literal">false</span>！</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <strong>补充：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">create</span>(): 没有构造函数，也想创建子对象</span><br><span class="line"><span class="keyword">var</span> child=<span class="title class_">Object</span>.<span class="title function_">create</span>(father,&#123;</span><br><span class="line">         <span class="comment">//defineProperties的语法</span></span><br><span class="line">         属性:&#123; 四大特性 &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//创建新对象child，然后让child继承father，并为新对象添加自有属性</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="替换this"><a href="#替换this" class="headerlink" title="替换this"></a>替换this</h3><p>  <strong>.call/apply/bind</strong></p><ul><li>调用一次函数，并<strong>临时替换</strong>函数中的this为指定对象：.call或者apply<ul><li>fun.call(obj,实参…)<ul><li>调用一次函数执行</li><li>在执行时临时替换其中的this为obj</li></ul></li></ul></li><li>.apply可打散数组为单个参数值后，分别传入函数:<ul><li>如果函数需要多个参数值，但给的参数值却集中保存在一个数组中。</li><li>fun.apply(obj,[ ])</li></ul></li><li>.bind基于原函数创建一个完全相同的新函数，并永久绑定this为指定对象<ul><li>var newFun=fun.bind(obj,实参…)</li><li>创建一个和fun完全相同的新函数newFun</li><li>永久将newFun中的this绑定为obj</li><li>永久将newFun中的部分参数绑定为实参…</li><li>固定用法:<code> 如果替换回调函数中的this，必须用.bind()</code><ul><li>因为回调函数不是立刻执行！且不止执行一次！</li></ul></li></ul></li></ul><h3 id="数组API"><a href="#数组API" class="headerlink" title="数组API"></a><strong>数组API</strong></h3><ol><li>查找: 查找一个指定的元素在数组中的位置</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">同字符串操作: <span class="keyword">var</span> i=arr.<span class="title function_">indexOf</span>(元素, starti)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>判断: 判断数组中的元素是否符合要求<ol><li>判断是否所有元素都符合要求：</li></ol></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bool=arr.<span class="title function_">every</span>(<span class="keyword">function</span>(<span class="params">elem,i,arr</span>)&#123;</span><br><span class="line">  <span class="comment">//elem: 当前元素值</span></span><br><span class="line">  <span class="comment">//i: 当前位置</span></span><br><span class="line">  <span class="comment">//arr: 当前数组</span></span><br><span class="line">  <span class="keyword">return</span> 判断条件;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//every会拿着回调函数去每个元素上执行一次</span></span><br><span class="line"><span class="comment">//每次执行时，都会将当前元素值，当前所在位置，当前数组对象，传入函数中</span></span><br><span class="line"><span class="comment">//函数内用提供的参数值，判断当前元素是否符合条件，并返回判断结果</span></span><br><span class="line"><span class="comment">//必须回调函数在每个元素上执行时，都返回true，整体判断结果才返回true！</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>判断是否包含符合要求的元素:</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bool=arr.<span class="title function_">some</span>(<span class="keyword">function</span>(<span class="params">elem,i,arr</span>)&#123;</span><br><span class="line">  <span class="comment">//elem: 当前元素值</span></span><br><span class="line">  <span class="comment">//i: 当前位置</span></span><br><span class="line">  <span class="comment">//arr: 当前数组</span></span><br><span class="line">  <span class="keyword">return</span> 判断条件;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li><p>遍历: 对每个元素都执行相同的操作</p><ol><li><p>直接修改原数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">elem,i,arr</span>)&#123;</span><br><span class="line">  elem…</span><br><span class="line">  arr[i]…</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//forEach会拿着回调函数去每个元素上执行一次</span></span><br><span class="line"><span class="comment">//每次执行时，回调函数内都可用arr[i]修改原数组中的每个元素值。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>不直接修改原数组，而是返回新数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newArr=arr.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">elem,i,arr</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> 新值</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//map先创建一个新的空数组</span></span><br><span class="line"><span class="comment">//然后拿着回调函数去每个元素上执行一次</span></span><br><span class="line"><span class="comment">//每次执行时，都将回调函数返回的新值，放入新数组中相同位置</span></span><br><span class="line"><span class="comment">//最后，将保存新值的新数组返回，原数组保持不变</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol></li><li><p>过滤: 复制出原数组中符合条件的元素，组成新数组</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> subArr=arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">elem,i,arr</span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> 条件</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//filter先创建一个新的空数组</span></span><br><span class="line"><span class="comment">//会拿着回调函数去每个元素上执行一次</span></span><br><span class="line"><span class="comment">//每次执行时，都获得当前元素的判断结果</span></span><br><span class="line"><span class="comment">//只有返回结果为true的元素，才被放入新数组中返回</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="5"><li>汇总: 对数组中的元素进行各种统计，得出最终结论</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result=arr.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">prev,elem,i,arr</span>)&#123;</span><br><span class="line">     <span class="comment">//prev: 截至到当前元素之前的临时汇总值</span></span><br><span class="line">     <span class="keyword">return</span> prev+elem;</span><br><span class="line">&#125;,base) <span class="comment">//开始初始值</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BOM&amp;DOM</title>
      <link href="/2019/07/02/BOM-DOM/"/>
      <url>/2019/07/02/BOM-DOM/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="什么是DOM-Document-Object-Model"><a href="#什么是DOM-Document-Object-Model" class="headerlink" title="什么是DOM: Document Object Model"></a>什么是DOM: Document Object Model</h2><ol><li>DOM就是专门操作网页内容的API标准——W3C</li><li>何时: 只要用js操作网页的内容</li><li>包括: 增删改查+事件绑定</li></ol><span id="more"></span><h2 id="DOM-Tree"><a href="#DOM-Tree" class="headerlink" title="DOM Tree"></a>DOM Tree</h2><ul><li>什么是: 在内存中存储一个网页中所有内容的树形结构</li><li>为什么: 只有树形结构才能灵活保存上下级包含关系</li><li>何时: 浏览器每加载一个网页，就会读取网页内容，并在内存中创建DOM数。</li><li>网页中每项内容，都是DOM树上的节点对象: <ul><li>整个DOM树只有唯一一个根节点: <strong>document对象</strong></li></ul></li><li>每个节点对象上，都有三个属性: <ul><li>.nodeType: 节点类型, 值为数字<ul><li>何时: <strong>当获得一个节点对象，需要判断节点的类型时</strong></li></ul></li><li>包括: document   9  根节点<ul><li>element     1  元素节点</li><li>attribute     2  属性节点</li><li>text             3   文本节点</li><li><code>问题: 只能判断类型，不能进一步判断元素名</code></li></ul></li><li>.nodeName: 节点名称<ul><li>何时: 希望进一步判断节点/元素的名称时</li></ul></li><li>包括: document  #document<ul><li>element   全大写的标签名</li><li>attribute   属性名</li><li>text       #text</li></ul></li><li>.nodeValue: 节点值<ul><li>何时: 几乎不用</li></ul></li><li>包括: document   null<ul><li>element     null</li><li>attribute    属性值</li><li>text        文本的内容</li></ul></li></ul></li></ul><h2 id="查找的几种方式"><a href="#查找的几种方式" class="headerlink" title="查找的几种方式"></a>查找的几种方式</h2><ul><li><p>何时: 修改/删除元素前都要先找到要操作的元素</p></li><li><p><strong>不需要查找就可直接获得</strong>的重要元素: </p><ul><li><strong>html   document.documentElement</strong></li><li><strong>head   document.head</strong></li><li><strong>body   document.body</strong></li><li><strong>form   document.forms[i/id]</strong></li></ul></li><li><p>按节点间关系查找</p></li><li><p>节点树: 包含所有网页内容（元素，文本，属性）的树结构</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> <span class="variable constant_">HTML</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>DOM Tree<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;s1&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题一<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//当 window 加载后——事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//希望等网页加载后，再执行以下代码，以确保所有网页中的内容都已经可用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//获得body元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> body=<span class="variable language_">document</span>.<span class="property">body</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(body.<span class="property">nodeName</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//获得body下所有直接子元素，应该只有三个</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> children=body.<span class="property">children</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(children);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//获得body下第一个直接子元素span</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> span=body.<span class="property">firstElementChild</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(span);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//获得body下最后一个直接子元素script</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> script=body.<span class="property">lastElementChild</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(script);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//获得h1元素，可以是: </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> h1=<span class="comment">//span.nextElementSibling;//span的弟弟</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//script.previousElementSibling;//script的哥哥</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">children[<span class="number">1</span>]<span class="comment">//body的第二个孩子</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(h1);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>两大类关系:</strong> </p></li></ul><ol><li><strong>父子:</strong> </li></ol><ul><li>elem.parentNode  找elem的父节点</li><li>elem.childNodes   找elem的所有直接子节点</li><li>elem.firstChild     找elem的第一个直接子节点</li><li>elem.lastChild     找elem的最后一个直接子节点</li></ul><ol start="2"><li><strong>兄弟:</strong> </li></ol><ul><li><p>elem.nextSibling   找elem的下一个兄弟</p></li><li><p>elem.previousSibling 找elem的前一个兄弟</p><p><code>问题: 受看不见的空字符的影</code></p><p><strong>解决: 元素树: 仅包含元素节点的树结构</strong></p></li><li><p>元素树不是一棵新树，而是节点树中的一个子集</p></li><li><p>优点: 不受看不见的空字符的干扰！</p></li></ul><p><strong>两大类关系:</strong> </p><ol><li><strong>父子:</strong> </li></ol><ul><li>elem.parentElement          找elem的父元素</li><li>elem.children                      找elem的所有直接子元素</li><li>elem.firstElementChild    找elem的第一个直接子元素</li><li>elem.lastElementChild     找elem的最后一个直接子元素</li></ul><ol start="2"><li><strong>兄弟:</strong> </li></ol><ul><li><p>elem.nextElementSibling   找elem的下一个兄弟元素</p></li><li><p>elem.previousElementSibling 找elem的前一个兄弟元素</p><p><strong>递归遍历一个父元素下所有后代元素:</strong></p><p> <strong>两个步骤:</strong> </p></li></ul><ol><li>定义函数，仅遍历直接子元素</li><li>在遍历直接子元素时，对每个直接子元素调用和父元素完全相同的操作</li></ol><p><code> 问题: 必须先获得一个元素，才能按节点间关系查找</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> <span class="variable constant_">HTML</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>遍历节点树<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello World !<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;uname&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>综艺</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>跑男<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;uname&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>极限<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>剧集<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//定义一个函数，用于遍历任意给定父元素parent下的所有后代元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">getChildren</span>(<span class="params">parent</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//1. 先仅遍历当前父元素的直接子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//1.1获得指定的父元素parent的直接子元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> children=parent.<span class="property">children</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//1.2遍历当前父元素的所有直接子元素并输出元素名</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">for</span>(<span class="keyword">var</span> child <span class="keyword">of</span> children)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//console.log(child.nodeName);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">if</span>(child.<span class="property">innerHTML</span>===<span class="string">&quot;&#123;&#123;uname&#125;&#125;&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">child.<span class="property">innerHTML</span>=uname;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//2. 对每个直接子元素调用和父元素完全相同的操作</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">arguments</span>.<span class="title function_">callee</span>(child);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> uname=<span class="string">&quot;dingding&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//当 window 加载完 才自动执行</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//遍历body元素下的所有后代元素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">getChildren</span>(<span class="variable language_">document</span>.<span class="property">body</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><code> 解决: 用HTML特征查找</code></p><p><strong>按HTML特征查找:</strong></p><p>  何时: 在没有获得任何元素情况下，可作为首次查找之用</p><p>  包括: 4种</p><ol><li>按id查找一个元素: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elem=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;id&quot;</span>);</span><br></pre></td></tr></table></figure><p> 强调:</p><ol><li>按id查找，必须用document调用</li><li>只能找到一个元素</li></ol><p><strong>按标签名查找:</strong> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elems=任意父元素.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;标签名&quot;</span>);</span><br></pre></td></tr></table></figure><p>强调: </p><ul><li>可用任意父元素调用: <ul><li>比如: 在ul下找li; 在table下找td; 在select下找option</li></ul></li><li>可找到多个，所以返回多个元素组成的类数组对象</li><li>按标签名查找不仅查找直接子元素，且在所有后代中查找符合条件的</li></ul><p><strong>按name属性查找:</strong> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elems=<span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;name&quot;</span>)</span><br></pre></td></tr></table></figure><p>强调: </p><ul><li>只能用document调用</li><li>返回多个元素组成的类数组对象</li></ul><p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="jjzPjZ" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="jjzPjZ">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/jjzPjZ/">  jjzPjZ</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="bPvdXr" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="bPvdXr">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/bPvdXr/">  bPvdXr</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><p><strong>按class查找:</strong> </p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var elems=任意父元素.getElementsByClassName(<span class="string">&quot;class&quot;</span>)</span><br></pre></td></tr></table></figure><p>强调: </p><ol><li>可用任意父元素调用</li><li>返回多个元素组成的类数组对象</li><li>不仅查找直接子元素，且在所有后代中查找。</li><li>如果一个元素同时被多个class修饰，那么只要用其中一个class，就可找到该元素。</li></ol><p> <strong>按选择器查找: 2种情况:</strong> </p><ol><li>只查找一个符合条件的元素: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elem=任意父元素.<span class="title function_">querySelector</span>(<span class="string">&quot;选择器&quot;</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>查找多个符合条件的元素: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elems=任意父元素.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;选择器&quot;</span>)</span><br></pre></td></tr></table></figure><p>优化: 按HTML查找 vs 按选择器查找</p><ol><li>返回值: </li></ol><ul><li>按HTML查找返回动态集合: 不实际存储属性值，每次访问集合内容，都重新查找DOM树</li><li>按选择器查找返回非动态集合: 实际存储所有属性值，每次访问集合内容，不需要重新查找DOM树</li></ul><ol start="2"><li>首次查找效率: </li></ol><ul><li>按HTML查找快</li><li>按选择器查找慢</li></ul><ol start="3"><li>易用性: </li></ol><ul><li><p>按选择器查找，简单又强大</p></li><li><p>按HTML查找，相对繁琐</p><p><strong>总结:</strong></p></li></ul><ol><li><p>当仅靠一个条件就可找到元素时，首选按HTML查找</p></li><li><p>当查找条件复杂时，首选按选择器查找，简单易用</p><p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="gNeaYg" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="gNeaYg">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/gNeaYg/">  gNeaYg</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script></li></ol><h2 id="修改的几种方式"><a href="#修改的几种方式" class="headerlink" title="修改的几种方式"></a>修改的几种方式</h2><p> <strong>内容: 获取或修改元素的内容3种:</strong> </p><ul><li>获取或修改元素的原始HTML片段内容: <code>elem.innerHTML</code></li><li>获取或修改元素的纯文本内容: </li><li>elem.textContent 对比 innerHTML: <ul><li>将特殊符号翻译为正文</li><li>去掉了内嵌标签</li></ul></li><li>获取或修改表单元素的内容: elem.value</li></ul><p><strong>属性: 3种:</strong> </p><p><strong>HTML标准属性: HTML标准中规定的元素具有的属性，两种：</strong></p><ul><li>核心DOM API: 最初DOM标准中指定的，可以访问所有结构化文档的API<ul><li>四种方式: <ul><li>获取属性值: elem.getAttribute(“属性名”)</li><li>修改属性值: elem.setAttribute(“属性名”,”新属性值”)</li><li>判断是否包含指定属性: elem.hasAttribute(“属性名”)</li><li>移除属性: elem.removeAttribute(“属性名”)</li></ul></li><li>HTML DOM API: 对常用DOM API提供了简化版本<ul><li>对于标准属性: HTML DOM已经将所有标准属性都提前内置在了元素对象中，可用.直接访问。如果没有出现在页面上的标准属性值，默认为””</li><li>elem.标准属性名</li><li>特例: html元素的class属性:</li><li>应该换成: elem.className =&gt; &lt; elem class=”” &gt;</li><li>因为class是ES中的保留字</li></ul></li></ul></li><li><strong>四大状态属性:</strong> <ul><li><code>enabled    disabled     checked     selected</code></li><li>值都不是字符串，而是bool类型</li><li>不能用核心DOM 4个API修改</li><li>只能用**.**直接访问</li><li>CSS3: 状态伪类选择器: </li><li><code>:selected  :checked  :disabled   :enabled</code><ul><li>选中处于某种状态的元素</li></ul></li></ul></li><li><strong>自定义扩展属性:</strong> <ul><li>什么是: HTML标准中没有规定的，程序员自行添加的属性</li><li>何时:<ul><li>在客户端临时缓存业务数据，减少向服务器端发送请求的次数</li><li>代替其他选择器(id,class,元素)，为元素绑定行为</li></ul></li><li>理由：<ul><li>id 只能选一个元素</li><li>元素 限制太死板</li><li>class 是样式专用，不稳定</li><li>解决: 今后只要为元素添加行为，都应该用自定义扩展属性</li></ul></li></ul></li></ul><p><strong>bootstrap:</strong> </p><ol><li>为想要添加行为的元素，指定自定义扩展属性</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a data-toggle=<span class="string">&quot;dropdown&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>用属性选择器找到有自定义扩展属性的元素绑定行为: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elems=<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;[data-toggle=dropdown]&quot;</span>)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> elem <span class="keyword">of</span> elems)</span><br><span class="line">    elem.<span class="property">on</span>事件名=<span class="keyword">function</span>(<span class="params"></span>)&#123; ... &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如何:</p><ol><li>定义时: &lt;ANY 自定义属性名=”值”</li><li>获取或设置自定义属性的值:</li></ol><p>不能用**.<strong>修改，因为</strong>内存中的元素对象中不包含自定义扩展属性**</p><p>用核心DOM API可以访问自定义扩展属性: </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">elem.<span class="title function_">getAttribute</span>(<span class="string">&quot;属性名&quot;</span>)</span><br><span class="line"></span><br><span class="line">elem.<span class="title function_">setAttribute</span>(<span class="string">&quot;属性名&quot;</span>,<span class="string">&quot;新值&quot;</span>)</span><br><span class="line"></span><br><span class="line">elem.<span class="title function_">hasAttribute</span>(<span class="string">&quot;属性名&quot;</span>)</span><br><span class="line"></span><br><span class="line">elem.<span class="title function_">removeAttribute</span>(<span class="string">&quot;属性名&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>HTML5:</strong> </p><ol><li>如果在定义自定义扩展属性时加了data-前缀</li><li>在程序中: elem.dataset.属性名</li></ol><p>其中: <code>dataset可自动收集data-*开头的属性</code></p><p>样式: </p><ol><li>修改一个css样式: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">elem.<span class="property">style</span>.<span class="property">css</span>属性名=<span class="string">&quot;新值&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其中: style代表元素开始标签中的内联样式style属性</p><p>强调: 所有css属性名都要去-，变驼峰命名</p><ol start="2"><li>获取一个css样式: </li></ol><p>错误: elem.style 只能获得内联样式</p><p>解决: 今后只要获取css属性值，都用计算后的样式</p><p>什么是计算后的样式: 最终应用到元素上的所有css属性的集合。</p><p>还将相对单位的属性值计算为绝对单位(px)</p><p>​     如何: </p><ol><li>先获得计算后的完整样式对象</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> style=<span class="title function_">getComputedStyle</span>(elem)</span><br></pre></td></tr></table></figure><ol start="2"><li>从style中获得想要的css属性值</li></ol><p>​       style.css属性名</p><p>强调: 计算后的所有样式，只读。因为计算后的样式来源不确定，不知道多少地方正在同时使用。</p><p>总结: 今后只要修改css属性，都用elem.style.css属性=值</p><p>今后只要获取css属性，都用getComputedStyle</p><p>问题: elem.style，一次只能修改一个css属性</p><p>如果批量修改多个css属性时，代码繁琐</p><p>解决: 今后只要批量应用样式，都用class</p><p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="wLmKvq" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="wLmKvq">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/wLmKvq/">  wLmKvq</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="JQLYdP" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="JQLYdP">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/JQLYdP/">  JQLYdP</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="WqzQQM" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="WqzQQM">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/WqzQQM/">  WqzQQM</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h2 id="添加-删除"><a href="#添加-删除" class="headerlink" title="添加/删除"></a>添加/删除</h2><p> <strong>添加 :</strong> </p><ol><li>先创建一个空元素对象: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>​    相当于:  &lt; a &gt;&lt; /a&gt;</p><ol start="2"><li>设置关键属性: </li></ol><p>​    a.innerHTML=”go to tmooc”;  =&gt; <a> go to tmooc </a></p><p>​    a.href=”<a href="http://tmooc.cn&quot;/">http://tmooc.cn&quot;</a> </p><p>​    =&gt; &lt; a href=”<a href="http://tmooc.cn/">http://tmooc.cn</a> “&gt; go to tmooc &lt; /a&gt;</p><ol start="3"><li>将新元素添加到DOM树上指定位置</li><li>父元素.appendChild(a) 将a追加到父元素下最后一个孩子之后</li><li>父元素.insertBefore(a, child) 将a插入在父元素下一个现有child元素之前</li><li>父元素.replaceChild(a, child) 用a代替父元素下现有的child子元素</li></ol><p> <code>优化: 尽量减少操作DOM树的次数: </code></p><p><code>为什么: 每修改一次DOM树，就会导致重排重绘，降低页面加载的效率。</code></p><p>   原理: </p><p>​    html-&gt;DOM Tree ←修改</p><p>​            ↓</p><p>​          Render Tree -&gt; 重排-&gt;重绘paint</p><p>​            ↑</p><p>​    css -&gt; CSS Model</p><p>解决: 2种: </p><ol><li>当同时添加父元素和子元素时，应该先在内存中将所有字元素加入父元素下，最后再一次性将父元素添加到DOM树</li><li>如果父元素已经在页面上了，要同时添加多个平级子元素时，应该找一个临时的父元素，先将所有子元素加入临时的父元素中，最后，再将临时的父元素添加到DOM树</li></ol><p>临时的父元素: 文档片段 <strong>document fragment</strong></p><p>=什么: 内存中，临时存储多个子元素的虚拟父元素</p><p>何时: 要同时添加多个平级子元素到DOM树时</p><p>如何: 3步: </p><ol><li>创建文档片段对象: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> frag=<span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>将子元素添加到文档片段中: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">frag.<span class="title function_">appendChild</span>(child)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>将frag整体一次性添加到DOM树</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">父元素.<span class="title function_">appendChild</span>(frag)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> 删除: </p><p><strong>父元素.removeChild(child)</strong></p><p><strong>child.parentNode.removeChild(child)</strong></p><p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="RzMWoK" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="RzMWoK">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/RzMWoK/">  RzMWoK</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="qzoOvq" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="qzoOvq">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/qzoOvq/">  qzoOvq</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h2 id="HTML-DOM-常用对象"><a href="#HTML-DOM-常用对象" class="headerlink" title="HTML DOM 常用对象"></a>HTML DOM 常用对象</h2><p> Image: 唯一的简化: var img=new Image();</p><p> Select/Option</p><p><strong>Select属性:</strong></p><ul><li>.selectedIndex 自动获得当前选中的option的下标i</li><li>.options 快速获得当前select下所有option的集合</li><li>.options.length 表示select下option的个数</li><li>.length 简化.options.length</li><li>方法: .add(opt) 简化.appendChild(opt)</li><li>问题: 不支持文档片段</li><li>.remove(i) 移除i位置的一个option</li></ul><p> <strong>Option:</strong> </p><p>最大的简化: var opt=new Option(text, value)</p><p>新建一个option元素，同时设置其内容和值</p><p><strong>Table/…:</strong></p><p>逐级管理: </p><p>table管着行分组:</p><p>创建(行分组): 创建行分组，同时将行分组立刻就添加到table中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> thead=table.<span class="title function_">createTHead</span>()</span><br><span class="line"><span class="comment">//createElement(thead);table.appendChild(thead)</span></span><br><span class="line"><span class="keyword">var</span> tfoot=table.<span class="title function_">createTFoot</span>()</span><br><span class="line"><span class="keyword">var</span> tbody=table.<span class="title function_">createTBody</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>删除(行分组):</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">table.<span class="title function_">deleteTHead</span>();</span><br><span class="line">table.<span class="title function_">deleteTFoot</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>获得(行分组):</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">table.<span class="property">tHead</span>      </span><br><span class="line">table.<span class="property">tFoot</span></span><br><span class="line">table.<span class="property">tBodies</span>[i]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>行分组管着行:</p><p>创建一个新行:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tr=行分组.<span class="title function_">insertRow</span>(i);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>在行分组的第i行位置前插入一个新行，并返回新行对象。原i位置的行及其之后的行被向后挤压顺移一位</code></p><p>固定套路: </p><ol><li>在行分组末尾追加一个新行: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tr=行分组.<span class="title function_">insertRow</span>()</span><br><span class="line"><span class="comment">//createElement(tr) 行分组.appendChild(tr)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>在行分组第一行之前插入一个新行:</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tr=行分组.<span class="title function_">insertRow</span>(<span class="number">0</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>删除现有行: </p><p>不好: 行分组.deleteRow(i)</p><p><strong>问题: 因为.前的主语是行分组，所以i要求是行在行分组内的相对下标位置。而tr有一个rowIndex属性，虽然可获得行的下标位置，但是是相对于整个表格的位置。</strong></p><p>好的: table.deleteRow(tr.rowIndex)</p><p>获取某一个行: 行分组.rows[i]</p><p>行管着格:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">添加: <span class="keyword">var</span> td=tr.<span class="title function_">insertCell</span>(i) <span class="comment">//省略i，默认在末尾追加</span></span><br><span class="line"></span><br><span class="line">局限: 只能添加td，不能添加th</span><br><span class="line"></span><br><span class="line">删除: tr.<span class="title function_">deleteCell</span>(i)</span><br><span class="line"></span><br><span class="line">获取: tr.<span class="property">cells</span>[i]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <strong>Form:</strong> </p><p>获取: var form=document.forms[i/id]</p><p>属性: </p><ul><li>.elements 获得表单中所有表单元素(input, button, textarea, select)的集合</li><li>.elements.length 获得表单中表单元素的个数</li><li>.length =&gt; .elements.length</li></ul><p>方法: form.submit() 代替提交按钮手动提交表单</p><p>自定义表单提交: </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span></span><br><span class="line">    .<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//先验证所有表单元素的值是否符合要求</span></span><br><span class="line">    <span class="comment">//只有所有表单都符合要求</span></span><br><span class="line">    <span class="comment">//才手动调用form.submit()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  表单元素对象: </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">获取表单元素: var elem=form.elements[i/name/id]</span><br><span class="line"></span><br><span class="line">如果表单元素有name属性: form.name</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>​    方法: </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">elem.<span class="title function_">focus</span>()</span><br><span class="line">elem.<span class="title function_">blur</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="WqzQWL" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="WqzQWL">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/WqzQWL/">  WqzQWL</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h2 id="什么是BOM-Browser-Object-Model"><a href="#什么是BOM-Browser-Object-Model" class="headerlink" title="什么是BOM: Browser Object Model"></a>什么是BOM: Browser Object Model</h2><p> BOM是专门操作浏览器窗口或软件的API——没有标准</p><p>何时: 操作浏览器窗口，或访问浏览器软件的信息时包含: </p><p>  <strong>window:</strong> </p><ol><li>history</li><li>location</li><li>navigator</li><li>document</li><li>screen</li><li>event</li></ol><p><strong>window对象:</strong> </p><ol><li><p>代替ES标准中的global充当全局作用域对象</p></li><li><p>封装所有原生API的大的对象，包括:</p><p><code>ES+DOM+BOM</code></p></li></ol><p> <strong>属性:</strong> </p><p>  <strong>窗口大小:</strong> </p><ol><li>完整窗口大小: <strong>[window.]outerWidth/outerHeight</strong></li><li>文档显示区大小: <strong>[window.]innerWidth/innerHeight</strong></li></ol><p>打开和关闭窗口</p><ol><li>打开一个新窗口：**[window.]open()** </li><li>关闭当前窗口：<strong>close()</strong> </li></ol><h3 id="history"><a href="#history" class="headerlink" title="history:"></a><strong>history:</strong></h3><p>什么是: 当前窗口中，保存当前窗口打开后成功访问过的url的<strong>历史记录栈</strong></p><p>何时: 用程序实现前进和后退时</p><p> 如何:</p><ul><li>history.go(i)</li><li>前进一步: history.go(1)</li><li>后退一步: history.go(-1)</li><li>后退两步: history.go(-2)</li><li>刷新: history.go(0)</li></ul><h3 id="location"><a href="#location" class="headerlink" title="location:"></a><strong>location:</strong></h3><p>什么是: 保存地址栏中正在打开的url的信息的对象</p><p>还提供了操作页面跳转的API</p><p> 何时:</p><ol><li>获得当前url相关的信息</li><li>页面跳转</li></ol><p>如何: </p><p>属性:</p><ul><li><p>.href  获得当前完整的url信息</p></li><li><p>.protocol  获得url中的协议部分</p></li><li><p>.host      获得url中的主机名+端口号部分</p></li><li><p>.hostname  获得url中的主机名</p></li><li><p>.port      获得url中的端口号部分</p></li><li><p>.pathname 获得url中的相对路径部分</p></li><li><p>.hash      获得url中的#锚点地址部分</p></li><li><p>.search     获得url中的?查询字符串部分</p><p>方法: </p></li></ul><ol><li>在当前窗口打开，可后退: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">open</span>(<span class="string">&quot;url&quot;</span>,<span class="string">&quot;_self&quot;</span>)</span><br><span class="line">location.<span class="property">href</span>=<span class="function"><span class="params">url</span> =&gt;</span> location.<span class="title function_">assign</span>(<span class="string">&quot;url&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>在当前窗口打开，进制后退:</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location.<span class="title function_">replace</span>(<span class="string">&quot;新url&quot;</span>)</span><br><span class="line">用<span class="string">&quot;新url&quot;</span>代替history数组中当前旧的url，以此来阻止后退。</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>刷新的2种方式: </li><li>普通刷新: 优先从本地浏览器缓存中获取资源，除非本地缓存没有或过期，才被迫从服务器重新下载</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">history.<span class="title function_">go</span>(<span class="number">0</span>)</span><br><span class="line"><span class="variable constant_">F5</span></span><br><span class="line">location.<span class="title function_">reload</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>强制刷新: 强制浏览器跳过本地缓存，总是直接从服务器下载新资源。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">location.<span class="title function_">reload</span>(<span class="literal">true</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>打开新链接方式总结<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">/*打开新链接方式总结：</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">1. 在当前窗口打开，可后退</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">html:&lt;a href=&quot;url&quot; target=&quot;_self&quot;&gt;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">js:open(&quot;url&quot;,&quot;_self&quot;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">2. 在当前窗口打开，不可后退</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">js: location.replace(&quot;新url&quot;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">3. 在新窗口打开，可打开多个</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">html:&lt;a href=&quot;url&quot; target=&quot;_blank&quot;&gt;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">js:open(&quot;url&quot;,&quot;_blank&quot;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">4. 在新窗口打开，只能打开一个</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">html: &lt;a href=&quot;url&quot; target=&quot;自定义窗口名&quot;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">js: open(&quot;url&quot;,&quot;自定义窗口名&quot;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">其实每个窗口在浏览器内存中都有一个唯一的窗口名</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">浏览器规定，同名的窗口只能打开一个</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">窗口名一般在打开新链接时，临时定义: </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">如何: 2种: </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">1. &lt;a href=&quot;url&quot; target=&quot;自定义窗口名&quot;&gt;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">2. open(&quot;url&quot;,&quot;自定义窗口名&quot;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">预定义窗口名: </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">_self: 表示自动获得原窗口的名字作为新窗口名</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">_blank: 表示不定义窗口名，浏览器会自动随机分配窗口名</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">*/</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">open1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//open(&quot;http://tmooc.cn&quot;,&quot;_self&quot;);</span></span></span><br><span class="line"><span class="language-javascript">location.<span class="property">href</span>=<span class="string">&quot;http://tmooc.cn&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">open2</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">location.<span class="title function_">replace</span>(<span class="string">&quot;http://tmooc.cn&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">open3</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">open</span>(<span class="string">&quot;http://tmooc.cn&quot;</span>,<span class="string">&quot;_blank&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">open4</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">open</span>(<span class="string">&quot;http://tmooc.cn&quot;</span>,<span class="string">&quot;tmooc&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://tmooc.cn&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_self&quot;</span>&gt;</span>在当前窗口打开，可后退<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:open1()&quot;</span>&gt;</span>在当前窗口打开，可后退(js)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:open2()&quot;</span>&gt;</span>在当前窗口打开，不可后退(js)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://tmooc.cn&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>在新窗口打开，可打开多个<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:open3()&quot;</span>&gt;</span>在新窗口打开，可打开多个(js)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://tmooc.cn&quot;</span> <span class="attr">target</span>=<span class="string">&quot;tmooc&quot;</span>&gt;</span>在新窗口打开，只能打开一个<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:open4()&quot;</span>&gt;</span>在新窗口打开，只能打开一个(js)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="navigator"><a href="#navigator" class="headerlink" title="navigator:"></a>navigator:</h3><p>什么是: 封装浏览器配置信息的对象</p><p>何时: 只要获取浏览器的配置信息</p><p>包括: </p><ul><li>.cookieEnabled 判断当前浏览器是否启用cookie!</li><li>什么是cookie: 在客户端本地硬盘持久保存一个数据的小文件</li><li>.plugins 封装浏览器安装的插件信息的集合</li><li>什么是插件: 为浏览器添加新功能的小程序</li><li>何时: 判断浏览器是否安装了指定的插件: </li><li>navigator.plugins[“完整插件名”]!==undefined 说明安装了</li><li>.userAgent 保存浏览器名称和版本号的字符串</li><li>何时: 只要精确判断浏览器的名称和版本号时</li></ul><h3 id="定时器"><a href="#定时器" class="headerlink" title="**定时器: **"></a>**定时器: **</h3><p>周期性定时器: </p><p>什么是: 让程序每隔一段时间间隔，反复执行一项任务</p><p>如何: 3件事: </p><ol><li>先定义一个任务函数</li><li>启动定时器: 将任务函数放入定时器中反复执行: </li><li>var n=setInterval(任务函数, 间隔ms)</li></ol><p>强调: </p><ol><li>如果定时器可能被停止，则必须在启动是获得定时器的需要n。</li><li>任务函数后，不要加()，因为不是立刻执行，且不止执行一次。</li></ol><p>停止定时器: </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">clearInterval</span>(n) <span class="comment">//停止n号定时器</span></span><br></pre></td></tr></table></figure><p> 一次性定时器: </p><p>什么是: 让程序先等待一段时间后，再延迟执行一项任务</p><p>如何: 3件事</p><ol><li>任务函数</li><li>启动定时器: 开始等待，等待结束后，自动执行一次任务。任务执行后，自动停止。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n=<span class="built_in">setTimeout</span>(任务函数, 等待ms)</span><br></pre></td></tr></table></figure><ol start="3"><li>关闭定时器: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">clearTimeout</span>(n)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line">  &lt;title&gt;倒计时&lt;/title&gt;</span><br><span class="line">  &lt;meta charset=&quot;utf-8&quot;/&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    .pause&#123;</span><br><span class="line">      width:12px; height:25px; background:#fff;</span><br><span class="line">      border:0;</span><br><span class="line">      border-left:2px solid #000;</span><br><span class="line">      border-right:2px solid #000;</span><br><span class="line">    &#125;</span><br><span class="line">    .play&#123;</span><br><span class="line">      width:0; padding:0; height:25px; background:#fff;</span><br><span class="line">      border:12px solid #fff;</span><br><span class="line">      border-left:12px solid #000;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"></span><br><span class="line"> &lt;body&gt;</span><br><span class="line">&lt;h1&gt;</span><br><span class="line">    距离下一个假期还有: &lt;span id=&quot;time&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;button id=&quot;btn&quot; class=&quot;pause&quot;&gt;&lt;/button&gt;</span><br><span class="line">  &lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">function task()&#123;</span><br><span class="line">  var end=new Date(&quot;2019/01/10 17:36:30&quot;);</span><br><span class="line">  var now=new Date();</span><br><span class="line">  var s=parseInt((end-now)/1000);</span><br><span class="line">  if(s==0)&#123;//如果s等于0说明倒计时结束</span><br><span class="line">    clearInterval(n);//就停止定时器</span><br><span class="line">    var span=document.getElementById(&quot;time&quot;)</span><br><span class="line">    span.innerHTML=&quot;过年啦！&quot;;</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    var d=parseInt(s/3600/24);</span><br><span class="line">    if(d&lt;10) d=&quot;0&quot;+d;</span><br><span class="line">    //s/3600/24,再下取整</span><br><span class="line">    var h=parseInt(s%(3600*24)/3600);</span><br><span class="line">    if(h&lt;10) h=&quot;0&quot;+h;</span><br><span class="line">    //s/(3600*24)的余数,再/3600,再下去整</span><br><span class="line">    var m=parseInt(s%3600/60);</span><br><span class="line">    if(m&lt;10) m=&quot;0&quot;+m;</span><br><span class="line">    //s/3600的余数,再/60，再下取整</span><br><span class="line">    s%=60;//s/60的余数</span><br><span class="line">    if(s&lt;10) s=&quot;0&quot;+s;</span><br><span class="line">    //距离下一个假期还有: ?天?小时?分?秒</span><br><span class="line">    var span=document.getElementById(&quot;time&quot;)</span><br><span class="line">    span.innerHTML=d+&quot;天&quot;+h+&quot;小时&quot;+m+&quot;分&quot;+s+&quot;秒&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task();</span><br><span class="line">var n=setInterval(task,1000);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>图片移入移出效果<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#slider</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>:<span class="number">200px</span>; <span class="attribute">height</span>:<span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>:relative;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#555</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#slider</span>&gt;<span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>:absolute; <span class="attribute">top</span>:<span class="number">0</span>; <span class="attribute">left</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">opacity</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transition</span>:all .<span class="number">5s</span> linear;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#slider</span>&gt;<span class="selector-tag">img</span><span class="selector-class">.show</span>&#123;  <span class="attribute">opacity</span>:<span class="number">1</span>;  &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;slider&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;show&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/2.jpg&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/3.jpg&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/4.jpg&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> num=<span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> div=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;slider&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> imgs=div.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;img&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        imgs[num].<span class="property">className</span>=<span class="string">&quot;&quot;</span>;      </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(num==imgs.<span class="property">length</span>-<span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            num=<span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">            imgs[num].<span class="property">className</span>=<span class="string">&quot;show&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            num++;</span></span><br><span class="line"><span class="language-javascript">            imgs[num].<span class="property">className</span>=<span class="string">&quot;show&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setInterval</span>(timer,<span class="number">3000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   function task()&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//     var img=document.getElementsByClassName(&quot;show&quot;)[0];</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//     img.className=&quot;&quot;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//     if(img.nextElementSibling!==null)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//       img.nextElementSibling.className=&quot;show&quot;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//     &#125;else&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//       img.parentElement.children[0].className=&quot;show&quot;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   var n=setInterval(task,1000);</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   var div=document.getElementById(&quot;slider&quot;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   div.onmouseover=function()&#123;             //鼠标进入div时</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//     clearInterval(n);</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   div.onmouseout=function()&#123;              //鼠标移出div时</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//       n=setInterval(task,1000);</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// function task()&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   var img=document.getElementsByClassName(&quot;show&quot;)[0];</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   if(img.nextElementSibling!==null)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//     img.nextElementSibling.className=&quot;show&quot;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   &#125;else&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//     img.parentElement.ch=ildren[0].className=&quot;show&quot;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><ul><li>什么是事件: 浏览器内容或元素状态的变化</li><li>什么是事件处理函数: 当事件发生时，自动调用的函数</li><li>何时: 如果希望事件发生时，能自动执行一项任务</li><li>如何绑定事件处理函数: 3种: </li></ul><ol><li>在HTML中: &lt;ANY on事件名=”处理函数()”</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">js</span>: <span class="keyword">function</span> 处理函数()&#123; ... &#125;</span><br></pre></td></tr></table></figure><p>  <code> 问题: 不符合内容与行为分离的原则，不便于维护</code></p><ol start="2"><li>在js中绑定，赋值方式:</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">elem.<span class="property">on</span>事件名=处理函数;</span><br><span class="line"><span class="keyword">function</span>(<span class="params"></span>)&#123; ... &#125;</span><br></pre></td></tr></table></figure><p>   <code>问题: 一个事件只能绑定一个处理函数</code></p><ol start="3"><li>在js中绑定，添加事件监听对象的方式</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">elem.<span class="title function_">addEventListener</span>(<span class="string">&quot;事件名&quot;</span>,处理函数)</span><br><span class="line"></span><br><span class="line">在elem元素的监听队列中添加一个监听<span class="string">&quot;事件名&quot;</span>的对象，其中包含一个处理函数。</span><br><span class="line"></span><br><span class="line">当elem元素上发生<span class="string">&quot;事件名&quot;</span>时，会遍历监听队列，找到符合条件的处理函数，自动执行处理函数。</span><br><span class="line"></span><br><span class="line">elem.<span class="title function_">removeEventListener</span>(<span class="string">&quot;事件名&quot;</span>,原处理函数)</span><br></pre></td></tr></table></figure><p><code> 强调: 如果一个处理函数有可能被移除时，则绑定时就要用有名称的函数作为处理函数。</code></p><p><code>移除时才能通过函数名找到绑定时使用的原函数</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>...<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnShoot&quot;</span>&gt;</span>shoot<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnAward&quot;</span>&gt;</span>获得跟踪导弹<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnBreak&quot;</span>&gt;</span>失去跟踪导弹<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btnShoot=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btnShoot&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    btnShoot.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发射普通子弹····&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btnAward=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btnAward&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">shoot2</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;发射跟踪导弹=&gt;=&gt;=&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    btnAward.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        btnShoot.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,shoot2);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    btnBreak.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;                        <span class="comment">//如果一个元素有可能被移除不要用匿名函数去定义</span></span></span><br><span class="line"><span class="language-javascript">        btnShoot.<span class="title function_">removeEventListener</span>(<span class="string">&quot;click&quot;</span>,shoot2);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p> **事件模型: 在发生事件时，浏览器的执行过程 分为3个阶段: ** </p><ol><li><p>捕获: 由外向内，记录各级父元素上绑定的处理函数</p></li><li><p>目标触发: 优先触发目标元素上的处理函数: </p><p>​     <code>目标元素: 事件最初实际发生在的元素</code></p></li><li><p>冒泡: 由内向外，依次触发捕获时记录的各级父元素上的处理函数</p></li></ol><p>事件对象: 事件发生时，自动创建的，保存事件信息，并提供操作事件的API  的对象</p><p>何时: 获取事件信息，或修改事件的默认特性时</p><p>获取: 事件对象总是作为处理函数的第一个参数，默认传入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">elem.<span class="property">on</span>事件名=<span class="keyword">function</span>(<span class="params">e</span>)&#123;  e-&gt;event  &#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>事件处理<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/2.css&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d3&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">d1.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;d1:789&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">d2.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">e.<span class="title function_">stopPropagation</span>();</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;d2:456&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">d3.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">e.<span class="title function_">stopPropagation</span>();</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;d3:123&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>因为当事件发生时: elem.on事件名( event )</p><p>API: </p><ol><li>取消冒泡: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">e.<span class="title function_">stopPropagation</span>();</span><br><span class="line"><span class="comment">//停止 蔓</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>利用冒泡: </li></ol><p>优化: 尽量减少事件监听对象的个数</p><p>为什么: 浏览器触发事件是采用遍历的方式找到的监听对象。监听对象多，遍历就慢。</p><p>如何: 如果多个子元素需要绑定相同的事件处理函数时，其实只要在父元素上绑定一次即可。所有子元素共用。</p><p>两个难题: </p><ol><li>获得目标元素: </li></ol><p>​            错误: this -&gt; 父元素</p><p>​            正确: e.target 代替this</p><ol start="2"><li>判断目标元素是否想要的！</li></ol><p>阻止默认行为: e.preventDefault()</p><ol><li>a当按钮用时: 如果href=”#xxx”, 会擅自修改地址栏中的url</li><li>提交按钮: 也能实现自定义提交。</li></ol><p>自定义提交: 2种: </p><ol><li>```js<br>input type=button<br>btn.onclick=function(){ <pre><code>//先验证//如果都验证通过//才form.submit()</code></pre>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. ```js</span><br><span class="line">   input type=submit</span><br><span class="line">   //表单提交过程: </span><br><span class="line">   //点submit按钮-&gt;触发form.onsubmit()-&gt;正式提交</span><br><span class="line">   //先验证</span><br><span class="line">   //如果有一项验证未通过</span><br><span class="line">   //就阻止提交</span><br><span class="line">   </span><br></pre></td></tr></table></figure></li></ol><p><strong>鼠标坐标:</strong> </p><ol><li><p>相对于屏幕左上角: <strong>e.screenX  e.screenY</strong></p></li><li><p>相对于文档显示区左上角: <strong>e.clientX   e.clientY</strong></p></li><li><p>相对于当前事件所在元素左上角的偏移量: <strong>e.offsetX   e.offsetY</strong></p></li><li><p><img src="https://s2.ax1x.com/2019/07/01/Z8zGIx.png" alt="Z8zGIx.png"></p><p class="codepen" data-height="265" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="rEdxJj" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="rEdxJj">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/rEdxJj/">  rEdxJj</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script></li></ol><p><strong>滚动事件:</strong> </p><p>​      //当窗口中的内容发生滚动时，自动执行</p><p>​      window.onscroll=function(){</p><p>​        //获得页面滚动过的距离: 页面顶部超出文档显示区的距离。</p><p>​        var scrollTop=document.body.scrollTop</p><p>​                 ||document.documentElement.scrollTop</p><p>​      }</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>根据页面滚动位置显示浮动框<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span>&#123;<span class="attribute">height</span>:<span class="number">2000px</span>;&#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#toTop</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>:fixed;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">bottom</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">right</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>:none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;toTop&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>返回顶部<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">onscroll</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> scrollTop=<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(scrollTop);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span>(scrollTop&gt;=<span class="number">500</span>&amp;&amp;scrollTop&lt;=<span class="number">1000</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      toTop.<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;block&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">      toTop.<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;none&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES7</title>
      <link href="/2019/06/28/ES7/"/>
      <url>/2019/06/28/ES7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="ES7-预览"><a href="#ES7-预览" class="headerlink" title="ES7 预览"></a>ES7 预览</h2><ul><li>数组<ul><li><code>arr.includes()</code> 数组是否包含某个东西</li><li>数组的 arr.keys(), arr,entries()</li><li>for … in 遍历数组 下标 key</li><li>for … of 遍历数组 值 value, 不能用于json</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">includes</span>(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i) <span class="comment">// 循环的时下标 key</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i) <span class="comment">// 循环的是值 value</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr.<span class="title function_">keys</span>()) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&gt;&#x27;</span>+i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> arr.<span class="title function_">entries</span>()) &#123;<span class="comment">//结构赋值</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&gt;&#x27;</span> + key + value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> json = &#123; <span class="attr">a</span>: <span class="number">12</span>, <span class="attr">b</span>: <span class="number">5</span>, <span class="attr">c</span>: <span class="number">7</span> &#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> json) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>数字<ul><li>求幂  3**8   代表：3的8次方</li></ul></li><li>字符串<ul><li>padStart()/padEnd() 指定宽度，不够就补空格或指定字符</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;=&#x27;</span> + <span class="string">&#x27;abcd&#x27;</span>.<span class="title function_">padStart</span>(<span class="number">6</span>, <span class="string">&#x27;0&#x27;</span>) + <span class="string">&#x27;=&#x27;</span>)<span class="comment">//补几位  第二个参数补什么东西</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;=&#x27;</span> + <span class="string">&#x27;abcd&#x27;</span>.<span class="title function_">padEnd</span>(<span class="number">6</span>, <span class="string">&#x27;0&#x27;</span>) + <span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">=00abcd=</span><br><span class="line">=abcd00=</span><br></pre></td></tr></table></figure><ul><li>容忍度<ul><li>[1, 2, 3,] 老版数组最后不能有逗号，新的可以有</li><li>函数参数最后多的逗号也可以</li></ul></li><li>async await<ul><li>和 generator yield 类似</li><li>generator 不可以写成箭头函数， async 可以</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">await</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript新语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6</title>
      <link href="/2019/06/28/ES6/"/>
      <url>/2019/06/28/ES6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="JavaScript的ES6怎么来的"><a href="#JavaScript的ES6怎么来的" class="headerlink" title="JavaScript的ES6怎么来的"></a>JavaScript的ES6怎么来的</h2><ul><li><p>ECMAScript 和 JavaScript</p><ul><li>ECMA 是标准，JS 是实现</li><li>ECMAScript 简称 ECMA 或 ES</li></ul></li><li><p>历史版本</p><ul><li><p>1996, ES1.0 Netscape 将 JS 提交给 ECMA 组织，ES 正式出现</p></li><li><p>1999, ES3.0 被广泛支持</p></li><li><p>2011, ES5.1 成为 ISO 国际标准</p></li><li><p>2015, ES6.0 正式发布</p><span id="more"></span></li></ul></li></ul><h2 id="ES6兼容性"><a href="#ES6兼容性" class="headerlink" title="ES6兼容性"></a>ES6兼容性</h2><ul><li><p>ES6(ES2015) 支持的环境 IE10+, Chrome, FireFox, 移动端, NodeJS</p></li><li><p>解决不兼容办法，编译、转换</p><ul><li>在线转换</li><li>或者提前编译</li></ul></li><li><p><a href="https://www.babeljs.cn/">Babel 中文网</a></p><ul><li><p><a href="http://www.ruanyifeng.com/blog/2016/01/babel.html">Babel 入门教程 阮一峰</a></p></li><li><p>Babel 是一个 JavaScript 编译器</p></li><li><p>SystemJS是一个体积小的打包工具</p></li><li><p>一个广泛使用的转码器，可以将ES6代码转为ES5代码，从而在现有环境执行</p></li><li><p>现在就用 ES6 编写程序，而不用担心现有环境是否支持</p><ul><li>```html<script src="browser.js"></script><script text/babel>es6等语句</script><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## let和const以及var声明区别</span><br><span class="line"></span><br><span class="line">**变量提升：使用`var`声明变量，变量的创建并不在声明变量的地方，而是会在当前作用域的顶部。**</span><br><span class="line"></span><br><span class="line">如果声明在函数内，则变量的创建则会在函数作用域的顶部；如果声明不在函数内，则会提升到全局作用域的顶部。</span><br><span class="line"></span><br><span class="line">&gt; 示例</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">function getValue(condition)&#123;</span><br><span class="line">if(condition)&#123;</span><br><span class="line">var value = &quot;yes&quot;;</span><br><span class="line">return value;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">//value 在此处可访问，值为 undefined</span><br><span class="line">return null;</span><br><span class="line">&#125;</span><br><span class="line">//value 在此处可访问，值为 undefined</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><p>等价于（var变量提升到当前函数作用域的顶部）：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getValue</span>(<span class="params">condition</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> value;</span><br><span class="line"><span class="keyword">if</span>(condition)&#123;</span><br><span class="line">value = <span class="string">&quot;yes&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//value 在此处可访问，值为 undefined</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//value 在此处可访问，值为 undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>由变量提升会带来循环变量过度共享的问题</p></blockquote><h3 id="let声明"><a href="#let声明" class="headerlink" title="let声明"></a>let声明</h3><p>与var声明变量语法一致，但是let声明变量不会<strong>变量提升</strong>，变量的作用域只会限制在当前代码块中。由于let变量并不会提升到代码块的顶部，因此，要想让整个代码块能给访问到let变量，需要将let声明指定到代码块的顶部。</p><blockquote><p>示例</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getValue</span>(<span class="params">condition</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(condition)&#123;</span><br><span class="line"><span class="keyword">let</span> value = <span class="string">&quot;yes&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//value 在此处不可访问</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//value 在此处不可访问</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><blockquote><p>let变量禁止重复声明：如果一个标识符已经在代码块内部中被定义，那么使用let以同样的标识符声明变量则会报错</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line"><span class="keyword">var</span> count = <span class="number">43</span>；</span><br><span class="line"><span class="keyword">let</span> count; <span class="comment">//重复声明，报错</span></span><br></pre></td></tr></table></figure><h3 id="const声明"><a href="#const声明" class="headerlink" title="const声明"></a>const声明</h3><blockquote><p>const声明基本变量</p></blockquote><p><strong>const声明：使用const声明一个常量，一旦设置之后就不能再被修改，否则会报错。也就是说，使用const声明变量后要立即初始化</strong>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> type;</span><br><span class="line">type=<span class="string">&#x27;TEST&#x27;</span>; <span class="comment">//Uncaught SyntaxError: Missing initializer in const declaration</span></span><br><span class="line"></span><br><span class="line">正确的为：</span><br><span class="line"><span class="keyword">const</span> type=<span class="string">&#x27;TEST&#x27;</span></span><br><span class="line">-----------------------------</span><br><span class="line"><span class="keyword">const</span> type=<span class="string">&#x27;TEST&#x27;</span></span><br><span class="line">type = <span class="string">&#x27;DEBUG&#x27;</span> <span class="comment">//ObjectMethod.html:244 Uncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure><blockquote><p>const声明对象</p></blockquote><p><strong>const只会阻止变量绑定以及变量的修改，但是不会阻止对象成员变量的修改。</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;<span class="attr">name</span>:<span class="string">&#x27;nancy&#x27;</span>&#125;;</span><br><span class="line">person.<span class="property">name</span>= <span class="string">&#x27;nike&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>); <span class="comment">//nike</span></span><br><span class="line">person = &#123;&#125;; <span class="comment">//Uncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure><h3 id="let与const的比较"><a href="#let与const的比较" class="headerlink" title="let与const的比较"></a>let与const的比较</h3><blockquote><p>相同点</p></blockquote><ol><li><p><strong>不存在变量提升</strong>：let与const声明变量都不会存在<strong>变量提升</strong>，都只在块级作用域内，如果试图在代码块外访问let或者const变量都会报错；</p></li><li><p><strong>禁止重复声明</strong>：如果在同一作用域内，禁止let或者const使用以被定义的标识符声明变量；</p></li><li><p><strong>都具有暂时性死区（temporal dead zone，TDZ ）</strong>：使用let或者const声明变量，如果在声明处之前访问变量会报错。在变量当前作用域的块内，变量声明处之前被称之为TDZ。</p></li><li><p><strong>不会覆盖全局对象上的属性</strong>：let变量或者const变量会在全局作用域上创建新的变量，但是不会绑定到全局对象上（浏览器则是window对象），而var变量在全局作用域上会绑定到全局对象，也就是说，var全局变量可能会无意覆盖掉全局对象上的一些属性。</p><p>var RegExp = ‘hello’;</p><pre><code>console.log(window.RegExp);        //hello</code></pre><h2 id="console-log-window-RegExp-RegExp-RegExp覆盖掉window对象中的RegExp属性"><a href="#console-log-window-RegExp-RegExp-RegExp覆盖掉window对象中的RegExp属性" class="headerlink" title="console.log(window.RegExp===RegExp); //RegExp覆盖掉window对象中的RegExp属性"></a>console.log(window.RegExp===RegExp); //RegExp覆盖掉window对象中的RegExp属性</h2><p>​    let RegExp = ‘hello’;<br>​    console.log(window.RegExp);<br>​    console.log(window.RegExp===RegExp); //false</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getValue</span>(<span class="params">condition</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(condition)&#123;</span><br><span class="line"><span class="comment">//value的TDZ</span></span><br><span class="line"><span class="keyword">let</span> value = <span class="string">&quot;yes&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>不同点</p></blockquote><ol><li><p>const不能再赋值，let声明的变量可以重复赋值;</p><p>​    </p></li></ol><h3 id="块级绑定的使用场景"><a href="#块级绑定的使用场景" class="headerlink" title="块级绑定的使用场景"></a>块级绑定的使用场景</h3><ol><li><p>循环内的let声明</p><p>在循环中使用var变量，由于var变量存在变量提升，每次迭代共享同一个var变量。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">//输出5</span></span><br><span class="line">&#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">//输出5</span></span><br></pre></td></tr></table></figure><blockquote><p>解决方法：将var变量改为let变量</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将var改成let之后</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i) <span class="comment">// 0,1,2,3,4</span></span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i)<span class="comment">//Uncaught ReferenceError: i is not defined i无法污染外部函数</span></span><br></pre></td></tr></table></figure><p>let变量不会变量提升，let变量作用域不会逃离出for循环外，因此不会污染外部函数。而在for循环中也不会每次迭代都共享同一变量，而是会分别使用let变量副本。</p></li><li><p>循环内const声明</p><p>在普通的for循环中使用const变量，由于const变量不可修改，因此会报错。而在for-in或者for-of循环中可以使用const变量。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3,4];</span><br><span class="line">for(const item of arr)&#123;</span><br><span class="line">console.log(item); //输出1,2,3,4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.var变量提升</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getValue</span>(<span class="params">condition</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(condition)&#123;</span><br><span class="line"><span class="comment">//value的TDZ</span></span><br><span class="line"><span class="keyword">let</span> value = <span class="string">&quot;yes&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getValue</span>(<span class="literal">false</span>));</span><br><span class="line"><span class="keyword">const</span> type=<span class="string">&#x27;TEST&#x27;</span></span><br><span class="line">type = <span class="string">&#x27;DEBUG&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(type);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.const声明对象，可以修改成员</span></span><br><span class="line"><span class="keyword">const</span> person = &#123;<span class="attr">name</span>:<span class="string">&#x27;nancy&#x27;</span>&#125;;</span><br><span class="line">person.<span class="property">name</span>= <span class="string">&#x27;nike&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>);</span><br><span class="line">person = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.const变量可以用于for-in和for-of循环</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> arr)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//let和const变量不会覆盖全局对象上的属性</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">RegExp</span> = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">RegExp</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">RegExp</span>===<span class="title class_">RegExp</span>);</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ol><li>let和const变量都不会进行提升，并且只会在声明它们的代码块内部存在。由于变量能够在必要位置被准确声明，其表现更加接近其他语言；</li><li>块级绑定存在暂时性死区（TDZ ） ，试图在声明位置之前访问它就会导致错误；</li><li>let 与 const 的表现在很多情况下都相似于 var ，然而在循环中就不是这样。在 for-in<br>与 for-of 循环中， let 与 const 都能在每一次迭代时创建一个新的绑定，这意味着在循环体内创建的函数可以使用当前迭代所绑定的循环变量值（而不是像使用 var 那样，共享同一变量值）。同时在基础的for循环中，使用const变量会出错。</li></ol><p><strong>最佳实践</strong>：在默认情况下使用 const ，而只在你知道变量值需要被更改的情况下才使用 let 。</p><h2 id="字符串处理方法"><a href="#字符串处理方法" class="headerlink" title="字符串处理方法"></a>字符串处理方法</h2><blockquote><p>codePointAt()方法</p></blockquote><p>ES6 为全面支持 UTF-16 而新增的方法之一是 <code>codePointAt(</code>) ，它可以在给定字符串中按位<br>置提取 <code>Unicode</code> 代码点。该方法接受的是码元位置而非字符位置，并返回一个整数值。</p><blockquote><p>String.fromCodePoint()方法</p></blockquote><p>可以使用<code>codePointAt()</code> 来提取字符串内中某个字符的代码点，也可以借助 <code>String.fromCodePoint()</code>用给定的代码点来产生包含单个字符的字符串</p><blockquote><p>normalize()方法</p></blockquote><p>Unicode 另一个有趣之处是，不同的字符在排序或其它一些比较操作中可能会被认为是相同<br>的。有两种方式可以定义这种关联性：第一种是<strong>规范相等性</strong>（canonical equivalence ） ，<br>意味着两个代码点序列在所有方面都被认为是可互换的。例如，两个字符的组合可以按规范<br>等同于另一个字符。第二种<strong>关联性是兼容性</strong>（compatibility ） ，两个兼容的代码点序列看起<br>来有差别，但在特定条件下可互换使用。</p><p>ES6 给字符串提供了** normalize()** 方法，以支持 Unicode 标准形式。因此，在比较字符时，可以先将字符用同一种标准化方法，让它们标准化，再进行比较，例如，比较字符数组中的大小：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> compare = <span class="keyword">function</span>(<span class="params">values=[]</span>)&#123;</span><br><span class="line">values.<span class="title function_">sort</span>(<span class="function">(<span class="params">first,second</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">let</span> firstNormalized = first.<span class="title function_">normalize</span>();</span><br><span class="line"><span class="keyword">let</span> secondNormalized = second.<span class="title function_">normalize</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (firstNormalized &lt; secondNormalized) &#123;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (firstNormalized === secondNormalized) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;z&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"><span class="title function_">compare</span>(arr);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);<span class="comment">//[&quot;a&quot;, &quot;c&quot;, &quot;g&quot;, &quot;z&quot;]</span></span><br></pre></td></tr></table></figure><blockquote><p>识别子字符串的方法</p></blockquote><p>为了识别字符串是否存在于其他字符串中，ES6提供了相应的方法来满足这类需求：</p><ul><li>includes()方法：在给定文本存在于字符串中的任意位置时会返回 <code>true</code>，否则会返回 <code>false</code>；</li><li>startsWith() 方法：在给定文本出现在字符串起始处时返回 <code>true</code> ，否则返回 <code>false</code> ；</li><li>endsWith() 方法：在给定文本出现在字符串结尾处时返回 <code>true</code> ，否则返回 <code>false</code> 。</li></ul><p>每个方法都接受两个参数：需要搜索的文本，以及可选的搜索起始位置索引。当提供了第二<br>个参数时， <code>includes()</code> 与 <code>startsWith() </code>方法会从该索引位置开始尝试匹配；当第二个参数未提供时， <code>includes()</code> 与 <code>startsWith(</code>) 方法会从字符串起始处开始查找，而 <code>endsWith() </code>方法则从尾部减去第二个参数后的位置作为起始位置。</p><blockquote><p>repeat()方法</p></blockquote><p>ES6 还为字符串添加了一个 repeat() 方法，它接受一个参数作为字符串的重复次数，返回一个将初始字符串重复指定次数的新字符串。例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//repeat()方法</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;x&#x27;</span>.<span class="title function_">repeat</span>(<span class="number">3</span>)); <span class="comment">//xxx</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>.<span class="title function_">repeat</span>(<span class="number">2</span>)); <span class="comment">//hello worldhello world</span></span><br></pre></td></tr></table></figure><h3 id="模板字面量"><a href="#模板字面量" class="headerlink" title="模板字面量"></a>模板字面量</h3><blockquote><p>基本语法</p></blockquote><p>模板字面量的最简单语法，是使用反引号<code>（ </code> ）` 来包裹普通字符串，而不是用双引号或单引号，例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模板字面量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span>  message = <span class="string">`hello world`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message); <span class="comment">//hello world</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> message); <span class="comment">//string</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message.<span class="property">length</span>); <span class="comment">//1</span></span><br></pre></td></tr></table></figure><p>若想字符串中包含反引号，可以使用反斜杠<code>（\）</code>进行转义即可：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span>  message = <span class="string">`\`hello world\``</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message); <span class="comment">//`hello world`</span></span><br></pre></td></tr></table></figure><blockquote><p>多行字符串</p></blockquote><p>使用模板字面量可以轻松创建多行字符串，例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> message = <span class="string">`hello</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">world`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span><br><span class="line">输出：</span><br><span class="line">hello</span><br><span class="line"></span><br><span class="line">world</span><br></pre></td></tr></table></figure><blockquote><p>替换位</p></blockquote><p><strong>替换位可以嵌入到模板字面量中，替换位最终可以转换为字符串的一部分输出。替换位可以是任意的js表达式。</strong>替换位的语法采用 <code>$&#123;&#125;</code> 表示。</p><p>例如，替换位为变量：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> msg = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> message = <span class="string">`<span class="subst">$&#123;msg&#125;</span> world`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message); <span class="comment">//hello world</span></span><br></pre></td></tr></table></figure><p><strong>替换位不仅仅可以是简单的变量，还可以嵌入计算表达式、函数调用等，甚至还可以将模板字面量作为替换位嵌入到另一个模板字面量中。</strong></p><h3 id="模板标签"><a href="#模板标签" class="headerlink" title="模板标签"></a>模板标签</h3><p>一个<strong>模板标签</strong>（template tag ） 能对模板字面量进行转换并返回最终的字符串值，标签在模板的起始处被指定，即在第一个 ` 之前。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let message = tag`Hello world`;</span><br></pre></td></tr></table></figure><p> <code>tag</code> 就是会被应用到 <code>Hello world</code> 模板字面量上的模板标签。</p><blockquote><p>定义标签</p></blockquote><p>一个标签（tag ） 仅是一个函数，它被调用时接收需要处理的模板字面量数据。标签所接收的数据被划分为独立片段，并且必须将它们组合起来以创建结果。第一个参数是个数组，包含被 JS 解释过的字面量字符串，随后的参数是每个替换位的解释值。</p><p>标签函数的参数一般定义为剩余参数形式，以便更容易处理数据，如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">tag</span>(<span class="params">literals, ...substitutions</span>) &#123;</span><br><span class="line"><span class="comment">// 返回一个字符串</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>使用模板字面量中的原始值</p></blockquote><p><strong>模板标签也能访问字符串的原始信息，主要指的是可以访问字符在转义之前的形</strong>式。获取原始字符串值的最简单方式是使用内置的 <code>String.raw()</code> 标签。例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> message1 = <span class="string">`Multiline\nstring`</span>,</span><br><span class="line">message2 = <span class="title class_">String</span>.<span class="property">raw</span><span class="string">`Multiline\nstring`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message1); <span class="comment">// &quot;Multiline</span></span><br><span class="line">   <span class="comment">// string&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message2); <span class="comment">// &quot;Multiline\nstring&quot;</span></span><br></pre></td></tr></table></figure><h3 id="正则表达式的改动"><a href="#正则表达式的改动" class="headerlink" title="正则表达式的改动"></a>正则表达式的改动</h3><ol><li><p>正则表达式<code>u</code>标识：你可以使用正则表达式来完成字符串的很多通用操作。但要记住，正则表达式假定单个字符使用一个 16 位的码元来表示。为了解决这个问题， ES6 为正则表达式定义了用于处理Unicode 的 <code>u</code> 标志。当一个正则表达式设置了 <code>u </code>标志时，它的工作模式将切换到针对字符，而不是针对码元。</p></li><li><p>正则表达的<code>y</code>标志： <code>y</code> 标志影响正则表达式搜索时的粘连（ <code>sticky</code> ） 属性，它表示从正则表达式的 lastIndex 属性值的位置开始检索字符串中的匹配字符。如果在该位置没有匹配成功，那么正则表达式将停止检索；</p></li><li><p>复制正则表达式：使用RegExp构造器时允许使用第二个参数，并且让它覆盖第一个参数中的标志；</p></li><li><p>flag属性：ES6 新增了 flags 属性用于配合 source 属性，让标志的获取变得更容易。例如：</p><p>var re = /ab/g;</p><pre><code>console.log(re.source); // abconsole.log(re.flags); // g</code></pre><p>本例查找了 re 的所有标志并将其打印到控制台，所用的代码量要比 <code>toString()</code> 方式少得多。同时使用 <code>source</code> 和 <code>flags</code> 允许你直接提取正则表达式的组成部分，而不必将正则表达式转换为字符串。</p></li></ol><h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//codePointAt()</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// var text = &quot;a&quot; ;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(text.charCodeAt(0)); // 55362</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(text.charCodeAt(1)); // 57271</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(text.charCodeAt(2)); // 97</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(text.codePointAt(0)); // 134071</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(text.codePointAt(1)); // 57271</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(text.codePointAt(2)); // 97</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//normalize()方法</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let compare = function(values=[])&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// values.sort((first,second)=&gt;&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let firstNormalized = first.normalize();</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let secondNormalized = second.normalize();</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// if (firstNormalized &lt; secondNormalized) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// return -1;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// &#125; else if (firstNormalized === secondNormalized) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// return 0;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// &#125; else &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// return 1;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let arr = [&#x27;a&#x27;,&#x27;z&#x27;,&#x27;c&#x27;,&#x27;g&#x27;];</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// compare(arr);</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(arr);//[&quot;a&quot;, &quot;c&quot;, &quot;g&quot;, &quot;z&quot;]</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// //repeat()方法</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(&#x27;x&#x27;.repeat(3)); //xxx</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(&#x27;hello world&#x27;.repeat(2)); //hello worldhello world</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//模板字面量</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let  message = `\`hello world\``;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(message); //`hello world`</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(typeof message); //string</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(message.length); //1</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let message = `hello</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// world`;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(message);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//模板字面量</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let msg = &#x27;hello&#x27;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let message = `$&#123;msg&#125; world`;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(message); //hello world</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let message1 = `Multiline\nstring`,</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// message2 = String.raw`Multiline\nstring`;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(message1); // &quot;Multiline</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//    // string&quot;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// console.log(message2); // &quot;Multiline\nstring&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> re = <span class="regexp">/ab/g</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(re.<span class="property">source</span>); <span class="comment">// ab</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(re.<span class="property">flags</span>); <span class="comment">// g</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="函数相关"><a href="#函数相关" class="headerlink" title="函数相关"></a>函数相关</h2><ol><li><p>函数参数默认值</p><p>let defaultFunc = function(url,tomeout=2000,callback={}){};</p><pre><code>    //使用默认的timeout和callback    defaultFunc(&#39;/url&#39;);    //使用默认的callback    defaultFunc(&#39;/url&#39;,100);    //使用指定的timeout和callback    defaultFunc(&#39;/url&#39;,100,function(body)&#123;        doSomething(body);    &#125;)</code></pre><blockquote><p>函数参数默认值的指定顺序可以随意</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//需要指定默认参数的可选参数timeout，排在callback</span><br><span class="line">let defaultFunc = function(url,tomeout=2000,callback)&#123;&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>只有在未传递参数，或者参数为undefined时，才会使用默认参数，null值被认为是有效的</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//null被认为是有效的，不会使用timeout的默认值</span><br><span class="line">defaultFunc(&#x27;/url&#x27;,null,function(body)&#123;</span><br><span class="line">doSomething(body);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>函数参数默认值表达式</p><p>除了直接使用具体值赋给函数参数默认值外，函数参数默认值还可以有表达式构成。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function getValue()&#123;return 5&#125;;</span><br><span class="line">function test(a,b=getValue())&#123;</span><br><span class="line">return a+b;</span><br><span class="line">&#125;</span><br><span class="line">//调用getValue</span><br><span class="line">console.log(test(1)); //6</span><br><span class="line">//不使用b的默认值s</span><br><span class="line">console.log(test(1,2)); //3</span><br></pre></td></tr></table></figure><blockquote><p><strong>可以使用前面的参数，来作为后面参数的默认值。前面的参数默认值不能引用后面的参数值</strong></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function add(a,b=1)&#123;return a+b&#125;;  </span><br><span class="line">console.log(add(1,1));  //2</span><br><span class="line">function addition(a=b,b)&#123;return a+b&#125;;</span><br><span class="line">console.log(addition(undefined,1)); //Uncaught ReferenceError: b is not defined</span><br></pre></td></tr></table></figure><blockquote><p>函数参数默认值存在暂时性死区（TDZ），在函数参数默认值表达式中，还未初始化赋值的参数值无法作为其他参数的默认值 </p></blockquote></li><li><p>函数参数默认值对arguments对象的影响</p><ul><li><p>ES5中，在非严格模式下，arguments对象能够反映出具名参数的变化，当具名参数值更新的时候，arguments对象中相应的元素值也会更新。在严格模式下不能反映出具名参数的变化</p><p>function testArgs(a,b){</p><pre><code>    console.log(a===arguments[0]); //true    console.log(b===arguments[1]); //true    a=&#39;c&#39;;    b=&#39;d&#39;;    console.log(a===arguments[0]); //true    console.log(b===arguments[1]); //true&#125;testArgs(&#39;a&#39;,&#39;b&#39;);</code></pre></li><li><p>在ES6中，参数默认值与arguments对象分离，即被赋予参数默认值的参数无法从arguments对象中获取。另外，无论是非严格模式下，还是在严格模式下，具名参数的更改都不会在arguments对象中更新。  </p></li></ul></li></ol><h3 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h3><p>ES6中，当参数个数无法确定时，可以使用剩余参数（rest parameter）来表示，剩余参数就相当于一个容器，调用函数时传入几个参数值，这个容器就装载几个参数值。剩余参数能够将多个独立的参数合并到一个数组中去，剩余参数表示为<code>...keys</code>,有三个点加上一个具名参数标识符组成。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">rp</span>(<span class="params">...keys</span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(keys.<span class="property">length</span>)&#125;</span><br><span class="line"><span class="title function_">rp</span>(<span class="number">1</span>,<span class="number">2</span>); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><blockquote><p>具名参数只能放在参数组最后面，并且只能有且仅有一个剩余参数。剩余参数不能作为对象字面量的setter属性</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person =&#123;</span><br><span class="line"><span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">...names</span>); <span class="comment">//Setter function argument must not be a rest parameter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>在Function构造器中能够将函数体以字符串的形式作为函数的参数，并且支持参数默认值以及剩余参数</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&quot;first&quot;</span>,<span class="string">&quot;second&quot;</span>,<span class="string">&quot;return first+second&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">1</span>,<span class="number">1</span>)); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><h3 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h3><p>扩展运算符能够将数组分离，将分割后单独的参数值传递给函数，能够替代apply()方法的使用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="number">0</span>,...[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]));  <span class="comment">//0</span></span><br></pre></td></tr></table></figure><h3 id="new-target属性"><a href="#new-target属性" class="headerlink" title="new.target属性"></a>new.target属性</h3><p>能够使用<code>new.target</code>属性来判断函数是否利用<code>new</code>来进行调用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">target</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">new</span>.<span class="property">target</span>!==<span class="string">&#x27;undefined&#x27;</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;通过new来调用&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;不是通过new来调用&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="块级函数"><a href="#块级函数" class="headerlink" title="块级函数"></a>块级函数</h3><p>在代码块中能够声明函数，函数也被称之为<strong>块级函数</strong>，在严格模式下，块级函数会提升到当前所处代码块的顶部，在整个代码块中都能够被访问，在代码块外的地方就不能被访问。而在非严格模式下，块级函数会被提升到全局作用域。</p><h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><p>箭头函数提供了一种更加简洁的函数书写方式，并且与传统函数有很多不同的地方。箭头函数基本的语法为：<code>参数 =&gt; 函数体</code>。</p><p>根据参数的个数以及函数体的行数有多种变形：</p><ol><li>无参数时，可以使用圆括号()表示；当只有一个参数时可以省略圆括号()；当有多个参数时可以使用圆括号包裹，并参数之间用逗号进行分隔；</li><li>当函数体有多行语句时，使用大括号{}包裹起来，就像写正常的函数一样；当只有一行语句时，并需要返回结果时，可以省去大括号{}，结果会自动返回。</li><li>如果需要返回对象的话，需要使用圆括号()将对象包裹起来，为了防止对象字面量被认为是函数体语句。</li></ol><p>箭头函数的特性：</p><ol><li><p>没有this、super、arguments，new.target绑定：this、super、arguments以及内部函数的new.target的值由所在的最近的外部非箭头函数来决定；</p></li><li><p>没有arguments对象绑定，但是能够访问包含它的外部函数的arguments对象；</p><p>let outer = function(arg){</p><pre><code>    return ()=&gt;arguments[0];&#125;let inner = outer(7);console.log(inner()) //7</code></pre></li><li><p>不能使用new来调用：箭头函数没有[[Construct]]方法，因此不能被用为构造函数，使用new调用函数会抛出错误；</p></li><li><p>没有原型：没有使用new，因此没有prototype属性；</p></li><li><p>不能修改this：不能通过call(),apply()以及bind()方法修改this；</p></li><li><p>不允许使用重复的具名参数：箭头函数不允许拥有重复的具名参数，无论是否在严格模式下；而传统函数只有在严格模式下才禁止使用重复的具名参数；</p></li></ol><h3 id="尾调用优化"><a href="#尾调用优化" class="headerlink" title="尾调用优化"></a>尾调用优化</h3><p>尾调用是指在一个函数内最后的语句调用了另外一个函数，这个函数会重新创建新的栈帧并置于调用栈之上，如果调用次数过多，会导致内存过大。当满足以下条件时，执行引擎会针对尾调用进行优化，不再重新创建新的栈帧，而是会复用当前栈帧：</p><ol><li><p>尾调用不能引用当前栈帧中的变量；</p></li><li><p>进行尾调用的函数在尾调用返回结果后不能做额外任何操作；</p></li><li><p>尾调用的结果作为当前函数的返回值；</p><p>//尾递归优化</p><pre><code>&#39;use strict&#39;</code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//满足尾调用优化条件</span></span><br><span class="line"><span class="keyword">return</span> <span class="title function_">doElse</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">let</span> tmp = <span class="title function_">doElse</span>();</span><br><span class="line"><span class="comment">//尾调用函数结果没有直接返回，因此不满足</span></span><br><span class="line"><span class="comment">//尾调用优化条件</span></span><br><span class="line"><span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//尾调用函数后有其他额外操作，结果没有</span></span><br><span class="line"><span class="comment">//立即返回，因此不满足尾调用优化条件</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>+<span class="title function_">doElse</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>由于闭包会持有外部函数的变量，因此对闭包的尾调用优化很难处理，但是，在递归操作中，可以利用到尾调用优化，减少栈帧个数，降低内存。</p><h3 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//函数参数默认值</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> defaultFunc = <span class="keyword">function</span>(<span class="params">url,tomeout=<span class="number">2000</span>,callback=&#123;&#125;</span>)&#123;&#125;;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defaultFunc</span>(<span class="string">&#x27;/url&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defaultFunc</span>(<span class="string">&#x27;/url&#x27;</span>,<span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defaultFunc</span>(<span class="string">&#x27;/url&#x27;</span>,<span class="number">100</span>,<span class="keyword">function</span>(<span class="params">body</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">doSomething</span>(body);</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//ES5非严格模式下具名参数对arguments对象的影响</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">testArgs</span>(<span class="params">a,b</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(a===<span class="variable language_">arguments</span>[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(b===<span class="variable language_">arguments</span>[<span class="number">1</span>]);</span></span><br><span class="line"><span class="language-javascript">a=<span class="string">&#x27;c&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">b=<span class="string">&#x27;d&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(a===<span class="variable language_">arguments</span>[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(b===<span class="variable language_">arguments</span>[<span class="number">1</span>]);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">testArgs</span>(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//函数参数默认值表达式</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getValue</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="number">5</span>&#125;;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">a,b=getValue()</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> a+b;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">test</span>(<span class="number">1</span>));</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">test</span>(<span class="number">1</span>,<span class="number">2</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a,b=<span class="number">1</span></span>)&#123;<span class="keyword">return</span> a+b&#125;;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">1</span>,<span class="number">1</span>));</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">addition</span>(<span class="params">a=b,b</span>)&#123;<span class="keyword">return</span> a+b&#125;;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">addition</span>(<span class="literal">undefined</span>,<span class="number">1</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">rp</span>(<span class="params">...keys</span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(keys.<span class="property">length</span>)&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">rp</span>(<span class="number">1</span>,<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> person =&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">...names</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> add = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&quot;first&quot;</span>,<span class="string">&quot;second&quot;</span>,<span class="string">&quot;return first+second&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">1</span>,<span class="number">1</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//扩展运算符</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="number">0</span>,...[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//new.target属性</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">target</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span>(<span class="keyword">new</span>.<span class="property">target</span>!==<span class="string">&#x27;undefined&#x27;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;通过new来调用&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;不是通过new来调用&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> test = <span class="keyword">new</span> <span class="title function_">target</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//箭头函数没有arguments对象绑定</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> outer = <span class="keyword">function</span>(<span class="params">arg</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> <span class="function">()=&gt;</span><span class="variable language_">arguments</span>[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> inner = <span class="title function_">outer</span>(<span class="number">7</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">inner</span>());</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//尾递归优化</span></span></span><br><span class="line"><span class="language-javascript"><span class="string">&#x27;use strict&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//满足尾调用优化条件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> <span class="title function_">doElse</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> tmp = <span class="title function_">doElse</span>();</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//尾调用函数结果没有直接返回，因此不满足</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//尾调用优化条件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> tmp;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//尾调用函数后有其他额外操作，结果没有</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//立即返回，因此不满足尾调用优化条件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> <span class="number">1</span>+<span class="title function_">doElse</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="对象类别"><a href="#对象类别" class="headerlink" title="对象类别"></a>对象类别</h2><p>对象有以下几种类别：</p><ul><li>普通对象：拥有JS对象所有默认的内部行为；</li><li>奇异对象：其内部行为在某些方面有别于默认行为；</li><li>标准对象：在ES6中被定义的对象，例如Array,Date等；</li><li>内置对象：在脚本开始运行的时候由JS运行环境提供的对象，所有的标准对象都是内置对象</li></ul><h3 id="对象字面量语法的扩展"><a href="#对象字面量语法的扩展" class="headerlink" title="对象字面量语法的扩展"></a>对象字面量语法的扩展</h3><blockquote><p>属性初始化的速记法</p></blockquote><p>属性初始化器的速记法可以用来消除属性名和本地变量的重复情况，可以使用作用域内的变量值赋值给同名属性：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createPerson</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">name</span>:name,</span><br><span class="line"><span class="attr">age</span>:age</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//由于属性名和本地变量名相同，可以采用</span></span><br><span class="line"><span class="comment">//属性初始化器的速记法，等价于</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createPerson</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">name,</span><br><span class="line">age</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>方法简写</p></blockquote><p>在对象字面量的写法中，为一个对象添加一个方法，需要指定对象的属性以及具体的函数声明。ES6提供了一种方法简写语法，通过省略function关键字，能够让为对象添加方法的语法更加简洁。有一个重要的区别是：**方法简写能够使用<code>super</code>，而非简写的方法不能使用<code>super</code>**。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法简写法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="attr">sayName</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="title function_">sayName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><blockquote><p>需计算属性名</p></blockquote><p>需计算属性名规则允许对象字面量中属性名是变量、字符串字面量或者由变量计算而得的，具体写法是通过方括号[]包含属性名。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需计算属性名</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> firstName = <span class="string">&#x27;first name&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> suffix = <span class="string">&#x27;@github.com&#x27;</span></span><br><span class="line"><span class="keyword">let</span> email = <span class="string">&#x27;email&#x27;</span>;</span><br><span class="line"><span class="comment">//变量</span></span><br><span class="line">person[firstName] = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="comment">//字符串字面量</span></span><br><span class="line">person[<span class="string">&#x27;last name&#x27;</span>]= <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line"><span class="comment">//变量计算而得到的</span></span><br><span class="line">person[email+suffix] = <span class="string">&#x27;example@github.com&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>Object.is()</p></blockquote><p>JS中比较两个值是否相同的时候会使用严格等于运算符<code>===</code>，但是，使用严格运算符式，+0和-0会认为这两者是相等的，而<code>NaN===NaN</code>是不相等的，使用Object.is()方法来判断这两者情况与使用严格相等符会有所不同，其他情况和使用严格相等运算符基本一致；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="number">0</span>==-<span class="number">0</span>);  <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="number">0</span>===-<span class="number">0</span>); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(+<span class="number">0</span>,-<span class="number">0</span>)); <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span>==<span class="title class_">NaN</span>); <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span>===<span class="title class_">NaN</span>); <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(<span class="title class_">NaN</span>,<span class="title class_">NaN</span>)); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>==<span class="string">&#x27;5&#x27;</span>); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>===<span class="string">&#x27;5&#x27;</span>); <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(<span class="number">5</span>,<span class="string">&#x27;5&#x27;</span>)) <span class="comment">//false</span></span><br></pre></td></tr></table></figure><blockquote><p>Object.assign()</p></blockquote><p>一个对象从另外一个对象获取属性和方法，这是典型的混入（Mixin）模式，Object.assign()方法可以更简洁的实现对象混入，该方法需要一个接受者对象和若干个供应者对象。接收者会按照供应者在参数中的顺序来依次接收它们的属性，这意味着，第二个供应者可能会覆盖第一个供应者相同的属性；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person=&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> car =&#123;</span><br><span class="line"><span class="attr">brand</span>:<span class="string">&#x27;BWM&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(obj,person,car);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">//&#123;name: &quot;hello&quot;, age: 5, brand: &quot;BWM&quot;&#125;</span></span><br></pre></td></tr></table></figure><p>Object.assign()方法并未在接受者上创建访问器属性，即使供应者拥有访问器属性，由于Object.assign()方法使用赋值运算符，供应者的访问器属性会转换成接受者的数据属性；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> receiver = &#123;&#125;,</span><br><span class="line">supplier = &#123;</span><br><span class="line"><span class="keyword">get</span> <span class="title function_">name</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;file.js&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(receiver, supplier);</span><br><span class="line"><span class="keyword">let</span> descriptor = <span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptor</span>(receiver, <span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(descriptor.<span class="property">value</span>); <span class="comment">// &quot;file.js&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(descriptor.<span class="property">get</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><blockquote><p>允许重复的属性</p></blockquote><p>在ES5严格模式下，为对象字面量中属性会检查是否重复，如果重复的话就会抛出一个错误。而在ES6中，无论是在严格模式下还是非严格模式下，都不再检查属性是否重复，当属性重复的时候，后面的属性会覆盖前面的属性；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重复的属性</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;world&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>); <span class="comment">//world</span></span><br></pre></td></tr></table></figure><p>​        </p><blockquote><p>自有属性的枚举顺序</p></blockquote><p>ES6规定了自有属性的枚举顺序，会依次按照数字类型键-&gt;字符串类型键-&gt;符号类型键的枚举顺序：</p><ol><li>所有的数字类型键，按升序排列；</li><li>所有的字符串类型键，按被添加到对象的顺序排列；</li><li>所有的符号类型，也按添加顺序排列</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自有属性的枚举顺序</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line"><span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line"><span class="number">0</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">c</span>: <span class="number">1</span>,</span><br><span class="line"><span class="number">2</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">b</span>: <span class="number">1</span>,</span><br><span class="line"><span class="number">1</span>: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line">obj.<span class="property">d</span> = <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertyNames</span>(obj).<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>));<span class="comment">//012acbd</span></span><br></pre></td></tr></table></figure><h3 id="更强大的原型"><a href="#更强大的原型" class="headerlink" title="更强大的原型"></a>更强大的原型</h3><blockquote><p>修改对象原型</p></blockquote><p>在ES6中可以通过Object.setPrototypeOF()方法修改对象的原型，该方法包含了两个参数：一个是被修改原型的对象，一个是将被指定的原型；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="title function_">getName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> dog =&#123;</span><br><span class="line"><span class="title function_">getName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> friend = <span class="title class_">Object</span>.<span class="title function_">create</span>(person); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(friend.<span class="title function_">getName</span>()); <span class="comment">//hello</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getPrototypeOf</span>(friend)===person); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(friend,dog); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(friend.<span class="title function_">getName</span>()); <span class="comment">//world</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getPrototypeOf</span>(friend)===dog); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><blockquote><p>使用super引用</p></blockquote><p>能够使用<code>super</code>引用，来访问原型中的方法，假如需要覆盖对象中的同名方法可以这样做：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="title function_">getName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> dog =&#123;</span><br><span class="line"><span class="title function_">getName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">getName</span>()+<span class="string">&#x27; world;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">​</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(dog,person);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog.<span class="title function_">getName</span>()); <span class="comment">//hello world</span></span><br></pre></td></tr></table></figure><p><strong>如果使用super引用的话，只能在方法简写中才能使用，否则就会报错：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dog =&#123;</span><br><span class="line"><span class="attr">getNanem</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">getName</span>()+<span class="string">&#x27; world&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">报错：<span class="title class_">Uncaught</span> <span class="title class_">SyntaxError</span>: <span class="string">&#x27;super&#x27;</span> keyword unexpected here</span><br></pre></td></tr></table></figure><blockquote><p>方法定义</p></blockquote><p>在ES6之前，方法的概念从未被正式定义，而在ES6中做出了正式定义：方法是拥有一个[[HomeObject]]内部属性的函数，此内部属性指向该方法所属的对象；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="title function_">getName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//不是方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;hello world&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><p>ES6通过对对象功能的扩展，让ES6更加简单易用和更加强大，在对象功能上具体有这样一些改进：</p><p><strong>针对对象字面量：</strong></p><ol><li>速记法属性能够更加轻易的将作用域内的变量值赋值给同名属性；</li><li>需计算属性名规则能够更方便的将，变量、字符串字面量以及通过变量计算的结果作为属性；</li><li>方法简写法能够省略function关键字以及冒号：，让方法的定义更加简洁；</li><li>舍弃了重复属性的检查，让后面的属性覆盖掉前面同名属性的属性值；</li><li>指定了数字类型键-&gt;字符串类型键-&gt;符号类型键的对象自有属性的枚举顺序。</li></ol><p><strong>针对对象原型：</strong></p><ol><li>Object.assign()方法能够将多个提供者对象的属性整合到接受者对象中，能够方便实现对象的混入模式；</li><li>Object.is()方法在处理特殊值时比严格比较符更加安全；</li><li>Object.setPrototypeOf()方法能够更加方便更改一个对象的原型；</li><li>提供super关键字，访问原型上的方法。</li></ol><h3 id="案例-3"><a href="#案例-3" class="headerlink" title="案例"></a>案例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//属性构造器的速记法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createPerson</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">name,</span><br><span class="line">age</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">createPerson</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">18</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法简写法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="attr">sayName</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="title function_">sayName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">需计算属性名</span><br><span class="line"><span class="keyword">let</span> person = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> firstName = <span class="string">&#x27;first name&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> suffix = <span class="string">&#x27;@github.com&#x27;</span></span><br><span class="line"><span class="keyword">let</span> email = <span class="string">&#x27;email&#x27;</span>;</span><br><span class="line"><span class="comment">//变量</span></span><br><span class="line">person[firstName] = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="comment">//字符串字面量</span></span><br><span class="line">person[<span class="string">&#x27;last name&#x27;</span>]= <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line"><span class="comment">//变量计算而得到的</span></span><br><span class="line">person[email+suffix] = <span class="string">&#x27;example@github.com&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">is</span>()方法</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="number">0</span>==-<span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="number">0</span>===-<span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(+<span class="number">0</span>,-<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span>==<span class="title class_">NaN</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span>===<span class="title class_">NaN</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(<span class="title class_">NaN</span>,<span class="title class_">NaN</span>));</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>==<span class="string">&#x27;5&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>===<span class="string">&#x27;5&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(<span class="number">5</span>,<span class="string">&#x27;5&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>()</span><br><span class="line"><span class="keyword">let</span> person=&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> car =&#123;</span><br><span class="line"><span class="attr">brand</span>:<span class="string">&#x27;BWM&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(obj,person,car);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> receiver = &#123;&#125;,</span><br><span class="line">supplier = &#123;</span><br><span class="line"><span class="keyword">get</span> <span class="title function_">name</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;file.js&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(receiver, supplier);</span><br><span class="line"><span class="keyword">let</span> descriptor = <span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptor</span>(receiver, <span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(descriptor.<span class="property">value</span>); <span class="comment">// &quot;file.js&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(descriptor.<span class="property">get</span>); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//重复的属性</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;world&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//自有属性的枚举顺序</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line"><span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line"><span class="number">0</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">c</span>: <span class="number">1</span>,</span><br><span class="line"><span class="number">2</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">b</span>: <span class="number">1</span>,</span><br><span class="line"><span class="number">1</span>: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line">obj.<span class="property">d</span> = <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertyNames</span>(obj).<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>));<span class="comment">//012acbd</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="property">setPrototypeOf</span>方法</span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="title function_">getName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> dog =&#123;</span><br><span class="line"><span class="title function_">getName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> friend = <span class="title class_">Object</span>.<span class="title function_">create</span>(person);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(friend.<span class="title function_">getName</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getPrototypeOf</span>(friend)===person);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(friend,dog);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(friend.<span class="title function_">getName</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getPrototypeOf</span>(friend)===dog);</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line"><span class="title function_">getName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//不是方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;hello world&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> dog =&#123;</span><br><span class="line"><span class="attr">getNanem</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">getName</span>()+<span class="string">&#x27; world&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(dog,person);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog.<span class="title function_">getName</span>()); <span class="comment">//hello world</span></span><br></pre></td></tr></table></figure><h2 id="解构"><a href="#解构" class="headerlink" title="解构"></a>解构</h2><blockquote><p>对象解构语法</p></blockquote><p>对象解构语法在赋值语句的左侧使用了对象字面量，例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person =&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;name,age&#125;=person;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">//hello</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">//18</span></span><br></pre></td></tr></table></figure><p>在声明变量name,age的时候，利用对象解构的方式，将person对象中name,age属性分别赋值给变量name和age，类似于简写的属性初始化器；</p><blockquote><p>解构赋值</p></blockquote><p><strong>对象解构不仅可以用于变量声明，还可以用于变量赋值</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person =&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line">name = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">age= <span class="number">20</span>;</span><br><span class="line">(&#123;name,age&#125;=person);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">//hello</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">//18</span></span><br></pre></td></tr></table></figure><p>name,age变量在声明变量的时候就已经完成了变量初始化操作，之后利用对象解构的方式实现变量赋值。<strong>注意：必须使用圆括号来包裹解构赋值语句，否则暴露的花括号会被解析成代码块语句，而代码块语句不允许在赋值（=）语句左侧出现。圆括号标示了里面的花括号并不是块语句，而是被解释成表达式，从而完成了赋值操作</strong>；</p><p>对象解构不仅可以用于变量赋值，任何期望赋值的地方都可以使用对象解构方式赋值，如传递给函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person =&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line">name = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">age= <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">value</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">is</span>(value,person);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">test</span>(&#123;name,age&#125;=person));<span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">//hello</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">//18</span></span><br></pre></td></tr></table></figure><p>调用函数test的时候就是使用解构赋值的方式来传递入参；</p><blockquote><p>默认值</p></blockquote><p>如果在使用对象解构赋值的时候，没有在对象中找到同名属性的话，那么本地变量就会赋值为<code>undefined</code>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person =&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line">name = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">age= <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">value</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">is</span>(value,person);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(&#123;name,age,value&#125;=person);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">//hello</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">//18</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure><p>为了不让变量值为<code>undefined</code>，可以为变量设置默认值。设置变量默认值使用等号“=”，等号右侧为需要设置的默认值，如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person =&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line">name = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">age= <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">value</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">is</span>(value,person);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(&#123;name,age,value=<span class="literal">true</span>&#125;=person);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">//hello</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">//18</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>利用等号为value设置默认值true。</p><blockquote><p>设置不同名本地变量</p></blockquote><p>使用解构赋值，也可以为不同名的变量赋值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person =&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line">name = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">age= <span class="number">20</span>;</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(&#123;<span class="attr">name</span>:localName,<span class="attr">age</span>:localAge&#125;=person);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(localName); <span class="comment">//hello</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(localAge); <span class="comment">//18</span></span><br></pre></td></tr></table></figure><p>使用冒号“：”可以为不同名的变量完成赋值，冒号左边为对象的属性名，冒号的右边为另外的变量名。</p><p>同样的可以为非同名的变量设置默认值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person =&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line">name = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">age= <span class="number">20</span>;</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(&#123;<span class="attr">name</span>:localName,<span class="attr">age</span>:localAge,value=<span class="literal">true</span>&#125;=person);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(localName); <span class="comment">//hello</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(localAge); <span class="comment">//18</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><blockquote><p>嵌套的对象解构</p></blockquote><p>对象解构不仅可以处理属性值为基本类型值的对象的解构，还可以被用于嵌套的对象解构：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line"><span class="attr">type</span>: <span class="string">&quot;Identifier&quot;</span>,</span><br><span class="line"><span class="attr">name</span>: <span class="string">&quot;foo&quot;</span>,</span><br><span class="line"><span class="attr">loc</span>: &#123;</span><br><span class="line"><span class="attr">start</span>: &#123;</span><br><span class="line"><span class="attr">line</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">column</span>: <span class="number">1</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">end</span>: &#123;</span><br><span class="line"><span class="attr">line</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">column</span>: <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span>&#123;<span class="attr">loc</span>:&#123;start&#125;&#125;=node;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start.<span class="property">line</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start.<span class="property">column</span>);<span class="comment">//1</span></span><br></pre></td></tr></table></figure><p>同样的，在嵌套的对象解构中依然也可以为不同名的变量赋值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line"><span class="attr">type</span>: <span class="string">&quot;Identifier&quot;</span>,</span><br><span class="line"><span class="attr">name</span>: <span class="string">&quot;foo&quot;</span>,</span><br><span class="line"><span class="attr">loc</span>: &#123;</span><br><span class="line"><span class="attr">start</span>: &#123;</span><br><span class="line"><span class="attr">line</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">column</span>: <span class="number">1</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">end</span>: &#123;</span><br><span class="line"><span class="attr">line</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">column</span>: <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span>&#123;<span class="attr">loc</span>:&#123;<span class="attr">start</span>:localStart&#125;&#125;=node;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(localStart.<span class="property">line</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(localStart.<span class="property">column</span>);<span class="comment">//1</span></span><br></pre></td></tr></table></figure><h3 id="数组结构"><a href="#数组结构" class="headerlink" title="数组结构"></a>数组结构</h3><blockquote><p>数组解构的语法</p></blockquote><p>数组解构与对象结构十分相似，对象解构是通过对象的<strong>属性名</strong>去查找对象中的属性值，然后进行赋值给变量，而数组解构则是通过数组的<strong>索引</strong>去找到具体值，再去赋值给变量：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> [first,second]=arr;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(first);<span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(second);<span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>将数组arr中第一个元素和第二个元素分别赋值给first和second。如果只想要数组中第三个元素值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> [,,third]=arr;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(third);<span class="comment">//3</span></span><br></pre></td></tr></table></figure><p>两个逗号”,”相当于占位符，前两个元素值不直接赋值给变量，仅仅将数组中的第3个元素值，赋值给变量third。    </p><blockquote><p>解构赋值</p></blockquote><p>可以在赋值表达式中使用数组解构：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> first = <span class="number">5</span>,second = <span class="number">6</span>;</span><br><span class="line">[first,second] = arr;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(first);<span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(second);<span class="comment">//2</span></span><br></pre></td></tr></table></figure><p><strong>与对象解构赋值和数组解构赋值相比起来，不需要使用圆括号”()”将赋值表达式包裹起来。</strong></p><p>使用数组解构，可以十分方便的完成变量值交换：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">[first,second] = arr;</span><br><span class="line">[first,second]=[second,first];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(first);<span class="comment">//2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(second);<span class="comment">//1</span></span><br></pre></td></tr></table></figure><blockquote><p>默认值</p></blockquote><p>与对象解构赋值一样，数组解构赋值同样可以使用默认值，<strong>当指定位置的项不存在或者其值为undefined</strong>，那么该默认值就会被使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">[first,second,third=<span class="number">3</span>] = arr;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(first);<span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(second);<span class="comment">//2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(third);<span class="comment">//3</span></span><br></pre></td></tr></table></figure><blockquote><p>嵌套的解构</p></blockquote><p>与嵌套对象解构一样，嵌套的数组也可以解构：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">4</span>]</span><br><span class="line"><span class="keyword">let</span> [first,[second]]=array;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(first);<span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(second);<span class="comment">//2</span></span><br></pre></td></tr></table></figure><blockquote><p>剩余项</p></blockquote><p>数组解构中有一个类似于剩余参数的概念，可以使用<code>...</code>语法来将剩余项目给一个指定的变量，这种语法称之为剩余项：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//剩余项</span></span><br><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> [first,...subArr]=array;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(first);<span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(subArr.<span class="property">length</span>);<span class="comment">//4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(subArr[<span class="number">0</span>]);<span class="number">2</span></span><br></pre></td></tr></table></figure><p>将数组array中除了第一项外的其他项都赋给了变量<code>subArr</code>，剩余项<code>subArr</code>的长度为4，并且第一个元素为2；</p><p><strong>使用剩余项，可以很方便的完成数组复制：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组复制</span></span><br><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> [...clonedArr]=array;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(clonedArr);<span class="comment">//[1,2,3,4,5]</span></span><br></pre></td></tr></table></figure><blockquote><p>混合解构</p></blockquote><p>对象解构和数组解构可以混合在一起使用，这样就可以创建更加复杂的解构表达式，提取我们想要的内容:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line"><span class="attr">type</span>: <span class="string">&quot;Identifier&quot;</span>,</span><br><span class="line"><span class="attr">name</span>: <span class="string">&quot;foo&quot;</span>,</span><br><span class="line"><span class="attr">loc</span>: &#123;</span><br><span class="line"><span class="attr">start</span>: &#123;</span><br><span class="line"><span class="attr">line</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">column</span>: <span class="number">1</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">end</span>: &#123;</span><br><span class="line"><span class="attr">line</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">column</span>: <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">range</span>: [<span class="number">0</span>, <span class="number">3</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">loc</span>:&#123;start&#125;,<span class="attr">range</span>:[rangeArr]&#125;=node;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start.<span class="property">line</span>); <span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rangeArr); <span class="comment">//0</span></span><br></pre></td></tr></table></figure><h3 id="参数解构"><a href="#参数解构" class="headerlink" title="参数解构"></a>参数解构</h3><p>当一个函数的入参既有必选参数，又有可选参数的时候，可选参数的部分可以利用解构的方式来定义，同时，如果利用到解构，需要为其设置默认值，否则会报错。因此，参数解构的规范形式为：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setCookie</span>(<span class="params">name, value,</span></span><br><span class="line"><span class="params">&#123;</span></span><br><span class="line"><span class="params">secure = <span class="literal">false</span>,</span></span><br><span class="line"><span class="params">path = <span class="string">&quot;/&quot;</span>,</span></span><br><span class="line"><span class="params">domain = <span class="string">&quot;example.com&quot;</span>,</span></span><br><span class="line"><span class="params">expires = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + <span class="number">360000000</span>)</span></span><br><span class="line"><span class="params">&#125; = &#123;&#125;</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此代码中参数解构给每个属性都提供了默认值，所以你可以避免检查指定属性是否已被传入<br>（以便在未传入时使用正确的值） 。而整个解构的参数同样有一个默认值，即一个空对象，<br>令该参数成为可选参数。这么做使得函数声明看起来比平时要复杂一些，但却是为了确保每<br>个参数都有可用的值而付出的微小代价。</p><h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><ol><li>解构使得在 JS 中操作对象与数组变得更容易。使用熟悉的对象字面量与数组字面量语法，可以将数据结构分离并只获取你感兴趣的信息。对象解构模式允许你从对象中进行提取，而数组模式则能用于数组。</li><li>对象与数组解构都能在属性或项未定义时为其提供默认值；在赋值表达式右侧的值为 null<br>或 undefined 时，两种模式都会抛出错误。你也可以在深层嵌套的数据结构中使用对象与数<br>组解构，下行到该结构的任意深度。</li><li>使用 var 、 let 或 const 的解构声明来创建变量，就必须提供初始化器。解构赋值能替代其他赋值，并且允许你把值解构到对象属性或已存在的变量上。</li><li>参数解构使用解构语法作为函数的参数，让“选项”（options ） 对象更加透明。你实际感兴趣的数据可以与具名参数一并列出。解构的参数可以是对象模式、数组模式或混合模式，并且你能使用它们的所有特性。</li></ol><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 对象解构赋值</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> person =&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">age</span>:<span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">name = <span class="string">&#x27;world&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">age= <span class="number">20</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">(&#123;<span class="attr">name</span>:localName,<span class="attr">age</span>:localAge,value=<span class="literal">true</span>&#125;=person);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(localName); <span class="comment">//hello</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(localAge); <span class="comment">//18</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">//true</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//嵌套的对象解构</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> node = &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">type</span>: <span class="string">&quot;Identifier&quot;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: <span class="string">&quot;foo&quot;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">loc</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">start</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">line</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">column</span>: <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">end</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">line</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">column</span>: <span class="number">4</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span>&#123;<span class="attr">loc</span>:&#123;<span class="attr">start</span>:localStart&#125;&#125;=node;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(localStart.<span class="property">line</span>); <span class="comment">// 1</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(localStart.<span class="property">column</span>);<span class="comment">//1</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数组解构</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">[first,second,third=<span class="number">3</span>] = arr;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(first);<span class="comment">//1</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(second);<span class="comment">//2</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(third);<span class="comment">//3</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 嵌套解构</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> array = [<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">4</span>]</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> [first,[second]]=array;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(first);<span class="comment">//1</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(second);<span class="comment">//2</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 剩余项</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> [first,...subArr]=array;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(first);<span class="comment">//1</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(subArr.<span class="property">length</span>);<span class="comment">//4</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(subArr[<span class="number">0</span>]);<span class="number">2</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//数组复制</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> [...clonedArr]=array;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(clonedArr);<span class="comment">//[1,2,3,4,5]</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 混合解构</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> node = &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">type</span>: <span class="string">&quot;Identifier&quot;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: <span class="string">&quot;foo&quot;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">loc</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">start</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">line</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">column</span>: <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">end</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">line</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">column</span>: <span class="number">4</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">range</span>: [<span class="number">0</span>, <span class="number">3</span>]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> &#123;<span class="attr">loc</span>:&#123;start&#125;,<span class="attr">range</span>:[rangeArr]&#125;=node;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(start.<span class="property">line</span>); <span class="comment">//1</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(rangeArr); <span class="comment">//0</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 参数解构</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">setCookie</span>(<span class="params">name, value,</span></span></span><br><span class="line"><span class="params"><span class="language-javascript">&#123;</span></span></span><br><span class="line"><span class="params"><span class="language-javascript">secure = <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="params"><span class="language-javascript">path = <span class="string">&quot;/&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="language-javascript">domain = <span class="string">&quot;example.com&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="language-javascript">expires = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + <span class="number">360000000</span>)</span></span></span><br><span class="line"><span class="params"><span class="language-javascript">&#125; = &#123;&#125;</span></span></span><br><span class="line"><span class="params"><span class="language-javascript"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Symbol基础"><a href="#Symbol基础" class="headerlink" title="Symbol基础"></a>Symbol基础</h2><h3 id="创建符号值"><a href="#创建符号值" class="headerlink" title="创建符号值"></a><strong>创建符号值</strong></h3><p>在 JS 已有的基本类型（字符串、数值、布尔类型、 <code>null</code> 与 <code>undefined</code> ） 之外， ES6 引入了一种新的基本类型：符号（<code>Symbol</code> ） 。 符号起初被设计用于创建对象私有成员，而这也是 JS 开发者期待已久的特性。在符号诞生之前，将字符串作为属性名称导致属性可以被轻易访问，无论命名规则如何。而“私有名称”意味着开发者可以创建非字符串类型的属性名称，由此可以防止使用常规手段来探查这些名称。</p><blockquote><p>创建符号值</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> firstName = <span class="title class_">Symbol</span>(<span class="string">&#x27;first Name&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> person = &#123;&#125;;</span><br><span class="line">person[firstName] = <span class="string">&#x27;hello world&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person[firstName]); <span class="comment">//hello world</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(firstName); <span class="comment">//Symbol(first Name)</span></span><br></pre></td></tr></table></figure><p>此代码创建了一个符号类型的 <code>firstName</code> 变量，并将它作为 <code>person</code> 对象的一个属性，而每次访问该属性都要使用这个符号值。<code>Symbol</code> 函数还可以接受一个额外的参数用于描述符号值，该描述并不能用来访问对应属性，但它能用于调试。符号的描述信息被存储在内部属性 <code>[[Description]]</code> 中，当符号的 <code>toString() </code>方法被显式<br>或隐式调用时，该属性都会被读取。在本例中， <code>console.log()</code> 隐式调用了 <code>firstName</code> 变量的 <code>toString()</code> 方法，于是描述信息就被输出到日志。此外没有任何办法可以从代码中直接访问 <code>[[Description]]</code> 属性。</p><h3 id="使用符号值"><a href="#使用符号值" class="headerlink" title="使用符号值"></a>使用符号值</h3><p><strong>可以在任意使用 需计算属性名 的场合中使用符号值，比如在对象字面量中可以使用符号值来作为对象属性，另外还可以在<code>Object.defineProperty()</code>方法或<code>Object.defineProperties()</code>方法中使用。</strong></p><p>共享符号值</p><p>如果想在不同的代码中共享同一个符号值的话，应使用 <code>Symbol.for()</code> 方法而不是 <code>Symbol()</code> 方法。 <code>Symbol.for()</code>方法仅接受单个字符串类型的参数，作为目标符号值的标识符，同时此参数也会成为该符号的描述信息。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//共享符号值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> uid = <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&#x27;uid&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> person = &#123;&#125;;</span><br><span class="line">person[uid] = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> id = <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&#x27;uid&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> car = &#123;&#125;;</span><br><span class="line">car[id] = <span class="string">&#x27;88888888&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uid===id); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p><code>Symbol.for()</code> 方法首先会搜索全局符号注册表，看是否存在一个键值为 <code>&quot;uid</code>“ 的符号值。<br>若是，该方法会返回这个已存在的符号值；否则，会创建一个新的符号值，并使用该键值将<br>其记录到全局符号注册表中，然后返回这个新的符号值。这就意味着此后使用同一个键值去调用 <code>Symbol.for() </code>方法都将会返回同一个符号值。</p><p>还可以使用 <code>Symbol.keyFor()</code> 方法在全局符号注册表中根据<strong>符号值</strong>检索出对应的<strong>键值</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Symbol</span>.<span class="title function_">keyFor</span>(uid)); <span class="comment">//uid</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Symbol</span>.<span class="title function_">keyFor</span>(id)); <span class="comment">//uid</span></span><br></pre></td></tr></table></figure><h3 id="符号值的转换"><a href="#符号值的转换" class="headerlink" title="符号值的转换"></a>符号值的转换</h3><p>类型转换是 JS 语言重要的一部分，能够非常灵活地将一种数据类型转换为另一种。然而符号类型在进行转换时非常不灵活，因为其他类型缺乏与符号值的合理等价，尤其是符号值<strong>无法被转换为字符串值或数值</strong>，在逻辑运算符中会被认为等价于 <code>true</code>。</p><p>例如，可使用String()方法获取符号值的描述信息，但是如果使用符号值在字符串中拼接，则会报错：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">String</span>(uid));<span class="comment">//Symbol(uid)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uid+<span class="string">&quot;&quot;</span>); <span class="comment">//Uncaught TypeError: Cannot convert a Symbol value to a string</span></span><br></pre></td></tr></table></figure><h3 id="检索符号属性"><a href="#检索符号属性" class="headerlink" title="检索符号属性"></a>检索符号属性</h3><p><code>Object.keys()</code> 与 <code>Object.getOwnPropertyNames() </code>方法可以检索对象的所有属性名称，前者<br>返回所有的<strong>可枚举属性名</strong>称，而后者则返回<strong>所有属性名称</strong>，无论是否可以可枚举，然而<strong>两者都不能返回符号类型的属性</strong>。因此，在ES6中新增了<br><code>Object.getOwnPropertySymbols()</code> 方法，以便让你可以检索对象的符号类型属性。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> uid = <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&#x27;uid&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> person = &#123;&#125;;</span><br><span class="line">person[uid] = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> symbols = <span class="title class_">Object</span>.<span class="title function_">getOwnPropertySymbols</span>(person);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(symbols.<span class="property">length</span>); <span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(symbols[<span class="number">0</span>]); <span class="comment">//Symbol(uid)</span></span><br></pre></td></tr></table></figure><h2 id="知名符号"><a href="#知名符号" class="headerlink" title="知名符号"></a>知名符号</h2><p>ES6 定义了“知名符号”来代表 JS 中一些公共行为，而这些行为此前被认为只能是内部操作，但在ES6中使用了知名符号来暴露了内部方法，提供了更加方便的调用这种公用方法的一种方式。每一个知名符号都对应全局 <code>Symbol</code> 对象的一个属性，例如 <code>Symbol.create </code>。</p><p>知名符号有：</p><ul><li><strong>Symbol.hasInstance</strong> ：供 instanceof 运算符使用的一个方法，用于判断对象继承关系；</li><li><strong>Symbol.isConcatSpreadable</strong> ：一个布尔类型值，在集合对象作为参数传递给<br>Array.prototype.concat() 方法时，指示是否要将该集合的元素扁平化；</li><li><strong>Symbol.iterator</strong> ：返回迭代器的一个方法；</li><li><strong>Symbol.match</strong> ：供 String.prototype.match() 函数使用的一个方法，用于比较字符串；</li><li><strong>Symbol.replace</strong> ：供 String.prototype.replace() 函数使用的一个方法，用于替换子字符串；</li><li><strong>Symbol.search</strong> ：供 String.prototype.search() 函数使用的一个方法，用于定位子字符；</li><li><strong>Symbol.species</strong> ：用于产生派生对象的构造器；</li><li><strong>Symbol.split</strong> ：供 String.prototype.split() 函数使用的一个方法，用于分割字符串；</li><li><strong>Symbol.toPrimitive</strong> ：返回对象所对应的基本类型值的一个方法；</li><li><strong>Symbol.toStringTag</strong> ：供 String.prototype.toString() 函数使用的一个方法，用于创建对象的描述信息；</li><li><strong>Symbol.unscopables</strong> ：一个对象，该对象的属性指示了哪些属性名不允许被包含在with 语句中；</li></ul><h3 id="Symbol-hasInstance属性"><a href="#Symbol-hasInstance属性" class="headerlink" title="Symbol.hasInstance属性"></a>Symbol.hasInstance属性</h3><p>每个函数都具有一个 <code>Symbol.hasInstance</code> 属性，用于判断指定对象是否为本函数的一个实例。这个方法定义在 <code>Function.prototype</code> 上，因此所有函数都继承了面对 <code>instanceof</code> 运算符时的默认行为。 <code>Symbol.hasInstance</code> 属性自身是不可写入、不可配置、不可枚举的，从而保证它不会被错误地重写。</p><p><code>Symbol.hasInstance</code> 方法只接受单个参数，即需要检测的值。如果该值是本函数的一个实例，则方法会返回 <code>true</code> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">obj <span class="keyword">instanceof</span> <span class="title class_">Array</span></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"><span class="title class_">Array</span>[<span class="title class_">Symbol</span>.<span class="property">hasInstance</span>](obj)</span><br></pre></td></tr></table></figure><h3 id="Symbol-isConcatSpreadable属性"><a href="#Symbol-isConcatSpreadable属性" class="headerlink" title="Symbol.isConcatSpreadable属性"></a>Symbol.isConcatSpreadable属性</h3><p><code>Symbol.isConcatSpreadable </code>属性是一个布尔类型的属性，它表示拥有长度<code>length</code>属性与数值类型的键的类数组的对象，在调用 <code>concat()</code> 方法时，会将数值键对应的值分离为单独项，添加在数组的后部，完成数组拼接。</p><p>它只出现在特定类型的对象上，用来标示该对象在作为<code> concat()</code> 参数时应如何工作，从而有效改变该对象的默认行为。你可以用它来定义任意类型的对象，让该对象在参与 <code>concat()</code> 调用时能够表现得像数组一样。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Symbol.isConcatSpreadable属性</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> collection = &#123;</span><br><span class="line"><span class="number">0</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"><span class="number">1</span>:<span class="string">&#x27;world&#x27;</span>,</span><br><span class="line"><span class="attr">length</span>:<span class="number">2</span>,</span><br><span class="line">[<span class="title class_">Symbol</span>.<span class="property">isConcatSpreadable</span>]:<span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;es6&#x27;</span>].<span class="title function_">concat</span>(collection);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">//[&quot;es6&quot;, &quot;hello&quot;, &quot;world&quot;]</span></span><br></pre></td></tr></table></figure><p> Symbol.match 、 Symbol.replace 、 Symbol.search与Symbol.split</p><p>在 JS 中，字符串与正则表达式有着密切的联系，尤其是字符串具有几个可以接受正则表达式作为参数的方法：</p><ul><li>match(regex) ：判断指定字符串是否与一个正则表达式相匹配；</li><li>replace(regex, replacement) ：对正则表达式的匹配结果进行替换；</li><li>search(regex) ：在字符串内对正则表达式的匹配结果进行定位；</li><li>split(regex) ：使用正则表达式将字符串分割为数组</li></ul><p>ES6 定义了 4 个符号以及对应的方法，可以将正则表达式作为字符串对应方法的第一个参数传入， <code>Symbol.match</code> 对应 <code>match()</code> 方法， <code>Symbol.replace</code> 对应 <code>replace()</code> ，<code>Symbol.search</code>对应 <code>search()</code>， <code>Symbol.split</code> 则对应 <code>split()</code> 。这些符号属性被定义在 <code>RegExp.prototype </code>上作为默认实现，以供对应的字符串方法使用。</p><h3 id="Symbol-toPrimitive"><a href="#Symbol-toPrimitive" class="headerlink" title="Symbol.toPrimitive"></a>Symbol.toPrimitive</h3><p>JS 经常在使用特定运算符的时候试图进行隐式转换，以便将对象转换为基本类型值。例如，当你使用相等（<code>==</code> ） 运算符来对字符串与对象进行比较的时候，该对象会在比较之前被转换为一个基本类型值。到底转换为什么基本类型值，在此前属于内部操作，而 ES6 则通过<code>Symbol.toPrimitive</code> 属性将其暴露出来，以便让对应方法可以被修改。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Temperature</span>(<span class="params">degrees</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">degrees</span> = degrees;</span><br><span class="line">&#125; </span><br><span class="line"><span class="title class_">Temperature</span>.<span class="property"><span class="keyword">prototype</span></span>[<span class="title class_">Symbol</span>.<span class="property">toPrimitive</span>] = <span class="keyword">function</span>(<span class="params">hint</span>) &#123;</span><br><span class="line"><span class="keyword">switch</span> (hint) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;string&quot;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">degrees</span> + <span class="string">&quot;\u00b0&quot;</span>; <span class="comment">// 温度符号</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;number&quot;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">degrees</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;default&quot;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">degrees</span> + <span class="string">&quot; degrees&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> freezing = <span class="keyword">new</span> <span class="title class_">Temperature</span>(<span class="number">32</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(freezing + <span class="string">&quot;!&quot;</span>); <span class="comment">// &quot;32 degrees!&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(freezing / <span class="number">2</span>); <span class="comment">// 16</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">String</span>(freezing)); <span class="comment">// &quot;32°&quot;</span></span><br></pre></td></tr></table></figure><p>这段脚本定义了一个 Temperature 构造器，并重写了其原型上的<code>Symbol.toPrimitive</code> 方法。返回值会依据方法的提示性参数而有所不同，可以使用字符串模式、数值模式或是默认模式，而该提示性参数会在调用时由 JS 引擎自动填写。字符串模式中， Temperature 函数返回的温度会附带着 Unicode 温度符号；数值模式只会返回温度数值；而默认模式中，返回的温度会附带着字符串 “degrees” 。</p><h3 id="Symbol-toStringTag"><a href="#Symbol-toStringTag" class="headerlink" title="Symbol.toStringTag"></a>Symbol.toStringTag</h3><p>ES6 通过 <code>Symbol.toStringTag</code> 重定义了相关行为，该符号代表了所有对象的一个属性，定义了 <code>Object.prototype.toString.call()</code> 被调用时应当返回什么值。对于数组来说，在<code>Symbol.toStringTag</code> 属性中存储了 “Array” 值，于是该函数的返回值也就是 “Array” 。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>[<span class="title class_">Symbol</span>.<span class="property">toStringTag</span>] = <span class="string">&#x27;person&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="title function_">toString</span>()); <span class="comment">//[object person]</span></span><br></pre></td></tr></table></figure><h3 id="Symbol-unscopables"><a href="#Symbol-unscopables" class="headerlink" title="Symbol.unscopables"></a>Symbol.unscopables</h3><p><code>Symbol.unscopables</code> 符号在 <code>Array.prototype</code> 上使用，以指定哪些属性不允许在 <code>with</code> 语句内被绑定。 <code>Symbol.unscopables</code> 属性是一个对象，当提供该属性时，它的键就是用于忽略<code>with</code> 语句绑定的标识符，键值为 <code>true</code> 代表屏蔽绑定。以下是数组的 <code>Symbol.unscopables</code>属性的默认值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认内置在 ES6 中</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>[<span class="title class_">Symbol</span>.<span class="property">unscopables</span>] = <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>), &#123;</span><br><span class="line"><span class="attr">copyWithin</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">entries</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">fill</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">find</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">findIndex</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">keys</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">values</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h3><ol><li>虽然符号类型的属性不是真正的私有属性，但它们难以被无意修改，因此在需要提供保护以防止开发者改动的场合中，它们非常合适；</li><li>为符号提供描述信息以便更容易地辨识它们的值。当需要在不同代码片段中共享符号，可以是用S<code>ymbol.for()</code>在全局符号注册表中共享符号；</li><li><code>Object.keys()</code> 或 <code>Object.getOwnPropertyNames()</code> 不会返回符号值，因此 ES6 新增了一个<code>Object.getOwnPropertySymbols() </code>方法，允许检索符号类型的对象属性。同时依然可以使用<code>Object.defineProperty()</code> 与 <code>Object.defineProperties()</code> 方法对符号类型的属性进行修改；</li><li>“知名符号”使用了全局符号常量（例如 <code>Symbol.hasInstance</code> ） ，为常规对象定义了一些功能，而这些功能原先仅限内部使用。这些符号按规范使用 <code>Symbol.</code> 的前缀，允许开发者通过多种方式去修改常规对象的行为。</li></ol><h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let firstName = Symbol(&#x27;first Name&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let person = &#123;&#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// person[firstName] = &#x27;hello world&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(person[firstName]); //hello world</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(firstName); //Symbol(first Name)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//共享符号值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let uid = Symbol.for(&#x27;uid&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let person = &#123;&#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// person[uid] = &#x27;hello&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let symbols = Object.getOwnPropertySymbols(person);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(symbols.length); //1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(symbols[0]); //Symbol(uid)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let id = Symbol.for(&#x27;uid&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let car = &#123;&#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// car[id] = &#x27;88888888&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(uid===id); //true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(Symbol.keyFor(uid)); //uid</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(Symbol.keyFor(id)); //uid</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(String(uid));//Symbol(uid)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(uid+&quot;&quot;); //Uncaught TypeError: Cannot convert a Symbol value to a string</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //Symbol.isConcatSpreadable属性</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let collection = &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 0:&#x27;hello&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 1:&#x27;world&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// length:2,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// [Symbol.isConcatSpreadable]:true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let arr = [&#x27;es6&#x27;].concat(collection);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(arr); //[&quot;es6&quot;, &quot;hello&quot;, &quot;world&quot;]</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// function Temperature(degrees) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.degrees = degrees;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// Temperature.prototype[Symbol.toPrimitive] = function(hint) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// switch (hint) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// case &quot;string&quot;:</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return this.degrees + &quot;\u00b0&quot;; // 温度符号</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// case &quot;number&quot;:</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return this.degrees;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// case &quot;default&quot;:</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return this.degrees + &quot; degrees&quot;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let freezing = new Temperature(32);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(freezing + &quot;!&quot;); // &quot;32 degrees!&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(freezing / 2); // 16</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(String(freezing)); // &quot;32°&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// function Person(name)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.name = name;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// Person.prototype[Symbol.toStringTag] = &#x27;person&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let person = new Person(&#x27;hello world&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(person.toString()); //[object person]</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 默认内置在 ES6 中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>[<span class="title class_">Symbol</span>.<span class="property">unscopables</span>] = <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>), &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">copyWithin</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">entries</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">fill</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">find</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">findIndex</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">keys</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">values</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="ES6中的Set"><a href="#ES6中的Set" class="headerlink" title="ES6中的Set"></a>ES6中的Set</h2><p>ES6中提供了Set数据容器，这是一个能够<strong>存储无重复值</strong>的有序列表。</p><blockquote><p>创建Set</p></blockquote><p>通过<code>new Set()</code>可以创建Set，然后通过<code>add</code>方法能够向Set中添加数据项：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Set</span></span><br><span class="line"><span class="keyword">let</span> set= <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">set.<span class="title function_">add</span>(<span class="number">1</span>);</span><br><span class="line">set.<span class="title function_">add</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="property">size</span>);<span class="comment">//2</span></span><br></pre></td></tr></table></figure><p><strong>Set内部使用Object.is()方法来判断两个数据项是否相等，唯一不同的是+0和-0在Set中被判断为是相等的。</strong></p><p>同时可以使用数组来构造Set，或者说具有迭代器的对象都可以用来构造Set，并且Set构造器会确保不会存在重复的数据项：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="property">size</span>);<span class="comment">//3</span></span><br></pre></td></tr></table></figure><blockquote><p>检查某个值是否存在于Set中</p></blockquote><p>可以使用<code>has()</code>方法来判断某个值是否存在于Set中：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="title function_">has</span>(<span class="number">5</span>)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure><blockquote><p>删除值</p></blockquote><p>使用delete()方法从Set中删除某个值，或者使用clear()方法从Set中删除所有值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="property">size</span>);<span class="comment">//3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="title function_">has</span>(<span class="number">5</span>)); <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">set.<span class="title function_">delete</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="title function_">has</span>(<span class="number">1</span>)); <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="property">size</span>); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><blockquote><p>forEach()方法</p></blockquote><p>可以使用<code>forEach</code>方法来遍历Set中的数据项，该方法传入一个回调函数<code>callback</code>，还可以传入一个<code>this</code>，用于回调函数之中：</p><p>回调函数callback中有三个参数：</p><ol><li><p>元素值；</p></li><li><p>元素索引；</p></li><li><p>将要遍历的对象；</p><p>let set = new Set([1,2,3,3,3,3]);</p><pre><code>    set.forEach(function (value,key,ownerSet) &#123;        console.log(value);        console.log(key);                &#125;)</code></pre></li></ol><p>Set中的value和key是相同的，这是为了让Set的forEach方法和数组以及Map的forEach方法保持一致，都具有三个参数。</p><p>在forEach方法中传入<code>this</code>，给回调函数使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]);</span><br><span class="line"><span class="keyword">let</span> operation =&#123;</span><br><span class="line"></span><br><span class="line"><span class="title function_">print</span>(<span class="params">value</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="title function_">iterate</span>(<span class="params">set=[]</span>)&#123;</span><br><span class="line">set.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">value,key,ownerSet</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">print</span>(value);</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">print</span>(key);</span><br><span class="line">&#125;,<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">operation.<span class="title function_">iterate</span>(set);</span><br><span class="line"></span><br><span class="line">输出：<span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><p>如果回调函数使用箭头函数的话，就可以省略<code>this</code>的入参，这是因为箭头函数会通过作用域链找到当前this对象，将上面的示例代码使用箭头函数来写：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]);</span><br><span class="line"><span class="keyword">let</span> operation =&#123;</span><br><span class="line"></span><br><span class="line"><span class="title function_">print</span>(<span class="params">value</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="title function_">iterate</span>(<span class="params">set=[]</span>)&#123;</span><br><span class="line">set.<span class="title function_">forEach</span>(<span class="function">(<span class="params">value,key</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">print</span>(value);</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">print</span>(key);</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">operation.<span class="title function_">iterate</span>(set);</span><br></pre></td></tr></table></figure><blockquote><p>将Set转换成数组</p></blockquote><p>将数组转换成Set十分容易，可以将数组传入Set构造器即可；而将Set转换成数组，需要使用扩展运算符。扩展运算符能将数组中的数据项切分开，作为独立项传入到函数，如果将扩展运算符用于可迭代对象的话，就可以将可迭代对象转换成数组：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [...arr]=set;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure><blockquote><p>Weak Set</p></blockquote><p>Set在存放对象时，实际上是存放的是对象的引用，即Set也被称之为Strong Set。如果所存储的对象被置为null，但是Set实例仍然存在的话，对象依然无法被垃圾回收器回收，从而无法释放内存：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line"><span class="keyword">let</span> key=&#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> key2 = &#123;&#125;;</span><br><span class="line">set.<span class="title function_">add</span>(key);</span><br><span class="line">set.<span class="title function_">add</span>(key2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="property">size</span>); <span class="comment">//2</span></span><br><span class="line"></span><br><span class="line">key=<span class="literal">null</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="property">size</span>); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>可以看出就算对象key置为null，但是由于是强引用的方式，Set实例还存在，对象key依然不会被回收。</p><p>如果想让对象key正常释放的话，可以使用Weak Set，此时，<strong>存放的是对象的弱引用，当对象只被Set弱引用的话，并不会阻止对象实例被回收</strong>。Weka Set同Set的用法几乎一致。可以使用add()方法增加数据项，使用has()方法检查Weak Set中是否包含某项，以及使用delete()方法删除某一项。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">WeakSet</span>();</span><br><span class="line"><span class="keyword">let</span> key = &#123;&#125;;</span><br><span class="line">set.<span class="title function_">add</span>(key);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="title function_">has</span>(key)); <span class="comment">//true</span></span><br><span class="line">set.<span class="title function_">delete</span>(key);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="title function_">has</span>(key)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>但需要注意的是：Weak Set构造器不接受基本类型数据，只接受对象。同样的可以使用可迭代的对象如数组，来作为构造器参数，来创建Weak Set。</p><blockquote><p>Weak Set和Set之间的差异</p></blockquote><p>对于Weak Set和Set之间的重要差异：</p><ol><li>对于Weak Set实例，若调用了add()方法时传入了非对象的参数，则会抛出错误。如果在has()或者delete()方法中传入了非对象的参数则会返回false；</li><li>Weak Set不可迭代，因此不能用于for-of循环；</li><li>Weak Set 无法暴露出任何迭代器（例如 keys() 与 values() 方法） ，因此没有任何编程手段可用于判断 Weak Set 的内容；</li><li>Weak Set没有forEach()方法；</li><li>Weak Set没有size属性；</li></ol><h2 id="ES6中的Map"><a href="#ES6中的Map" class="headerlink" title="ES6中的Map"></a>ES6中的Map</h2><p>ES6中提供了Map数据结构，能够存放键值对，其中，键的去重是通过Object.is()方法进行比较，键的数据类型可以是基本类型数据也可以是对象，而值也可以是任意类型数据。</p><blockquote><p>对Map的操作</p></blockquote><ol><li><p>使用<code>set()</code>方法可以给Map添加键值对</p><p>let map = new Map();</p><pre><code>    map.set(&#39;title&#39;,&#39;hello world&#39;);    map.set(&#39;year&#39;,&#39;2018&#39;);    </code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="property">size</span>); <span class="comment">//2</span></span><br></pre></td></tr></table></figure></li></ol><p>通过<code>set()</code>方法往Map中增加了两个键值对后，可以看到Map的大小就为2；</p><ol start="2"><li><p>通过get()方法可以从Map中提取值</p><p>let map = new Map();</p><pre><code>    map.set(&#39;title&#39;,&#39;hello world&#39;);    map.set(&#39;year&#39;,&#39;2018&#39;);    </code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(<span class="string">&#x27;title&#x27;</span>)); <span class="comment">// hello world</span></span><br></pre></td></tr></table></figure></li><li><p>has(),delete()以及clear()方法</p></li></ol><p>为了和Set的操作保持一致，Map中同样有has()方法，用来检查某个数据项是否存在于Map中，使用delete方法可以从Map中删除一个数据项，使用clear方法可以删除Map中所有的数据项</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;title&#x27;</span>,<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;year&#x27;</span>,<span class="string">&#x27;2018&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">has</span>(<span class="string">&#x27;year&#x27;</span>)); <span class="comment">//true</span></span><br><span class="line">map.<span class="title function_">delete</span>(<span class="string">&#x27;title&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">has</span>(<span class="string">&#x27;title&#x27;</span>)); <span class="comment">//false</span></span><br><span class="line">map.<span class="title function_">clear</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="property">size</span>); <span class="comment">//0</span></span><br></pre></td></tr></table></figure><blockquote><p>Map的初始化</p></blockquote><p>与Set的初始化一样，Map也可以用数组来初始化Map，该数组中的每一个数据项也是数组，数组的第一个数据项代表键值对的键，第二个数据项是键值对的值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用数组来创建Map</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="string">&#x27;title&#x27;</span>,<span class="string">&#x27;hello world&#x27;</span>],[<span class="string">&#x27;year&#x27;</span>,<span class="string">&#x27;2018&#x27;</span>]]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">has</span>(<span class="string">&#x27;title&#x27;</span>)); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">has</span>(<span class="string">&#x27;year&#x27;</span>)); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="property">size</span>); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><blockquote><p>Map的forEach方法</p></blockquote><p>与Set一样，Map也拥有<code>forEach</code>方法，该方法也接收一个回调函数，该回调函数有三个参数：</p><ol><li><p>键值对的键；</p></li><li><p>键值对的值；</p></li><li><p>当前Map对象引用；</p><p>let map = new Map([[‘title’,’hello world’],[‘year’,’2018’]]);</p><pre><code>    map.forEach((value,key,ownerMap)=&gt;&#123;        console.log(value);        console.log(key);    &#125;);    </code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hello world</span><br><span class="line">title</span><br><span class="line">2018</span><br><span class="line">year</span><br></pre></td></tr></table></figure></li></ol><p>与Set的forEach一样，可以在回调函数中传入<code>this引用</code>。</p><blockquote><p>Weak Map</p></blockquote><p>Weak Map对Map而言，就像是Weak Set相对于Set一样：<strong>Weak Map(或者Weak Set)都是存储对象弱引用的方式，在Weak Map（或者Weak Set）中，所有的键都必须是对象（尝试使用非对象的键会抛出错误），而且这些对象都是弱引用，不会干扰到垃圾回收。当Weak Map中的键在Weak Map之外不存在引用时，该键值对会被移除。</strong></p><blockquote><p>Weak Map的操作</p></blockquote><ol><li>Weak Map的初始化</li></ol><p> Weak Map的键必须是对象，值可以是任意类型，初始化同Map一样，也可是使用数组来创建一个 Weak Map ：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用数组来创建一个Weak Map</span></span><br><span class="line"><span class="keyword">let</span> key = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> key2 = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">WeakMap</span>([[key,<span class="string">&#x27;hello&#x27;</span>],[key2,<span class="string">&#x27;world&#x27;</span>]]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(key)); <span class="comment">//hello</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(key2)); <span class="comment">//world</span></span><br></pre></td></tr></table></figure><ol start="2"><li>has方法以及delete方法</li></ol><p>与Map一样，可以使用has()方法来检查Weak Map中是否存在某一个键值对，使用delete()方法可以删除一个键值对。clear() 方法不存在，这是因为没必要对键进行枚举，并且枚举 Weak Map 也是不可能的，这与 Weak Set 相同：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> key = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> key2 = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">WeakMap</span>([[key,<span class="string">&#x27;hello&#x27;</span>],[key2,<span class="string">&#x27;world&#x27;</span>]]);</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">delete</span>(key);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">has</span>(key)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure><blockquote><p>Weak Map 的用法与局限性</p></blockquote><p>当决定是要使用 Weak Map 还是使用正规 Map 时，首要考虑因素在于你是否只想使用对象类型的键。如果你打算这么做，那么最好的选择就是 Weak Map 。因为它能确保额外数据在不再可用后被销毁，从而能优化内存使用并规避内存泄漏。</p><p>要记住 Weak Map 只为它们的内容提供了很小的可见度，因此你<strong>不能使用 forEach() 方法、size 属性或 clear() 方法来管理其中的项</strong>。如果你确实需要一些检测功能，那么正规 Map会是更好的选择，只是一定要确保留意内存的使用。</p><h3 id="总结-4"><a href="#总结-4" class="headerlink" title="总结"></a>总结</h3><ol><li>Set 是无重复值的有序列表。根据 <code>Object.is() </code>方法来判断其中的值不相等，以保证无重复。 Set 会自动移除重复的值，因此你可以使用它来过滤数组中的重复值并返回结果。 Set并不是数组的子类型，所以你无法随机访问其中的值。但你可以使用<code> has()</code> 方法来判断某个值是否存在于 Set 中，或通过 <code>size</code> 属性来查看其中有多少个值。 Set 类型还拥有<code>forEach() </code>方法，用于处理每个值。</li><li>Weak Set 是只能包含对象的特殊 Set 。其中的对象使用弱引用来存储，意味着当 Weak Set中的项是某个对象的仅存引用时，它不会屏蔽垃圾回收。由于内存管理的复杂性， Weak Set的内容不能被检查，因此最好将 Weak Set 仅用于追踪需要被归组在一起的对象。</li><li>Map 是有序的键值对，其中的键允许是任何类型。与 Set 相似，通过调用 <code>Object.is() </code>方法来判断重复的键，这意味着能将数值 5 与字符串 “5” 作为两个相对独立的键。使用<code>set()</code> 方法能将任何类型的值关联到某个键上，并且该值此后能用 <code>get()</code> 方法提取出来。Map 也拥有一个 <code>size</code> 属性与一个 <code>forEach()</code> 方法，让项目访问更容易。</li><li>Weak Map 是只能包含对象类型的键的特殊 Map 。与 Weak Set 相似，键的对象引用是弱引用，因此当它是某个对象的仅存引用时，也不会屏蔽垃圾回收。当键被回收之后，所关联的值也同时从 Weak Map 中被移除。</li></ol><h3 id="例子-2"><a href="#例子-2" class="headerlink" title="例子"></a>例子</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//Set</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let set= new Set();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// set.add(1);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// set.add(&#x27;1&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(set.size);//2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let set = new Set([1,2,3,3,3,3]);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(set.size);//3</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(set.has(5)); //false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// set.delete(1);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(set.has(1)); //false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(set.size); //2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let set = new Set([1,2,3,3,3,3]);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let operation =&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// print(value)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// iterate(set=[])&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// set.forEach((value,key)=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.print(value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.print(key);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// operation.iterate(set);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let [...arr]=set;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(arr);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//强引用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let set = new WeakSet();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let key = &#123;&#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// set.add(key);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(set.has(key)); //true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// set.delete(key);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(set.has(key)); //false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//Map的基本操作</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let map = new Map();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// map.set(&#x27;title&#x27;,&#x27;hello world&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// map.set(&#x27;year&#x27;,&#x27;2018&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(map.has(&#x27;year&#x27;)); //true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// map.delete(&#x27;title&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(map.has(&#x27;title&#x27;)); //false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// map.clear();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(map.size); //0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(map.get(&#x27;title&#x27;));</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(map.size); //2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//使用数组来创建Map</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let map = new Map([[&#x27;title&#x27;,&#x27;hello world&#x27;],[&#x27;year&#x27;,&#x27;2018&#x27;]]);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// map.forEach((value,key,ownerMap)=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(key);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(map.has(&#x27;title&#x27;)); //true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(map.has(&#x27;year&#x27;)); //true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(map.size); //2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//使用数组来创建一个Weak Map</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> key = &#123;&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> key2 = &#123;&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">WeakMap</span>([[key,<span class="string">&#x27;hello&#x27;</span>],[key2,<span class="string">&#x27;world&#x27;</span>]]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(key)); <span class="comment">//hello</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(key2)); <span class="comment">//world</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">map.<span class="title function_">delete</span>(key);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">has</span>(key));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="迭代器和迭代器"><a href="#迭代器和迭代器" class="headerlink" title="迭代器和迭代器"></a>迭代器和迭代器</h2><blockquote><p>何为迭代器？</p></blockquote><p>迭代器是被设计专用于迭代的对象，带有特定接口。所有的迭代器对象都拥有 next() 方<br>法，会返回一个结果对象。该结果对象有两个属性：对应下一个值的 value ，以及一个布尔<br>类型的 done ，其值为 true 时表示没有更多值可供使用。迭代器持有一个指向集合位置的<br>内部指针，每当调用了 next() 方法，迭代器就会返回相应的下一个值。</p><h3 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h3><blockquote><p>何为生成器？</p></blockquote><p><strong>生成器（generator ） 是能返回一个迭代器的函数</strong>。生成器函数由放在 function 关键字之后的一个星号（ * ） 来表示，并能使用新的 <code>yield</code> 关键字。将星号紧跟在 function 关键字之后，或是在中间留出空格，都是没问题的。例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>*<span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">generator</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>().<span class="property">value</span>);<span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>().<span class="property">value</span>);<span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>生成器函数最有意思的地方是它们会在每一个<code>yield</code>语句后停止，例如在上面的代码中执行<code>yield 1</code>后，该函数不会在继续往下执行。等待下一次调用<code>next()</code>后，才会继续往下执行<code>yield 2 </code>。</p><p><strong>除了使用函数声明的方式创建一个生成器外，还可以使用函数表达式来创建一个生成器。由于生成器就是一个函数，同样可以使用对象字面量的方式，将对象的属性赋值为一个生成器函数。</strong></p><h3 id="可迭代对象与for-of循环"><a href="#可迭代对象与for-of循环" class="headerlink" title="可迭代对象与for-of循环"></a>可迭代对象与for-of循环</h3><p>可迭代对象是包含<code>Symbol.iterator</code>属性的对象，这个<code>Symbol.iterator</code>属性对应着能够返回该对象的迭代器的函数。在ES6中，所有的集合对象（数组、Set和Map）以及字符串都是可迭代对象，因此它们都被指定了默认的迭代器。可迭代对象可以与ES6中新增的<code>for-of</code>循环配合使用。</p><p>迭代器解决了<code>for</code>循环中追踪索引的问题，而<code>for-of</code>循环，则是完全删除追踪集合索引的需要，更能专注于操作集合内容。<code>for-of</code>循环在循环每次执行时会调用可迭代对象的<code>next()</code>方法，并将结果对象的<code>value</code>值存储在一个变量上，循环过程直到结果对象<code>done</code>属性变成<code>true</code>为止：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> num <span class="keyword">of</span> arr)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">&#125;</span><br><span class="line">输出结果为：<span class="number">1</span>，<span class="number">2</span>，<span class="number">3</span></span><br></pre></td></tr></table></figure><p><code>for-of</code>循环首先会调用arr数组中<code>Symbol.iterator</code>属性对象的函数，就会获取到该数组对应的迭代器，接下来<code>iterator.next()</code>被调用，迭代器结果对象的<code>value</code>属性会被放入到变量<code>num</code>中。数组中的数据项会依次存入到变量<code>num</code>中，直到迭代器结果对象中的<code>done</code>属性变成<code>true</code>为止，循环就结束。</p><blockquote><p>访问可迭代对象的默认迭代器</p></blockquote><p>可以使用可迭代对象的Symbol.iterator来访问对象上可返回迭代器的函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="comment">//访问默认迭代器</span></span><br><span class="line"><span class="keyword">let</span> iterator = arr[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p><strong>通过Symbol.iterator属性获取到该对象的可返回迭代器的函数，然后执行该函数得到对象的可迭代器。</strong>同样的，可是使用<code>Symbol.iterato</code>r属性来检查对象是否是可迭代对象。</p><blockquote><p>创建可迭代对象</p></blockquote><p>数组，Set等集合对象是默认的迭代器，当然也可以为对象创建自定义的迭代器，使其成为可迭代对象。那么迭代器如何生成？我们已经知道，生成器就是一个可以返回迭代器的函数，因此自定义迭代器，就是写一个生成器函数。同时，可迭代对象必须具有<code>Symbol.iterator</code>属性，并且该属性对应着一个能够返回迭代器的函数，因此只需要将这个生成器函数赋值给<code>Symbol.iterator</code>属性即可：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建可迭代对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line"><span class="attr">items</span>:[],</span><br><span class="line"></span><br><span class="line">*[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]()&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> <span class="variable language_">this</span>.<span class="property">items</span>)&#123;</span><br><span class="line"><span class="keyword">yield</span> item;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.<span class="property">items</span>.<span class="title function_">push</span>(<span class="number">1</span>);</span><br><span class="line">obj.<span class="property">items</span>.<span class="title function_">push</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> num <span class="keyword">of</span> obj)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出：<span class="number">1</span>，<span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="内置的迭代器"><a href="#内置的迭代器" class="headerlink" title="内置的迭代器"></a>内置的迭代器</h3><p>ES6中许多内置类型已经包含了默认的迭代器，只有当默认迭代器满足不了时，才会创建自定义的迭代器。如果新建对象时，要想把该对象转换成可迭代对象的话，一般才会需要自定义迭代器。</p><blockquote><p>集合迭代器 </p></blockquote><p>ES6中有三种集合对象：数组、Map和Set，这三种类型都拥有默认的迭代器：</p><ul><li>entries()：返回一个包含键值对的迭代器；</li><li>values()：返回一个包含集合中的值的迭代器；</li><li>keys()：返回一个包含集合中的键的迭代器；</li></ul><ol><li>调用entries()迭代器会在每次调用next()方法返回一个双项数组，此数组代表集合数据项中的键和值：对于数组来说，第一项是数组索引；对于Set来说，第一项是值（因为Set的键和值相同），对于Map来说，就是键值对的值；</li><li>values()迭代器能够返回集合中的每一个值；</li><li>keys()迭代器能够返回集合中的每一个键；</li></ol><blockquote><p>集合的默认迭代器 </p></blockquote><p>当for-of循环没有显式指定迭代器时，集合对象会有默认的迭代器。values()方法是数组和Set默认的迭代器，而entries()方法是Map默认迭代器。</p><blockquote><p>字符串的迭代器 </p></blockquote><p>ES6旨在为Unicode提供了完全支持，字符串的默认迭代器就是解决字符串迭代问题的一种尝试，这样一来，借助字符串默认迭代器就能处理字符而非码元：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//字符串默认迭代器</span><br><span class="line">let str =&#x27;A   B&#x27;;</span><br><span class="line">for(let s of str)&#123;</span><br><span class="line">console.log(s); //A  B</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>扩展运算符与非数组的可迭代对象</p></blockquote><p>扩展运算符能作用于所有可迭代对象，并且会使用默认迭代器来判断需要哪些值。在数组字面量中可以使用扩展运算符将可迭代对象填充到数组中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//扩展运算符可作用到所有可迭代对象</span><br><span class="line">let arr = [1,2,3];</span><br><span class="line">let array = [...arr];</span><br><span class="line">console.log(array); [1,2,3]</span><br></pre></td></tr></table></figure><p>并且，可以不限次数在数组字面量中使用扩展运算符，而且可以在任意位置用扩展运算符将可迭代对象填充到数组中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3];</span><br><span class="line">let arr2 = [7,8,9];</span><br><span class="line">let array = [...arr,5,...arr2];</span><br><span class="line">console.log(array); //1,2,3,5,7,8,9</span><br></pre></td></tr></table></figure><h3 id="迭代器高级功能"><a href="#迭代器高级功能" class="headerlink" title="迭代器高级功能"></a>迭代器高级功能</h3><p>能够通过next()方法向迭代器传递参数<strong>，当一个参数传递给next()方法时，该参数就会成为生成器内部yield语句中的变量值。</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//迭代器的高级功能</span></span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">let</span> first = <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> second = <span class="keyword">yield</span> first+<span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> third = <span class="keyword">yield</span> second+<span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">generator</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>()); <span class="comment">//&#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>(<span class="number">4</span>)); <span class="comment">//&#123;value: 6, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>(<span class="number">5</span>)); <span class="comment">//&#123;value: 8, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>()); <span class="comment">//&#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><p>示例代码中，当通过next()方法传入参数时，会赋值给yield语句中的变量。</p><blockquote><p>在迭代器中抛出错误</p></blockquote><p>能传递给迭代器的不仅是数据，还可以是错误，迭代器可以选择一个<code>throw()</code>方法，用于指示迭代器应在恢复执行时抛出一个错误：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//迭代器抛出错误</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">let</span> first = <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> second = <span class="keyword">yield</span> first+<span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> third = <span class="keyword">yield</span> second+<span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">generator</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>()); <span class="comment">//&#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>(<span class="number">4</span>)); <span class="comment">//&#123;value: 6, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="keyword">throw</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Error!&#x27;</span>))); <span class="comment">//Uncaught Error: Error!</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>()); <span class="comment">//不会执行</span></span><br></pre></td></tr></table></figure><p>在生成器中同样可以使用<code>try-catch</code>来捕捉错误：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> * <span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">let</span> first = <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> second;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">second = <span class="keyword">yield</span> first+<span class="number">2</span>;</span><br><span class="line">&#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">second = <span class="number">6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> third = <span class="keyword">yield</span> second+<span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">generator</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>()); <span class="comment">//&#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>(<span class="number">4</span>)); <span class="comment">//&#123;value: 6, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="keyword">throw</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Error!&#x27;</span>))); <span class="comment">//&#123;value: 9, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>()); <span class="comment">//&#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>生成器的return语句</p></blockquote><p>由于生成器是函数，你可以在它内部使用 <code>return</code> 语句，既可以让生成器早一点退出执行，也可以指定在 <code>next()</code> 方法最后一次调用时的返回值。大多数情况，迭代器上的<br><code>next()</code> 的最后一次调用都返回了 <code>undefined</code> ，但你还可以像在其他函数中那样，使用<br><code>return</code> 来指定另一个返回值。在生成器内， return 表明所有的处理已完成，因此 done<br>属性会被设为 true ，而如果提供了返回值，就会被用于 value 字段。比如，利用return让生成器更早的退出：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> * <span class="title function_">gene</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">gene</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: undefined, done: true&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><p>由于使用return语句，能够让生成器更早结束，因此在第二次以及第三次调用next()方法时，返回结果对象为：<code>&#123;value: undefined, done: true&#125;</code>。</p><p>还可以使用return语句指定最后返回值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> * <span class="title function_">gene</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;finish&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">gene</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: &quot;finish&quot;, done: true&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><p>当第二次调用next()方法时，返回了设置的返回值：<code>finish</code>。第三次调用 <code>next()</code> 返回了一个对象，其 <code>value</code> 属性再次变回<code>undefined</code> ，你在 <code>return</code> 语句中指定的任意值都只会在结果对象中出现一次，此后 <code>value</code> 字段就会被重置为 <code>undefined</code> 。</p><blockquote><p>生成器委托</p></blockquote><p>生成器委托是指：将生成器组合起来使用，构成一个生成器。组合生成器的语法需要<code>yield</code>和<code>*</code>，<code>*</code>落在<code>yield</code>关键字与生成器函数名之间即可：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> * <span class="title function_">gene1</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line"><span class="keyword">yield</span> <span class="string">&#x27;green&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">gene2</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">combined</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">yield</span> * <span class="title function_">gene1</span>();</span><br><span class="line"><span class="keyword">yield</span> * <span class="title function_">gene2</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">combined</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: &quot;red&quot;, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: &quot;green&quot;, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: 2, done: true&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><p>此例中将生成器gene1和gene2组合而成生成器combined，每次调用combined的next()方法时，实际上会委托到具体的生成器中，当gene1生成器中所有的yield执行完退出之后，才会继续执行gene2，当gene2执行完退出之后，也就意味着combined生成器执行结束。</p><p>在使用生成器委托组合新的生成器时，前一个执行的生成器返回值可以作为下一个生成器的参数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//利用生成器返回值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">gene1</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">gene2</span>(<span class="params">count</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;count;i++)&#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="string">&#x27;repeat&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> * <span class="title function_">combined</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">let</span> result = <span class="keyword">yield</span> * <span class="title function_">gene1</span>();</span><br><span class="line"><span class="keyword">yield</span> result;</span><br><span class="line"><span class="keyword">yield</span>*<span class="title function_">gene2</span>(result);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> iterator = <span class="title function_">combined</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: 2, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: &quot;repeat&quot;, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: &quot;repeat&quot;, done: false&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>());<span class="comment">//&#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><p>此例中，生成器gene1的返回值，就作为了生成器gene2的参数。</p><h3 id="异步任务"><a href="#异步任务" class="headerlink" title="异步任务"></a>异步任务</h3><blockquote><p>一个简单的任务运行器</p></blockquote><p>生成器函数中yield能暂停运行，当再次调用next()方法时才会重新往下运行。一个简单的任务执行器，就需要传入一个生成器函数，然后每一次调用next()方法就会“一步步”往下执行函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//任务执行器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">run</span>(<span class="params">taskDef</span>) &#123;</span><br><span class="line"><span class="comment">// 创建迭代器，让它在别处可用</span></span><br><span class="line"><span class="keyword">let</span> task = <span class="title function_">taskDef</span>();</span><br><span class="line"><span class="comment">// 启动任务</span></span><br><span class="line"><span class="keyword">let</span> result = task.<span class="title function_">next</span>();</span><br><span class="line"><span class="comment">// 递归使用函数来保持对 next() 的调用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">step</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// 如果还有更多要做的</span></span><br><span class="line"><span class="keyword">if</span> (!result.<span class="property">done</span>) &#123;</span><br><span class="line">result = task.<span class="title function_">next</span>();</span><br><span class="line"><span class="title function_">step</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// 开始处理过程</span></span><br><span class="line"><span class="title function_">step</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">run</span>(<span class="keyword">function</span>*() &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">yield</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">yield</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>run()</code> 函数接受一个任务定义（即一个生成器函数） 作为参数，它会调用生成器来创建一个<br>迭代器，并将迭代器存放在 <code>task</code> 变量上。第一次对 <code>next()</code> 的调用启动<br>了迭代器，并将结果存储下来以便稍后使用。<code> step()</code> 函数查看<code> result.done</code> 是否为 <code>false</code>，如果是就在递归调用自身之前调用 <code>next()</code> 方法。每次调用 <code>next()</code> 都会把返回的结果保<br>存在 <code>result</code> 变量上，它总是会被最新的信息所重写。对于 <code>step()</code> 的初始调用启动了处理<br>过程，该过程会查看 <code>result.done</code> 来判断是否还有更多要做的工作。</p><blockquote><p>能够传递数据的任务运行器</p></blockquote><p>如果需要传递数据的话，也很容易，也就是将上一次<code>yield</code>的值，传递给下一次<code>next()</code>调用即可，仅仅只需要传送结果对象的<code>value</code>属性：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//任务执行器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">run</span>(<span class="params">taskDef</span>) &#123;</span><br><span class="line"><span class="comment">// 创建迭代器，让它在别处可用</span></span><br><span class="line"><span class="keyword">let</span> task = <span class="title function_">taskDef</span>();</span><br><span class="line"><span class="comment">// 启动任务</span></span><br><span class="line"><span class="keyword">let</span> result = task.<span class="title function_">next</span>();</span><br><span class="line"><span class="comment">// 递归使用函数来保持对 next() 的调用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">step</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// 如果还有更多要做的</span></span><br><span class="line"><span class="keyword">if</span> (!result.<span class="property">done</span>) &#123;</span><br><span class="line">result = task.<span class="title function_">next</span>(result.<span class="property">value</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">value</span>); <span class="comment">//6 undefined</span></span><br><span class="line"><span class="title function_">step</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// 开始处理过程</span></span><br><span class="line"><span class="title function_">step</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">run</span>(<span class="keyword">function</span>*() &#123;</span><br><span class="line"><span class="keyword">let</span> value = <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">yield</span> value+<span class="number">5</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>异步任务</p></blockquote><p>上面的例子是简单的任务处理器，甚至还是同步的。实现任务器也主要是迭代器在每一次调用<code>next()</code>方法时彼此间传递静态参数。如果要将上面的任务处理器改装成异步任务处理器的话，就需要<code>yield</code>能够返回一个<strong>能够执行回调函数的函数，并且回调参数为该函数的参数</strong>即可。</p><p><strong>什么是有回调函数的函数？</strong></p><p>有这样的示例代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params">callback</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">callback</span>) &#123;</span><br><span class="line"><span class="title function_">callback</span>(<span class="literal">null</span>, <span class="string">&quot;Hi!&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>函数<code>fetchData</code>返回的是一个函数，并且所返回的函数能够接受一个函数callback。当执行返回的函数时，实际上是调用回调函数<code>callback</code>。但目前而言，回调函数callback还是同步的，可以改造成异步函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params">callback</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">callback</span>) &#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="title function_">callback</span>(<span class="literal">null</span>, <span class="string">&quot;Hi!&quot;</span>);</span><br><span class="line">&#125;, <span class="number">50</span>);</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一个简单的异步任务处理器：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//异步任务处理器</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">run</span>(<span class="params">taskDef</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行生成器，创建迭代器</span></span><br><span class="line"><span class="keyword">let</span> task = <span class="title function_">taskDef</span>();</span><br><span class="line"><span class="comment">//启动任务</span></span><br><span class="line"><span class="keyword">let</span> result = task.<span class="title function_">next</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">step</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">while</span>(!result.<span class="property">done</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_">typeof</span>(result.<span class="property">value</span>)===<span class="string">&#x27;function&#x27;</span> )&#123;</span><br><span class="line">result.<span class="title function_">value</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">result = task.<span class="title function_">next</span>();</span><br><span class="line"><span class="title function_">step</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">step</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​<br>​<br>​    </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">run</span>(<span class="keyword">function</span> *()&#123;</span><br><span class="line"><span class="comment">//返回一个能够返回执行回调函数的函数，并且回调函数还是该</span></span><br><span class="line"><span class="comment">//函数的参数</span></span><br><span class="line"><span class="keyword">yield</span> <span class="keyword">function</span>(<span class="params">callback</span>)&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(callback,<span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>上面的示例代码就是一个简单的异步任务处理器，有这样几点要点：</p><ol><li>使用生成器构造迭代器，所以在<code>run</code>方法中传入的是生成器函数；</li><li>生成器函数中<code>yield</code>关键字，返回的是<strong>一个能够执行回调函数的函数，并且回调函数是该函数的一个参数</strong>；</li></ol><h3 id="总结-5"><a href="#总结-5" class="headerlink" title="总结"></a>总结</h3><ol><li>使用迭代器可以用来遍历集合对象包含的数据，调用迭代器的<code>next()</code>方法可以返回一个结果对象，其中<code>value</code>属性代表值，<code>done</code>属性用来表示集合对象是否已经到了最后一项，如果集合对象的值全部遍历完后，<code>done</code>属性为<code>true</code>；</li><li><code>Symbol.iterator</code>属性被用于定义对象的默认迭代器，使用该属性可以为对象自定义迭代器。当<code>Symbol.iterator</code>属性存在时，该对象可以被认为是可迭代对象；</li><li>可迭代对象可以使用for-of循环，for-of循环不需要关注集合对象的索引，更能专注于对内容的处理；</li><li>数组、Set、Map以及字符串都具有默认的迭代器；</li><li>扩展运算符可以作用于任何可迭代对象，让可迭代对象转换成数组，并且扩展运算符可以用于数组字面量中任何位置中，让可迭代对象的数据项一次填入到新数组中；</li><li>生成器是一个特殊的函数，语法上使用了<code>*</code>，yield能够返回结果，并能暂停继续往下执行，直到调用next()方法后，才能继续往下执行。使用生成器委托能够将两个生成器合并组合成一个生成器；</li><li>能够使用生成器构造异步任务处理器；</li></ol><h3 id="例子-3"><a href="#例子-3" class="headerlink" title="例子"></a>例子</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">//生成器</span><br><span class="line"></span><br><span class="line">// function*generator()&#123;</span><br><span class="line"></span><br><span class="line">// yield 1;</span><br><span class="line">// yield 2;</span><br><span class="line">// yield 3;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// let iterator = generator();</span><br><span class="line">// console.log(iterator.next().value);</span><br><span class="line">// console.log(iterator.next().value);</span><br><span class="line"></span><br><span class="line">// let arr = [1,2,3];</span><br><span class="line">// // for(let num of arr)&#123;</span><br><span class="line">// // console.log(num);</span><br><span class="line">// // &#125;</span><br><span class="line"></span><br><span class="line">// //访问默认迭代器</span><br><span class="line"></span><br><span class="line">// let iterator = arr[Symbol.iterator]();</span><br><span class="line">// console.log(iterator.next().value);</span><br><span class="line">// console.log(iterator.next().value);</span><br><span class="line"></span><br><span class="line">//创建可迭代对象</span><br><span class="line"></span><br><span class="line">// let obj = &#123;</span><br><span class="line">// items:[],</span><br><span class="line"></span><br><span class="line">// *[Symbol.iterator]()&#123;</span><br><span class="line">// for(let item of this.items)&#123;</span><br><span class="line">// yield item;</span><br><span class="line">// &#125;</span><br><span class="line">// &#125;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// obj.items.push(1);</span><br><span class="line">// obj.items.push(2);</span><br><span class="line"></span><br><span class="line">// for(let num of obj)&#123;</span><br><span class="line">// console.log(num);</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">//字符串默认迭代器</span><br><span class="line">// let str =&#x27;A   B&#x27;;</span><br><span class="line">// for(let s of str)&#123;</span><br><span class="line">// console.log(s);</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">//扩展运算符可作用到所有可迭代对象</span><br><span class="line">// let arr = [1,2,3];</span><br><span class="line">// let arr2 = [7,8,9];</span><br><span class="line">// let array = [...arr,5,...arr2];</span><br><span class="line">// console.log(array);</span><br><span class="line"></span><br><span class="line">//迭代器的高级功能,next()方法传递参数</span><br><span class="line">// function * generator()&#123;</span><br><span class="line">// let first = yield 1;</span><br><span class="line">// let second = yield first+2;</span><br><span class="line">// let third = yield second+3;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// let iterator = generator();</span><br><span class="line">// console.log(iterator.next()); //&#123;value: 1, done: false&#125;</span><br><span class="line">// console.log(iterator.next(4)); //&#123;value: 6, done: false&#125;</span><br><span class="line">// console.log(iterator.next(5)); //&#123;value: 8, done: false&#125;</span><br><span class="line">// console.log(iterator.next()); //&#123;value: undefined, done: true&#125;</span><br><span class="line"></span><br><span class="line">//迭代器抛出错误</span><br><span class="line"></span><br><span class="line">// function * generator()&#123;</span><br><span class="line">// let first = yield 1;</span><br><span class="line">// let second;</span><br><span class="line">// try&#123;</span><br><span class="line">// second = yield first+2;</span><br><span class="line">// &#125;catch(ex)&#123;</span><br><span class="line">// second = 6</span><br><span class="line">// &#125;</span><br><span class="line">// let third = yield second+3;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// let iterator = generator();</span><br><span class="line">// console.log(iterator.next()); //&#123;value: 1, done: false&#125;</span><br><span class="line">// console.log(iterator.next(4)); //&#123;value: 6, done: false&#125;</span><br><span class="line">// console.log(iterator.throw(new Error(&#x27;Error!&#x27;))); //&#123;value: 9, done: false&#125;</span><br><span class="line">// console.log(iterator.next()); //&#123;value: undefined, done: true&#125;</span><br><span class="line"></span><br><span class="line">//生成器的return语句</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// function * gene()&#123;</span><br><span class="line">// yield 1;</span><br><span class="line">// return &#x27;finish&#x27;;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// let iterator = gene();</span><br><span class="line">// console.log(iterator.next());//&#123;value: 1, done: false&#125;</span><br><span class="line">// console.log(iterator.next());//&#123;value: &quot;finish&quot;, done: true&#125;</span><br><span class="line">// console.log(iterator.next());//&#123;value: undefined, done: true&#125;</span><br><span class="line"></span><br><span class="line">//生成器委托</span><br><span class="line"></span><br><span class="line">// function * gene1()&#123;</span><br><span class="line">// yield &#x27;red&#x27;;</span><br><span class="line">// yield &#x27;green&#x27;;</span><br><span class="line"></span><br><span class="line">// &#125;</span><br><span class="line">// function * gene2()&#123;</span><br><span class="line">// yield 1;</span><br><span class="line">// yield 2;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// function * combined()&#123;</span><br><span class="line">// yield * gene1();</span><br><span class="line">// yield * gene2();</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// let iterator = combined();</span><br><span class="line">// console.log(iterator.next());//&#123;value: &quot;red&quot;, done: false&#125;</span><br><span class="line">// console.log(iterator.next());//&#123;value: &quot;green&quot;, done: false&#125;</span><br><span class="line">// console.log(iterator.next());//&#123;value: 1, done: false&#125;</span><br><span class="line">// console.log(iterator.next());//&#123;value: 2, done: true&#125;</span><br><span class="line">// console.log(iterator.next());//&#123;value: undefined, done: true&#125;</span><br><span class="line"></span><br><span class="line">// //利用生成器返回值</span><br><span class="line"></span><br><span class="line">// function * gene1()&#123;</span><br><span class="line">// yield 1;</span><br><span class="line">// return 2;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// function * gene2(count)&#123;</span><br><span class="line"></span><br><span class="line">// for(let i=0;i&lt;count;i++)&#123;</span><br><span class="line">// yield &#x27;repeat&#x27;;</span><br><span class="line">// &#125;</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// function * combined()&#123;</span><br><span class="line">// let result = yield * gene1();</span><br><span class="line">// yield result;</span><br><span class="line">// yield*gene2(result);</span><br><span class="line">// &#125;</span><br><span class="line">// let iterator = combined();</span><br><span class="line">// console.log(iterator.next());//&#123;value: 1, done: false&#125;</span><br><span class="line">// console.log(iterator.next());//&#123;value: 2, done: false&#125;</span><br><span class="line">// console.log(iterator.next());//&#123;value: &quot;repeat&quot;, done: false&#125;</span><br><span class="line">// console.log(iterator.next());//&#123;value: &quot;repeat&quot;, done: false&#125;</span><br><span class="line">// console.log(iterator.next());//&#123;value: undefined, done: true&#125;</span><br><span class="line"></span><br><span class="line">// //任务执行器</span><br><span class="line">// function run(taskDef) &#123;</span><br><span class="line">// // 创建迭代器，让它在别处可用</span><br><span class="line">// let task = taskDef();</span><br><span class="line">// // 启动任务</span><br><span class="line">// let result = task.next();</span><br><span class="line">// // 递归使用函数来保持对 next() 的调用</span><br><span class="line">// function step() &#123;</span><br><span class="line">// // 如果还有更多要做的</span><br><span class="line">// if (!result.done) &#123;</span><br><span class="line">// result = task.next(result.value);</span><br><span class="line">// console.log(result.value);</span><br><span class="line">// step();</span><br><span class="line">// &#125;</span><br><span class="line">// &#125; </span><br><span class="line">// // 开始处理过程</span><br><span class="line">// step();</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// run(function*() &#123;</span><br><span class="line">// let value = yield 1;</span><br><span class="line">// yield value+5;</span><br><span class="line">// &#125;);</span><br><span class="line"></span><br><span class="line">//异步任务处理器</span><br><span class="line"></span><br><span class="line">function run(taskDef)&#123;</span><br><span class="line"></span><br><span class="line">//执行生成器，创建迭代器</span><br><span class="line">let task = taskDef();</span><br><span class="line">//启动任务</span><br><span class="line">let result = task.next();</span><br><span class="line"></span><br><span class="line">function step()&#123;</span><br><span class="line">while(!result.done)&#123;</span><br><span class="line">if(typeof(result.value)===&#x27;function&#x27; )&#123;</span><br><span class="line">result.value(()=&gt;&#123;</span><br><span class="line">console.log(&#x27;hello world&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">result = task.next();</span><br><span class="line">step();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">step();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">run(function *()&#123;</span><br><span class="line">//返回一个能够返回执行回调函数的函数，并且回调函数还是该</span><br><span class="line">//函数的参数</span><br><span class="line">yield function(callback)&#123;</span><br><span class="line">setTimeout(callback,3000);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="推荐blue老师的库源码—"><a href="#推荐blue老师的库源码—" class="headerlink" title="推荐blue老师的库源码—"></a>推荐blue老师的库源码—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=runner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">runner</span>(<span class="params">_gen</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> gen=<span class="title function_">_gen</span>();</span><br><span class="line"></span><br><span class="line">    <span class="title function_">_next</span>();</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">_next</span>(<span class="params">_last_res</span>)&#123;</span><br><span class="line">      <span class="keyword">var</span> res=gen.<span class="title function_">next</span>(_last_res);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(!res.<span class="property">done</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> obj=res.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(obj <span class="keyword">instanceof</span> <span class="title class_">Promise</span>)&#123;</span><br><span class="line">          obj.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">_next</span>(res);</span><br><span class="line">          &#125;, <span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">reject</span>(err);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> obj==<span class="string">&#x27;function&#x27;</span>)&#123;</span><br><span class="line">          <span class="keyword">if</span>(obj.<span class="property">constructor</span>.<span class="title function_">toString</span>().<span class="title function_">startsWith</span>(<span class="string">&#x27;function GeneratorFunction()&#x27;</span>))&#123;</span><br><span class="line">            <span class="title function_">runner</span>(obj).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span><span class="title function_">_next</span>(res), reject);</span><br><span class="line">          &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="title function_">_next</span>(<span class="title function_">obj</span>());</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="title function_">_next</span>(obj);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_">resolve</span>(res.<span class="property">value</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>简单使用</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> runner=<span class="built_in">require</span>(<span class="string">&#x27;./index&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> *<span class="title function_">gen</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> a=<span class="keyword">yield</span> <span class="number">12</span>;</span><br><span class="line">  <span class="keyword">var</span> b=<span class="keyword">yield</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">runner</span>(<span class="keyword">function</span>* ()&#123;</span><br><span class="line">  <span class="keyword">var</span> num=<span class="keyword">yield</span> gen;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(num);   <span class="comment">//excepted 17</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="类的声明"><a href="#类的声明" class="headerlink" title="类的声明"></a>类的声明</h2><blockquote><p>基本的类声明</p></blockquote><p>类声明以<code>class</code>关键字开始，其后是类的名称；类中的方法就像是对象字面量中的方法简写，并且方法之间不需要使用逗号：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PersonClass</span>&#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">name</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sayName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">PersonClass</span>(<span class="string">&quot;hello class&quot;</span>);</span><br><span class="line">person.<span class="title function_">sayName</span>();</span><br></pre></td></tr></table></figure><p>类声明语法允许使用<code>constructor</code>直接定义一个构造器，而不需要先定义一个函数，再把它当做构造器来使用。类中的方法使用的函数简写语法，省略了关键字<code>function</code>。</p><p>使用class关键字来定义一个类型，有这样几个要点：</p><ol><li>类声明不会被提升，这与ES6之前通过函数定义不同。类声明与使用<code>let</code>定义一样，因此也存在暂时性死区；</li><li>类声明中的所有代码会自动运行在严格模式下，并且无法退出严格模式；</li><li>类的所有方法都是不可枚举的；</li><li>类的所有内部方法都没有<code>[[Constructor]]</code>，因此使用<code>new</code>来调用他们会抛出错误；</li><li>调用类构造器时不使用<code>new</code>，会抛出错误；</li><li>试图在类的内部方法中重写类名，会抛出错误；</li></ol><h3 id="类表达式"><a href="#类表达式" class="headerlink" title="类表达式"></a>类表达式</h3><p>类与函数有相似之处，都有两种形式：声明与表达式。函数声明与类声明都以关键词开始（分别是function和class），之后就是标识符（即函数名或者类名）。如果需要定义匿名函数，则function后面就无需有函数名，类似的，如果采用类表达式，关键是class后也无需有类名；</p><blockquote><p>基本的类表达式</p></blockquote><p>使用类表达式，将上例改成如下形式：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">PersonClass</span> = <span class="keyword">class</span> &#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">name</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sayName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">PersonClass</span>(<span class="string">&quot;hello class&quot;</span>);</span><br><span class="line">person.<span class="title function_">sayName</span>(); <span class="comment">//hello  class</span></span><br></pre></td></tr></table></figure><p><strong>示例代码中就定义了一个匿名的类表达式，如果需要定义一个具名的类表达式，只需要像定义具名函数一样，在class关键字后面写上类名即可。</strong></p><h3 id="类的重要要点"><a href="#类的重要要点" class="headerlink" title="类的重要要点"></a>类的重要要点</h3><blockquote><p>作为一级公民的类</p></blockquote><p>在编程中，<strong>能够被当作值来使用的就成为一级公民（first-class citizen）</strong>。既然都当作值使用，就说明它能够作为参数传递给函数、能作为函数的返回值也能用来给变量赋值。JS中的函数是一等公民，类也是一等公民。</p><p>例如，将类作为参数传递给函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function createObj(classDef)&#123;</span><br><span class="line">return new classDef();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let obj = createObj(class&#123;</span><br><span class="line">sayName()&#123;</span><br><span class="line">console.log(&#x27;hello&#x27;); //hello</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj.sayName();</span><br></pre></td></tr></table></figure><p><strong>类表达式另一个重要用途是实现立即调用类构造器以创建单例。</strong>语法是使用<code>new</code>来配合类表达式使用，并在表达式后面添加括号()：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//立即调用构造器</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="keyword">class</span>&#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">name</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sayName</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line"></span><br><span class="line">person.<span class="title function_">sayName</span>(); <span class="comment">//hello world</span></span><br></pre></td></tr></table></figure><blockquote><p>访问器属性</p></blockquote><p>自有属性需要在类构造器中创建，而类还允许创建访问器属性。为了创建一个<code>getter</code>，要使用<code>get</code>关键字，并要与后面的标识符之间留出空格；创建<code>setter</code>使用相同的方式，只需要将关键字换成<code>set</code>即可：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PersonClass</span>&#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">name</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">get</span> <span class="title function_">name</span>()&#123;</span><br><span class="line"><span class="keyword">return</span> name; <span class="comment">//不要使用this.name会导致无限递归</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">value</span>)&#123;</span><br><span class="line">name=value; <span class="comment">//不要使用this.value会导致无限递归</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">PersonClass</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>); <span class="comment">// hello</span></span><br><span class="line">person.<span class="property">name</span> = <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>); <span class="comment">//world</span></span><br><span class="line"><span class="keyword">let</span> descriptor = <span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptor</span>(<span class="title class_">PersonClass</span>.<span class="property"><span class="keyword">prototype</span></span>,<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;get&#x27;</span> <span class="keyword">in</span> descriptor); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><blockquote><p>需计算属性名</p></blockquote><p>对象字面量和类之间的相似点有很多，类方法与类访问器属性都能使用需计算属性名的方式，语法与对象字面量中需计算属性名一样，都是使用方括号[]来包裹表达式：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需计算属性名</span></span><br><span class="line"><span class="keyword">let</span> methodName =<span class="string">&#x27;sayName&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> propertyName = <span class="string">&#x27;name&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PersonClass</span>&#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">name</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line">get [propertyName]()&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line">set [propertyName](value)&#123;</span><br><span class="line">name = value;</span><br><span class="line">&#125;</span><br><span class="line">[methodName]()&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">PersonClass</span>(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">person.<span class="title function_">sayName</span>(); <span class="comment">//hello world</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>); <span class="comment">//hello world</span></span><br></pre></td></tr></table></figure><blockquote><p>生成器方法</p></blockquote><p>在对象字面量中定义一个生成器：只需要在方法名前附加一个星号<code>*</code>即可，这一语法对类同样有效，允许将类的任意内部方法编程生成器方法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//生成器方法：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GeneClass</span>&#123;</span><br><span class="line"></span><br><span class="line">*<span class="title function_">generator</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="title class_">GeneClass</span>();</span><br><span class="line"><span class="keyword">let</span> iterator = obj.<span class="title function_">generator</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">//2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure><p>可迭代对象用于<code>Symbol.iterator</code>属性，并且该属性指向生成器函数。因此，在类定义中同样可以使用<code>Symbol.iterator</code>属性来定义生成器方法，从而定义出类的默认迭代器。同时也可以通过生成器委托的方式，将数组、Set、Map等迭代器委托给自定义类的迭代器：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Collection</span> &#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">items</span> = [];</span><br><span class="line">&#125; </span><br><span class="line">*[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> <span class="variable language_">this</span>.<span class="property">items</span>)&#123;</span><br><span class="line"><span class="keyword">yield</span> item;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">let</span> collection = <span class="keyword">new</span> <span class="title class_">Collection</span>();</span><br><span class="line">collection.<span class="property">items</span>.<span class="title function_">push</span>(<span class="number">1</span>);</span><br><span class="line">collection.<span class="property">items</span>.<span class="title function_">push</span>(<span class="number">2</span>);</span><br><span class="line">collection.<span class="property">items</span>.<span class="title function_">push</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> collection) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">&#125;</span><br><span class="line">输出：<span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><blockquote><p>静态成员</p></blockquote><p>ES6的类简化了静态成员的创建，只要在方法与访问器属性的名称前添加<code>static</code>关键字即可：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PersonClass</span> &#123;</span><br><span class="line"><span class="comment">// 等价于 PersonType 构造器</span></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">static</span> <span class="title function_">create</span>(<span class="params">name</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PersonClass</span>(name);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="title class_">PersonClass</span>.<span class="title function_">create</span>(<span class="string">&quot;Nicholas&quot;</span>);</span><br></pre></td></tr></table></figure><p>通过在方法前加上<code>static</code>关键字，使其转换成静态方法。能在类中的任何方法与访问器属性上使用 <code>static</code> 关键字，唯一限制是不能将它用于 <code>constructor</code> 方法的定义。<strong>静态成员不能用实例来进行访问，始终需要用类自身才能访问它们。</strong></p><blockquote><p>类继承</p></blockquote><p>使用关键字extends可以完成类继承，同时使用super关键字可以在派生类上访问到基类上的方法，包括构造器方法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//类继承</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rec</span>&#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">width,height</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getArea</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">width</span>*<span class="variable language_">this</span>.<span class="property">height</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Rec</span>&#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">width,height</span>)&#123;</span><br><span class="line"><span class="variable language_">super</span>(width,height);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> square = <span class="keyword">new</span> <span class="title class_">Square</span>(<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(square.<span class="title function_">getArea</span>()); <span class="comment">//10000</span></span><br></pre></td></tr></table></figure><p>关于类继承，还有这样几个要点：</p><ol><li><strong>在派生类中方法会覆盖掉基类中的同名方法，</strong>例如在派生类<code>Square</code>中有<code>getArea()</code>方法的话就会覆盖掉基类<code>Rec</code>中的<code>getArea()</code>方法；</li><li>如果基类中包含了静态成员，那么这些静态成员在派生类中也是可以使用的。注意：<strong>静态成员只能通过类名进行访问，而不是使用对象实例进行访问</strong>；</li></ol><blockquote><p>从表达式中派生类</p></blockquote><p>在ES6中派生类<strong>最大的能力就是能够从表达式中派生类</strong>，只要一个表达式能够返回的对象具有<code>[[Constructor]]</code>属性以及原型，你就可以对该表达式使用<code>extends</code>进行继承。<strong>由于extends后面能够接收任意类型的表达式，这就带来了巨大的可能性，可以动态决定基类，因此一种对象混入的方式：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从表达式中派生类</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">SerializableMixin</span> = &#123;</span><br><span class="line"><span class="title function_">serialize</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">AreaMixin</span> = &#123;</span><br><span class="line"><span class="title function_">getArea</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">length</span> * <span class="variable language_">this</span>.<span class="property">width</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mixin</span>(<span class="params">...mixins</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> base = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(base.<span class="property"><span class="keyword">prototype</span></span>, ...mixins);</span><br><span class="line"><span class="keyword">return</span> base;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_ inherited__">mixin</span>(<span class="title class_">AreaMixin</span>, <span class="title class_">SerializableMixin</span>) &#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">length</span>) &#123;</span><br><span class="line"><span class="variable language_">super</span>();</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">length</span> = length;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">width</span> = length;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">let</span> x = <span class="keyword">new</span> <span class="title class_">Square</span>(<span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="title function_">getArea</span>()); <span class="comment">// 9</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="title function_">serialize</span>()); <span class="comment">// &quot;&#123;&quot;length&quot;:3,&quot;width&quot;:3&#125;&quot;</span></span><br></pre></td></tr></table></figure><p><code>mixin() </code>函数接受代表混入对象的任意数量的参数，它创建了一个名为 <code>base</code> 的函数，并将每个混入对象的属性都赋值到新函数的原型上。此函数随后被返回，于是 <code>Square</code> 就能够对其使用 <code>extends</code> 关键字了。注意由于仍然使用了 <code>extends</code> ，你就必须在构造器内调用 <code>super()</code>。若多个混入对象拥有相同的属性，则只有最后添加<br>的属性会被保留。</p><h3 id="继承内置对象"><a href="#继承内置对象" class="headerlink" title="继承内置对象"></a>继承内置对象</h3><p>在E6中能够通过<code>extends</code>继承JS中内置对象，例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Array</span> &#123;</span><br><span class="line"><span class="comment">// 空代码块</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">let</span> colors = <span class="keyword">new</span> <span class="title class_">MyArray</span>();</span><br><span class="line">colors[<span class="number">0</span>] = <span class="string">&quot;red&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors.<span class="property">length</span>); <span class="comment">// 1</span></span><br><span class="line">colors.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors[<span class="number">0</span>]); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><blockquote><p>Symbol.species</p></blockquote><p>属性<code>Symbol.species</code>被用于<strong>定义静态访问器属性</strong>，该属性值<strong>用来指定类的构造器</strong>。当创建一个新的对象实例时，就需要通过<code>Symbol.species</code>属性获取到构造器，从而新建对象实例。</p><p>下面内置对象都定义了<code>Symbol.species</code>属性：</p><ul><li>Array;</li><li>ArrayBuffer;</li><li>Map;</li><li>Promise;</li><li>RegExp;</li><li>Set;</li><li>类型化数组</li></ul><p>例如在自定义类型中，使用<code>Symbol.species</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">static</span> get [<span class="title class_">Symbol</span>.<span class="property">species</span>]() &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">value</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">value</span> = value;</span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">clone</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="variable language_">this</span>.<span class="property">constructor</span>[<span class="title class_">Symbol</span>.<span class="property">species</span>](<span class="variable language_">this</span>.<span class="property">value</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDerivedClass1</span> <span class="keyword">extends</span> <span class="title class_ inherited__">MyClass</span> &#123;</span><br><span class="line"><span class="comment">// 空代码块</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDerivedClass2</span> <span class="keyword">extends</span> <span class="title class_ inherited__">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">static</span> get [<span class="title class_">Symbol</span>.<span class="property">species</span>]() &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="title class_">MyClass</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">let</span> instance1 = <span class="keyword">new</span> <span class="title class_">MyDerivedClass1</span>(<span class="string">&quot;foo&quot;</span>),</span><br><span class="line">clone1 = instance1.<span class="title function_">clone</span>(),</span><br><span class="line">instance2 = <span class="keyword">new</span> <span class="title class_">MyDerivedClass2</span>(<span class="string">&quot;bar&quot;</span>),</span><br><span class="line">clone2 = instance2.<span class="title function_">clone</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(clone1 <span class="keyword">instanceof</span> <span class="title class_">MyClass</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(clone1 <span class="keyword">instanceof</span> <span class="title class_">MyDerivedClass1</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(clone2 <span class="keyword">instanceof</span> <span class="title class_">MyClass</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(clone2 <span class="keyword">instanceof</span> <span class="title class_">MyDerivedClass2</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>此处, <code>MyDerivedClass1</code> 继承了 <code>MyClass</code> ，并且未修改 <code>Symbol.species</code> 属性。由于<br><code>this.constructor[Symbol.species]</code> 会返回 <code>MyDerivedClass1</code> ，当 <code>clone()</code> 被调用时，它就<br>返回了 <code>MyDerivedClass1</code> 的一个实例。 <code>MyDerivedClass2</code> 类也继承了 <code>MyClass</code> ，但重写了<br><code>Symbol.species </code>，让其返回 <code>MyClass</code> 。当 <code>clone()</code> 在 <code>MyDerivedClass2</code> 的一个实例上被调<br>用时，返回值就变成 <code>MyClass</code> 的一个实例。使用 <code>Symbol.species </code>，任意派生类在调用应当<br>返回实例的方法时，都可以判断出需要返回什么类型的值。</p><blockquote><p>在类构造器中使用new.target</p></blockquote><p>使用<code>new.target</code>属性能够判断当前实例对象是由哪个类构造器进行创建的，简单的情况下，<code>new.target</code>属性就等于该类的构造器函数，同时new.target属性也只能在构造器内被定义。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rec</span>&#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span>.<span class="property">target</span>===<span class="title class_">Rec</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Rec</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> rec = <span class="keyword">new</span> <span class="title class_">Rec</span>();</span><br><span class="line"><span class="keyword">let</span> square = <span class="keyword">new</span> <span class="title class_">Square</span>();</span><br><span class="line"></span><br><span class="line">输出：<span class="literal">true</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>当创建<code>Rec</code>对象实例时，<code>new.target</code>指代的是<code>Rec</code>自身的构造器，因此<code>new.target===Rec</code>会返回<code>true</code>，而<code>Rec</code>的派生类<code>Square</code>的<code>new.target</code>会指向它自身的构造器，因此<code>new.target===Rec</code>会返回false;</p><p><strong>可以使用new.target来创建一个抽象基类：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rec</span>&#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">new</span>.<span class="property">target</span>===<span class="title class_">Rec</span>)&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;abstract class&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Rec</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> rec = <span class="keyword">new</span> <span class="title class_">Rec</span>(); <span class="comment">//Uncaught Error: abstract class</span></span><br><span class="line"><span class="keyword">let</span> square = <span class="keyword">new</span> <span class="title class_">Square</span>(); <span class="comment">//不会报错</span></span><br></pre></td></tr></table></figure><p>当试图创建一个Rec实例对象时，会抛出错误，因此Rec可以当做一个抽象基类。</p><h3 id="总结-6"><a href="#总结-6" class="headerlink" title="总结"></a>总结</h3><ol><li>ES6中的类使用关键字class进行定义，即可以采用类声明的方式也可以采用类表达式进行定义。 此外，类构造器被调用时不能缺少 new ，确保了不能意外地将类作为函数来调用用。 </li><li>基于类的继承允许你从另一个类、函数或表达式上派生新的类。这种能力意味着你可以调用一个函数来判断需要继承的正确基类，也允许你使用混入或其他不同的组合模式来创建一个新类。新的继承方式让继承内置对象（例如数组） 也变为可能，并且其工作符合预期。</li><li>可以使用<code>new.target</code>来判断创建实例对象时所用的类构造器。利用<code>new.target</code>可以用来创建一个抽象基类；</li></ol><p>总之，类是 JS 的一项新特性，它提供了更简洁的语法与更好的功能，通过安全一致的方式来自定义一个对象类型。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//类表达式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let PersonClass = class &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// constructor(name)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.name = name;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// sayName()&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(this.name);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let person = new PersonClass(&quot;hello class&quot;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// person.sayName();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//类作为参数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// function createObj(classDef)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return new classDef();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let obj = createObj(class&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// sayName()&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(&#x27;hello&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// obj.sayName();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//立即调用构造器</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let person = new class&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// constructor(name)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.name = name;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// sayName()&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(this.name);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;(&#x27;hello world&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// person.sayName(); //hello world</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//访问器属性</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class PersonClass&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// constructor(name)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.name = name;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// get name()&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return name;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// set name(value)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// name=value;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let person = new PersonClass(&#x27;hello&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(person.name);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// person.name = &#x27;world&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(person.name);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let descriptor = Object.getOwnPropertyDescriptor(PersonClass.prototype,&#x27;name&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(&#x27;get&#x27; in descriptor);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //需计算属性名</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let methodName =&#x27;sayName&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let propertyName = &#x27;name&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class PersonClass&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// constructor(name)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.name = name;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// get [propertyName]()&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return name;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// set [propertyName](value)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// name = value;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// [methodName]()&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return console.log(this.name);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let person = new PersonClass(&#x27;hello world&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// person.sayName();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(person.name);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //生成器方法：</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class GeneClass&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// *generator()&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// yield 1;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// yield 2;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let obj = new GeneClass();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let iterator = obj.generator();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(iterator.next().value); //1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(iterator.next().value); //2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(iterator.next().value); //undefined</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//自定义类的默认迭代器</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class Collection &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// constructor() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.items = [];</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// *[Symbol.iterator]() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// for(let item of this.items)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// yield item;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let collection = new Collection();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// collection.items.push(1);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// collection.items.push(2);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// collection.items.push(3);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// for (let x of collection) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(x);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//静态成员</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class PersonClass &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// // 等价于 PersonType 构造器</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// constructor(name) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.name = name;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// static create(name) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return new PersonClass(name);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let person = PersonClass.create(&quot;Nicholas&quot;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //类继承</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class Rec&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// constructor(width,height)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.width = width;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.height = height;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// getArea()&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return this.width*this.height;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class Square extends Rec&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// constructor(width,height)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// super(width,height);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let square = new Square(100,100);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(square.getArea()); //10000</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //从表达式中派生类</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let SerializableMixin = &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// serialize() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return JSON.stringify(this);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let AreaMixin = &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// getArea() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return this.length * this.width;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// function mixin(...mixins) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// var base = function() &#123;&#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// Object.assign(base.prototype, ...mixins);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return base;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class Square extends mixin(AreaMixin, SerializableMixin) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// constructor(length) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// super();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.length = length;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.width = length;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let x = new Square(3);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(x.getArea()); // 9</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(x.serialize()); // &quot;&#123;&quot;length&quot;:3,&quot;width&quot;:3&#125;&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//继承内置对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class MyArray extends Array &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// // 空代码块</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let colors = new MyArray();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// colors[0] = &quot;red&quot;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(colors.length); // 1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// colors.length = 0;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(colors[0]); // undefined</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// Symbol.species</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class MyClass &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// static get [Symbol.species]() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return this;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// constructor(value) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// this.value = value;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// clone() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return new this.constructor[Symbol.species](this.value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class MyDerivedClass1 extends MyClass &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// // 空代码块</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// class MyDerivedClass2 extends MyClass &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// static get [Symbol.species]() &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return MyClass;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let instance1 = new MyDerivedClass1(&quot;foo&quot;),</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// clone1 = instance1.clone(),</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// instance2 = new MyDerivedClass2(&quot;bar&quot;),</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// clone2 = instance2.clone();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(clone1 instanceof MyClass); // true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(clone1 instanceof MyDerivedClass1); // true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(clone2 instanceof MyClass); // true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(clone2 instanceof MyDerivedClass2); // false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//new.target</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">class</span> <span class="title class_">Rec</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">if</span>(<span class="keyword">new</span>.<span class="property">target</span>===<span class="title class_">Rec</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;abstract class&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Rec</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> rec = <span class="keyword">new</span> <span class="title class_">Rec</span>(); <span class="comment">//Uncaught Error: abstract class</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> square = <span class="keyword">new</span> <span class="title class_">Square</span>(); <span class="comment">//不会报错</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="数组新方法"><a href="#数组新方法" class="headerlink" title="数组新方法"></a>数组新方法</h2><p>在 ES6 之前创建数组主要存在两种方式： <code>Array</code> 构造器与数组字面量写法。这两种方式都需要将数组的项分别列出，并且还要受到其他限制。将“类数组对象”（即：拥有数值类型索引与长度属性的对象） 转换为数组也并不自由，经常需要书写额外的代码。为了使数组更易创建，ES6 新增了<code> Array.of()</code> 与 <code>Array.from()</code> 方法。</p><blockquote><p>Array.of()方法</p></blockquote><p>Array.of()方法会将方法的传入参数全部作为数组里的数据内容，而不管参数的数量与类型：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let items = Array.of(1,&#x27;2&#x27;);</span><br><span class="line">console.log(items); //Array(2)</span><br><span class="line">console.log(items.length); //2</span><br></pre></td></tr></table></figure><blockquote><p>Array.from()方法</p></blockquote><p>可使用Array.from()方法可以将类数组对象和可迭代对象转换成数组。该方法接收三个参数：</p><ol><li>待转换的可迭代对象或者类数组对象（具有数值索引和长度属性的对象）；</li><li>可选的映射函数；</li><li>指定映射函数内部的 <code>this</code> 值；</li></ol><p><strong>映射转换</strong></p><p>如果你想实行进一步的数组转换，你可以向 Array.from() 方法传递一个映射用的函数作为第二个参数。此函数会将类数组对象的每一个值转换为目标形式，并将其存储在目标数组的对应位置上。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function trans(values)&#123;</span><br><span class="line">return Array.from(arguments,item=&gt;item+1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(trans(1,2,3)); //[2, 3, 4]</span><br></pre></td></tr></table></figure><p><strong>可迭代对象上使用</strong></p><p><code>Array.from()</code> 方法不仅可用于类数组对象，也可用于可迭代对象，也就是说可以将任意包含 <code>Symbol.iterator</code> 属性的对象转换成数组，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let obj = &#123;</span><br><span class="line">*[Symbol.iterator]()&#123;</span><br><span class="line">yield 1;</span><br><span class="line">yield 2;</span><br><span class="line">yield 3;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(Array.from(obj)); //[1, 2, 3]</span><br></pre></td></tr></table></figure><h3 id="find-和findIndex-方法"><a href="#find-和findIndex-方法" class="headerlink" title="find()和findIndex()方法"></a>find()和findIndex()方法</h3><p><code> indexOf()</code>和<code>lastIndexOf()</code>方法用于查找特定值在数组中的位置，而如果需要查找在数组中满足特定条件的元素就需要使用<code>find()</code>和<code>findIndex()</code>方法。</p><p><code>find()</code> 方法和 <code>findIndex()</code> 方法均接受两个参数：一个是回调函数、一个是可选的指定回调函数中的 <code>this</code> 值。回调函数中有三个参数：</p><ol><li>数组中的数据项元素；</li><li>元素在数组中的索引位置；</li><li>数组实例对象本身；</li></ol><p>回调函数与 <code>map()</code> 和 <code>forEach()</code> 等方法的回调函数中的参数一致。例如，需要找到在数组中大于5的元素：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">find</span>(<span class="function"><span class="params">item</span>=&gt;</span>item&gt;<span class="number">5</span>)); <span class="comment">//8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">findIndex</span>(<span class="function"><span class="params">item</span>=&gt;</span>item&gt;<span class="number">5</span>)); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>可以看出，<code>find() </code>方法返回的是满足特定条件的数据项，而 <code>findIndex()</code> 方法返回的是满足特定条件的元素索引。</p><h3 id="fill-方法"><a href="#fill-方法" class="headerlink" title="fill()方法"></a>fill()方法</h3><p><code>fill() </code>方法能使用特定值填充数组中的一个或多个元素。当只使用一个参数的时候，该方法会用该参数的值填充整个数组。若你不想改变数组中的所有元素，而只想改变其中一部分，那么可以使用<strong>可选的起始位置参数与结束位置参数（不包括结束位置的那个元素）</strong>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">fill</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>)); <span class="comment">//[1, 5, 1, 1]</span></span><br></pre></td></tr></table></figure><p>若只给定起始位置，不指定结束位置的话，默认结束位置为数组末尾。</p><h3 id="copyWithin-方法"><a href="#copyWithin-方法" class="headerlink" title="copyWithin()方法"></a>copyWithin()方法</h3><p><code>copyWithin()</code> 方法与 <code>fill()</code> 类似，可以一次性修改数组的多个元素。不过，与 <code>fill()</code> 使用单个值来填充数组不同， <code>copyWithin()</code> 方法允许你在数组内部复制自身元素。为此你需要传递两个参数给 <code>copyWithin()</code> 方法：从什么位置开始进行填充，以及被用来复制的数据的起始位置索引，以及可选的复制结束的位置（不包含该位置）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//copyWithin()</span></span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">9</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">copyWithin</span>(<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>)); <span class="comment">//[1, 5, 1, 5]</span></span><br></pre></td></tr></table></figure><h3 id="案例-4"><a href="#案例-4" class="headerlink" title="案例"></a>案例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let arr = Array.of(1,5,8,9);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(arr.find(item=&gt;item&gt;5)); //8</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(arr.findIndex(item=&gt;item&gt;5)); //2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//fill()</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let arr = Array.of(1,5,8,9);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(arr.fill(1,2,4)); //[1, 5, 1, 1]</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //copyWithin()</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(arr.copyWithin(2,0,2)); //[1, 5, 1, 5]</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let buffer = new ArrayBuffer(10);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(buffer.byteLength); //10</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let buf = buffer.slice(4,8);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(buf.byteLength); //4</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let buffer = new ArrayBuffer(2),</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// view = new DataView(buffer);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// view.setInt8(0,1);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(view.getInt8(0)); //1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="title class_">Int8Array</span>(<span class="number">2</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="property">length</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">arr[<span class="number">3</span>] = <span class="number">1</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">3</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="类型化数组"><a href="#类型化数组" class="headerlink" title="类型化数组"></a>类型化数组</h2><p>ES6 采纳了类型化数组，将其作为语言的一个正式部分，以确保在 JS 引擎之间有更好的兼容性，并确保与 JS 数组有更好的互操作性。</p><h3 id="数值数据类型"><a href="#数值数据类型" class="headerlink" title="数值数据类型"></a>数值数据类型</h3><p>JS 数值使用 IEEE 754 标准格式存储，使用 64 位来存储一个数值的浮点数表示形式，该格式在 JS 中被同时用来表示整数与浮点数；当值改变时，可能会频繁发生整数与浮点数之间的格式转换。而类型化数组则允许存储并操作八种不同的数值类型：</p><ol><li>8 位有符号整数（int8）</li><li>8 位无符号整数（uint8）</li><li>16 位有符号整数（int16）</li><li>16 位无符号整数（uint16）</li><li>32 位有符号整数（int32）</li><li>32 位无符号整数（uint32）</li><li>32 位浮点数（float32）</li><li>64 位浮点数（float64）</li></ol><p>所有与类型化数组相关的操作和对象都围绕着这八种数据类型。为了使用它们，要先创建一个数组缓冲区用于存储数据。</p><h3 id="数组缓冲区"><a href="#数组缓冲区" class="headerlink" title="数组缓冲区"></a>数组缓冲区</h3><p>数组缓冲区（array buffer） 是内存中包含一定数量字节的区域，而所有的类型化数组都基于数组缓冲区。创建数组缓冲区使用 ArrayBuffer 构造器：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">10</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buffer.<span class="property">byteLength</span>); <span class="comment">//10</span></span><br></pre></td></tr></table></figure><p>调用 <code>ArrayBuffer</code> 构造器时，只需要传入单个数值用于指定缓冲区包含的字节数，而本例就创建了一个 10 字节的缓冲区。当数组缓冲区被创建完毕后，你就可以通过检查 <code>byteLength</code>属性来获取缓冲区的字节数。</p><p>还可以使用<code>slice()</code>方法来创建一个包含已有缓冲区部分内容的数组缓冲区，其中<code>slice()</code>方法可以使用起始位置和结束位置（不包含结束位置）：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">let</span> buf = buffer.<span class="title function_">slice</span>(<span class="number">4</span>,<span class="number">8</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="property">byteLength</span>); <span class="comment">//4</span></span><br></pre></td></tr></table></figure><p>仅仅创建一个数组缓冲器不能写入数据，是没有任何意义的。要想写入数据，需要创建视图（view）。</p><h3 id="使用视图操作数组缓冲区"><a href="#使用视图操作数组缓冲区" class="headerlink" title="使用视图操作数组缓冲区"></a>使用视图操作数组缓冲区</h3><p>数组缓冲区代表了一块内存区域，而视图（views） 则是你操作这块区域的接口。视图工作在数组缓冲区或其子集上，可以读写某种数值数据类型的数据。 DataView 类型是数组缓冲区的通用视图，允许你对前述所有八种数值数据类型进行操作。</p><p>创建视图，需要使用 DataView() 构造器，可以指定可选参数-字节偏移量以及所要包含的字节数。如果不指定所要包含的字节数，则默认为从字节偏移量直到数组缓冲区的末尾。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jslet buffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">10</span>),</span><br><span class="line">view = <span class="keyword">new</span> <span class="title class_">DataView</span>(buffer, <span class="number">5</span>, <span class="number">2</span>);js</span><br></pre></td></tr></table></figure><p>此例中的 <code>view</code> 只能使用索引值为 5 与 6 的字节。使用这种方式，你可以在同一个数组缓冲区上创建多个不同的视图，这样有助于将单块内存区域供给整个应用使用，而不必每次在有需要时才动态分配内存。</p><blockquote><p>获取视图信息</p></blockquote><p>可以通过视图的可读属性来获取视图的信息：</p><ul><li>buffer ：该视图所绑定的数组缓冲区；</li><li>byteOffset ：传给 DataView 构造器的第二个参数，如果当时提供了的话（默认值为0）;</li><li>byteLength ：传给 DataView 构造器的第三个参数，如果当时提供了的话（默认值为该缓冲区的 byteLength 属性。</li></ul><blockquote><p>读取或写入数据</p></blockquote><p>对应于 JS 所有八种数值数据类型， <code>DataView</code> 视图的原型分别提供了在数组缓冲区上写入数据的一个方法、以及读取数据的一个方法。所有方法名都以“set”或“get”开始，其后跟随着对应数据类型的缩写。下面列出了能够操作 <code>int8</code> 或 <code>uint8</code> 类型的读取/写入方法：</p><ul><li>getInt8(byteOffset, littleEndian) ：从 byteOffset 处开始读取一个 int8 值；</li><li>setInt8(byteOffset, value, littleEndian) ：从 byteOffset 处开始写入一个 int8 值；</li><li>getUint8(byteOffset, littleEndian) ：从 byteOffset 处开始读取一个无符号 int8 值；</li><li>setUint8(byteOffset, value, littleEndian) ：从 byteOffset 处开始写入一个无符号int8 值。</li></ul><p>get”方法接受两个参数：开始进行读取的字节偏移量、以及一个可选的布尔值，后者用于指定读取的值是否采用低字节优先方式（注：默认值为 false ） 。“set”方法则接受三个参数：开始进行写入的字节偏移量、需要写入的数据值、以及一个可选的布尔值用于指定是否采用低字节优先方式存储数据。</p><p><strong>如果针对的是16位或者32位整数的话，只需要将上面的方法中的8，相应的改变成16或者32，就可以操作16位或者32值。</strong></p><p><strong>操作浮点数，提供了下面这些方法：</strong></p><ul><li>getFloat32(byteOffset, littleEndian) ：从 byteOffset 处开始读取一个 32 位的浮点数；</li><li>setFloat32(byteOffset, value, littleEndian) ：从 byteOffset 处开始写入一个 32 位的浮点数；</li><li>getFloat64(byteOffset, littleEndian) ：从 byteOffset 处开始读取一个 64 位的浮点数；</li><li>setFloat64(byteOffset, value, littleEndian) ：从 byteOffset 处开始写入一个 64 位的浮点数；</li></ul><p>例如使用上述这些视图上的方法来进行操作：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">2</span>),</span><br><span class="line">view = <span class="keyword">new</span> <span class="title class_">DataView</span>(buffer);</span><br><span class="line"></span><br><span class="line">view.<span class="title function_">setInt8</span>(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(view.<span class="title function_">getInt8</span>(<span class="number">0</span>)); <span class="comment">//1</span></span><br></pre></td></tr></table></figure><h3 id="类型化数组就是视图"><a href="#类型化数组就是视图" class="headerlink" title="类型化数组就是视图"></a>类型化数组就是视图</h3><p>ES6 的类型化数组实际上也是针对数组缓冲区的特定类型视图，你可以使用这些数组对象来处理特定的数据类型，而不必使用通用的 DataView 对象。一共存在八种特定类型视图，对应着八种数值数据类型。类型化数组的构造器有：Int8Array、Uint8Array、Uint8ClampedArray、Int16Array、Uint16Array、Int32Array、Uint32Array、Float32Array、Float64Array。</p><blockquote><p>创建特定类型视图</p></blockquote><p>创建特定类型视图有三种方式：</p><ol><li><p>第一种方式是使用与创建 DataView 时相同的参数，即：一个数组缓冲区、一个可选的字节偏移量、以及一个可选的字节数量；</p></li><li><p>第二种方式是传递单个数值给类型化数组的构造器，此数值表示该数组包含的元素数量（而不是分配的字节数） 。构造器将会创建一个新的缓冲区，分配正确的字节数以便容纳指定数量的数组元素，而你也可以使用 length 属性来获取这个元素数量；</p></li><li><p>第三种方式是向构造器传递单个对象参数，可以是下列四种对象之一：</p><ol><li>类型化数组：数组所有元素都会被复制到新的类型化数组中。例如，如果你传递一个 int8类型的数组给 Int16Array 构造器，这些 int8 的值会被复制到 int16 数组中。新的类型化数组与原先的类型化数组会使用不同的数组缓冲区。</li><li>可迭代对象：该对象的迭代器会被调用以便将数据插入到类型化数组中。如果其中包含了不匹配视图类型的值，那么构造器就会抛出错误。</li><li>数组：该数组的元素会被插入到新的类型化数组中。如果其中包含了不匹配视图类型的值，那么构造器就会抛出错误。</li><li>类数组对象：与传入数组的表现一致。</li></ol><p>//第一种方式<br>let buffer = new ArrayBuffer(10),<br>view1 = new Int8Array(buffer),<br>view2 = new Int8Array(buffer, 5, 2);</p><p>//第二种方式<br>let ints = new Int16Array(2),<br>floats = new Float32Array(5);</p><p>//第三种方式<br>let ints1 = new Int16Array([25, 50]),<br>ints2 = new Int32Array(ints1);</p></li></ol><h3 id="类型化数组与常规数组的相似点"><a href="#类型化数组与常规数组的相似点" class="headerlink" title="类型化数组与常规数组的相似点"></a>类型化数组与常规数组的相似点</h3><p>类型化数组在很多场景中都可以像常规数组那样被使用。例如，你可以使用 length 属性来获取类型化数组包含的元素数量，还可以使用数值类型的索引值来直接访问类型化数组的元素。它们二者具有的相似点：</p><blockquote><ol><li>公共方法</li></ol></blockquote><p>类型化数组拥有大量与常规数组等效的方法：</p><ul><li>copyWithin()</li><li>entries()</li><li>fill()</li><li>filter()</li><li>find()</li><li>findIndex()</li><li>forEach()</li><li>indexOf()</li><li>join()</li><li>keys()</li><li>lastIndexOf()</li><li>map()</li><li>reduce()</li><li>reduceRight()</li><li>reverse()</li><li>slice()</li><li>some()</li><li>sort()</li><li>values()</li></ul><blockquote><p>相同的迭代器</p></blockquote><p>与常规数组相同，类型化数组也拥有三个迭代器，它们是 <code>entries()</code> 方法、 <code>keys() </code>方法与<code>values()</code> 方法。这就意味着你可以对类型化数组使用扩展运算符，或者对其使用 <code>for-of</code> 循环，就像对待常规数组。</p><blockquote><p>of()和from()方法</p></blockquote><p>所有的类型化数组都包含静态的<code> of()</code> 与 <code>from()</code> 方法，作用类似于 <code>Array.of()</code> 与<code>Array.from()</code> 方法。其中的区别是类型化数组的版本会返回类型化数组，而不返回常规数组。</p><h3 id="类型化数组与常规数组的差异"><a href="#类型化数组与常规数组的差异" class="headerlink" title="类型化数组与常规数组的差异"></a>类型化数组与常规数组的差异</h3><p>二者最重要的区别就是类型化数组并不是常规数组，类型化数组并不是从 Array 对象派生的，使用 <code>Array.isArray()</code> 去检测会返回 <code>false</code> 。</p><blockquote><p>行为差异</p></blockquote><p>常规数组可以被伸展或是收缩，然而类型化数组却会<strong>始终保持自身大小不变</strong>。你可以对常规数组一个不存在的索引位置进行赋值，但在类型化数组上这么做则会被忽略。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ints = <span class="keyword">new</span> <span class="title class_">Int16Array</span>([<span class="number">25</span>, <span class="number">50</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ints.<span class="property">length</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ints[<span class="number">0</span>]); <span class="comment">// 25</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ints[<span class="number">1</span>]); <span class="comment">// 50</span></span><br><span class="line">ints[<span class="number">2</span>] = <span class="number">5</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ints.<span class="property">length</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ints[<span class="number">2</span>]); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>在本例中，尽管对索引值 2 的位置进行了赋值为 5 的操作，但 ints 数组却完全没有被伸展，数组的长度属性保持不变，所赋的值也被丢弃了。</p><p><strong>类型化数组也会对数据类型进行检查以保证只使用有效的值，当无效的值被传入时，将会被替换为 0</strong> 。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ints = <span class="keyword">new</span> <span class="title class_">Int16Array</span>([<span class="string">&quot;hi&quot;</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ints.<span class="property">length</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ints[<span class="number">0</span>]); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p>这段代码试图用字符串值 “hi” 创建一个 Int16Array ，而字符串对于类型化数组来说当然是无效的值，因此该字符串被替换为 0 并插入数组。此数组的长度仅仅是 1 ，而 ints[0]只包含了 0 这个值。</p><p><strong>所有在类型化数组上修改项目值的方法都会受到相同的限制，例如当 map() 方法使用的映射函数返回一个无效值的时候，类型化数组会使用 0 来代替返回值</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ints = <span class="keyword">new</span> <span class="title class_">Int16Array</span>([<span class="number">25</span>, <span class="number">50</span>]),</span><br><span class="line">mapped = ints.<span class="title function_">map</span>(<span class="function"><span class="params">v</span> =&gt;</span> <span class="string">&quot;hi&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapped.<span class="property">length</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapped[<span class="number">0</span>]); <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapped[<span class="number">1</span>]); <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapped <span class="keyword">instanceof</span> <span class="title class_">Int16Array</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapped <span class="keyword">instanceof</span> <span class="title class_">Array</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>由于字符串值 “hi” 并不是一个 16 位整数，它在结果数组中就被替换成为 0 。</p><blockquote><p>遗漏的方法</p></blockquote><p>尽管类型化数组拥有常规数组的很多同名方法，但仍然缺少了几个数组方法，包括下列这些：</p><ul><li>concat()</li><li>pop()</li><li>push()</li><li>shift()</li><li>splice()</li><li>unshift()</li></ul><blockquote><p>附加的方法</p></blockquote><p>类型化数组还有两个常规数组所不具备的方法： <code>set()</code> 方法与 <code>subarray()</code> 方法。这两个方法作用相反： <code>set()</code> 方法从另一个数组中复制元素到当前的类型化数组，而 <code>subarray()</code> 方法则是将当前类型化数组的一部分提取为新的类型化数组。</p><p>**set() 方法接受一个数组参数（无论是类型化的还是常规的） 、以及一个可选的偏移量参数，后者指示了从什么位置开始插入数据（默认值为 0 ） **。数组参数中的数据会被复制到目标类型化数组中，并会确保数据值有效。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ints = <span class="keyword">new</span> <span class="title class_">Int16Array</span>(<span class="number">4</span>);</span><br><span class="line">ints.<span class="title function_">set</span>([<span class="number">25</span>, <span class="number">50</span>]);</span><br><span class="line">ints.<span class="title function_">set</span>([<span class="number">75</span>, <span class="number">100</span>], <span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ints.<span class="title function_">toString</span>()); <span class="comment">// 25,50,75,100</span></span><br></pre></td></tr></table></figure><p>这段代码创建了一个包含四个元素的 <code>Int16Array</code> ；第一次调用 <code>set()</code> 复制了两个值到数组起始的两个位置；而第二次调用<code> set()</code> 则使用了一个值为 2 的偏移量参数，指明应当从数组的第三个位置（索引 2 ） 开始放置所复制的数据。</p><p><code>subarray()</code> 方法接受一个可选的开始位置索引参数、以及一个可选的结束位置索引参数（像<code>slice()</code> 方法一样，结束位置的元素不会被包含在结果中） ，并会返回一个新的类型化数组。你可以同时省略这两个参数，从而创建原类型化数组的一个复制品。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ints = <span class="keyword">new</span> <span class="title class_">Int16Array</span>([<span class="number">25</span>, <span class="number">50</span>, <span class="number">75</span>, <span class="number">100</span>]),</span><br><span class="line">subints1 = ints.<span class="title function_">subarray</span>(),</span><br><span class="line">subints2 = ints.<span class="title function_">subarray</span>(<span class="number">2</span>),</span><br><span class="line">subints3 = ints.<span class="title function_">subarray</span>(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(subints1.<span class="title function_">toString</span>()); <span class="comment">// 25,50,75,100</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(subints2.<span class="title function_">toString</span>()); <span class="comment">// 75,100</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(subints3.<span class="title function_">toString</span>()); <span class="comment">// 50,75</span></span><br></pre></td></tr></table></figure><p>本例中利用 <code>ints</code> 数组创建了三个类型化数组。 <code>subints1</code> 数组是 <code>ints</code> 的一个复制品，包含了原数组的所有信息；而 <code>subints2</code> 则从原数组的索引 2 位置开始复制，因此包含了原数组的最末两个元素（即 75 与 100 ） ；最后的 <code>subints3</code> 数组值包含了原数组的中间两个元素，因为调用 <code>subarray()</code> 时同时使用了起始位置与结束位置参数。</p><h3 id="总结-7"><a href="#总结-7" class="headerlink" title="总结"></a>总结</h3><ol><li>ES6 延续了 ES5 的工作以便让数组更加有用。新增了两种创建数组的方式： Array.of() 方法、以及 Array.from() 方法，其中后者可以将可迭代对象或类数组对象转换为正规数组；</li><li>fill() 方法与 copyWithin() 方法允许你替换数组内的元素。 find() 方法与 findIndex() 方法在数组中查找满足特定条件的元素时会非常有用，其中前者会返回满足条件的第一个元素，而后者会返回该元素的索引位置；</li><li>类型化数组并不是严格的数组，它们并没有继承 Array 对象，但它们的外观和行为都与数组有许多相似点。类型化数组包含的数据类型是八种数值数据类型之一，基于数组缓冲区对象建立，用于表示按位存储的一个数值或一系列数值。类型化数组能够明显提升按位运算的性能，因为它不像 JS 的常规数值类型那样需要频繁进行格式转换。</li></ol><h2 id="Promise基础"><a href="#Promise基础" class="headerlink" title="Promise基础"></a>Promise基础</h2><blockquote><p>什么是回调地狱？</p></blockquote><p>当使用回调函数来进行事件处理的时候，如果嵌套多层回调函数的时候，就会出现回调地狱，例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">method1</span>(<span class="keyword">function</span>(<span class="params">err, result</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (err) &#123;</span><br><span class="line"><span class="keyword">throw</span> err;</span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">method2</span>(<span class="keyword">function</span>(<span class="params">err, result</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (err) &#123;</span><br><span class="line"><span class="keyword">throw</span> err;</span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">method3</span>(<span class="keyword">function</span>(<span class="params">err, result</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (err) &#123;</span><br><span class="line"><span class="keyword">throw</span> err;</span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">method4</span>(<span class="keyword">function</span>(<span class="params">err, result</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (err) &#123;</span><br><span class="line"><span class="keyword">throw</span> err;</span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">method5</span>(result);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>像本例一样嵌套多个方法调用会创建错综复杂的代码，会难以理解与调试。当想要实现更复<br>杂的功能时，回调函数也会存在问题。要是你想让两个异步操作并行运行，并且在它们都结<br>束后提醒你，那该怎么做？要是你想同时启动两个异步操作，但只采用首个结束的结果，那<br>又该怎么做？而使用Promise就能避免回调地狱的情况。</p><p>Promise可以当做是一个占位符，表示异步操作的执行结果。函数可以返回一个Promise，而不必订阅一个事件或者向函数传递一个回调函数。</p><blockquote><p>Promise的生命周期</p></blockquote><p>每个 Promise 都会经历一个短暂的生命周期，初始为挂起状态（pending state） ，这表示异步操作尚未结束。一个挂起的 Promise 也被认为是未决的（unsettled )。一旦异步操作结束， Promise就会被认为是已决的（settled ） ，并进入两种可能状态之一：</p><ol><li><strong>已完成（fulfilled ）</strong> ： Promise 的异步操作已成功结束；</li><li><strong>已拒绝（rejected ）</strong> ： Promise 的异步操作未成功结束，可能是一个错误，或由其他原因导致。</li></ol><p>内部的<code> [[PromiseState]]</code> 属性会被设置为<code> &quot;pending&quot;</code> 、 <code>&quot;fulfilled&quot;</code> 或 “rejected”<code>，以反映</code>Promise<code> 的状态。该属性并未在 Promise 对象上被暴露出来，</code>因此你无法以编程方式判断 <code>Promise</code> 到底处于哪种状态。不过你可以使用<code>then()</code>方法在 Promise 的状态改变时执行一些特定操作。</p><ol><li><p><strong>then()方法</strong></p><p><code>then() </code>方法在所有的 Promise 上都存在，并且接受两个参数。第一个参数是 Promise 被完成时要调用的函数，异步操作的结果数据都会被传入这个完成函数。第二个参数则是 Promise 被拒绝时要调用的函数，与完成函数相似，拒绝函数会被传入与拒绝相关联的任何附加数据。then()方法的两个参数是可选的，因此可以自由组合监听完成和失败的处理函数；</p></li><li><p><strong>catch()方法</strong></p><p>Promise有catch()方法，等同于只传递拒绝处理函数给then()方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">promise.catch(function(err) &#123;</span><br><span class="line">// 拒绝</span><br><span class="line">console.error(err.message);</span><br><span class="line">&#125;);</span><br><span class="line">// 等同于：</span><br><span class="line">promise.then(null, function(err) &#123;</span><br><span class="line">// 拒绝</span><br><span class="line">console.error(err.message);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>创建未决的Promise</p></blockquote><p>使用Promise构造器可以创建一个Promise实例，此构造器接收一个参数：一个被称之为执行器（excutor）的函数，该函数包含了<code>resolve()</code>函数和<code>reject()</code>函数这两个参数。<code>resolve()</code>函数在异步任务执行成功时调用，而<code>reject()</code>函数在异步任务执行失败时调用。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">let promise = new Promise(function(resolve,reject)&#123;</span><br><span class="line">console.log(&#x27;hi, promise&#x27;);</span><br><span class="line">resolve();</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(()=&gt;&#123;</span><br><span class="line">console.log(&#x27;hi, then&#x27;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(&#x27;hi&#x27;);</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">hi, promise</span><br><span class="line">hi</span><br><span class="line">hi then</span><br></pre></td></tr></table></figure><p>从输出结果可以看出，Promise构造器中的代码是最先执行的，而<code>then()</code>代码是最后执行的，这是因为只有在Promise中的处理器函数执行结束之后，then()方法中的完成处理函数或者拒绝处理函数才会添加到作业队列的尾部。</p><blockquote><p>创建已决的Promise</p></blockquote><ol><li>使用<code>Promise.resolve()</code></li></ol><p><code>Promise.resolve()</code>方法接收一个参数，并会返回一个处于已完成状态的 <code>Promise</code> ，在<code>then()</code>方法中使用完成处理函数才能提取该完成态的<code>Promise</code>传递的值，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let promise = Promise.resolve(&#x27;hi&#x27;);</span><br><span class="line">promise.then((value)=&gt;&#123;</span><br><span class="line">console.log(value); //hi</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="2"><li>使用Promise.reject()</li></ol><p>可以使用<code>Promise.reject()</code>方法来创建一个已拒绝状态的<code>Promise</code>，同样只有在拒绝处理函数中或者<code>catch()</code>方法中才能接受<code>reject()</code>方法传递的值：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let reject = Promise.reject(&#x27;reject&#x27;);</span><br><span class="line"></span><br><span class="line">reject.catch((value)=&gt;&#123;</span><br><span class="line">console.log(value); //reject</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>非Promise的thenable</p></blockquote><p>当一个对象拥有一个能接受<code>resolve</code>与<code>reject</code>参数的<code>then()</code>方法时，该对象就会被认为是一个非<code>Promise</code>的<code>thenable</code>，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let thenable = &#123;</span><br><span class="line"></span><br><span class="line">then:function(resolve,reject)&#123;</span><br><span class="line">resolve(&#x27;hi&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Promise.resolve()</code>与<code>Promise.reject()</code>方法都能够接受非Promise的thenable作为参数，当传入了非Promise的thenable时，这些方法会创建一个新的Promise，并且可以使用then()方法对不同状态进行操作：</p><p>创建一个已完成的Promise</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let thenable = &#123;</span><br><span class="line"></span><br><span class="line">then:function(resolve,reject)&#123;</span><br><span class="line">resolve(&#x27;hi&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let promise = Promise.resolve(thenable);</span><br><span class="line">promise.then((value)=&gt;&#123;</span><br><span class="line">console.log(value); //hi</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>同样利用thenable可以创建一个已拒绝的Promise:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let thenable = &#123;</span><br><span class="line"></span><br><span class="line">then:function(resolve,reject)&#123;</span><br><span class="line">reject(&#x27;hi&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let promise = Promise.resolve(thenable);</span><br><span class="line">promise.then(null,(value)=&gt;&#123;</span><br><span class="line">console.log(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>执行器错误</p></blockquote><p>当执行器内部抛出错误，那么Promise的拒绝处理函数就会被调用，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let promise = new Promise(function(resolve,reject)&#123;</span><br><span class="line">throw new Error(&#x27;Error!&#x27;);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">promise.catch(function(msg)&#123;</span><br><span class="line">console.log(msg); //error</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="Promise链"><a href="#Promise链" class="headerlink" title="Promise链"></a>Promise链</h3><p>除了使用单个Promise外，多个Promise可以进行级联使用，实际上<code>then()</code>方法或者<code>catch()</code>方法会返回一个新的Promise，仅当前一个Promise被决议之后，后一个Promise才会进行处理。</p><blockquote><p>串联Promise</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="string">&#x27;hi&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p1.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Error!&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">error</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>可以看出当p1的<code>then()</code>方法执行结束后会返回一个Promise，因此，在此基础上可以继续执行<code>catch()</code>方法。同时，<strong>Promise链允许捕获前一个Promise的错误</strong>。</p><blockquote><p>Promise链中传递值</p></blockquote><p><strong>Promise链的另一个重要方面是能从一个Promise传递数据给另一个Promise的能力。</strong>前一个Promise的完成处理函数的返回值，传递到下一个Promise中。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Promise链传递值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p1.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>value+<span class="number">1</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>p1的完成处理函数返回了<code>value+1</code>，也就是<code>2</code>，会传入到下一个Promise的完成处理函数，因此，第二个<code>then()</code>方法中的完成处理函数就会输出<code>2</code>。拒绝处理函数同样可以被用于在Promise链中传递数据。</p><blockquote><p>Promise链中传递Promise</p></blockquote><p>在完成或者拒绝处理函数中可以返回基本类型值，从而可以在Promise链中传递。另外，在Promise链中也可以传递对象，如果传递的是Promise对象，就需要额外的处理：</p><p><strong>传递已完成状态的Promise</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">2</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p1.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line"><span class="keyword">return</span> p2;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;);</span><br><span class="line">输出：<span class="number">1</span>  <span class="number">2</span></span><br></pre></td></tr></table></figure><p>p1中返回了Promise对象<code>p2</code>，当<code>p2</code>完成时，才会调用第二个<code>then()</code>方法，将值<code>value</code>传到完成处理函数中。若<code>Promise</code>对象<code>p2</code>被拒绝后，第二个<code>then()</code>方法中的完成处理函数就不会执行，只能通过拒绝处理函数才能接收到p2传递的值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">reject</span>(<span class="number">2</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p1.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line"><span class="keyword">return</span> p2;</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="响应多个Promise"><a href="#响应多个Promise" class="headerlink" title="响应多个Promise"></a>响应多个Promise</h3><p>如果想监视多个Promise的状态，从而决定下一步动作，可以使用ES6提供的两个方法：<code>Promise.all()</code>和<code>Promise.race()</code>；</p><blockquote><p>Promise.all()</p></blockquote><p>Promise.all()方法能接受单个可迭代对象（如数组）作为参数，可迭代对象的元素都是Promise。该方法会返回一个Promise，只有传入所有的Promise都已完成，所返回的Promise才会完成，例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">js<span class="comment">//Promise.all()</span></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">2</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">3</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p4 = <span class="title class_">Promise</span>.<span class="title function_">all</span>([p1,p2,p3]);</span><br><span class="line">p4.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value)); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">//[1,2,3]</span></span><br><span class="line">&#125;)js</span><br></pre></td></tr></table></figure><p>对 <code>Promise.all()</code> 的调用创建了新的<code>Promise p4 </code>，在 <code>p1</code> 、 <code>p2</code> 与 <code>p3</code> 都被完成后， <code>p4</code> 最终会也被完成。传递给 <code>p4</code> 的完成处理函数的结果是一个包含每个决议值（1 、 2 与 3 ） 的数组，这些值的存储顺序保持了待决议的 <code>Promise</code> 的顺序（与完成的先后顺序无关） ，因此你可以将结果匹配到每个<code>Promise</code>。</p><p><strong>若传递给<code> Promise.all()</code> 的某个 Promise 被拒绝了，那么方法所返回的 Promise 就会立刻被拒绝，而不必等待其他的 Promise 结束</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Promise.all()</span></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">reject</span>(<span class="number">2</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">3</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p4 = <span class="title class_">Promise</span>.<span class="title function_">all</span>([p1,p2,p3]);</span><br><span class="line">p4.<span class="title function_">catch</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value)); <span class="comment">//true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">//2</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>在此例中， p2 被使用数值 2 进行了拒绝，则 p4 的拒绝处理函数就立刻被调用，而不会<br>等待 p1 或 p3 结束执行（它们仍然会各自结束执行，只是 p4 不等它们） 。</p><p><strong>拒绝处理函数总会接受到单个值，而不是一个数组。该值是被拒绝的Promise所返回的拒绝值。</strong></p><blockquote><p>Promise.race()</p></blockquote><p><code>Promise.race()</code>方法接收一个元素是Promise的可迭代对象，并返回一个新的Promise。一旦传入<code>Promise.race()</code>的可迭代对象中有一个Promise是已决状态，那么返回的Promise对象就会立刻成为已决状态。</p><p>而<code>Promise.all()</code>方法得必须等到所有传入的Promise全部变为已决状态，所返回的Promise才会已决。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">2</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">3</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p4 = <span class="title class_">Promise</span>.<span class="title function_">race</span>([p1,p2,p3]);</span><br><span class="line">p4.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value)); <span class="comment">//false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">//1</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Promise.race() 方法传入的Promise中哪一个Promise先变成已完成状态，就会将值传递给所返回的Promise对象的完成处理函数中。若哪一个Promise最先变成已拒绝状态，同样的，会将值传递给<code>p4</code>的拒绝处理函数中。</p><h3 id="继承Promise"><a href="#继承Promise" class="headerlink" title="继承Promise"></a>继承Promise</h3><p>可以继承Promise实现自定义的Promise，例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Promise</span> &#123;</span><br><span class="line"><span class="comment">// 使用默认构造器</span></span><br><span class="line"><span class="title function_">success</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(resolve, reject);</span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">failure</span>(<span class="params">reject</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">catch</span>(reject);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line"><span class="title function_">resolve</span>(<span class="number">42</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">success</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 42</span></span><br><span class="line">&#125;).<span class="title function_">failure</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>在此例中， MyPromise 从 Promise 上派生出来，并拥有两个附加方法。 <code>success()</code> 方法模拟了 <code>resolve()</code> ， <code>failure()</code> 方法则模拟了 <code>reject()</code> 。</p><h3 id="总结-8"><a href="#总结-8" class="headerlink" title="总结"></a>总结</h3><ol><li>Promise 具有三种状态：挂起、已完成、已拒绝。一个 <code>Promise</code> 起始于挂起态，并在成功时转为完成态，或在失败时转为拒绝态。 <code>then()</code> 方法允许你绑定完成处理函数与拒绝处理函数，而 <code>catch()</code> 方法则只允许你绑定拒绝处理函数；</li><li>能够将多个Promise串联起来组成Promise链，并且能够在中间传递值，甚至是传递Promise对象。 then() 的调用都创建并返回了一个新的 Promise ，只有在前一个 Promise 被决议过，新 Promise 也会被决议。 同时也可以使用Promise.all()和Promise.race()方法来管理多个Promise。</li></ol><h3 id="案例-5"><a href="#案例-5" class="headerlink" title="案例"></a>案例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//创建未决的Promise</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let promise = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(&#x27;hi, promise&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// resolve();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// promise.then(()=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(&#x27;hi, then&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(&#x27;hi&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//创建已决的Promise</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let promise = Promise.resolve(&#x27;hi&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// promise.then((value)=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let reject = Promise.reject(&#x27;reject&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// reject.catch((value)=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//非Promise的thenable</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let thenable = &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// then:function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// reject(&#x27;hi&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let promise = Promise.resolve(thenable);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// promise.then(null,(value)=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//执行器错误</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let promise = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// throw new Error(&#x27;Error!&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// promise.catch(function(msg)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(msg);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//串联Promise</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p1 = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// resolve(&#x27;hi&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// p1.then((value)=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// throw new Error(&#x27;Error!&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;).catch(function(error)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(error);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //Promise链传递值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p1 = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// resolve(1);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// p1.then(value=&gt;value+1)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// .then(value=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//Promise链中传递Promise对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p1 = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// resolve(1);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p2 = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// reject(2);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// p1.then(value=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return p2;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;).catch(value=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //Promise.all()</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p1 = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// resolve(1);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p2 = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// reject(2);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p3 = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// resolve(3);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p4 = Promise.all([p1,p2,p3]);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// p4.catch(value=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(Array.isArray(value)); //true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value); //2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//Promise.race()</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p1 = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// resolve(1);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p2 = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// resolve(2);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p3 = new Promise(function(resolve,reject)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// resolve(3);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let p4 = Promise.race([p1,p2,p3]);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// p4.then(value=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(Array.isArray(value)); //false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(value); //1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//继承Promise</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">class</span> <span class="title class_">MyPromise</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Promise</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 使用默认构造器</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">success</span>(<span class="params">resolve, reject</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(resolve, reject);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">failure</span>(<span class="params">reject</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">catch</span>(reject);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">resolve</span>(<span class="number">42</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">promise.<span class="title function_">success</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 42</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;).<span class="title function_">failure</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="代理和反射"><a href="#代理和反射" class="headerlink" title="代理和反射"></a>代理和反射</h2><blockquote><p>代理是什么？</p></blockquote><p>通过调用 <code>new Proxy()</code> ，你可以创建一个代理用来替代另一个对象（被称之为目目标对象） ，这个代理对目标对象进行了虚拟，因此该代理与该目标对象表面上可以被当作同一个对象来对待。</p><p>代理允许你拦截目标对象上的底层操作，而这本来是JS引擎的内部能力，拦截行为适用了一个能响应特定操作的函数（被称之为陷阱）；</p><blockquote><p>反射是什么？</p></blockquote><p>被<code>Reflect</code>对象所代表的反射接口，<strong>是给底层操作提供默认行为的方法的集合，这些操作是能够被代理重写的</strong>。每个代理陷阱都有一个对应的反射方法，每个方法都与对应的陷阱函数同名，并且接收的参数也与之一致。</p><blockquote><p>创建一个简单的代理</p></blockquote><p>使用Proxy构建可以创建一个简单的代理对象，需要传递两个参数：<strong>目标对象以及一个处理器，后者是定义一个或多个陷阱函数的对象</strong>。如果不定义陷阱函数，则依然使用目标对象的默认行为。</p><h3 id="常用陷阱函数"><a href="#常用陷阱函数" class="headerlink" title="常用陷阱函数"></a>常用陷阱函数</h3><h3 id="基本陷阱函数"><a href="#基本陷阱函数" class="headerlink" title="基本陷阱函数"></a>基本陷阱函数</h3><p><strong>1.使用Set陷阱函数验证属性值</strong></p><p>假如有这样一个场景，必须要求对象的属性值必须只能是数值，这就意味着该对象每个新增属性时都要被验证，并且在属性不为数值属性时就应该抛出错误。因此就需要使用<code>set</code>陷阱函数来重写<code>set</code>函数的默认行为，<code>set</code>陷阱函数接收四个参数：</p><ol><li>trapTarget：代理的目标对象；</li><li>key：需要写入的属性的键；</li><li>value：被写入属性的值；</li><li>receiver：操作发生的对象（通常是代理对象）</li></ol><p><code>Reflect.set()</code>是<code>set</code>陷阱函数对应的反射方法，同时也是<code>set</code>操作的默认行为，<code>Reflect.set()</code>方法与<code>set</code>陷阱函数一样，能够接受四个参数。</p><p>针对上述场景，示例代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//set陷阱函数</span><br><span class="line">let target = &#123;</span><br><span class="line">name:&#x27;target&#x27;</span><br><span class="line">&#125;</span><br><span class="line">let proxy = new Proxy(target,&#123;</span><br><span class="line">set(tarpTarget,key,value,receiver)&#123;</span><br><span class="line"></span><br><span class="line">if(!tarpTarget.hasOwnProperty(key))&#123;</span><br><span class="line">if(isNaN(value))&#123;</span><br><span class="line">throw new Error(&#x27;property must be number&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return Reflect.set(tarpTarget,key,value,receiver);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">proxy.msg=&#x27;hello proxy&#x27;; //Uncaught Error: property must be number</span><br></pre></td></tr></table></figure><p>通过set陷阱函数就可以检测设置属性时属性值的类型，当属性值不是数字时，就会抛出错误。</p><p><strong>2.使用get陷阱函数进行对象外形验证</strong></p><p><strong>对象外形（Object Shape）指的是对象已有的属性与方法的集合。</strong>能够使用代理很方便进行对象外形验证。由于使用属性验证只需要在读取属性时被触发，因此只需要使用<code>get陷阱函数</code>。该函数接受三个参数：</p><ol><li>trapTarget：代理的目标对象；</li><li>key：需要读取的属性的键；</li><li>receiver：操作发生的对象（通常是代理对象）；</li></ol><p>相应的<code>Reflect.get()</code>方法同样拥有这三个参数。进行对象外形验证的示例代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//get陷阱函数</span><br><span class="line"></span><br><span class="line">let target=&#123;</span><br><span class="line">name:&#x27;hello world&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let proxy = new Proxy(target,&#123;</span><br><span class="line">get(tarpTarget,key,receiver)&#123;</span><br><span class="line">if(!(key in tarpTarget))&#123;</span><br><span class="line">throw new Error(&#x27;不存在该对象&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">return Reflect.get(tarpTarget,key,receiver);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">console.log(proxy.name); //hello world</span><br><span class="line">console.log(proxy.age); // Uncaught Error: 不存在该对象</span><br></pre></td></tr></table></figure><p>使用<code>get陷阱函数</code>进行对象外形验证，由于<code>target</code>对象存在<code>name</code>属性，所以可以正常返回，当获取<code>age</code>属性时，由于该属性并不存在，所以会抛出错误。</p><p><strong>3.使用has陷阱函数隐藏属性</strong></p><p><code>in </code>运算符用于判断指定对象中是否存在某个属性，如果对象的属性名与指定的字符串或符号值相匹配，那么<code>in</code>运算符就会返回<code>true</code>。无论该属性是对象自身的属性还是其原型的属性。</p><p><code>has陷阱函数</code>会在使用<code>in</code>运算符的情况下被调用，控制in运算符返回不同的结果，<code>has陷阱函数</code>会传入两个参数：</p><ol><li>trapTarget：代理的目标对象；</li><li>key：属性键；</li></ol><p><code>Reflect.has()</code>方法接收相同的参数，并向<code>in</code>运算符返回默认的响应结果，用于返回默认响应结果。</p><p>例如想要隐藏value属性：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//has陷阱函数</span><br><span class="line">let target = &#123;</span><br><span class="line">value:&#x27;hello world&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let proxy = new Proxy(target,&#123;</span><br><span class="line">has(tarpTarget,key)&#123;</span><br><span class="line">if(Object.is(key,&#x27;value&#x27;))&#123;</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br><span class="line">Reflect.has(tarpTarget,key);</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(&#x27;value&#x27; in proxy); //false</span><br></pre></td></tr></table></figure><p>使用<code>has陷阱函数</code>，能够控制<code>in</code>运算符的结果，<code>value</code>属性在<code>target对象</code>中存在，通过代理的<code>has陷阱函数</code>使得在检查<code>value</code>属性时返回<code>false</code>，达到隐藏属性的效果。</p><p><strong>4.使用deleteProperty陷阱函数避免属性被删除</strong></p><p><code>deleteProperty</code> 陷阱函数会在使用<code>delete</code> 运算符删除对象属性时被调用，该方法接收两个参数：</p><ol><li>trapTarget：代理的目标对象；</li><li>key：需要删除的键；</li></ol><p><code>Reflect.deleteProperty()</code> 方法也接受这两个参数，并提供了 <code>deleteProperty</code> 陷阱函数的默认实现。你可以结合 <code>Reflect.deleteProperty() </code>方法以及 <code>deleteProperty</code> 陷阱函数，来修改 <code>delete</code> 运算符的行为。例如，能确保 value 属性不被删除：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">let target = &#123;</span><br><span class="line">name: &quot;target&quot;,</span><br><span class="line">value: 42</span><br><span class="line">&#125;;</span><br><span class="line">let proxy = new Proxy(target, &#123;</span><br><span class="line">deleteProperty(trapTarget, key) &#123;</span><br><span class="line">if (key === &quot;value&quot;) &#123;</span><br><span class="line">return false;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">return Reflect.deleteProperty(trapTarget, key);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">// 尝试删除 proxy.value</span><br><span class="line">console.log(&quot;value&quot; in proxy); // true</span><br><span class="line">let result1 = delete proxy.value;</span><br><span class="line">console.log(result1); // false</span><br></pre></td></tr></table></figure><h3 id="原型代理上的陷阱函数"><a href="#原型代理上的陷阱函数" class="headerlink" title="原型代理上的陷阱函数"></a>原型代理上的陷阱函数</h3><p>在调用Object.setPrototypeOf()和getPrototypeOf()方法时，可以使用<code>setPrototypeOf</code>和<code>getPrototypeOf</code>陷阱函数来影响Object上相应的两个方法的效果。setPrototypeOf陷阱函数接收两个参数：</p><ol><li>trapTarget：代理的目标对象；</li><li>proto：需要被用作原型的对象；</li></ol><p><code>setPrototypeOf()</code>方法与<code>Reflect.setPrototypeOf()</code>传入相同的参数。另外，getPrototypeOf陷阱函数只接收<code>trapTarget</code>参数，<code>Reflect.getPrototype</code>也只接收一个参数。</p><p>例如，通过返回 null 隐藏了代理对象的原型，并且使得该原型不可被修改：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//原型代理上的陷阱函数</span><br><span class="line"></span><br><span class="line">let target = &#123;&#125;;</span><br><span class="line">let proxy = new Proxy(target, &#123;</span><br><span class="line">getPrototypeOf(trapTarget) &#123;</span><br><span class="line">return null;</span><br><span class="line">&#125;,</span><br><span class="line">setPrototypeOf(trapTarget, proto) &#123;</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">let targetProto = Object.getPrototypeOf(target);</span><br><span class="line">let proxyProto = Object.getPrototypeOf(proxy);</span><br><span class="line">console.log(targetProto === Object.prototype); // true</span><br><span class="line">console.log(proxyProto === Object.prototype); // false</span><br><span class="line">console.log(proxyProto); // null</span><br><span class="line">// 成功</span><br><span class="line">Object.setPrototypeOf(target, &#123;&#125;);</span><br><span class="line">// 抛出错误</span><br><span class="line">Object.setPrototypeOf(proxy, &#123;&#125;);</span><br></pre></td></tr></table></figure><p>使用 <code>target</code> 对象作为参数调用<code>Object.getPrototypeOf()</code> 会返回一个对象值；而使用 proxy 对象调用该方法则会返回<code>null</code> ，因为 <code>getPrototypeOf</code> 陷阱函数被调用了。类似的，使用 target 去调用<code>Object.setPrototypeOf()</code> 会成功；而由于 <code>setPrototypeOf</code> 陷阱函数的存在，使用 <code>proxy</code>则会引发错误。</p><p>2.3 对象可扩展性的陷阱函数</p><p>ES5 通过<code> Object.preventExtensions()</code> 与 <code>Object.isExtensible()</code> 方法给对象增加了可扩展性。而 ES6 则通过 <code>preventExtensions</code> 与 <code>isExtensible</code> 陷阱函数允许代理拦截对于底层对象的方法调用。这两个陷阱函数都接受名为 <code>trapTarget</code> 的单个参数，此参数代表代理的目标对象。 <code>isExtensible</code> 陷阱函数必须返回一个布尔值用于表明目标对象是否可被扩展，而 <code>preventExtensions</code> 陷阱函数也需要返回一个布尔值，用于表明操作是否已成功。同时也存在<code>Reflect.preventExtensions()</code> 与<code> Reflect.isExtensible()</code> 方法，用于实现默认的行为。这两个方法都返回布尔值，因此它们可以在对应的陷阱函数内直接使用。</p><p>例如，不想让代理对象的<code>Object.preventExtensios()</code>操作成功，可以强制<code>preventExtensions</code>陷阱函数返回<code>false</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//对象可扩展性的陷阱函数</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">let target = &#123;&#125;;</span><br><span class="line">let proxy = new Proxy(target, &#123;</span><br><span class="line">isExtensible(trapTarget) &#123;</span><br><span class="line">return Reflect.isExtensible(trapTarget);</span><br><span class="line">&#125;,</span><br><span class="line">preventExtensions(trapTarget) &#123;</span><br><span class="line">return false</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">console.log(Object.isExtensible(target)); // true</span><br><span class="line">console.log(Object.isExtensible(proxy)); // true</span><br><span class="line">Object.preventExtensions(proxy);</span><br><span class="line">console.log(Object.isExtensible(target)); // true</span><br><span class="line">console.log(Object.isExtensible(proxy)); // true</span><br></pre></td></tr></table></figure><h3 id="属性描述符的陷阱函数"><a href="#属性描述符的陷阱函数" class="headerlink" title="属性描述符的陷阱函数"></a>属性描述符的陷阱函数</h3><p>ES5 最重要的特征之一就是引入了<code>Object.defineProperty()</code>方法用于定义属性的特性。在JS 之前的版本中，没有方法可以定义一个访问器属性，也不能让属性变成只读或是不可枚举。而这些特性都能够利用 <code>Object.defineProperty() </code>方法来实现，并且你还可以利用<code>Object.getOwnPropertyDescriptor() </code>方法来检索这些特性。代理允许你使用 <code>defineProperty</code> 与 <code>getOwnPropertyDescriptor</code> 陷阱函数，来分别拦截对于<code>Object.defineProperty()</code> 与 <code>Object.getOwnPropertyDescriptor()</code> 的调用。 <code>defineProperty</code><br>陷阱函数接受下列三个参数：</p><ol><li>trapTarget ：需要被定义属性的对象（即代理的目标对象） ；</li><li>key ：属性的键（字符串类型或符号类型） ；</li><li>descriptor ：为该属性准备的描述符对象。</li></ol><p><code>defineProperty</code> 陷阱函数要求你在操作成功时返回 <code>true</code> ，否则返回 <code>false</code> 。<code>getOwnPropertyDescriptor</code> 陷阱函数则只接受 <code>trapTarget</code> 与 <code>key</code> 这两个参数，并会返回对应的描述符。 <code>Reflect.defineProperty()</code> 与 <code>Reflect.getOwnPropertyDescriptor()</code> 方法作为上述陷阱函数的对应方法，接受与之相同的参数。</p><p><code>defineProperty</code> 陷阱函数要求你返回一个布尔值用于表示操作是否已成功。当它返回 <code>true</code>时， <code>Object.defineProperty()</code> 会正常执行；而如果它返回了 <code>false</code> ，则<code>Object.defineProperty() </code>会抛出错误。 你可以使用该功能来限制哪些属性可以被<code>Object.defineProperty()</code> 方法定义。</p><p><code>etOwnPropertyDescriptor</code> 陷阱函数有一个微小差异，要求返回值必须是 <code>null</code> 、<br><code>undefined</code> ，或者是一个对象。如果返回值是一个对象，则只允许该对象拥有 <code>enumerable</code><br>、 <code>configurable</code> 、 <code>value</code> 、 <code>writable</code> 、 <code>get</code> 或 <code>set</code> 这些自有属性</p><h3 id="ownKeys陷阱函数"><a href="#ownKeys陷阱函数" class="headerlink" title="ownKeys陷阱函数"></a>ownKeys陷阱函数</h3><p><code>ownKeys</code> 代理陷阱拦截了内部方法 <code>[[OwnPropertyKeys]]</code> ，并允许你返回一个数组用于重写该行为。返回的这个数组会被用于四个方法： <code>Object.keys()</code> 方法、<code>Object.getOwnPropertyNames()</code> 方法、<code>Object.getOwnPropertySymbols()</code>方法与<code>Object.assign()</code> 方法，其中 <code>Object.assign()</code> 方法会使用该数组来决定哪些属性会被复制。</p><p><code>ownKeys</code> 陷阱函数接受单个参数，即目标对象，同时必须返回一个数组或者一个类数组对象。你可以使用 <code>ownKeys</code> 陷阱函数去过滤特定的属性，以避免这些属性被<code> Object.keys()</code> 方法、<code> Object.getOwnPropertyNames()</code> 方法、<code>Object.getOwnPropertySymbols()</code> 方法或 <code>Object.assign()</code> 方法使用。</p><h3 id="apply与construct陷阱函数"><a href="#apply与construct陷阱函数" class="headerlink" title="apply与construct陷阱函数"></a>apply与construct陷阱函数</h3><p>只有 <code>apply</code> 与 <code>construct</code> 要求代理目标对象必须是一个函数。函数拥有两个内部方法：<code> [[Call]]</code> 与 <code>[[Construct]]</code> ，前者会在函数被直接调用时执行，而后者会在函数被使用 <code>new</code> 运算符调用时执行。 <code>apply</code> 与 <code>construct</code>陷阱函数对应着这两个内部方法，并允许你对其进行重写。<code>apply</code> 陷阱函数会接收到下列三个参数（ <code>Reflect.apply()</code> 也会接收这些参数） ：</p><ol><li>trapTarget ：被执行的函数（即代理的目标对象） ；</li><li>thisArg ：调用过程中函数内部的 this 值；</li><li>argumentsList ：被传递给函数的参数数组。</li></ol><p>当使用 <code>new</code> 去执行函数时， <code>construct</code> 陷阱函数会被调用并接收到下列两个参数：</p><ol><li>trapTarget ：被执行的函数（即代理的目标对象） ；</li><li>argumentsList ：被传递给函数的参数数组。</li></ol><p><code>Reflect.construct() </code>方法同样会接收到这两个参数，还会收到可选的第三参数 <code>newTarget</code>，如果提供了此参数，则它就指定了函数内部的 <code>new.target</code> 值。</p><p>使用apply和construct陷阱函数有这样一些应用场景：</p><blockquote><p>验证函数的参数</p></blockquote><p>假如需要保证所有参数都是某个特定类型，可使用 <code>apply</code> 陷阱函数进行验证：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//apply和construct陷阱函数</span><br><span class="line"></span><br><span class="line">let sum = function (arr=[]) &#123;</span><br><span class="line">return arr.reduce((previous,current)=&gt;previous+current);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let proxy = new Proxy(sum,&#123;</span><br><span class="line">apply(trapTarget,thisArg,argumentList)&#123;</span><br><span class="line">argumentList[0].forEach((item)=&gt;&#123;</span><br><span class="line">if(typeof item != &#x27;number&#x27;)&#123;</span><br><span class="line">throw new Error(&#x27;不是数字类型&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">return Reflect.apply(trapTarget,thisArg,argumentList);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">construct(trapTarget,argumentList)&#123;</span><br><span class="line">throw new Error(&#x27;不能使用new&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(proxy([1,2,3,4])); // 10</span><br><span class="line">console.log(proxy([1, &quot;2&quot;, 3, 4]));//Uncaught Error: 不是数字类型Uncaught Error: 不是数字类型</span><br><span class="line">let result = new proxy(); //Uncaught Error: 不能使用new</span><br></pre></td></tr></table></figure><h3 id="可被撤销的代理"><a href="#可被撤销的代理" class="headerlink" title="可被撤销的代理"></a>可被撤销的代理</h3><p>在被创建之后，代理通常就不能再从目标对象上被解绑。有的情况下你可能想撤销一个代理以便让它不能再被使用。当你想通过公共接口向外提供一个安全的对象，并且要求要随时都能切断对某些功能的访问，这种情况下可被撤销的代理就会非常有用。<br>你可以使用<code>Proxy.revocable()</code>方法来创建一个可被撤销的代理，该方法接受的参数与<code>Proxy</code> 构造器的相同：一个目标对象、一个代理处理器，而返回值是包含下列属性的一个对象：</p><ol><li>proxy ：可被撤销的代理对象；</li><li>revoke ：用于撤销代理的函数；</li></ol><p>当 <code>revoke()</code> 函数被调用后，就不能再对该 <code>proxy</code> 对象进行更多操作。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let target = &#123;</span><br><span class="line">name: &quot;target&quot;</span><br><span class="line">&#125;;</span><br><span class="line">let &#123; proxy, revoke &#125; = Proxy.revocable(target, &#123;&#125;);</span><br><span class="line">console.log(proxy.name); // &quot;target&quot;</span><br><span class="line">revoke();</span><br><span class="line">// 抛出错误</span><br><span class="line">console.log(proxy.name);</span><br></pre></td></tr></table></figure><p>这个例子创建了一个可被撤销的代理，它对<code>Proxy.revocable()</code>方法返回的对象进行了解构<br>赋值，把同名属性的值赋给了 <code>proxy</code> 与 <code>revoke</code> 变量。此时 <code>proxy</code> 对象和代理的目标对象一样，于是 <code>proxy.name</code> 属性的值就是 <code>&quot;target&quot;</code> ，因为它直接传递了<br><code>target.name</code> 的值。然而一旦<code> revoke()</code> 函数被调用， 代理对象就和所代理的目标对象就解除“绑定”关系，之后试图访问 <code>proxy.name</code> 会抛出错误。</p><h3 id="将代理对象作为原型使用"><a href="#将代理对象作为原型使用" class="headerlink" title="将代理对象作为原型使用"></a>将代理对象作为原型使用</h3><p><strong>代理对象可以被作为原型使用，在把代理对象作为原型时，仅当操作的默认行为会按惯例追踪原型时，代理陷阱才会被调用。</strong>因此，将代理对象作为原型时，常见的应用场景有：</p><p><strong>1.在原型上使用get陷阱函数</strong></p><p>当内部方法 <code>[[Get]]</code> 被调用以读取属性时，该操作首先会查找对象的自有属性；如果指定名称的属性没有找到，则会继续在对象的原型上进行属性查找；这个流程会一直持续到没有原型可供查找为止。得益于这个流程，若你设置了一个 <code>get</code> 代理陷阱，则只有在对象不存在指定名称的自有属性时，该陷阱函数才会在对象的原型上被调用。当所访问的属性无法保证存在时，你可以使用 <code>get</code> 陷阱函数来阻止预期外的行为。例如，创建了一个对象，当你尝试去访问一个不存在的属性时，它会抛出错误：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//原型上使用get陷阱函数</span><br><span class="line"></span><br><span class="line">let target = &#123;&#125;;</span><br><span class="line">let newTarget  = Object.create(new Proxy(</span><br><span class="line">target,&#123;</span><br><span class="line">get(trapTarget,key,receiver)&#123;</span><br><span class="line">throw new Error(&#x27;不存在该属性&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">));</span><br><span class="line"></span><br><span class="line">newTarget.name = &#x27;hello world&#x27;;</span><br><span class="line">console.log(newTarget.name); //hello world</span><br><span class="line"></span><br><span class="line">console.log(newTarget.age); //Uncaught Error: 不存在该属性</span><br></pre></td></tr></table></figure><p>由于 <code>name</code> 属性存在，所以不会调用 <code>get</code> 陷阱函数，而 <code>age</code> 属性在对象上并不存在，所以，会从原型上去找该属性，因此，会触发 <code>get</code> 陷阱函数，从而抛出错误。</p><p><strong>2.在原型上使用 <code>set</code> 陷阱函数</strong></p><p>内部方法 <code>[[Set]]</code> 同样会查找对象的自有属性，并在必要时继续对该对象的原型进行查找。当你对一个对象属性进行赋值时，如果指定名称的自有属性存在，值就会被赋在该属性上；而若该自有属性不存在，则会继续检查对象的原型，但默认情况下它会在对象实例（而非原型） 上创建一个新的属性用于赋值，无论同名属性是否存在于原型上。</p><p><strong>3.在原型上使用has陷阱函数</strong></p><p> <code>has</code> 陷阱函数会拦截对象上 <code>in</code> 运算符的使用。 <code>in</code> 运算符首先查找对象上指定名称的自有属性；如果不存在同名自有属性，则会继续查找对象的原型；如果原型上也不存在同名自有属性，那么就会沿着原型链一直查找下去，直到找到该属性、或者没有更<br>多原型可供查找时为止。<code>has</code> 陷阱函数只在原型链查找触及原型对象的时候才会被调用。</p><p><strong>当使用代理作为原型时，这只会在指定名称的自有属性不存在时，才会触发 <code>has</code> 陷阱函数。</strong></p><h3 id="将代理作为类的原型"><a href="#将代理作为类的原型" class="headerlink" title="将代理作为类的原型"></a>将代理作为类的原型</h3><p>代理对象不能直接作为类的原型，因为类的 <code>prototype</code> 属性是不可写入的。但是，可以使用继承来实现：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//代理对象作为类的原型</span><br><span class="line"></span><br><span class="line">function NoSuchProperty() &#123;</span><br><span class="line">// empty</span><br><span class="line">&#125; </span><br><span class="line">NoSuchProperty.prototype = new Proxy(&#123;&#125;, &#123;</span><br><span class="line">get(trapTarget, key, receiver) &#123;</span><br><span class="line">throw new ReferenceError(`$&#123;key&#125; doesn&#x27;t exist`);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">class Square extends NoSuchProperty &#123;</span><br><span class="line">constructor(length, width) &#123;</span><br><span class="line">super();</span><br><span class="line">this.length = length;</span><br><span class="line">this.width = width;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">let shape = new Square(2, 6);</span><br><span class="line">let area1 = shape.length * shape.width;</span><br><span class="line">console.log(area1); // 12</span><br><span class="line">// 由于 &quot;wdth&quot; 不存在而抛出了错误</span><br><span class="line">let area2 = shape.length * shape.wdth;</span><br></pre></td></tr></table></figure><p><code>Square</code> 类继承了 <code>NoSuchProperty</code> 类，因此该代理就被加入了 <code>Square</code> 类的原型链。随后<code>shape</code> 对象被创建为 <code>Square</code> 类的一个实例，让它拥有两个属性： <code>length</code> 与 <code>width</code> 。由于 <code>get</code> 陷阱函数永远不会被调用，因此能够成功读取这两个属性的值。只有访问 <code>shape</code> 上不存在的属性时（例如这里的 <code>shape.wdth</code> 拼写错误） ，才触发了 <code>get</code> 陷阱函数并导致错误被抛出。</p><h3 id="总结-9"><a href="#总结-9" class="headerlink" title="总结"></a>总结</h3><ol><li>在 ES6 之前，特定对象（例如数组） 会显示出一些非常规的、无法被开发者复制的行为，而代理的出现改变了这种情况。代理允许你为一些 JS 底层操作自行定义非常规行为，因此你就可以通过代理陷阱来复制 JS 内置对象的所有行为。在各种不同操作发生时（例如对于 <code>in</code>运算符的使用） ，这些代理陷阱会在后台被调用。</li><li>反射接口也是在 ES6 中引入的，允许开发者为每个代理陷阱实现默认的行为。每个代理陷阱在 <code>Reflect</code> 对象（ES6 的另一个新特性） 上都有一个同名的对应方法。将代理陷阱与反射接口方法结合使用，就可以在特定条件下让一些操作有不同的表现，有别于默认的内置行为。</li><li>可被撤销的代理是一种特殊的代理，可以使用 <code>revoke()</code> 函数去有效禁用。 <code>revoke()</code> 函数终结了代理的所有功能，因此在它被调用之后，所有与代理属性交互的意图都会导致抛出错误。</li><li>尽管直接使用代理是最有力的使用方式，但你也可以把代理用作另一个对象的原型。但只有很少的代理陷阱能在作为原型的代理上被有效使用，包括 <code>get</code> 、 <code>set</code> 与 <code>has</code> 这几个，这让这方面的用例变得十分有限</li></ol><h3 id="案例-6"><a href="#案例-6" class="headerlink" title="案例"></a>案例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //set陷阱函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let target = &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// name:&#x27;target&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let proxy = new Proxy(target,&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// set(tarpTarget,key,value,receiver)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// if(!tarpTarget.hasOwnProperty(key))&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// if(isNaN(value))&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// throw new Error(&#x27;property must be number&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return Reflect.set(tarpTarget,key,value,receiver);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// proxy.msg=&#x27;hello proxy&#x27;; //Uncaught Error: property must be number</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //get陷阱函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let target=&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// name:&#x27;hello world&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let proxy = new Proxy(target,&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// get(tarpTarget,key,receiver)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// if(!(key in tarpTarget))&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// throw new Error(&#x27;不存在该对象&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return Reflect.get(tarpTarget,key,receiver);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(proxy.name); //hello world</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(proxy.age); // Uncaught Error: 不存在该对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //has陷阱函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let target = &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// value:&#x27;hello world&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let proxy = new Proxy(target,&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// has(tarpTarget,key)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// if(Object.is(key,&#x27;value&#x27;))&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return false;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// Reflect.has(tarpTarget,key);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(&#x27;value&#x27; in proxy); //false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//deleteProperty陷阱函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let target = &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// name: &quot;target&quot;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// value: 42</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let proxy = new Proxy(target, &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// deleteProperty(trapTarget, key) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// if (key === &quot;value&quot;) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return false;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; else &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return Reflect.deleteProperty(trapTarget, key);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// // 尝试删除 proxy.value</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(&quot;value&quot; in proxy); // true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let result1 = delete proxy.value;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(result1); // false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //原型代理上的陷阱函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let target = &#123;&#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let proxy = new Proxy(target, &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// getPrototypeOf(trapTarget) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return null;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// setPrototypeOf(trapTarget, proto) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return false;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let targetProto = Object.getPrototypeOf(target);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let proxyProto = Object.getPrototypeOf(proxy);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(targetProto === Object.prototype); // true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(proxyProto === Object.prototype); // false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(proxyProto); // null</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// // 成功</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// Object.setPrototypeOf(target, &#123;&#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// // 抛出错误</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// Object.setPrototypeOf(proxy, &#123;&#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//对象可扩展性的陷阱函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let target = &#123;&#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let proxy = new Proxy(target, &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// isExtensible(trapTarget) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return Reflect.isExtensible(trapTarget);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// preventExtensions(trapTarget) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(Object.isExtensible(target)); // true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(Object.isExtensible(proxy)); // true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// Object.preventExtensions(proxy);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(Object.isExtensible(target)); // true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(Object.isExtensible(proxy)); // true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//defineProperty</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let proxy = new Proxy(&#123;&#125;, &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// defineProperty(trapTarget, key, descriptor) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// if (!isNaN(key)) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return false;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return Reflect.defineProperty(trapTarget, key, descriptor);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// Object.defineProperty(proxy,&#x27;name&#x27;,&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// value:&#x27;hello world&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(proxy.name); // &quot;proxy&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// Object.defineProperty(proxy,&#x27;age&#x27;,&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// value:20</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(proxy.age); // &quot;proxy&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// //apply和construct陷阱函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let sum = function (arr=[]) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return arr.reduce((previous,current)=&gt;previous+current);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let proxy = new Proxy(sum,&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// apply(trapTarget,thisArg,argumentList)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// argumentList[0].forEach((item)=&gt;&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// if(typeof item != &#x27;number&#x27;)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// throw new Error(&#x27;不是数字类型&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// return Reflect.apply(trapTarget,thisArg,argumentList);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// construct(trapTarget,argumentList)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// throw new Error(&#x27;不能使用new&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(proxy([1,2,3,4])); // 10</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(proxy([1, &quot;2&quot;, 3, 4]));//Uncaught Error: 不是数字类型Uncaught Error: 不是数字类型</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let result = new proxy(); //Uncaught Error: 不能使用new</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//可被插销的代理</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let target = &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// name: &quot;target&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let &#123; proxy, revoke &#125; = Proxy.revocable(target, &#123;&#125;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(proxy.name); // &quot;target&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// revoke();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// // 抛出错误</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(proxy.name);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//原型上使用get陷阱函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let target = &#123;&#125;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// let newTarget  = Object.create(new Proxy(</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// target,&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// get(trapTarget,key,receiver)&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// throw new Error(&#x27;不存在该属性&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// &#125;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// ));</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// newTarget.name = &#x27;hello world&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(newTarget.name); //hello world</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// console.log(newTarget.age); //Uncaught Error: 不存在该属性</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//代理对象作为类的原型</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">NoSuchProperty</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// empty</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title class_">NoSuchProperty</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Proxy</span>(&#123;&#125;, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">get</span>(<span class="params">trapTarget, key, receiver</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ReferenceError</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span> doesn&#x27;t exist`</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_ inherited__">NoSuchProperty</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">constructor</span>(<span class="params">length, width</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">super</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">this</span>.<span class="property">length</span> = length;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">this</span>.<span class="property">width</span> = width;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> shape = <span class="keyword">new</span> <span class="title class_">Square</span>(<span class="number">2</span>, <span class="number">6</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> area1 = shape.<span class="property">length</span> * shape.<span class="property">width</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(area1); <span class="comment">// 12</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 由于 &quot;wdth&quot; 不存在而抛出了错误</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> area2 = shape.<span class="property">length</span> * shape.<span class="property">wdth</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="什么是模块？"><a href="#什么是模块？" class="headerlink" title="什么是模块？"></a>什么是模块？</h2><p>模块（Modules ） 是使用不同方式加载的 JS 文件（与 JS 原先的脚本加载方式相对） 。这种不同模式很有必要，因为它与脚本（script ） 有大大不同的语义：</p><ol><li>模块代码自动<strong>运行在严格模式</strong>下，并且没有任何办法跳出严格模式；</li><li>在模块的顶级作用域创建的变量，<strong>不会被自动添加到共享的全局作用域</strong>，它们只会在<strong>模块顶级作用域</strong>的内部存在；</li><li>模块顶级作用域的 <code>this</code> 值为 <code>undefined</code> ；</li><li>模块不允许在代码中使用 HTML 风格的注释（这是 JS 来自于早期浏览器的历史遗留特性） ；</li><li>对于需要让模块外部代码访问的内容，模块必须导出它们；</li><li>允许模块从其他模块导入绑定；</li></ol><h3 id="基本的导出"><a href="#基本的导出" class="headerlink" title="基本的导出"></a>基本的导出</h3><p>可以使用 <code>export</code> 关键字将已发布代码部分公开给其他模块。最简单方法就是将 <code>export</code>放置在<strong>任意变量、函数或类声明</strong>之前：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 导出数据</span><br><span class="line">export var color = &quot;red&quot;;</span><br><span class="line">export let name = &quot;Nicholas&quot;;</span><br><span class="line">export const magicNumber = 7;</span><br><span class="line">// 导出函数</span><br><span class="line">export function sum(num1, num2) &#123;</span><br><span class="line">return num1 + num1;</span><br><span class="line">&#125; </span><br><span class="line">// 导出类</span><br><span class="line">export class Rectangle &#123;</span><br><span class="line">constructor(length, width) &#123;</span><br><span class="line">this.length = length;</span><br><span class="line">this.width = width;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">// 此函数为模块私有</span><br><span class="line">function subtract(num1, num2) &#123;</span><br><span class="line">return num1 - num2;</span><br><span class="line">&#125; </span><br><span class="line">// 定义一个函数……</span><br><span class="line">function multiply(num1, num2) &#123;</span><br><span class="line">return num1 * num2;</span><br><span class="line">&#125; </span><br><span class="line">// ……导出一个函数引用</span><br><span class="line">export &#123; multiply &#125;;</span><br></pre></td></tr></table></figure><p>此例中有几点需要注意。首先，除了 <code>export</code> 关键字之外，每个声明都与正常形式完全一样。<strong>每个被导出的函数或类都有名称，这是因为导出的函数声明与类声明必须要有名称</strong>。你不能使用这种语法来导出匿名函数或匿名类，除非使用了 <code>default</code> 关键字 。其次，细看一下 <code>multiply()</code> 函数，它并没有在定义时被导出。这是因为你不仅能导出声明，还可以导出引用（即代码最后一行） 。最后请注意，此例并未导出<code>subtract()</code> 函数。此函数在模块外部不可访问，因为任意没有被显式导出的变量、函数或类都会在模块内保持私有。</p><h3 id="基本的导入"><a href="#基本的导入" class="headerlink" title="基本的导入"></a>基本的导入</h3><p>一旦你有了包含导出的模块，就能在其他模块内使用 <code>import</code> 关键字来访问已被导出的功能。 import 语句有两个部分，<strong>一是需要导入的标识符，二是需导入的标识符</strong>的来源模块。此处是导入语句的基本形式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; identifier1, identifier2 &#125; from &quot;./example.js&quot;;</span><br></pre></td></tr></table></figure><p>在 <code>import</code> 之后的花括号指明了从给定模块导入对应的绑定， <code>from</code> 关键字则指明了需要导入的模块。模块由一个表示模块路径的字符串（被称为模块说明符， module specifier ） 来指定。</p><p>当从模块导入了一个绑定时，该绑定表现得就像使用了 <code>const</code> 的定义。这意味着你不能再定义另一个同名变量（包括导入另一个同名绑定） ，也不能在对应的 <code>import</code> 语句之前使用此标识符（也就是要受暂时性死区限制） ，更不能修改它的值。</p><blockquote><p>导入单个绑定</p></blockquote><p>实现导入单个绑定时，仅仅只需要使用一个标识符：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 单个导入</span><br><span class="line">import &#123; sum &#125; from &quot;./example.js&quot;;</span><br><span class="line">console.log(sum(1, 2)); // 3</span><br><span class="line">sum = 1; // 出错</span><br></pre></td></tr></table></figure><p>对于已导入的绑定再重新赋值，则会导致错误。</p><blockquote><p>导入多个绑定</p></blockquote><p>如果你想从 <code>example</code> 模块导入多个绑定，你可以像下面这样显式的列出它们：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 多个导入</span><br><span class="line">import &#123; sum, multiply, magicNumber &#125; from &quot;./example.js&quot;;</span><br><span class="line">console.log(sum(1, magicNumber)); // 8</span><br><span class="line">console.log(multiply(1, 2)); // 2</span><br></pre></td></tr></table></figure><p>此处从 <code>example</code> 模块导入了三个绑定： <code>sum</code> 、 <code>multiply</code> 与 <code>magicNumber</code> 。</p><blockquote><p>完全导入一个模块</p></blockquote><p>还有一种特殊情况，即允许你将整个模块当作单一对象进行导入，该<strong>模块的所有导出都会作为对象的属性存在</strong>。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 完全导入</span><br><span class="line">import * as example from &quot;./example.js&quot;;</span><br><span class="line">console.log(example.sum(1,</span><br><span class="line">example.magicNumber)); // 8</span><br><span class="line">console.log(example.multiply(1, 2)); // 2</span><br></pre></td></tr></table></figure><p>在此代码中， <code>example.js</code> 中所有导出的绑定都被加载到一个名为 <code>example</code> 的对象中，具名导出（ <code>sum()</code> 函数、 <code>multiple()</code> 函数与 <code>magicNumber</code> ） 都成为 <code>example</code> 的<strong>可用属性</strong>。这种导入格式被称为命名空间导入（namespace import ） ，这是因为该 <code>example</code> 对象并不存在于 <code>example.js</code> 文件中，而是作为一个命名空间对象被创建使用，其中包含了<code>example.js</code> 的所有导出成员。</p><p><strong>需要注意的是：无论对同一个模块使用了多少次 <code>import</code> 语句，该模块都只会被执行一次。在导出模块的代码执行之后，已被实例化的模块就被保留在内存中，并随时都能被其他 <code>import</code> 所引用</strong></p><blockquote><p>导入绑定无法修改原始值</p></blockquote><p>ES6 的 <code>import</code> 语句为变量、函数与类创建了只读绑定，而不像普通变量那样简单引用了原始绑定。<strong>尽管导入绑定的模块无法修改绑定的值，但是可以在导出模块中对原始值做出修改，导入绑定会自动反映出修改的变化</strong>，例如：</p><p>导出模块：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export var name = &quot;Nicholas&quot;;</span><br><span class="line">export function setName(newName) &#123;</span><br><span class="line">name = newName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>导入模块：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123; name, setName &#125; from &quot;./example.js&quot;;</span><br><span class="line">console.log(name); // &quot;Nicholas&quot;</span><br><span class="line">setName(&quot;Greg&quot;);</span><br><span class="line">console.log(name); // &quot;Greg&quot;</span><br><span class="line">name = &quot;Nicholas&quot;; // error</span><br></pre></td></tr></table></figure><p>调用 <code>setName(&quot;Greg&quot;</code>) 会回到导出 <code>setName()</code> 的模块内部，并在那里执行，从而将 <code>name</code> 设置为 “<code>Greg</code>“ 。注意这个变化会自动反映到所导入的 <code>name</code> 绑定上。</p><h3 id="重命名的导出与导入"><a href="#重命名的导出与导入" class="headerlink" title="重命名的导出与导入"></a>重命名的导出与导入</h3><blockquote><p>在导出模块中进行重命名</p></blockquote><p>如果想用不同的名称来导出，可以使用 <code>as</code> 关键字来定义新的名称：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function sum(num1, num2) &#123;</span><br><span class="line">return num1 + num2;</span><br><span class="line">&#125; </span><br><span class="line">export &#123; sum as add &#125;;</span><br></pre></td></tr></table></figure><p>此处的 <code>sum()</code> 函数被作为 <code>add()</code> 导出，前者是<strong>本地名称（local name ）</strong> ，后者则是<strong>导出名称（exported name ）</strong> 。这意味着当另一个模块要导入此函数时，它必须改用 <code>add</code> 这个名称：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123;add&#125; from &#x27;./example.js&#x27;</span><br></pre></td></tr></table></figure><blockquote><p>在导入时重命名</p></blockquote><p>在导入时同样可以使用 <code>as</code> 关键字进行重命名：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123; add as sum &#125; from &#x27;./example.js&#x27;</span><br><span class="line">console.log(typeof add); // &quot;undefined&quot;</span><br><span class="line">console.log(sum(1, 2)); // 3</span><br></pre></td></tr></table></figure><p>此代码导入了<code> add(</code>) 函数，并使用了导入名称（import name ） 将其重命名为 <code>sum()</code>（本地名称） 。这意味着在此模块中并不存在名为 <code>add</code> 的标识符。</p><h3 id="模块的默认值"><a href="#模块的默认值" class="headerlink" title="模块的默认值"></a>模块的默认值</h3><p>模块的默认值（ default value ） 是使用 <code>default</code> 关键字所指定的单个变量、函数或类，而你在每个模块中<strong>只能设置一个默认导出</strong>，将 <code>default</code> 关键字用于多个导出会是语法错误。</p><h4 id="导出默认值"><a href="#导出默认值" class="headerlink" title="导出默认值"></a>导出默认值</h4><p>导出默认值一共有三种形式：</p><blockquote><ol><li>不使用标识符</li></ol></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export default function(num1,num2)&#123;</span><br><span class="line">return num1+num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此模块将一个函数作为默认值进行了导出， <code>default</code> 关键字标明了这是一个默认导出，此函数并不需要有名称。</p><blockquote><ol start="2"><li>使用标识符</li></ol></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function sum(num1, num2) &#123;</span><br><span class="line">return num1 + num2;</span><br><span class="line">&#125; </span><br><span class="line">export default sum;</span><br></pre></td></tr></table></figure><blockquote><ol start="3"><li>使用重命名语法</li></ol></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function sum(num1, num2) &#123;</span><br><span class="line">return num1 + num2;</span><br><span class="line">&#125; </span><br><span class="line">export &#123;sum as default&#125;;</span><br></pre></td></tr></table></figure><blockquote><ol start="4"><li>既导出了默认值，又导出非默认值</li></ol></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export let color = &#x27;red&#x27;;</span><br><span class="line">export default function(num1,num2)&#123;</span><br><span class="line">return num1+num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="导入默认值"><a href="#导入默认值" class="headerlink" title="导入默认值"></a>导入默认值</h4><blockquote><p>只导入默认值</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import sum from &#x27;./example.js&#x27;;</span><br><span class="line">console.log(sum(1,2));</span><br></pre></td></tr></table></figure><p>这个导入语句从 <code>example.js</code> 模块导入了其默认值。与之前在非默认的导入中看到的不同,注意此处并未使用花括号。本地名称 <code>sum</code> 被用于代表目标模块所默认导出的函数。</p><blockquote><p>既导入默认值，又导入非默认值</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import sum, &#123; color &#125; from &#x27;./example.js&#x27;;</span><br><span class="line">console.log(sum(1,2));</span><br><span class="line">console.log(color);</span><br></pre></td></tr></table></figure><p><strong>逗号将默认的本地名称与非默认的名称分隔开，非默认值仍旧被花括号所包裹。要记住在 <code>import</code> 语句中默认名称必须位于非默认名称之前。</strong></p><blockquote><p>对导入默认值重命名</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123;default as sum, color&#125; from &#x27;./example.js&#x27;</span><br><span class="line"></span><br><span class="line">console.log(sum(1,2));</span><br><span class="line">console.log(color);</span><br></pre></td></tr></table></figure><p>在此代码中，默认的导出（ <code>default</code> ） 被重命名为 <code>sum</code> ，并且附加的 <code>color</code> 导出也被一并导入了。</p><h4 id="对已导入的内容再导出"><a href="#对已导入的内容再导出" class="headerlink" title="对已导入的内容再导出"></a>对已导入的内容再导出</h4><p>如果在当前模块中对已导入的内容在导出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export &#123;sum&#125; from &#x27;./example.js&#x27;;</span><br></pre></td></tr></table></figure><p>这种形式的 <code>export</code> 会进入指定模块查看 sum 的定义，随后将其导出。在导出时同样也可以进行重命名：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export &#123; sum as add &#125; from &#x27;./example.js&#x27;</span><br></pre></td></tr></table></figure><p>如果想将<code>另一个模块</code>中的所有值完全导出，可以使用 <code>*</code> 号模式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export * from &#x27;./example.js&#x27;;</span><br></pre></td></tr></table></figure><p>用完全导出，就可以导出目标模块的默认值及其所有具名导出，但这可能影响你从当前模<br>块所能导出的值。例如，假设 example.js 具有一个默认导出，当你使用这种语法时，你就无法为当前模块另外再定义一个默认导出。</p><h4 id="无绑定的导入"><a href="#无绑定的导入" class="headerlink" title="无绑定的导入"></a>无绑定的导入</h4><p>有些模块也许没有进行任何导出，相反只是<strong>修改全局作用域的对象</strong>。尽管这种模块的<strong>顶级变量、函数或类最终并不会自动被加入全局作用域</strong>，但这并不意味着该模块无法访问全局作用域。诸如 <code>Array</code> 与 <code>Object</code> 之类的内置对象的共享定义在模块内部是可访问的，并且对于这些对象的修改会反映到其他模块中。</p><h4 id="总结-10"><a href="#总结-10" class="headerlink" title="总结"></a>总结</h4><ol><li>ES6 为 JS 语言添加了模块，作为打包与封装功能的方式。模块的行为异于脚本，它们<strong>不会用自身顶级作用域的变量、函数或类去修改全局作用域</strong>，而模块的 <code>this</code> 值为 <code>undefined</code> ；</li><li>可以在模块中使用 <code>export</code> 关键字<strong>导出，变量、函数与类都可以</strong>，并且每个模块允许存在一个<strong>默认导出</strong>。在导出之后，另一个模块就能导入该模块所导出的一个或多个导出值。这些导入的名称就像是被 <code>const</code> 所定义的，会被当作块级绑定，并且不允在同一模块内重复声明；</li><li>由于模块必须用与脚本不同的方式运行，浏览器就引入了 <code>&lt;script type=&quot;module&quot;&gt;</code> ，以表示资源文件或内联代码需要作为模块来执行。使用 <script type="module"> 加载的模块文件会默认应用 <code>defer</code> 属性。一旦包含模块的页面文档完全被解析，模块就会按照它们在文档中的出现顺序依次执行。</li></ol><h2 id="ES7-预览"><a href="#ES7-预览" class="headerlink" title="ES7 预览"></a>ES7 预览</h2><ul><li>数组<ul><li><code>arr.includes()</code> 数组是否包含某个东西</li><li>数组的 arr.keys(), arr,entries()</li><li>for … in 遍历数组 下标 key</li><li>for … of 遍历数组 值 value, 不能用于json</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">includes</span>(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i) <span class="comment">// 循环的时下标 key</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i) <span class="comment">// 循环的是值 value</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr.<span class="title function_">keys</span>()) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&gt;&#x27;</span>+i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> arr.<span class="title function_">entries</span>()) &#123;<span class="comment">//结构赋值</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;&gt;&#x27;</span> + key + value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> json = &#123; <span class="attr">a</span>: <span class="number">12</span>, <span class="attr">b</span>: <span class="number">5</span>, <span class="attr">c</span>: <span class="number">7</span> &#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> json) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>数字<ul><li>求幂  3**8   代表：3的8次方</li></ul></li><li>字符串<ul><li>padStart()/padEnd() 指定宽度，不够就补空格或指定字符</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;=&#x27;</span> + <span class="string">&#x27;abcd&#x27;</span>.<span class="title function_">padStart</span>(<span class="number">6</span>, <span class="string">&#x27;0&#x27;</span>) + <span class="string">&#x27;=&#x27;</span>)<span class="comment">//补几位  第二个参数补什么东西</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;=&#x27;</span> + <span class="string">&#x27;abcd&#x27;</span>.<span class="title function_">padEnd</span>(<span class="number">6</span>, <span class="string">&#x27;0&#x27;</span>) + <span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">=00abcd=</span><br><span class="line">=abcd00=</span><br></pre></td></tr></table></figure><ul><li>容忍度<ul><li>[1, 2, 3,] 老版数组最后不能有逗号，新的可以有</li><li>函数参数最后多的逗号也可以</li></ul></li><li>async await<ul><li>和 generator yield 类似</li><li>generator 不可以写成箭头函数， async 可以</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">await</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript新语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS基础</title>
      <link href="/2019/06/27/css%E5%9F%BA%E7%A1%80/"/>
      <url>/2019/06/27/css%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="CSS概述"><a href="#CSS概述" class="headerlink" title="CSS概述"></a>CSS概述</h2><h4 id="什么是CSS"><a href="#什么是CSS" class="headerlink" title="什么是CSS"></a>什么是CSS</h4><table><thead><tr><th align="center">Cascading Style Sheets</th></tr></thead><tbody><tr><td align="center">层叠样式表，级联样式表，简称样式表</td></tr></tbody></table><span id="more"></span><h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><ul><li>设置HTML网页中的元素样式</li></ul><h4 id="CSS和HTML之间的关系"><a href="#CSS和HTML之间的关系" class="headerlink" title="CSS和HTML之间的关系"></a>CSS和HTML之间的关系</h4><ul><li>HTML：负责网页结构的搭建，内容的展示</li><li>CSS：负责网页的修饰</li></ul><h4 id="CSS与HTML的属性使用原则"><a href="#CSS与HTML的属性使用原则" class="headerlink" title="CSS与HTML的属性使用原则"></a>CSS与HTML的属性使用原则</h4><ul><li>W3C建议我们尽量使用css的方式来取代html的属性</li></ul><p>​        css样式：</p><pre><code>      1.样式代码高度的重用</code></pre><p>​          2.提高可维护性    </p><h2 id="CSS的语法规范"><a href="#CSS的语法规范" class="headerlink" title="CSS的语法规范"></a>CSS的语法规范</h2><h4 id="使用CSS的方法"><a href="#使用CSS的方法" class="headerlink" title="使用CSS的方法"></a>使用CSS的方法</h4><h5 id="内联样式"><a href="#内联样式" class="headerlink" title="内联样式"></a>内联样式</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将css的样式定义在<span class="selector-tag">HTML</span>标签的style属性中</span><br><span class="line">&lt;any style=&quot;样式声明; 样式声明&quot;&gt;&lt;/any&gt;</span><br><span class="line">样式声明  样式属性:值  组成</span><br><span class="line">多个样式声明之间用分号分隔</span><br></pre></td></tr></table></figure><ul><li>内联样式使用的非常少</li><li>内联样式不能重用</li><li>内联样式优先级最高</li></ul><h5 id="内部样式"><a href="#内部样式" class="headerlink" title="内部样式"></a>内部样式</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">在&lt;head&gt;&lt;/head&gt;标签中，添加&lt;style&gt;&lt;style&gt;标签，在其内部定义样式规则</span><br><span class="line">&lt;style&gt;</span><br><span class="line">  样式规则</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">样式规则：由选择器和样式声明组成</span><br><span class="line">选择器&#123;</span><br><span class="line"> 样式声明；</span><br><span class="line"> 样式声明；</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">span</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#afa</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#faf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>内部样式在本页面可以 重用，但是其他页面不能重</li><li>项目中使用不多，但是学习和测试中大量使用</li></ul><h5 id="外部样式"><a href="#外部样式" class="headerlink" title="外部样式"></a>外部样式</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">独立创建一个新文件*<span class="selector-class">.css</span>。</span><br><span class="line">可以在任何网页中引用</span><br><span class="line">&lt;head&gt;</span><br><span class="line"> &lt;link rel=&quot;stylesheet&quot; href=&quot;css文件的url&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">外部样式是项目中必须使用的样式写法。</span><br></pre></td></tr></table></figure><h4 id="CSS的样式特性"><a href="#CSS的样式特性" class="headerlink" title="CSS的样式特性"></a>CSS的样式特性</h4><h5 id="继承性"><a href="#继承性" class="headerlink" title="继承性"></a>继承性</h5><ul><li>大部分的css效果是可以直接被子元素继承的</li><li>必须是层级结构</li></ul><h5 id="层叠性"><a href="#层叠性" class="headerlink" title="层叠性"></a>层叠性</h5><ul><li>可以为一个元素定义多个样式规则</li><li>规则中属性不冲突(不重复)，可以同时作用到当前元素上</li></ul><h5 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h5><ul><li>如果样式声明冲突时，按照样式规则优先级去应用</li><li>默认的优先级，从高到低：</li></ul><p>​        1.内联样式(行内样式)优先级最高</p><p>​        2.内部样式、外部样式，遵循就近原则</p><p>​        3.浏览器默认样式最低</p><h5 id="调整优先级"><a href="#调整优先级" class="headerlink" title="调整优先级"></a>调整优先级</h5><ul><li>！important规则<ul><li>放在属性值之后，与值之间用空格隔开</li><li>作用是调整优先级，让没有important属性不能覆盖他</li></ul></li></ul><h2 id="基础选择器详解"><a href="#基础选择器详解" class="headerlink" title="基础选择器详解"></a>基础选择器详解</h2><ul><li><strong>选择器的作用</strong><ul><li>规范了页面中哪些元素能够使用定义好的样式</li><li>为了匹配元素</li></ul></li></ul><h4 id="通用选择器"><a href="#通用选择器" class="headerlink" title="通用选择器"></a>通用选择器</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*&#123;样式声明&#125;</span><br><span class="line">*效率极低，尽量少用</span><br><span class="line">*&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>&#125;外边距，内边距清<span class="number">0</span></span><br></pre></td></tr></table></figure><h4 id="元素选择器-标签选择器"><a href="#元素选择器-标签选择器" class="headerlink" title="元素选择器(标签选择器)"></a>元素选择器(标签选择器)</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">设置页面中一类元素的默认样式</span><br><span class="line">标签名称&#123;样式声明&#125;</span><br><span class="line"><span class="selector-tag">p</span>&#123;<span class="attribute">color</span>:red&#125;</span><br></pre></td></tr></table></figure><h4 id="类选择器"><a href="#类选择器" class="headerlink" title="类选择器"></a>类选择器</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">定义页面上某类元素的公共样式，谁想用我，就引用我的class名</span><br><span class="line">元素通过class属性来引用该样式</span><br><span class="line">.类名&#123;样式的声明&#125;</span><br><span class="line">&lt;any class=&quot;类名&quot;&gt;</span><br><span class="line">注意: <span class="string">&quot;.&quot;</span>不能省略</span><br><span class="line">     类名不能以数字开头</span><br><span class="line">     类名不能包含特殊字符(可以包含 - _)</span><br></pre></td></tr></table></figure><p>类选择器的特殊用法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.多类选择器</span><br><span class="line">让一个元素引用多个类选择器</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;font_blue font_size24&quot;</span>&gt;</span>烤生蚝<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">2.分类选择器</span><br><span class="line">将元素选择器和类型选择器联合使用</span><br><span class="line">元素选择器.类选择器&#123;&#125;</span><br><span class="line">可以匹配到，指向了某个类的，具体某个元素</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;font_blue&quot;</span>&gt;</span>水煮牛肉<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">span.font_blue&#123;background:#faf;&#125;</span><br><span class="line">作用</span><br><span class="line">1.指向更精确</span><br><span class="line">2.优先级变高</span><br></pre></td></tr></table></figure><h4 id="id选择器"><a href="#id选择器" class="headerlink" title="id选择器"></a>id选择器</h4><p>​    设置指定元素的样式，专属定制</p><p>​     为元素设置id值，使用#id值作为选择器，编写专属样式</p><h4 id="群组选择器"><a href="#群组选择器" class="headerlink" title="群组选择器"></a>群组选择器</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将多个选择器放在一起，一块定义某公共样式</span><br><span class="line">选择器1，选择器2，选择器3......&#123;公共样式声明&#125;</span><br><span class="line">#content,p.mycolor,span&#123;color:red&#125;</span><br></pre></td></tr></table></figure><h4 id="后代选择器"><a href="#后代选择器" class="headerlink" title="后代选择器"></a>后代选择器</h4><ul><li>通过元素的后代关系匹配元素</li><li>后代：一层或者多层的嵌套关系</li><li>语法：选择器1 选择器2 选择器3{样式声明}</li></ul><h4 id="子代选择器"><a href="#子代选择器" class="headerlink" title="子代选择器"></a>子代选择器</h4><ul><li>通过元素的子代关系匹配元素(一层嵌套)</li><li>选择器1&gt;选择器2&gt;选择器3{样式声明}</li></ul><h4 id="伪类选择器"><a href="#伪类选择器" class="headerlink" title="伪类选择器"></a>伪类选择器</h4><ul><li>匹配元素的不同状态下的样式</li></ul><h5 id="链接伪类"><a href="#链接伪类" class="headerlink" title="链接伪类"></a>链接伪类</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:link</span> 元素尚未访问时的状态样式</span><br><span class="line"><span class="selector-pseudo">:visited</span> 元素访问过后的状态样式</span><br><span class="line"><span class="selector-id">#a1</span><span class="selector-pseudo">:link</span>&#123;<span class="attribute">color</span>:red;&#125;</span><br><span class="line"><span class="selector-id">#a1</span><span class="selector-pseudo">:visited</span>&#123;<span class="attribute">color</span>:yellow;&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="动态伪类"><a href="#动态伪类" class="headerlink" title="动态伪类"></a>动态伪类</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">:acitve 匹配元素被激活时的状态</span><br><span class="line">#btn:active&#123;<span class="attribute">color</span>:purple;&#125;</span><br><span class="line"><span class="selector-pseudo">:focus</span> 匹配元素获取焦点时的状态</span><br><span class="line"><span class="selector-id">#txt</span><span class="selector-pseudo">:focus</span>&#123;<span class="attribute">background</span>:<span class="number">#aff</span>;&#125;</span><br><span class="line"><span class="selector-pseudo">:hover</span> 鼠标悬停在元素时的状态</span><br><span class="line"><span class="selector-class">.img</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">width</span>:<span class="number">100px</span>;&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="选择器的权值"><a href="#选择器的权值" class="headerlink" title="选择器的权值"></a>选择器的权值</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">权值：标识当前选择器的重要程度，权值越大优先级越高</span><br><span class="line">!important   &gt;<span class="number">1000</span></span><br><span class="line">内联样式     <span class="number">1000</span></span><br><span class="line">id选择器     <span class="number">100</span></span><br><span class="line">类和伪类选择器  <span class="number">10</span></span><br><span class="line">元素选择器     <span class="number">1</span></span><br><span class="line">*选择器        <span class="number">0</span></span><br><span class="line">继承的样式无权值  无</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ol><li>当一个选择器中含有多个选择器时，需要将所有的选择器的权值进行相加。<br>然后再进行比较，权值高的优先显示<br>注意：选择器的权值计算不会超过其最大的数量级<br>（1W个#id也不会到1000）</li><li>群组选择器的权值，单独计算，不会相加</li><li>样式后面加!important 该样式会获取最高优先级<br>内联样式不能添加!important</li><li>如果权值相同，使用就近原则</li></ol><h2 id="盒子模型和边距"><a href="#盒子模型和边距" class="headerlink" title="盒子模型和边距"></a>盒子模型和边距</h2><h4 id="尺寸属性"><a href="#尺寸属性" class="headerlink" title="尺寸属性"></a>尺寸属性</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">改变元素的宽高</span><br><span class="line"><span class="attribute">width</span></span><br><span class="line">最大宽度 <span class="attribute">max-width</span></span><br><span class="line">最小宽度 <span class="attribute">min-width</span></span><br><span class="line"><span class="attribute">height</span></span><br><span class="line">最大高度 <span class="attribute">max-height</span></span><br><span class="line">最小高度 <span class="attribute">min-height</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h4><h5 id="尺寸单位"><a href="#尺寸单位" class="headerlink" title="尺寸单位"></a>尺寸单位</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">px 像素</span><br><span class="line">in 英寸   1in=2.54cm</span><br><span class="line">pt 磅值，多数用它表示字体大小  1pt=1/72in</span><br><span class="line">cm  mm 厘米，毫米</span><br><span class="line">em 相对单位，相对父元素的倍数</span><br><span class="line">rem 相对单位，相对根元素的倍数(html)</span><br><span class="line">%   相对单位，相对父元素的百分之多少</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="颜色单位"><a href="#颜色单位" class="headerlink" title="颜色单位"></a>颜色单位</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">颜色的英文单词  red blue yellow black orange pink purple</span><br><span class="line">#rrggbb  RGB光学三元色  6个16进制  #006699</span><br><span class="line">#aabbcc---&gt;#abc  #f00  #0f0  #00f  #fff   #000  #333</span><br><span class="line">rgb(r,g,b); r:0~255  g:0~255  b:0~255</span><br><span class="line">rgb(255,255,255);白色</span><br><span class="line">rgb(r%,g%,b%) 此变现形式使用极少</span><br><span class="line">rgba(r,g,b,alpha)  alpha透明度</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="溢出处理"><a href="#溢出处理" class="headerlink" title="溢出处理"></a>溢出处理</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">overflow</span>  <span class="attribute">overflow-x</span>  <span class="attribute">overflow-y</span></span><br><span class="line">当内容多，元素区域小的时候，就会产生溢出效果</span><br><span class="line">默认是纵向溢出</span><br><span class="line">取值：</span><br><span class="line"><span class="number">1</span><span class="selector-class">.visible</span> 可见的，默认值，溢出可见</span><br><span class="line"><span class="number">2</span><span class="selector-class">.hidden</span> 隐藏的，溢出的内容不可见</span><br><span class="line"><span class="number">3</span><span class="selector-class">.scroll</span> 显示滚动条，不管是否溢出，都添加横向和纵向滚动条，(不溢出不可用)</span><br><span class="line"><span class="number">4</span><span class="selector-class">.auto</span> 溢出的部分，显示滚动条，并可用</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="边框属性"><a href="#边框属性" class="headerlink" title="边框属性"></a>边框属性</h4><h5 id="基本属性设置"><a href="#基本属性设置" class="headerlink" title="基本属性设置"></a>基本属性设置</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border</span>:width style color;</span><br><span class="line"><span class="attribute">width</span>:边框的宽度，以px为单位的数字</span><br><span class="line">style:边框的样式</span><br><span class="line">  取值  solid实线</span><br><span class="line">        dotted虚线(点点)</span><br><span class="line">        dashed虚线(短线)</span><br><span class="line">        double 双实线</span><br><span class="line">color:边框的颜色，合法的颜色值 (transparent 透明色)</span><br><span class="line">这种写法，同时设置<span class="number">4</span>个边框，是一种简写方式</span><br><span class="line">取消边框 border:none/<span class="number">0</span>;</span><br><span class="line">单边设置：</span><br><span class="line">    <span class="attribute">border-top</span>/<span class="attribute">right</span>/<span class="attribute">bottom</span>/<span class="attribute">left</span></span><br><span class="line">    <span class="attribute">border-top</span>:<span class="number">5px</span> solid orange;</span><br><span class="line">    <span class="attribute">border-right</span>:<span class="number">3px</span> dotted <span class="number">#f00</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>:<span class="number">7px</span> dashed <span class="number">#0ff</span>;</span><br><span class="line">    <span class="attribute">border-left</span>:<span class="number">11px</span> double <span class="number">#f0f</span>;</span><br><span class="line">单属性设置：</span><br><span class="line">    <span class="attribute">border-color</span>:<span class="number">#f00</span>;</span><br><span class="line">    <span class="attribute">border-style</span>:dotted;</span><br><span class="line">    <span class="attribute">border-width</span>:<span class="number">10px</span>;</span><br><span class="line">单边单属性：</span><br><span class="line"><span class="attribute">border</span>-方向-属性(共<span class="number">12</span>个)</span><br><span class="line"><span class="attribute">border-top-style</span>:double;</span><br><span class="line"><span class="attribute">border-top-color</span>:<span class="number">#44f</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="倒角"><a href="#倒角" class="headerlink" title="倒角"></a>倒角</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">边框的倒角(圆角)</span><br><span class="line">将直角倒成圆角</span><br><span class="line"><span class="attribute">border-radius</span>：</span><br><span class="line">取值  以px为单位的数字</span><br><span class="line">      %   设置圆形(<span class="number">50%</span>)</span><br><span class="line">单角设置</span><br><span class="line">使用两条边去确认一个角，先写上下后写左右</span><br><span class="line"><span class="attribute">border-top-left-radius</span>:左上</span><br><span class="line">border-top-right-radius:右上</span><br><span class="line">border-bottom-left-radius:左下</span><br><span class="line">border-bottom-right-radius:右下</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="边框阴影"><a href="#边框阴影" class="headerlink" title="边框阴影"></a>边框阴影</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">box-shadow</span>: h-shadow v-shadow blur spread color</span><br><span class="line">h-shadow 水平方向阴影偏移，必须值</span><br><span class="line">v-shadow 垂直方向偏移量，必须值</span><br><span class="line">以下可选参数</span><br><span class="line">blur：阴影的模糊距离，可选值，越大模糊距离越明显</span><br><span class="line">spread：阴影的尺寸，指定要在基础阴影上扩出的大小</span><br><span class="line">color：阴影颜色</span><br><span class="line">inset：把默认的外部阴影设置为内部阴影</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="轮廓"><a href="#轮廓" class="headerlink" title="轮廓"></a>轮廓</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">轮廓指的是边框的边框，绘制与边框外边的线条</span><br><span class="line"><span class="attribute">outline</span>:width style color;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="框模型（盒子模型）"><a href="#框模型（盒子模型）" class="headerlink" title="框模型（盒子模型）"></a>框模型（盒子模型）</h4><ul><li>页面元素皆为框（盒子）</li><li>定义了元素框处理元素内容，内边距，外边距以及边框的一种计算模式</li><li>定义了一个元素占地大小的计算方式</li><li>盒子模型默认的计算方式：</li></ul><p>​    <a href="https://imgchr.com/i/A4v2wV"><img src="https://s2.ax1x.com/2019/04/08/A4v2wV.jpg" alt="A4v2wV.jpg"></a></p><ol><li>元素实际占地宽度=左外边距+左边框的宽度+左内边距+内容区域的宽度+右内边距+右边框的宽度+右外边距</li><li>元素实际占地高度=上外+上边框+上内+内容区域高度+下内+下边框+下外</li><li>内边距：元素边框与内容之间的空白间距</li><li>外边距：围绕在元素边框外的空白区域(元素与元素之间的距离)</li></ol><h5 id="外边距"><a href="#外边距" class="headerlink" title="外边距"></a>外边距</h5><ul><li>margin 定义4个方向外边距</li><li>margin-top/right/bottom/left 定义某一个方向的外边距</li></ul><p><strong>取值：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.以px为单位的数字</span><br><span class="line">  为正数  <span class="attribute">top</span>，元素往下移动</span><br><span class="line">          <span class="attribute">left</span>, 元素往右移动</span><br><span class="line">  为负数  <span class="attribute">top</span>,元素往上移动</span><br><span class="line">          <span class="attribute">left</span>,元素往左移动</span><br><span class="line"><span class="number">2</span>.取值为%，相对于父元素尺寸的百分比</span><br><span class="line"><span class="number">3</span><span class="selector-class">.auto</span>，自动计算块级元素的外边距，控制块级元素在水平方向居中对齐</span><br><span class="line"><span class="attribute">margin</span>的效果，改变元素在页面上的位置，多用于微调</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>简写方式：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">简写方式</span><br><span class="line"><span class="attribute">margin</span>:value; 设置<span class="number">4</span>个方向外边距</span><br><span class="line"><span class="attribute">margin</span>：v1 v2;     v1:上下外边距   v2：左右外边距</span><br><span class="line">            margin：<span class="number">0</span> auto; 控制块级元素在水平方向居中对齐</span><br><span class="line"><span class="attribute">margin</span>:v1 v2 v3;   v1:上外边距   v2:左右外边距   v3：下外边距</span><br><span class="line">margin:v1 v2 v3 v4; 上 右 下 左(顺时针) </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>自带外边距的元素有哪些：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span>~<span class="selector-tag">h6</span>,<span class="selector-tag">p</span>,<span class="selector-tag">body</span>,<span class="selector-tag">ol</span>,<span class="selector-tag">ul</span>,<span class="selector-tag">dl</span>,pre</span><br><span class="line">通常要清除这些元素的自带外边距*&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="外边距的特殊效果"><a href="#外边距的特殊效果" class="headerlink" title="外边距的特殊效果"></a>外边距的特殊效果</h5><h6 id="外边距的合并"><a href="#外边距的合并" class="headerlink" title="外边距的合并"></a>外边距的合并</h6><ul><li>当两个垂直外边距相遇时，他们将合并成一个外边距</li><li>最终的取值，取决于两个外边距中距离大的值</li></ul><h6 id="行内元素以及行内块元素的外边距"><a href="#行内元素以及行内块元素的外边距" class="headerlink" title="行内元素以及行内块元素的外边距"></a>行内元素以及行内块元素的外边距</h6><ul><li>行内元素垂直外边距无效(img除外)，水平外边距相遇两个值会相加</li><li>行内块，设置垂直外边距，整行元素跟着发生变化</li></ul><h6 id="外边距溢出"><a href="#外边距溢出" class="headerlink" title="外边距溢出"></a>外边距溢出</h6><p><strong>在特殊条件下，给子元素设置的上外边距，会作用到父元素上</strong></p><ul><li>特殊条件：<ul><li>父元素没有上边框</li><li>只有第一个子元素设置上边距时</li></ul></li><li>解决方案：<ul><li>为父元素增加上边框；弊端：元素实际占地高度变大</li><li>为父元素添加上内边距；弊端：元素实际占地高度变大</li><li>在父元素的第一个子元素位置添加一个空的&lt;table&gt;</li></ul></li></ul><h5 id="内边距"><a href="#内边距" class="headerlink" title="内边距"></a>内边距</h5><ul><li>不会影响其他元素，但是会改变元素自己的占地尺寸，会变大</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">padding</span>:value;设置<span class="number">4</span>个方向的内边距</span><br><span class="line"><span class="attribute">padding-top</span>/<span class="attribute">right</span>/<span class="attribute">bottom</span>/<span class="attribute">left</span> 定义单方向的内边距</span><br><span class="line">取值</span><br><span class="line">以px为单位的数字</span><br><span class="line">或者百分比%</span><br><span class="line">简写方式</span><br><span class="line"><span class="attribute">padding</span>:value; 设置<span class="number">4</span>个方向的内边距</span><br><span class="line"><span class="attribute">padding</span>:v1 v2;  v1:上下   v2:左右   padding没有auto</span><br><span class="line">padding:v1 v2 v3:  v1:上  v2:左右  v3:下</span><br><span class="line">padding:v1 v2 v3 v4;上 右  下  左</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="box-sizing属性"><a href="#box-sizing属性" class="headerlink" title="box-sizing属性"></a>box-sizing属性</h5><ul><li>设置盒子模型的计算方式</li><li>默认计算方式：<ul><li>元素实际占地宽度=左外边距+左边框+左内边距+内容区域宽度+右内边距+右边框+右外边距</li><li>元素实际占地高度=上外边距+上边框+上内边距+内容区域高度+下内边距+下边框+下外边距</li></ul></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">box-sizing</span>取值</span><br><span class="line"><span class="attribute">content</span>-box 默认值，会采用默认计算方式</span><br><span class="line"><span class="attribute">border</span>-box 元素的尺寸(定义宽高)，包含<span class="attribute">border</span>,<span class="attribute">padding</span>和内容区域宽高</span><br><span class="line">元素实际占地宽度=左右外边距+设置的宽度<span class="attribute">width</span></span><br><span class="line">元素实际占地高度=上下外边距+设置的高度<span class="attribute">height</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="块级元素，行内元素，行内块"><a href="#块级元素，行内元素，行内块" class="headerlink" title="块级元素，行内元素，行内块"></a>块级元素，行内元素，行内块</h5><table><thead><tr><th>块级元素：独立成行，可以设置宽高，margin上下有效</th></tr></thead><tbody><tr><td>行内元素：与其他行内元素和行内块，共用一行          宽高无效，margin上下无效</td></tr><tr><td>行内块：与其他行内元素和行内块，共用一行        可以设置宽高，margin上下有效        一行行内元素，其中一个设置了上下margin,整行都跟着移动</td></tr></tbody></table><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><h4 id="背景颜色"><a href="#背景颜色" class="headerlink" title="背景颜色"></a>背景颜色</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-color</span>:</span><br><span class="line">取值</span><br><span class="line">合法的颜色值</span><br><span class="line">transparent;透明</span><br><span class="line">注意：背景色的填充，默认从边框位置处开始</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="背景图片"><a href="#背景图片" class="headerlink" title="背景图片"></a>背景图片</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">background-image:url(资源路径)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="背景图片平铺"><a href="#背景图片平铺" class="headerlink" title="背景图片平铺"></a>背景图片平铺</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-repeat</span>:</span><br><span class="line">取值</span><br><span class="line"><span class="number">1</span>.repeat 默认值，平铺</span><br><span class="line"><span class="number">2</span>.repeat-x  水平方向平铺</span><br><span class="line"><span class="number">3</span>.repeat-y垂直方向平铺</span><br><span class="line"><span class="number">4</span>.no-repeat 不平铺，只显示一张</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="背景图的定位"><a href="#背景图的定位" class="headerlink" title="背景图的定位"></a>背景图的定位</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-position</span>：x  y </span><br><span class="line">取值</span><br><span class="line"><span class="number">1</span>.以px为单位的数字</span><br><span class="line">  指的是，图片在水平和垂直方向的偏移量</span><br><span class="line"><span class="number">2</span><span class="selector-class">.x</span>% y%</span><br><span class="line"> <span class="number">50%</span> <span class="number">50%</span>中间</span><br><span class="line"> <span class="number">0%</span> <span class="number">0%</span> 左上</span><br><span class="line"> <span class="number">100%</span> <span class="number">100%</span> 右下</span><br><span class="line"><span class="number">3</span>.关键字</span><br><span class="line">  x：<span class="attribute">left</span>/center/<span class="attribute">right</span></span><br><span class="line">  y: top/center/bottom</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="背景图的尺寸"><a href="#背景图的尺寸" class="headerlink" title="背景图的尺寸"></a>背景图的尺寸</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-size</span>: width  height</span><br><span class="line">取值：</span><br><span class="line"><span class="number">1</span>.以px为单位的数字</span><br><span class="line"><span class="number">2</span>.%</span><br><span class="line"><span class="number">3</span>.cover，填满容器，图片的宽高比不变，铺满整个容器的宽高，图片溢出的部分会被裁减掉</span><br><span class="line">将背景图同比缩放，直到背景图完全覆盖容器，不留一丝空白，图片溢出的部分会被裁减掉</span><br><span class="line">图片可能会显示不完整，但是容器完全被背景图充满</span><br><span class="line"><span class="number">4</span>.contain 图片自身宽高比不变，但是，要缩放到图片能够完全展示出来，所以会有空白区域</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="背景图的固定"><a href="#背景图的固定" class="headerlink" title="背景图的固定"></a>背景图的固定</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-attachment</span>:</span><br><span class="line">将背景图固定在网页某个位置，一直在可视的区域中显示，不会随着网页滚动条改变位置</span><br><span class="line">取值：<span class="number">1</span>.scroll 默认值，会随着网页滚动条改变位置</span><br><span class="line">      <span class="number">2</span>.fixed 固定，不会随着网页滚动条改变位置</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="背景的简写方式"><a href="#背景的简写方式" class="headerlink" title="背景的简写方式"></a>背景的简写方式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">在一个属性中，指定背景多个值</span><br><span class="line">属性：<span class="attribute">background</span></span><br><span class="line">取值：<span class="attribute">color</span> url repeat attachment <span class="attribute">position</span></span><br><span class="line"><span class="attribute">background</span>:<span class="number">#faa</span> <span class="built_in">url</span>(<span class="string">&#x27;08.png&#x27;</span>) no-repeat center center;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="布局流程构思"><a href="#布局流程构思" class="headerlink" title="布局流程构思"></a>布局流程构思</h4><ol><li>先写结构布局</li><li>定义宽高，大体的位置</li><li>背景颜色图，边框所有</li><li>文字的所有</li><li>微调<ol><li>从外往里写，从左往右，从上往下写</li></ol></li></ol><h4 id="渐变—gradient"><a href="#渐变—gradient" class="headerlink" title="渐变—gradient"></a>渐变—gradient</h4><h5 id="什么是渐变"><a href="#什么是渐变" class="headerlink" title="什么是渐变"></a>什么是渐变</h5><ul><li>多种颜色平缓变化的一种显示效果</li></ul><h5 id="渐变的主要因素—色标"><a href="#渐变的主要因素—色标" class="headerlink" title="渐变的主要因素—色标"></a>渐变的主要因素—色标</h5><p>​    色标，一种颜色以及他出现的位置</p><ul><li>一个渐变至少有两个色标</li></ul><h5 id="渐变的分类"><a href="#渐变的分类" class="headerlink" title="渐变的分类"></a>渐变的分类</h5><ul><li>线性渐变，以直线的方向来填充渐变色</li><li>径向渐变，以圆形的方式实现渐变色</li><li>重复渐变，将线性渐变，或径向渐变 重复几次</li></ul><h5 id="线性渐变"><a href="#线性渐变" class="headerlink" title="线性渐变"></a>线性渐变</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-image</span></span><br><span class="line">取值：</span><br><span class="line">新版本：linear-gradient(方向，色标<span class="number">1</span>，色标<span class="number">2</span>........)</span><br><span class="line">色标的写法：颜色的合法值 位置的百分比</span><br><span class="line">方向取值：<span class="selector-tag">to</span> <span class="attribute">top</span>/<span class="attribute">right</span>/<span class="attribute">bottom</span>/<span class="attribute">left</span></span><br><span class="line">          角度  按顺时针计算  </span><br><span class="line">                 <span class="number">0deg</span>   <span class="selector-tag">to</span> <span class="attribute">top</span></span><br><span class="line">                 <span class="number">90deg</span>  <span class="selector-tag">to</span> <span class="attribute">right</span></span><br><span class="line">                 <span class="number">180deg</span> <span class="selector-tag">to</span> <span class="attribute">bottom</span></span><br><span class="line">                 <span class="number">270deg</span>  <span class="selector-tag">to</span> <span class="attribute">left</span></span><br><span class="line">旧版本写法：-浏览器内核-linear-gradient(方向,色标<span class="number">1</span>,色标<span class="number">2</span>....)</span><br><span class="line">           方向  <span class="attribute">top</span>/<span class="attribute">right</span>/<span class="attribute">bottom</span>/<span class="attribute">left</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="径向渐变"><a href="#径向渐变" class="headerlink" title="径向渐变"></a>径向渐变</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-image</span>:<span class="built_in">radial-gradient</span>(半径 at 圆心,色标<span class="number">1</span>,色标<span class="number">2</span>......);</span><br><span class="line">半径：以px为单位的数字</span><br><span class="line">圆心：x y，以px为单位的具体数值</span><br><span class="line">      x% y% 元素的宽高占比</span><br><span class="line">     关键字  x<span class="selector-pseudo">:left</span>/center/<span class="attribute">right</span></span><br><span class="line">             y:top/center/bottom</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="重复线性渐变"><a href="#重复线性渐变" class="headerlink" title="重复线性渐变"></a>重复线性渐变</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">repeating-linear-gradient(<span class="selector-tag">to</span> <span class="attribute">right</span>,<span class="selector-id">#faa</span> <span class="number">0px</span>,<span class="selector-id">#ffa</span> <span class="number">50px</span>);</span><br><span class="line">注意在重复渐变中，色标的位置，要给绝对值数字，不要用%</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="重复的径向渐变"><a href="#重复的径向渐变" class="headerlink" title="重复的径向渐变"></a>重复的径向渐变</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">repeating-radial-gradient(<span class="number">50px</span> at center center,<span class="selector-id">#060606</span> <span class="number">0px</span>,<span class="selector-id">#af8bd8</span> <span class="number">20px</span>,<span class="selector-id">#292727</span> <span class="number">35px</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="浏览器兼容性"><a href="#浏览器兼容性" class="headerlink" title="浏览器兼容性"></a>浏览器兼容性</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">各个浏览器新版本都渐变</span><br><span class="line">对于不支持的旧版本，可以添加浏览器内核前缀的方式，做兼容，让浏览器支持</span><br><span class="line">chrome&amp;safari: -webkit-</span><br><span class="line">firefox:-moz-</span><br><span class="line">ie:-ms-</span><br><span class="line">opera: -o-  </span><br><span class="line">background: <span class="built_in">-webkit-linear-gradient</span>(left, <span class="number">#006699</span> <span class="number">0%</span>,<span class="number">#f00</span> <span class="number">25%</span>, <span class="number">#990066</span> <span class="number">50%</span>,<span class="number">#ff0</span> <span class="number">75%</span>,<span class="number">#996600</span> <span class="number">100%</span>); </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="文本格式化"><a href="#文本格式化" class="headerlink" title="文本格式化"></a>文本格式化</h2><h4 id="字体属性"><a href="#字体属性" class="headerlink" title="字体属性"></a>字体属性</h4><h5 id="指定字体的类型"><a href="#指定字体的类型" class="headerlink" title="指定字体的类型"></a>指定字体的类型</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">font-family</span>:<span class="string">&quot;类型1&quot;</span>,<span class="string">&quot;类型2&quot;</span>....</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="字体大小"><a href="#字体大小" class="headerlink" title="字体大小"></a>字体大小</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">font-size</span>:以px、pt为单位的数字或者以em或rem;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="1-3字体加粗"><a href="#1-3字体加粗" class="headerlink" title="1.3字体加粗"></a>1.3字体加粗</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">font-weight</span>:bold/normal/lighter/bolder</span><br><span class="line">无单位的数字  <span class="number">100</span>-<span class="number">1000</span>整百数 常用<span class="number">400</span>-<span class="number">900</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="1-4字体样式"><a href="#1-4字体样式" class="headerlink" title="1.4字体样式"></a>1.4字体样式</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">font-style</span>：<span class="attribute">normal</span></span><br><span class="line">italic（斜体）</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="1-5小型大写字母"><a href="#1-5小型大写字母" class="headerlink" title="1.5小型大写字母"></a>1.5小型大写字母</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">font-variant</span>:normal</span><br><span class="line"> small-caps</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="文本格式化-1"><a href="#文本格式化-1" class="headerlink" title="文本格式化"></a>文本格式化</h4><h5 id="文本颜色"><a href="#文本颜色" class="headerlink" title="文本颜色"></a>文本颜色</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">color:合法的颜色值</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-2-文本的水平对齐方式"><a href="#2-2-文本的水平对齐方式" class="headerlink" title="2.2.文本的水平对齐方式"></a>2.2.文本的水平对齐方式</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">text-align</span><br><span class="line">left/center/right/justify(两端对齐)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-3行高"><a href="#2-3行高" class="headerlink" title="2.3行高"></a>2.3行高</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">定义一行数据的高度</span><br><span class="line">如果行高大于字体本身的大小，该行文本在行高内成垂直居中的显示效果</span><br><span class="line">line-height:</span><br><span class="line">以px为单位的数字，一般与容器的高相同</span><br><span class="line">无单位数字，line-height:2;  是字体大小的倍数</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-4-线条的修饰"><a href="#2-4-线条的修饰" class="headerlink" title="2.4.线条的修饰"></a>2.4.线条的修饰</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">text-decoration</span><br><span class="line">none 没有线条，去掉a标签的下划线</span><br><span class="line">overline 上划线</span><br><span class="line">underline 下划线</span><br><span class="line">line-through 删除线</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-5-首行缩进"><a href="#2-5-首行缩进" class="headerlink" title="2.5.首行缩进"></a>2.5.首行缩进</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">text-indent:</span><br><span class="line">以px为单位的数字</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-6-文本的阴影"><a href="#2-6-文本的阴影" class="headerlink" title="2.6.文本的阴影"></a>2.6.文本的阴影</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">text-shadow:</span><br><span class="line">h-shadow  v-shadow blur color;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><h4 id="表格的常用属性"><a href="#表格的常用属性" class="headerlink" title="表格的常用属性"></a>表格的常用属性</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">边框属性 <span class="selector-tag">table</span>和<span class="selector-tag">td</span></span><br><span class="line">边距属性 <span class="selector-tag">table</span>都能使用，<span class="selector-tag">td</span>没有<span class="attribute">margin</span></span><br><span class="line">尺寸属性 </span><br><span class="line">文本格式属性 <span class="attribute">font</span>-* text-* <span class="attribute">line-height</span></span><br><span class="line">背景属性 颜色 图片 渐变</span><br><span class="line"><span class="attribute">vertical-align</span>:top/middle/bottom  要写在td才生效</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="表格特有的属性"><a href="#表格特有的属性" class="headerlink" title="表格特有的属性"></a>表格特有的属性</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1.边框合并</span><br><span class="line">    border-collapse：</span><br><span class="line">    separate 默认，边框分离的模式</span><br><span class="line">    collapse 边框合并</span><br><span class="line">2.边框的边距</span><br><span class="line">设置单元格与单元格之间的距离,必须保证border-collapse:separate;</span><br><span class="line">    border-spacing</span><br><span class="line">    取值一个value,垂直和水平距离相同</span><br><span class="line">    取值两个value1 value2. value1:水平距离，value2:垂直距离</span><br><span class="line">3.标题的位置</span><br><span class="line">    caption-side=&quot;&quot;</span><br><span class="line">   top/bottom</span><br><span class="line">4.表格的显示规则,告诉浏览器，我这张表格如果渲染，td尺寸的计算方式</span><br><span class="line">table-layout:</span><br><span class="line">auto 默认值，自动表格布局，列的尺寸实际是由内容决定的</span><br><span class="line">fixed 固定表格的布局，列的尺寸由设置的值决定需要table有尺寸，td有尺寸</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>自动布局auto</th><th>固定布局fixed</th></tr></thead><tbody><tr><td>单元格的大小会适应内容</td><td>单元格尺寸取决于设定的值</td></tr><tr><td>表格复杂时，加载的速度慢(缺点)</td><td>任何情况下会加速加载表格(优点)</td></tr><tr><td>布局会比较灵活(优点)</td><td>布局会比较死板(缺点)</td></tr><tr><td>适用于不确定每列大小，并且表格不太繁琐的时候</td><td>当确定每列尺寸的时候使用</td></tr></tbody></table><h2 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h2><h4 id="什么是定位"><a href="#什么是定位" class="headerlink" title="什么是定位"></a>什么是定位</h4><p>​    元素在页面中的位置</p><h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><ul><li>普通流定位   默认文档流</li><li>浮动定位</li><li>相对定位</li><li>绝对定位</li><li>固定定位</li></ul><h4 id="普通流定位"><a href="#普通流定位" class="headerlink" title="普通流定位"></a>普通流定位</h4><p>​    又称文档流定位，页面中所有元素默认显示方式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.每个元素在页面中都有自己的空间(盒子模型)</span><br><span class="line">2.每个元素都是从父元素的左上角开始显示的</span><br><span class="line">3.块级元素默认按照从上往下的方式逐个排列，每个元素独占一样</span><br><span class="line">4.行内元素是多个元素在一行中显示，从左往右排列</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="相对-绝对-固定定位-position属性"><a href="#相对-绝对-固定定位-position属性" class="headerlink" title="相对/绝对/固定定位 position属性"></a>相对/绝对/固定定位 position属性</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span></span><br><span class="line">取值</span><br><span class="line">static 静态，默认值。文档流定位</span><br><span class="line">relative 相对定位</span><br><span class="line">absolute 绝对定位</span><br><span class="line">fixed 固定定位</span><br><span class="line">注意:将元素的position设置为relative/absolute/fixed中的任意一个</span><br><span class="line">此元素被称为已定位元素</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="偏移属性"><a href="#偏移属性" class="headerlink" title="偏移属性"></a>偏移属性</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">top</span>/<span class="attribute">right</span>/<span class="attribute">bottom</span>/<span class="attribute">left</span>   距离哪个方向多远</span><br><span class="line">取值是以px为单位的数字</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="相对定位"><a href="#相对定位" class="headerlink" title="相对定位"></a>相对定位</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">元素相对于它原来的位置偏移</span><br><span class="line">在元素位置做微调的时候使用/配合绝对定位使用</span><br><span class="line"><span class="attribute">position</span>:relative;配合偏移属性使用</span><br><span class="line">相对定位不脱离文档流，不会让后面元素补位</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span>:absolute;配合偏移属性使用</span><br><span class="line">特点</span><br><span class="line">脱离文档流，不占页面空间，后面元素要补位</span><br><span class="line">绝对定位的元素，会相对于&quot;最近的&quot;&quot;已定位的&quot;&quot;祖先元素&quot;去做偏移量</span><br><span class="line">绝对定位的元素，没有&quot;已定位的&quot;&quot;祖先元素&quot;，相对<span class="selector-tag">body</span>偏移</span><br><span class="line">绝对定位会让元素变为块级</span><br><span class="line">出现堆叠效果，就使用绝对定位</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="固定定位"><a href="#固定定位" class="headerlink" title="固定定位"></a>固定定位</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">将元素固定在页面的某个位置，位置不会随着滚动条发生变化，一直固定在可视区域</span><br><span class="line">固定定位始终相当于body去实现位置偏移</span><br><span class="line">固定定位脱离文档流，不占页面空间，定位的元素会变成块级</span><br><span class="line">position:fixed;配合偏移属性一起使用</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="堆叠顺序"><a href="#堆叠顺序" class="headerlink" title="堆叠顺序"></a>堆叠顺序</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">默认堆叠顺序，后发生定位的元素，堆叠层级高</span><br><span class="line">默认堆叠顺序，不会大于设置z-index的顺序</span><br><span class="line">z-index:无单位数字，理论最大值 2^31-1</span><br><span class="line">父子元素之间，子元素永远在父元素上面</span><br><span class="line">只有已定位元素，才能使用z-index</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h2><h5 id="浮动特点"><a href="#浮动特点" class="headerlink" title="浮动特点"></a>浮动特点</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.元素一旦浮动起了，脱离文档流</span><br><span class="line">不占页面空间，其它未浮动元素会上前补位</span><br><span class="line">2.浮动元素会停靠在父元素的左边或者右边</span><br><span class="line">或其它已经浮动元素的左/右的边缘</span><br><span class="line">3.浮动解决多个块级元素在同一行内显示的问题</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">属性 float：</span><br><span class="line">取值：</span><br><span class="line">left：左浮动，元素浮动起来后，停靠在父元素的左侧，或者往左挨着已浮动元素</span><br><span class="line">right：右浮动，元素浮动起来后，停靠在父元素的右侧，或者往右挨着已浮动元素</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="浮动元素引发的特殊情况"><a href="#浮动元素引发的特殊情况" class="headerlink" title="浮动元素引发的特殊情况"></a>浮动元素引发的特殊情况</h5><h6 id="1-当父容器横向显示不下所有浮动元素的时候，最后一个元素将换行显示"><a href="#1-当父容器横向显示不下所有浮动元素的时候，最后一个元素将换行显示" class="headerlink" title="1.当父容器横向显示不下所有浮动元素的时候，最后一个元素将换行显示"></a>1.当父容器横向显示不下所有浮动元素的时候，最后一个元素将换行显示</h6><p>  1.1默认情况下，最后一个元素会优先显示在最高的位置，再往左排列<br>  1.2会发生浮动元素占位的情况，浮动元素根据浮动方向，占据方向之上的位置，不允许最后一个元素占用</p><h6 id="2-浮动对默认宽度的影响"><a href="#2-浮动对默认宽度的影响" class="headerlink" title="2.浮动对默认宽度的影响"></a>2.浮动对默认宽度的影响</h6><p>​    块级元素不写宽度，宽度默认是父级元素的100%<br>​    元素一旦浮动起来，宽度以内容为准<br>​    前题，不设置width</p><h6 id="3-元素一旦浮动起来，就变为块级元素，允许修改尺寸，设置垂直外边距"><a href="#3-元素一旦浮动起来，就变为块级元素，允许修改尺寸，设置垂直外边距" class="headerlink" title="3.元素一旦浮动起来，就变为块级元素，允许修改尺寸，设置垂直外边距"></a>3.元素一旦浮动起来，就变为块级元素，允许修改尺寸，设置垂直外边距</h6><h6 id="4-文本，行内元素，行内块，是不会被浮动元素压在下方的，二会巧妙避开，环绕着浮动元素显示"><a href="#4-文本，行内元素，行内块，是不会被浮动元素压在下方的，二会巧妙避开，环绕着浮动元素显示" class="headerlink" title="4.文本，行内元素，行内块，是不会被浮动元素压在下方的，二会巧妙避开，环绕着浮动元素显示"></a>4.文本，行内元素，行内块，是不会被浮动元素压在下方的，二会巧妙避开，环绕着浮动元素显示</h6><h5 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">元素一旦浮动之后，会对后续的元素带来一定的影响，后续元素会上前补位，如果不希望后续上前补位，可以给后续元素添加清除浮动的属性</span><br><span class="line">clear:</span><br><span class="line">取值</span><br><span class="line">        left:清除左浮动元素对我带来的影响</span><br><span class="line">        right:清除右浮动元素对我带来的影响</span><br><span class="line">        both: 清除所有浮动元素对我带来的影响</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="浮动元素对父元素高度带来的影响-高度坍塌"><a href="#浮动元素对父元素高度带来的影响-高度坍塌" class="headerlink" title="浮动元素对父元素高度带来的影响(高度坍塌)"></a>浮动元素对父元素高度带来的影响(高度坍塌)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">块级元素不写高度，他的高度是根据内容判定的</span><br><span class="line">如果内部元素都浮动了，内部元素都脱了默认文档流</span><br><span class="line">父级元素就失去了高度------高度坍塌</span><br><span class="line">解决方案：</span><br><span class="line">1.给父级元素添加高度 弊端：不是每次都知道具体的高度是多少</span><br><span class="line">2.设置父级元素也浮动 弊端：会影响父元素后面的其它元素</span><br><span class="line">3.给父元素设置overflow:hidden/auto 弊端：如果内容想要溢出显示，显示不了。</span><br><span class="line">4.在父元素中追加一个空的块级元素，只设置clear:both</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="显示"><a href="#显示" class="headerlink" title="显示"></a>显示</h2><h4 id="方式"><a href="#方式" class="headerlink" title="方式"></a>方式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">决定了元素在网页中表现形式(块级，行内，行内块，<span class="selector-tag">table</span>)</span><br><span class="line">语法 <span class="attribute">display</span></span><br><span class="line">取值：</span><br><span class="line"><span class="number">1</span><span class="selector-class">.none</span> 不显示元素，隐藏</span><br><span class="line"><span class="number">2</span><span class="selector-class">.block</span> 让元素表现为块级</span><br><span class="line">        块级元素特征，独占一行，可以设置尺寸以及上下外边距</span><br><span class="line"><span class="number">3</span><span class="selector-class">.inline</span> 让元素表现为行内</span><br><span class="line">        行内元素特征，多个元素一行显示，不能设置宽高以下上下外边距</span><br><span class="line"><span class="number">4</span><span class="selector-class">.inline-block</span> 让元素表现为行内块</span><br><span class="line">       行内块特征，多个元素一行显示，可以设置尺寸以及上下外边距</span><br><span class="line"><span class="number">5</span><span class="selector-class">.table</span> 让元素表现为<span class="selector-tag">table</span></span><br><span class="line">      <span class="selector-tag">table</span>的特征：尺寸以内容为准，独占一行，允许修改尺寸</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示的效果"><a href="#显示的效果" class="headerlink" title="显示的效果"></a>显示的效果</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">属性：visibility</span><br><span class="line">取值  visible/hidden</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>visibility:hidden和display:none的区别<ul><li>visibility:hidden隐藏，不脱离默认文档流，依然占位</li><li>display:none 隐藏，脱离了默认文档，不占页面位置</li></ul></li></ul><h4 id="透明度"><a href="#透明度" class="headerlink" title="透明度"></a>透明度</h4><p>​    opacity:0~1  1是不透明，0是全透明</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">opacity</span>和rgba的区别</span><br><span class="line"><span class="attribute">opacity</span>作用与元素，当一个元素设置了<span class="attribute">opacity</span>之后，</span><br><span class="line">       这个元素本身，以及所有子元素，与颜色相关的属性，都会受到影响</span><br><span class="line">rgba(<span class="number">0</span>~<span class="number">255</span>,<span class="number">0</span>~<span class="number">255</span>,<span class="number">0</span>~<span class="number">255</span>,<span class="number">0.5</span>)只会改变你设定的这个颜色透明度</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="垂直对齐"><a href="#垂直对齐" class="headerlink" title="垂直对齐"></a>垂直对齐</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vertical-align</span></span><br><span class="line">    使用在<span class="selector-tag">table</span>中,取值<span class="attribute">top</span>/middle/<span class="attribute">bottom</span></span><br><span class="line">    使用在<span class="selector-tag">img</span>中，取值 <span class="attribute">top</span>/middle/<span class="attribute">bottom</span>/baseline</span><br><span class="line">    控制图片与两边文字垂直对齐方式</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="光标"><a href="#光标" class="headerlink" title="光标"></a>光标</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">改变鼠标悬停在元素时的样式</span><br><span class="line"><span class="attribute">cursor</span>:</span><br><span class="line">取值</span><br><span class="line"><span class="number">1</span>.default 箭头</span><br><span class="line"><span class="number">2</span>.pointer 小手</span><br><span class="line"><span class="number">3</span>.crosshair  +</span><br><span class="line"><span class="number">4</span>.text  I</span><br><span class="line"><span class="number">5</span>.wait  等待</span><br><span class="line"><span class="number">6</span>.help 帮助</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><h4 id="列表标识"><a href="#列表标识" class="headerlink" title="列表标识"></a>列表标识</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">list-style-type</span>:</span><br><span class="line">                none;</span><br><span class="line">                disc;</span><br><span class="line">                circle;</span><br><span class="line">                square;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="列表标识的位置"><a href="#列表标识的位置" class="headerlink" title="列表标识的位置"></a>列表标识的位置</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">list-style-position</span>:outside/inside;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="列表项引用图片"><a href="#列表项引用图片" class="headerlink" title="列表项引用图片"></a>列表项引用图片</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">list-style-image</span>:<span class="built_in">url</span>();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="简写方式"><a href="#简写方式" class="headerlink" title="简写方式"></a>简写方式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">list-style</span>:type <span class="built_in">url</span>() position;</span><br><span class="line">常用的方式  <span class="attribute">list-style</span>:none;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="CSS3-core"><a href="#CSS3-core" class="headerlink" title="CSS3 core"></a>CSS3 core</h2><h4 id="复杂选择器"><a href="#复杂选择器" class="headerlink" title="复杂选择器"></a>复杂选择器</h4><h5 id="兄弟选择器"><a href="#兄弟选择器" class="headerlink" title="兄弟选择器"></a><strong>兄弟选择器</strong></h5><ul><li>作用于兄弟元素，只能往后找，不能往前找</li><li>兄弟元素：具备相同父级元素的平级元素之间，成为兄弟元素</li></ul><h5 id="相邻兄弟选择器"><a href="#相邻兄弟选择器" class="headerlink" title="相邻兄弟选择器"></a><strong>相邻兄弟选择器</strong></h5><p>​    选择器1+选择器2{}  </p><p>​    在选择器1的后面，紧跟着一个元素，这个元素还得匹配到选择2</p><h5 id="通用兄弟选择器"><a href="#通用兄弟选择器" class="headerlink" title="通用兄弟选择器"></a><strong>通用兄弟选择器</strong></h5><p>​    获取某元素后面所有满足条件的兄弟元素</p><p>​    选择器1~选择器2{}</p><h4 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id class name type value style titile ....</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>​    允许通过元素所带的属性以及值来匹配元素</p><h5 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a><strong>基本语法</strong></h5><p>   [attr]{}  ex:[id]{}匹配有id属性的标签</p><h5 id="elem-attr"><a href="#elem-attr" class="headerlink" title="elem[attr]"></a><strong>elem[attr]</strong></h5><p>   div[title]{}  匹配有title属性的div标签</p><h5 id="attr1-attr2"><a href="#attr1-attr2" class="headerlink" title="[attr1][attr2]"></a><strong>[attr1</strong>][attr2]</h5><p>   [class][title]{color:#f00;} 匹配同时具有class属性和title属性</p><h5 id="attr-value"><a href="#attr-value" class="headerlink" title="[attr=value]{}"></a><strong>[attr=value]{}</strong></h5><p>   [id=p2]{} 匹配id值为p2的元素</p><p>   [attr*=value]属性值中，包含指定值的元素</p><p>   [attr~=value]属性值中，包含指定单词的元素</p><p>   [attr^=value] 属性值中,以value开头的元素</p><p>   [attr$=value] 属性值中,以value结尾的元素</p><h4 id="伪类选择器-1"><a href="#伪类选择器-1" class="headerlink" title="伪类选择器"></a>伪类选择器</h4><h5 id="3目标伪类"><a href="#3目标伪类" class="headerlink" title="3目标伪类"></a>3目标伪类</h5><p>   突出显示获得的HTML锚点元素，匹配被激活的锚点</p><p>   选择器:target{}     div:target{}</p><h5 id="结构伪类"><a href="#结构伪类" class="headerlink" title="结构伪类"></a>结构伪类</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ele:first-child&#123;&#125;  匹配的元素是其父元素的第一个子元素</span><br><span class="line">ele:last-child&#123;&#125;  匹配的元素是其父元素的最后一个子元素</span><br><span class="line">ele:nth-child(n)&#123;&#125;  匹配的元素是其父元素的第n个子元素，n从1开始</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="empty"><a href="#empty" class="headerlink" title=":empty"></a>:empty</h4><p>匹配没有子元素的元素</p><p>div:empty{}  匹配没有子元素的div元素</p><h4 id="only-child"><a href="#only-child" class="headerlink" title=":only-child"></a>:only-child</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:only-child</span>&#123;&#125;  匹配属于其父元素的唯一子元素</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="否定伪类-not-selector"><a href="#否定伪类-not-selector" class="headerlink" title="否定伪类 :not(selector)"></a>否定伪类 :not(selector)</h4><p>div:not(:empty){} 匹配非空的div</p><h4 id="内容生成"><a href="#内容生成" class="headerlink" title="内容生成"></a>内容生成</h4><p>使用css动态的向元素中插入一段内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.<span class="selector-pseudo">:before</span>或者<span class="selector-pseudo">::before</span></span><br><span class="line">匹配元素的内容区域之前，插入的伪元素</span><br><span class="line"><span class="number">2</span>.<span class="selector-pseudo">:after</span>或者<span class="selector-pseudo">::after</span></span><br><span class="line">匹配元素的内容区域之后，插入的伪元素</span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;d1&quot;&gt;</span><br><span class="line">  (<span class="selector-pseudo">::before</span>)</span><br><span class="line">  我是要成为海贼王的男人</span><br><span class="line">  (<span class="selector-pseudo">::after</span>)</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="内容生成可以解决的问题"><a href="#内容生成可以解决的问题" class="headerlink" title="内容生成可以解决的问题"></a>内容生成可以解决的问题</h5><p>外边距溢出</p><p> 父元素没有上边框，给第一个子元素设置上外边距，父元素也会发生作用</p><p> 解决方案，在第一个元素之前添加一个&lt; table &gt;&lt; /table&gt;</p><h2 id="弹性布局和转换"><a href="#弹性布局和转换" class="headerlink" title="弹性布局和转换"></a>弹性布局和转换</h2><h4 id="弹性布局"><a href="#弹性布局" class="headerlink" title="弹性布局"></a>弹性布局</h4><h5 id="什么是弹性布局"><a href="#什么是弹性布局" class="headerlink" title="什么是弹性布局"></a>什么是弹性布局</h5><p>弹性布局就是一种布局方式</p><p>主要解决某元素中的子元素的布局方式，为布局提供最大的灵活性</p><h5 id="弹性布局的相关概念和专业术语"><a href="#弹性布局的相关概念和专业术语" class="headerlink" title="弹性布局的相关概念和专业术语"></a>弹性布局的相关概念和专业术语</h5><p><a href="https://imgchr.com/i/EP3ahn"><img src="https://s2.ax1x.com/2019/04/20/EP3ahn.jpg" alt="EP3ahn.jpg"></a></p><h6 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h6><p>要布局的子元素的父元素称之为容器，容器中写display:flex</p><h6 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h6><p>要布局的子元素称之为项目</p><h6 id="主轴"><a href="#主轴" class="headerlink" title="主轴"></a>主轴</h6><p>项目们排列的方向，称之为主轴（水平和垂直）</p><p>如果项目们是按照横向排列，x轴就是主轴</p><p>如果项目们是按照纵向排列，y轴就是主轴</p><h6 id="交叉轴"><a href="#交叉轴" class="headerlink" title="交叉轴"></a>交叉轴</h6><p>与主轴垂直相交的方向轴叫做交叉轴</p><p>语法：</p><p>将元素变为弹性容器，他所有的子元素将变成弹性项目，按照弹性布局的方式去排列显示</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">display</span></span><br><span class="line">取值：<span class="attribute">flex</span>,  将块级元素变为容器</span><br><span class="line">inline-<span class="attribute">flex</span>,将行内元素变为容器</span><br><span class="line">元素设置为<span class="attribute">flex</span>容器之后，子元素一些样式属性会失效</span><br><span class="line"><span class="attribute">float</span>/<span class="attribute">clear</span>/<span class="attribute">vertical-align</span>失效</span><br><span class="line">子元素允许修改尺寸(项目是行内元素也可以修改尺寸)</span><br><span class="line">容器的对齐方式<span class="attribute">text-align</span>失效</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="弹性容器的样式属性"><a href="#弹性容器的样式属性" class="headerlink" title="弹性容器的样式属性"></a>弹性容器的样式属性</h4><h5 id="flex-direction-主轴方向"><a href="#flex-direction-主轴方向" class="headerlink" title="flex-direction 主轴方向"></a>flex-direction 主轴方向</h5><p>取值：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">row 默认值，主轴是x轴，主轴起点在左端</span><br><span class="line">row-reverse, 主轴是x轴，主轴起点在右端</span><br><span class="line">column     主轴是y轴，主轴起点在顶端</span><br><span class="line">column-reverse主轴是y轴，主轴起点在底部</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a>flex-wrap</h5><p>当一个主轴排列不下所有项目时,项目的显示方式</p><p>取值：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nowrap 默认值，空间不够，不换行，项目会自动压缩</span><br><span class="line">wrap 空间不够，就换行，项目不压缩</span><br><span class="line">wrap-reverse 换行，反转</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">是<span class="attribute">flex-direction</span>和<span class="attribute">flex-wrap</span>的缩写</span><br><span class="line">取值  <span class="attribute">direction</span> wrap;</span><br><span class="line">ex:flex-flow:row wrap;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">定义项目在主轴上的对齐方式</span><br><span class="line">取值：</span><br><span class="line">     space-between 两端对齐</span><br><span class="line">     space-around 每个间距相同</span><br><span class="line">     <span class="attribute">flex</span>-start 默认值 在主轴起点对齐</span><br><span class="line">     <span class="attribute">flex</span>-end  在主轴的终点对齐</span><br><span class="line">     center  在主轴上居中对齐</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="align-items-容器高度大于项目高度"><a href="#align-items-容器高度大于项目高度" class="headerlink" title="align-items (容器高度大于项目高度)"></a>align-items (容器高度大于项目高度)</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">项目们在交叉轴上的对齐方式</span><br><span class="line">取值：</span><br><span class="line"><span class="number">1</span><span class="selector-class">.flex-start</span> 交叉轴起点对齐</span><br><span class="line"><span class="number">2</span><span class="selector-class">.flex-end</span> 交叉轴终点对齐</span><br><span class="line"><span class="number">3</span><span class="selector-class">.center</span>   交叉轴居中对齐</span><br><span class="line"><span class="number">4</span><span class="selector-class">.baseline</span> 交叉轴基线对齐</span><br><span class="line"><span class="number">5</span><span class="selector-class">.stretch</span>  如果项目未设置高度，在交叉轴上充满容器</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="项目属性"><a href="#项目属性" class="headerlink" title="项目属性"></a>项目属性</h4><ul><li>是单独设置给一个项目的，不影响容器和其他项目</li></ul><h5 id="order"><a href="#order" class="headerlink" title="order"></a>order</h5><ul><li>取值为无单位的整数，定义项目的排列顺序，值越小，离起点越近，默认值为0；</li></ul><h5 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h5><ul><li>定义项目的放大比例</li><li>如果容器有足够大的剩余空间，项目将按照比例放大</li><li>取值为无单位整数，</li><li>默认值为0.不放大。取值越大，占据的剩余空间越多</li></ul><h5 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h5><ul><li>定义项目的缩小比例，空间不足时，项目该如何缩小</li><li>取值为无单位整数</li><li>默认值为1，空间不足，等比缩小</li><li>0，不缩小</li><li>取值越大，占据的空间越小</li></ul><h5 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a>align-self</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">控制当前项目在交叉轴上对齐方式，与其他项目无关</span><br><span class="line"><span class="attribute">flex</span>-start 交叉轴起点对齐</span><br><span class="line"><span class="attribute">flex</span>-end 交叉轴终点对齐</span><br><span class="line">center   交叉轴居中对齐</span><br><span class="line">baseline 交叉轴基线对齐</span><br><span class="line">stretch  如果项目未设置高度，在交叉轴上充满容器</span><br><span class="line">auto  继承容器的<span class="attribute">align-items</span>的效果</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h2><ul><li><p>改变元素在页面中的 位置 大小 角度 形状等的一种方式</p></li><li><p>2D转换，在X轴和Y轴上，发生转换效果</p></li><li><p>D转换，添加了Z轴</p></li><li><p>转换属性:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span></span><br><span class="line">取值：<span class="attribute">transform</span>-function:</span><br><span class="line">none</span><br><span class="line">如果有多个转换函数，用空格隔开</span><br><span class="line">转换原点</span><br><span class="line">transform-origin:</span><br><span class="line">取值：px为单位的数字/%/关键字</span><br><span class="line"><span class="number">2</span>个值，表示原点在x轴和y轴的位置</span><br><span class="line"><span class="number">3</span>个值，x，y，z轴</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>2D转换函数</strong></p><ol><li>位移：改变元素在页面中的位置</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>:<span class="built_in">translate</span>(x)</span><br><span class="line">指定元素在x轴上的位移距离</span><br><span class="line">+元素往右</span><br><span class="line">-元素往左</span><br><span class="line">transform:<span class="built_in">translate</span>(x,y)指定元素在x和y轴上的位移距离</span><br><span class="line">x取值同上</span><br><span class="line">y取值 +元素往下-元素往上</span><br><span class="line">transform:<span class="built_in">translateX</span>(x)指定元素在x轴上的位移距离</span><br><span class="line">transform:<span class="built_in">translateY</span>(y)指定元素在y轴上的位移距离</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>缩放：改变元素在页面中的尺寸</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>:<span class="built_in">scale</span>(n)</span><br><span class="line">取值，无单位的数字</span><br><span class="line">&gt;<span class="number">1</span>  根据转换原点放大</span><br><span class="line"><span class="number">0</span>&lt;  n &lt;<span class="number">1</span>根据转换原点缩小</span><br><span class="line">-<span class="number">1</span>&lt; n &lt; <span class="number">0</span> 翻转缩小（水平和垂直方向都翻转了<span class="number">180</span>度）</span><br><span class="line">n &lt;-<span class="number">1</span> 翻转放大</span><br><span class="line">transform:scale（x，y） x 和 y轴缩放尺寸</span><br><span class="line">transform:<span class="built_in">scaleX</span>(x)单独设置x的缩放</span><br><span class="line">transform:<span class="built_in">scaleY</span>(y)单独设置y的缩放</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>旋转：改变元素在页面中的角度</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>:<span class="built_in">rotate</span>(ndeg);</span><br><span class="line">n为正顺时针旋转</span><br><span class="line">n为负逆时针旋转</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>​    <code>注意：</code></p><ul><li><p>转换原点会影响最后的旋转效果</p></li><li><p>旋转是连同坐标轴一起旋转的，会影响旋转后的位移效果</p><ol start="4"><li>倾斜：改变元素在页面中的形状</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>:<span class="built_in">skew</span>(x)等同于skewX（x）</span><br><span class="line">让元素向着x轴发生倾斜，实际上改变的是y轴的角度</span><br><span class="line">+取正值是逆时针</span><br><span class="line">-取负值是顺时针</span><br><span class="line">transform:<span class="built_in">skew</span>(y)等同于skewX（y）</span><br><span class="line">让元素向着y轴发生倾斜，实际上改变的是x轴的角度</span><br><span class="line">+取正值是顺时针</span><br><span class="line">-取负值是逆时针</span><br><span class="line">transform:<span class="built_in">skew</span>(x,y)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3D转换"><a href="#3D转换" class="headerlink" title="3D转换"></a>3D转换</h2></li><li><p>浏览器不支持3D的位移，Z轴看不到，只能模拟</p><ul><li><p>透视距离</p><ul><li>模拟人的眼睛到3D转换元素之间的距离<pre><code>            `perspective`</code></pre></li><li>该属性要加载转换元素的父元素上</li></ul></li><li><p>3D旋转</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>:<span class="built_in">rotate3D</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">20deg</span>);</span><br><span class="line">取值</span><br><span class="line"><span class="number">1</span><span class="selector-class">.rotateX</span>(xdeg);</span><br><span class="line">以x轴为中心轴，旋转元素的角度（烤羊腿，老式爆米花机）</span><br><span class="line"><span class="number">2</span><span class="selector-class">.rotateY</span>(ydeg)</span><br><span class="line">以y轴为中心轴，旋转元素的角度（旋转门）</span><br><span class="line"><span class="number">3</span><span class="selector-class">.rotateZ</span>（zdeg）</span><br><span class="line">以z轴为中心轴，旋转元素的角度（风车，摩天轮）</span><br><span class="line"><span class="number">4</span><span class="selector-class">.rotate3D</span>（x，y，z，deg）；</span><br><span class="line">x y z取值大于<span class="number">0</span>的数字，表示该轴参与旋转</span><br><span class="line">取值为<span class="number">0</span>，表示不参与旋转</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="过渡"><a href="#过渡" class="headerlink" title="过渡"></a>过渡</h2><ul><li><p>CSS属性值，在一段时间内平缓的变化</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transition-property</span>:background;</span><br><span class="line"><span class="attribute">border-radius</span>;</span><br><span class="line"><span class="attribute">all</span>;</span><br><span class="line">能够使用过渡效果的属性</span><br><span class="line"><span class="number">1</span>.颜色可以</span><br><span class="line"><span class="number">2</span>.取值为数字的属性</span><br><span class="line"><span class="number">3</span>.转换</span><br><span class="line"><span class="number">4</span>.阴影</span><br><span class="line"><span class="number">5</span>.渐变</span><br><span class="line"><span class="number">6</span><span class="selector-class">.visibility</span></span><br><span class="line">指定过渡持续时间</span><br><span class="line"><span class="attribute">transition-duration</span>:<span class="number">1s</span>/<span class="number">1000ms</span></span><br><span class="line">简写方式</span><br><span class="line">transition:all <span class="number">1s</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>​        <code>    transition:1s;----不要写在hover里，写在元素本身的样式里</code></p></li><li><p>某元素的css属性值在一段时间内，平滑改变到另外一个值</p></li><li><p>过渡主要观察的是过程和结果</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transition-property</span>：上面的css属性指定/<span class="attribute">all</span></span><br><span class="line">指定过渡的时长</span><br><span class="line"><span class="attribute">transition-duration</span>：过渡的时长/s（秒）/ms（毫秒）</span><br><span class="line">指定过渡时间曲线函数</span><br><span class="line"><span class="attribute">transition-timing-function</span>：</span><br><span class="line"><span class="number">1</span><span class="selector-class">.ease</span> 默认值，   慢--&gt;快--&gt;慢慢速开始，快速变快，慢速结束</span><br><span class="line"><span class="number">2</span><span class="selector-class">.linear</span>匀速</span><br><span class="line"><span class="number">3</span><span class="selector-class">.ease-in</span>慢-&gt;快慢速开始，快速结束</span><br><span class="line"><span class="number">4</span><span class="selector-class">.ease-out</span>快--&gt;慢快速结束，慢速结束</span><br><span class="line"><span class="number">5</span><span class="selector-class">.ease-in-out</span>慢速开始，先加速再减速，慢速结束</span><br><span class="line">指定延迟执行过渡的时间</span><br><span class="line"><span class="attribute">transition-delay</span>：s/ms</span><br><span class="line">过渡属性的编写位置</span><br><span class="line"><span class="number">1</span>.将过渡放在元素声明的样式中（元素自己的样式里），过渡效果有去有回</span><br><span class="line"><span class="number">2</span>.将过渡放在元素的触发操作中（hover），过渡效果有去无回</span><br><span class="line">过渡的简写</span><br><span class="line"><span class="attribute">transition</span>：property duration timing-function delay;</span><br><span class="line">最少的方式 <span class="attribute">transition</span>:duration;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><ul><li><p>使元素从一种样式，该表到另外一种，再改变到其他样式….</p></li><li><p>相当于将很多个过渡效果放到一起使用</p></li><li><p>关键帧</p><ul><li>1.动画的执行时间点</li><li>2.该时间点上的样式</li></ul></li><li><p>动画的实现步骤</p><ul><li>声明动画及动画关键帧<br>@keyframes 动画名称{<br>//定义关键帧<br>0%{动画开始时的样式}<br>……<br>​    100%{动画结束时的样式}<br>}</li><li>调用动画<br>animation-name：动画名称<br>animation-duration：动画播放一个周期的时间</li><li>动画的其它属性<br>animation-delay:</li><li>动画的速度时间曲线函数<br>​animation-timing-function:<br>ease/linear/ease in/ease out/ease-in-out;</li><li>animation-iteration-count:<br>指定动画的播放次数<br>取值，具体的数字/infinite 无限次</li><li>animation-direction<br>动画的播放方向<br>取值    normal 正常播放 0%–100%<br>​reverse 逆向播放 100%–0%<br>alternate 轮流播放 奇数次正向播放 偶数次逆向播放</li><li>简写方式<br>animation:name duration timing-function delay iteration-count direction;</li><li>animation-fill-mode<br>指定动画播放前后的显示状态<br>1.none        默认值<br>2.forward    动画播放完成后，保持在最后一个关键帧上<br>3.backwards    （需要有delay）动画开始之前，保持在第一个关键帧上<br>4.both        同时设置forwards和backwards</li></ul></li><li><p>动画的兼容性<br>如果要兼容低版本浏览器，需要在声明动画时加前缀<br>​        @keyframes 动画名称{}<br>​        @-webkit-keyframes<br>​        @-ms-keyframes<br>​        @-moz-keyframes<br>​        @-o-keyframes </p><h2 id="CSS优化问题"><a href="#CSS优化问题" class="headerlink" title="CSS优化问题"></a>CSS优化问题</h2><p>​    目的：减少服务器压力，提升用户体验<br>​        1.优化原则<br>​            尽量减少HTTP请求的个数<br>​            页面顶部引入css文件<br>​            将css和js放到外部独立的文件夹中<br>​        2.css代码优化<br>​            缩小样式文件<br>​            减少样式重写<br>​            避免出现空的src和href<br>​            选择更优的样式属性值（能使用复合，简写的写法，就不要单独定义）<br>​            代码压缩    </p></li></ul><h2 id="CSS-Hack"><a href="#CSS-Hack" class="headerlink" title="CSS Hack"></a>CSS Hack</h2><p>由于不同的浏览器，比如IE6 IE7 firefox<br>对css的解析认识不同，会导致生成的页面效果不同，无法得到我们预期的效果<br>这个时候我们需要针对不同浏览器去写不同的css<br>让代码同时兼容不同的浏览器。</p><p><a href="https://blog.csdn.net/freshlover/article/details/12132801">史上最全的CSS Hack方式</a></p><h2 id="推荐文章地址"><a href="#推荐文章地址" class="headerlink" title="推荐文章地址"></a>推荐文章地址</h2><p><a href="https://www.cnblogs.com/qmdx00/p/7441317.html">CSS实现聊天气泡效果</a></p><p><a href="https://www.cnblogs.com/jying/p/6289981.html">表格不被撑开，td某些列宽度固定某些列自适应</a></p><p><a href="https://blog.csdn.net/freshlover/article/details/12132801">史上最全的CSS Hack方式</a></p><p><a href="https://segmentfault.com/q/1010000004080910/a-1020000004121373">flex设置成1和auto有什么区别</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript（上）</title>
      <link href="/2019/06/23/javascript%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
      <url>/2019/06/23/javascript%EF%BC%88%E4%B8%8A%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><a href="https://wangdoc.com/">参考文献</a></p><h2 id="学习一门编程语言的基本步骤"><a href="#学习一门编程语言的基本步骤" class="headerlink" title="学习一门编程语言的基本步骤"></a>学习一门编程语言的基本步骤</h2><ol><li>了解背景知识：历史、现状、特点、应用场景</li><li>搭建开发环境，编写hello World</li><li>变量和常量</li><li>数据类型</li><li>运算符</li><li>逻辑结构</li><li>通用小程序</li><li>函数和对象</li><li>第三方库、框架</li><li>实用的项目<span id="more"></span></li></ol><h2 id="JavaScript历史概述"><a href="#JavaScript历史概述" class="headerlink" title="JavaScript历史概述"></a>JavaScript历史概述</h2><ol><li>历史<br>​                1995年，JS最早出现在Netscape的浏览器中<br>​                2009年，JS遵循CommonJS规范，开始向服务器端发展。</li><li>现状<br>​                既可以运行在客户端浏览器，也可以运行在服务器端。</li><li>特点<br>​                <strong>解释型语言，编译一行执行一行</strong><br>​                <strong>弱类型语言</strong><br>​                基于对象<br>​                跨平台</li></ol><h2 id="JavaScript执行环境"><a href="#JavaScript执行环境" class="headerlink" title="JavaScript执行环境"></a>JavaScript执行环境</h2><ol><li>浏览器自带的JS解释器</li><li>NODEJS下的JS解释器<br>​            在命令行下   node -v 查看系统中nodejs版本号</li><li>执行JS代码<br>​            浏览器：<br>​            创建01.js和01.html<br>​            在01.html中引入01.js</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script scr=<span class="string">&quot;&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><ol start="4"><li>NODEJS下：<br>​            node C:/xampp/…../01.js</li></ol><h2 id="JavaScript代码规范"><a href="#JavaScript代码规范" class="headerlink" title="JavaScript代码规范"></a>JavaScript代码规范</h2><ol><li>区分大小写</li><li>每行代码结束的分号可加可不加，提唱都加。</li><li>分为单行注释(//…)和多行注释(/<em>….</em>/)</li></ol><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p><strong>变量就是用于存放数据的容器。</strong></p><p><strong>声明变量</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">1</span>;</span><br></pre></td></tr></table></figure><p><strong>变量的命名规则</strong></p><ol><li>变量名称是以字母、数字、美元符号($)、下划线组成的：不能以数字开头。</li><li>多个连词之间的命名方法：<br>​   user_name（下划线命名法）    userName（驼峰命名法）<br>​  不能使用<strong>关键字</strong>和<strong>保留字</strong>（class，int，float）作为变量名！</li></ol><p><img src="https://s2.ax1x.com/2019/04/26/EmNMwQ.png" alt="EmNMwQ.png"></p><p><strong>变量的注意</strong></p><p>​            变量声明后未赋值，此时的值是undifined<br>​            使用未声明的变量会报错</p><p><strong>一次性声明多个变量</strong></p><p>​            var a=1,b=2,c;<br>​            多个变量之间用逗号隔开。</p><h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p>​        一旦声明<strong>不能重新赋值</strong>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">例如：春节的日期、中秋节的日期、圆周率...</span><br><span class="line">关键字： <span class="keyword">const</span> <span class="variable constant_">PI</span>=<span class="number">3.14</span>;</span><br></pre></td></tr></table></figure><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>​    <strong>分为<font color="#f05">原始类型</font>和<font color="#f05">引用类型</font></strong><br>​    <strong>原始类型分为<font color="#FFB6C1">数值型</font>、<font color="#00FA9A">字符串型</font>、<font color="#AFEEEE">布尔型</font>、<font color="#B0C4DE">未定义型（undefined）</font>、<font color="#A9A9A9">NULL（空）</font></strong></p><h4 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h4><ol><li>分为<strong>整型</strong>和<strong>浮点型</strong></li><li>整型在内存中占4个字节，浮点型占8个字节</li><li>8进制，以0开头，例如012-&gt;10</li><li>16进制，以0x开头，例如0xf-&gt;15 </li><li>a<del>f代表 10</del>15 不区分大小写</li></ol><h4 id="字符串型"><a href="#字符串型" class="headerlink" title="字符串型"></a>字符串型</h4><p>​            <strong>数据被引号包含就是字符串类型;不区分单双引号。</strong><br>​            查看一个字符的Unicode编码<br>​            console.log( ‘a’.charCodeAt )  //97</p><h4 id="布尔型"><a href="#布尔型" class="headerlink" title="布尔型"></a>布尔型</h4><p>​            <strong>在程序中表示真或者假的结果</strong><br>​            true/false<br>​            常用于一些是否的结果，是否登录，是否注册，是否是会员，是否在售</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isLogin=<span class="literal">true</span>; isOnsale=<span class="literal">false</span>;</span><br></pre></td></tr></table></figure><h4 id="未定义型"><a href="#未定义型" class="headerlink" title="未定义型"></a>未定义型</h4><p>​            <strong>声明了变量未赋值，结果就是undefined</strong></p><h4 id="空"><a href="#空" class="headerlink" title="空"></a>空</h4><p>​            <strong>用于释放（销毁）一个引用类型的地址，只有一个值null</strong></p><h2 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h2><h4 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">①数字+字符串：数字被转成字符串</span><br><span class="line"><span class="number">1</span>+<span class="string">&#x27;a&#x27;</span>   <span class="comment">//&#x27;1a&#x27;</span></span><br><span class="line">②数字+布尔型：布尔型被转成了数字 <span class="literal">true</span>-&gt;<span class="number">1</span> <span class="literal">false</span>-&gt;<span class="number">0</span></span><br><span class="line"><span class="number">1</span>+<span class="literal">true</span> <span class="comment">//2</span></span><br><span class="line"><span class="number">1</span>+<span class="literal">false</span> <span class="comment">//1</span></span><br><span class="line">③布尔型+字符串：布尔型转换成字符串</span><br><span class="line"><span class="literal">true</span>+<span class="string">&#x27;hello&#x27;</span> <span class="comment">//&#x27;truehello&#x27;</span></span><br><span class="line"><span class="variable constant_">JS</span>中加号（+）的作用</span><br><span class="line">执行加法运算</span><br><span class="line">执行字符串的拼接</span><br><span class="line">使用- * / 执行运算</span><br><span class="line">尝试将运算符两端转成数值型，如果含有非数字则返回一个<span class="title class_">NaN</span>（<span class="title class_">Not</span> a <span class="title class_">Number</span>）,不是一个数字。</span><br><span class="line"><span class="title class_">NaN</span>类型<span class="title class_">Number</span></span><br></pre></td></tr></table></figure><h4 id="强制转换"><a href="#强制转换" class="headerlink" title="强制转换"></a>强制转换</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">①将任意类型转为整型</span><br><span class="line"><span class="built_in">parseInt</span>()</span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;1.5a&#x27;</span>)<span class="comment">//1</span></span><br><span class="line">从开头查找数字，遇到非数字或者小数点；返回前面的数字；如果开头非数字，返回<span class="title class_">NaN</span>。</span><br><span class="line">②将任意类型转为浮点型</span><br><span class="line"><span class="built_in">parseFloat</span>()</span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">&#x27;1.5a&#x27;</span>)<span class="comment">//1.5</span></span><br><span class="line">转换规则和<span class="built_in">parseInt</span>类似，区别在于遇到小数点继续往后查找数字。</span><br><span class="line">③将任意类型转为数值型</span><br><span class="line"><span class="title class_">Number</span>()</span><br><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;1.5a&#x27;</span>) <span class="comment">//NaN</span></span><br><span class="line">如果要转换的数据中含有非数字，则返回<span class="title class_">NaN</span></span><br><span class="line"><span class="literal">true</span>-&gt;<span class="number">1</span>   <span class="literal">false</span>-&gt;<span class="number">0</span></span><br><span class="line">④将数值型和布尔型转为字符串类型</span><br><span class="line"><span class="title function_">toString</span>()</span><br><span class="line"><span class="keyword">var</span> num=<span class="number">10</span>;</span><br><span class="line">num.<span class="title function_">toString</span>(); <span class="comment">//&#x27;10&#x27;</span></span><br><span class="line">num.<span class="title function_">toString</span>(<span class="number">16</span>); <span class="comment">//a</span></span><br><span class="line">如果要转换的数据是数值，可以设置进制(<span class="number">8</span>,<span class="number">16</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>​        由<strong>运算符连接操作</strong>的数据，所组成的形式就是<strong>表达式</strong></p><h4 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+ -  * / %(取余) ++(自增) --(自减)</span><br><span class="line">%取余</span><br><span class="line">++自增，在原来的基础之上加<span class="number">1</span></span><br><span class="line">--自减，在原来的基础之上减<span class="number">1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num++) <span class="comment">//先打印num的值，在进行自增</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(++num) <span class="comment">//先执行自增，再打印num的值</span></span><br></pre></td></tr></table></figure><h4 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;  &lt;  &gt;=  &lt;=  ==  !=   ===（全等于）  ！==（不全等于）</span><br><span class="line">返回一个布尔型的结果</span><br><span class="line">    == 只是比较两个值是否相同</span><br><span class="line">    ===不仅比较值，还会比较类型是否相等</span><br><span class="line"><span class="number">3</span>&gt;<span class="string">&#x27;10&#x27;</span> <span class="comment">//false</span></span><br><span class="line">数字和字符串比较，字符串要转成数字。</span><br><span class="line"><span class="string">&#x27;3&#x27;</span>&gt;<span class="string">&#x27;10&#x27;</span> <span class="comment">//true</span></span><br><span class="line">比较首个<span class="title class_">Unicode</span>的码，如果首个字符相同，则比较第二个字符。</span><br><span class="line"><span class="string">&#x27;3&#x27;</span>-&gt;<span class="number">51</span><span class="string">&#x27;1&#x27;</span>-&gt;<span class="number">49</span></span><br><span class="line"><span class="number">3</span>&gt;<span class="string">&#x27;10a&#x27;</span> <span class="comment">//false</span></span><br><span class="line"><span class="number">3</span>&lt;<span class="string">&#x27;10a&#x27;</span> <span class="comment">//false</span></span><br><span class="line"><span class="number">3</span>==<span class="string">&#x27;10a&#x27;</span> <span class="comment">//false</span></span><br><span class="line"><span class="string">&#x27;10a&#x27;</span>-&gt;<span class="variable constant_">NAN</span></span><br><span class="line"><span class="title class_">NaN</span>和任何数比较（&gt; &lt; = &gt;= &lt;= ==）都返回<span class="literal">false</span></span><br><span class="line"><span class="title class_">NaN</span>==<span class="title class_">NaN</span> 返回<span class="literal">false</span></span><br></pre></td></tr></table></figure><h4 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp;  关联的两个条件都满足，结果是<span class="literal">true</span>，否则<span class="literal">false</span></span><br><span class="line">||     关联的两个条件都只需满足其一，结果是<span class="literal">true</span>，否则<span class="literal">false</span></span><br><span class="line">!      取反 ！<span class="literal">false</span>取反-&gt;<span class="literal">true</span>  ！<span class="literal">true</span>-&gt;<span class="literal">false</span></span><br><span class="line">逻辑短路</span><br><span class="line">&amp;&amp; 当第一个条件为<span class="literal">false</span>的时候，就不需要再执行第二个条件</span><br><span class="line">||    当第一个条件为<span class="literal">true</span>的时候，就不需要再执行第二个条件</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="位运算符（了解）"><a href="#位运算符（了解）" class="headerlink" title="位运算符（了解）"></a>位运算符（了解）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">在执行运算时候，会把数字转成二进制进行运算</span><br><span class="line">按位与(&amp;)  <span class="number">3</span>&amp;<span class="number">5</span>   上下两位都是<span class="number">1</span>，结果是<span class="number">1</span>，否则是<span class="number">0</span></span><br><span class="line">按位或(|)      上下两位含有<span class="number">1</span>，结果就是<span class="number">1</span>，否则<span class="number">0</span></span><br><span class="line"><span class="number">3</span>|<span class="number">5</span></span><br><span class="line"><span class="number">011</span></span><br><span class="line"><span class="number">101</span></span><br><span class="line"><span class="number">111</span></span><br><span class="line">按位异或(^)上下两位不同为<span class="number">1</span>，相同为<span class="number">0</span></span><br><span class="line"><span class="number">5</span>^<span class="number">7</span></span><br><span class="line"><span class="number">101</span></span><br><span class="line"><span class="number">111</span></span><br><span class="line"><span class="number">010</span></span><br><span class="line">按位右移(&gt;&gt;)删除二进制的最后一位，大概变小到原来的一半</span><br><span class="line"><span class="number">7</span>&gt;&gt;<span class="number">1</span></span><br><span class="line">按位左移(&gt;&gt;)删除二进制的最后添加一位<span class="number">0</span>，增加一倍</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">=  += -= *= /= %= </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="三目运算符"><a href="#三目运算符" class="headerlink" title="三目运算符"></a>三目运算符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">单目运算符：只需要一个数据或者表达式</span><br><span class="line">a++a--!<span class="literal">false</span></span><br><span class="line">双目运算符：只需要两个数据或者表达式</span><br><span class="line">    + - * <span class="regexp">/ % &gt; &lt; &gt;= &lt;= == != === !== &amp;&amp; || &amp; | ^ &gt;&gt; &lt;&lt; = += -= *= /</span>= %=</span><br><span class="line">    三目运算符：需要三个数据或者表达式</span><br><span class="line">条件表达式？表达式<span class="number">1</span>：表达式<span class="number">2</span></span><br><span class="line">如果条件表达式为<span class="literal">true</span>，执行表达式<span class="number">1</span>；</span><br><span class="line">如果条件表达式为<span class="literal">false</span>，执行表达式<span class="number">2</span>；</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="浏览器端函数"><a href="#浏览器端函数" class="headerlink" title="浏览器端函数"></a>浏览器端函数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert()弹出警示框（消息框）</span><br><span class="line">prompt()弹出提示框（输入框），需要一个变量来接受输入的值；值的类型是字符串类型。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><p>​    <strong>程序 = 算法 + 数据</strong><br>​    <strong>程序分为顺序执行、选择执行、循环执行</strong>        </p><h4 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">语句<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(条件表达式)&#123;</span><br><span class="line">    语句<span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">语句<span class="number">3</span>;</span><br><span class="line">执行流程：</span><br><span class="line">    ①执行语句<span class="number">1</span></span><br><span class="line">    ②条件表达式，如果为<span class="literal">true</span>，执行语句<span class="number">2</span>；<span class="literal">false</span>直接跳过</span><br><span class="line">    ③执行语句<span class="number">3</span></span><br><span class="line">注意：如果<span class="keyword">if</span>后的大括号语句中只有一行，是可以省略大括号。</span><br><span class="line"><span class="keyword">if</span>（age&gt;=<span class="number">18</span>）</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;成年人&#x27;</span>);</span><br><span class="line">在<span class="keyword">if</span>语句的条件表达式中，有一些值默认就是<span class="literal">false</span></span><br><span class="line"><span class="number">0</span>，<span class="title class_">NaN</span>，<span class="string">&#x27;&#x27;</span>，<span class="literal">undefined</span>,<span class="literal">null</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="if-else语句"><a href="#if-else语句" class="headerlink" title="if-else语句"></a>if-else语句</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">语句<span class="number">1</span>；</span><br><span class="line"><span class="keyword">if</span>(条件表达式)&#123;</span><br><span class="line">    语句<span class="number">2</span>；</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    语句<span class="number">3</span>；</span><br><span class="line">&#125;</span><br><span class="line">执行过程：</span><br><span class="line">    ①先执行语句<span class="number">1</span></span><br><span class="line">    ②要执行条件表达式，如果是<span class="literal">true</span>，执行语句<span class="number">2</span>；如果是<span class="literal">false</span>，执行语句<span class="number">3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="if-else的嵌套"><a href="#if-else的嵌套" class="headerlink" title="if-else的嵌套"></a>if-else的嵌套</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">用于判断多种情况：</span><br><span class="line">    语句<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(条件表达式<span class="number">1</span>)&#123;</span><br><span class="line">        语句<span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(条件表达式<span class="number">2</span>)&#123;</span><br><span class="line">        语句<span class="number">2</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> ...<span class="title function_">if</span>(<span class="params">条件表达式n</span>)&#123;</span><br><span class="line">        语句n;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        语句n+<span class="number">1</span>;<span class="comment">//以上所有的条件表达式都是false</span></span><br><span class="line">    &#125;</span><br><span class="line">执行流程：</span><br><span class="line">    ①执行语句<span class="number">0</span></span><br><span class="line">    ②执行表达式<span class="number">1</span></span><br><span class="line">    如果条件表达式<span class="number">1</span>是<span class="literal">true</span>，执行<span class="number">1</span>,</span><br><span class="line">        如果条件表达式<span class="number">1</span>是<span class="literal">false</span>，执行条件表达式<span class="number">2</span></span><br><span class="line">    如果条件表达式<span class="number">2</span>是<span class="literal">true</span>，执行语句<span class="number">2</span></span><br><span class="line">    如果条件表达式<span class="number">2</span>是<span class="literal">false</span>，执行语句n</span><br><span class="line">    ③以上所有的条件表达式为<span class="literal">false</span>，执行语句n+<span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="switch-case语句"><a href="#switch-case语句" class="headerlink" title="switch-case语句"></a>switch-case语句</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">是一种特殊的分支语句，可以根据一个表达式的不同值，来选择执行不同的程序。</span><br><span class="line">语句<span class="number">0</span>;</span><br><span class="line"><span class="keyword">switch</span>(表达式)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:<span class="comment">//如果表达式的值是1</span></span><br><span class="line">        语句<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">break</span>;<span class="comment">//终止，不会再往后执行其他的语句</span></span><br><span class="line">        .......</span><br><span class="line">        <span class="keyword">case</span> <span class="attr">n</span>:</span><br><span class="line">        语句n;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        语句n+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">注意：在<span class="keyword">case</span>中的和值的比较使用的是全等于比较，值和类型都满足结果才是<span class="literal">true</span>。</span><br><span class="line">对比<span class="keyword">if</span>-<span class="keyword">else</span>嵌套和<span class="keyword">switch</span>-<span class="keyword">case</span>语句</span><br><span class="line">相同点：两者都可以用于多项分支语句。</span><br><span class="line">不同点：<span class="keyword">if</span>-<span class="keyword">else</span>可以判断相等或者不相等的情况，适用范围更广一些;<span class="keyword">switch</span>-<span class="keyword">case</span>只适用于全等（===）的情况，但是结构上更为清晰，执行效率相对高。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="break和continue关键字"><a href="#break和continue关键字" class="headerlink" title="break和continue关键字"></a>break和continue关键字</h2><p>​    break：结束循环，后续不会再执行其他的循环了<br>​    continue：跳过本次循环，继续下一次循环</p><h2 id="循环执行"><a href="#循环执行" class="headerlink" title="循环执行"></a>循环执行</h2><p>​    循环：就是<strong>一遍又一遍执行</strong>相同或者相似的<strong>代码</strong>。<br>​            循环的两个要素<br>​            循环的条件：重复的次数<br>​            循环体：重复执行的相同或者相似代码</p><h4 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(循环条件)&#123;<span class="comment">//是一个布尔型的值</span></span><br><span class="line">    循环体</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="do-while循环"><a href="#do-while循环" class="headerlink" title="do-while循环"></a>do-while循环</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    循环体</span><br><span class="line">&#125;<span class="keyword">while</span>（判断条件）;</span><br><span class="line">不管循环条件是否为<span class="literal">true</span>都会执行一次循环体。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(初始值;循环条件;i的变化)&#123;</span><br><span class="line">    <span class="number">3</span></span><br><span class="line">    循环体</span><br><span class="line">&#125;</span><br><span class="line">①执行初始值</span><br><span class="line">②判断循环条件</span><br><span class="line">③如果循环条件是<span class="literal">true</span>执行循环体，是<span class="literal">false</span>结束循环</span><br><span class="line">④如果执行了循环体，执行i的变化</span><br><span class="line">⑤重新执行第<span class="number">2</span>步</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="循环嵌套"><a href="#循环嵌套" class="headerlink" title="循环嵌套"></a>循环嵌套</h4><p>​        <font color="#f50" size="5px">while,do-while,for循环三者之间可以相互嵌套。</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">九九乘法表：</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> j=<span class="number">9</span>; j&gt;=<span class="number">1</span> ; j-- )&#123;</span><br><span class="line"><span class="comment">//产生列数</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=j,str=<span class="string">&#x27;&#x27;</span>; i&gt;=<span class="number">1</span> ; i-- )&#123;</span><br><span class="line">str+=i+<span class="string">&#x27;*&#x27;</span>+j+<span class="string">&#x27;=&#x27;</span>+(i*j)+<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印一行的拼接结果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>​            parseInt()取整<br>​            parseFloat()取小数<br>​            typeof()识别类型<br>​            分为<font color="#f00">系统函数</font>和<font color="#f00">自定义函数</font></p><h4 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h4><p>​    function：功能体，函数，可以接受若干个数据，返回处理的结果。用于封装反复执行的代码。</p><h5 id="创建普通函数"><a href="#创建普通函数" class="headerlink" title="创建普通函数"></a>创建普通函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名称()&#123;</span><br><span class="line">    函数体—要封装的反复执行的代码</span><br><span class="line">&#125;</span><br><span class="line">调用：</span><br><span class="line">函数名称();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="创建带有参数的函数"><a href="#创建带有参数的函数" class="headerlink" title="创建带有参数的函数"></a>创建带有参数的函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名称(参数列表)&#123;<span class="comment">//形参-&gt;形式上的参数</span></span><br><span class="line">    函数体</span><br><span class="line">&#125;</span><br><span class="line">调用</span><br><span class="line">函数名称(参数列表);<span class="comment">//实参-&gt;实际的参数</span></span><br><span class="line">参数列表：可以是<span class="number">0</span>个或者是多个数据，之间用逗号隔开；创建函数时的参数称为形参，调用函数时的参数称为实参，</span><br><span class="line">调用的时候，实参的值会赋给形参。</span><br><span class="line">形参本质上就是一个声明了的变量，但未赋值。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="带有返回值的函数"><a href="#带有返回值的函数" class="headerlink" title="带有返回值的函数"></a>带有返回值的函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名称(参数列表)&#123;</span><br><span class="line">函数体</span><br><span class="line"><span class="keyword">return</span> 返回值;</span><br><span class="line">&#125;</span><br><span class="line">调用：</span><br><span class="line">函数名称(参数列表)</span><br><span class="line"><span class="keyword">return</span>表示函数执行后，所返回的结果。</span><br><span class="line">注意：</span><br><span class="line">     ①如果没有<span class="keyword">return</span>或者<span class="keyword">return</span>后没有返回值，结果都是<span class="literal">undefined</span>。</span><br><span class="line">     ②<span class="keyword">return</span>后可以返回任意类型的数据</span><br><span class="line">     ③<span class="keyword">return</span>后的所有代码都不会被执行</span><br><span class="line">对比<span class="keyword">return</span>、<span class="keyword">break</span>和<span class="keyword">continue</span></span><br><span class="line"><span class="keyword">return</span> 返回结果，用于终止函数的执行，常用于函数中。</span><br><span class="line"><span class="keyword">break</span>用于结束循环，结束<span class="keyword">switch</span>语句；</span><br><span class="line"><span class="keyword">continue</span> 跳过当前循环，继续下一次循环。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="变量的作用域"><a href="#变量的作用域" class="headerlink" title="变量的作用域"></a>变量的作用域</h4><h5 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">变量或者函数的可访问范围</span><br><span class="line">分为两种：</span><br><span class="line">    全局作用域：在全局作用域下声明的变量可以在任意位置访问到。</span><br><span class="line">    函数（局部）作用域：函数作用域下声明的变量只能在函数内部访问。</span><br><span class="line">    块级作用域：<span class="title class_">ES6</span>新增了<span class="keyword">let</span>命令，用于声明变量。其用法类似于<span class="keyword">var</span>，但所声明的变量只在<span class="keyword">let</span>命令所在的代码块有效。</span><br><span class="line">注意：在函数内部使用<span class="keyword">var</span>关键字声明的变量是局部变量，而不使用<span class="keyword">var</span>关键字声明的变量是全局变量。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="量声明提升"><a href="#量声明提升" class="headerlink" title="量声明提升"></a>量声明提升</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JS程序在执行前，使用var关键字声明的变量会提升到所在作用域的最前边；但赋值还是在原来的位置。</span><br><span class="line">console.log(a);</span><br><span class="line">var a=1; //var a;这句话会提升到最前面；而a=1还是在当前位置。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="函数的作用域"><a href="#函数的作用域" class="headerlink" title="函数的作用域"></a>函数的作用域</h4><p>​    <strong>函数会提前声明！</strong><br>​            <strong>函数表达式不会提前声明！</strong><br>​            函数和变量类似，也分为全局作用域和函数作用域<br>​            全局作用域：在全局作用域下创建的函数可以在任意位置调用<br>​            函数（局部）作用域：在函数（局部）作用域下创建的函数只能在函数内部调用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">函数声明提升：</span><br><span class="line">和变量一样，<span class="variable constant_">JS</span>在程序执行前，把使用<span class="keyword">function</span>声明的函数提升到最前边。</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">函数调用 <span class="title function_">fun</span>() 获取函数的返回值（<span class="keyword">return</span>后的值）</span><br><span class="line">函数名称 fun保存的是函数在堆内存中的地址</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="递归调用"><a href="#递归调用" class="headerlink" title="递归调用"></a>递归调用</h4><p>​    递归就是函数自己调用自己本身，依靠条件判断return结束。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">例题：求n个数的累加：</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">n</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n+<span class="title function_">sum</span>(n-<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sum</span>(<span class="number">100</span>)</span><br><span class="line">例题：斐波那契数列：</span><br><span class="line"><span class="comment">//创建函数， 传递1个参数，使用递归计算斐波那契数列的第n项是多少。</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">num</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(num==<span class="number">2</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> num+num+<span class="title function_">add</span>(num-<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> res=<span class="title function_">add</span>(<span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>变量名称和函数名称重复后 如果变量赋值 函数报错，如果变量未赋值函数不会报错</p><h4 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h4><p>​    没有名字的函数 function(){<br>​                }<br>​    创建函数—函数声明</p><p>​    function 函数名称(){<br>​        }</p><h5 id="创建函数—函数表达式"><a href="#创建函数—函数表达式" class="headerlink" title="创建函数—函数表达式"></a>创建函数—函数表达式</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 函数名称=<span class="keyword">function</span>(<span class="params">形参列表</span>)&#123;</span><br><span class="line">    函数体</span><br><span class="line">    <span class="keyword">return</span> 返回值;</span><br><span class="line">&#125;</span><br><span class="line">调用：函数名称(实参列表)</span><br><span class="line">对比函数声明和函数表达式的区别</span><br><span class="line">函数声明存在函数提升，在任何的位置都可以调用</span><br><span class="line">函数表达式不存在函数的提升，必须先创建再调用</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="匿名函数自调用"><a href="#匿名函数自调用" class="headerlink" title="匿名函数自调用"></a>匿名函数自调用</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">创建函数（局部）作用域，防止造成全局污染。</span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    函数体<span class="comment">//就是局部作用域，创建的变量和函数都是不能被外部访问</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="作为回调函数"><a href="#作为回调函数" class="headerlink" title="作为回调函数"></a>作为回调函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">把匿名函数作为实参传递给形参，此时的形参就是函数名称</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    <span class="comment">//num就是函数的名称</span></span><br><span class="line">    <span class="title function_">num</span>();<span class="comment">//调用传递的匿名函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    .....</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="系统函数（全局函数）"><a href="#系统函数（全局函数）" class="headerlink" title="系统函数（全局函数）"></a>系统函数（全局函数）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">encodeURI 对一个URL进行编码—主要对中文进行编码</span><br><span class="line">decodeURI 对一个已经编码URL进行解码</span><br><span class="line">parseInt将数据转为整型</span><br><span class="line">parseFloat将数据转为浮点型</span><br><span class="line">isNaN检测一个数据是否为NaN是-&gt;true,否-&gt;false</span><br><span class="line">isFinite检测一个数据是否为有限值，是-&gt;true 否-&gt;false  1/0-&gt;Infinity 无限值</span><br><span class="line">eval执行字符串中的表达式eval(&#x27;1+2&#x27;)  -&gt;3</span><br><span class="line">练习：使用提示框弹出输入一组运算，使用eval来执行这组运算。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><p>​    <strong>是一种引用类型的数据，存储在堆内存中。</strong><br>​    对象：是一组属性（property）和方法/功能（method）的集合<br>​    哪些是对象？<br>​        一个手机：属性有颜色，品牌，尺寸，厚度…….功能有打电话、发短信、照相、聊天、游戏……<br>​        一辆汽车：属性有品牌、外观、车型…….功能有代步、撞人、拉货、取暖、乘凉…..</p><p>JS中的对象：</p><p>​        <strong>内置对象</strong>：JS提供的<br>​        <strong>宿主对象</strong>：根据不同的执行环境来划分<br>​        <strong>自定义对象</strong>：自己创建的对象</p><p>创建自定义对象：</p><p>​        ①对象字面量（直接量）<br>​        ②内置构造函数<br>​        ③自定义构造函数</p><h4 id="使用对象字面量创建对象"><a href="#使用对象字面量创建对象" class="headerlink" title="使用对象字面量创建对象"></a>使用对象字面量创建对象</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">使用大括号&#123;&#125;创建空对象</span><br><span class="line">属性名和属性值之间用冒号隔开:</span><br><span class="line">多组属性之间用，号隔开</span><br><span class="line">属性名中引号可加可不加，如果出现特殊字符，必须添加引号</span><br><span class="line"><span class="keyword">var</span> phone=&#123;</span><br><span class="line">    <span class="attr">color</span>:<span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;made-in&#x27;</span>:<span class="string">&#x27;china&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="使用内置构造函数来创造对象"><a href="#使用内置构造函数来创造对象" class="headerlink" title="使用内置构造函数来创造对象"></a>使用内置构造函数来创造对象</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book=<span class="keyword">new</span> <span class="title class_">Object</span>();创建一个空对象</span><br><span class="line">book.<span class="property">id</span>=<span class="number">103</span>;<span class="comment">//给book添加属性，属性名不能添加引号</span></span><br><span class="line">book[<span class="string">&#x27;title&#x27;</span>]=<span class="string">&#x27;三国演义&#x27;</span>;<span class="comment">//添加属性，属性名必须加引号；如果不加引号会被认为是变量</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="访问对象中的属性"><a href="#访问对象中的属性" class="headerlink" title="访问对象中的属性"></a>访问对象中的属性</h4><h5 id="获取属性值"><a href="#获取属性值" class="headerlink" title="获取属性值"></a>获取属性值</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">emp.<span class="property">eid</span></span><br><span class="line">emp[<span class="string">&#x27;ename&#x27;</span>]</span><br><span class="line">如果要获取的属性名不存在，返回的是<span class="literal">undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="遍历对象中的属性-for-in"><a href="#遍历对象中的属性-for-in" class="headerlink" title="遍历对象中的属性(for-in)"></a>遍历对象中的属性(for-in)</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">获取到对象中每一个属性名，进而获取属性值</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span>)&#123;</span><br><span class="line">    <span class="comment">//emp要遍历的对象</span></span><br><span class="line">    <span class="comment">//key 要遍历的每一个属性名</span></span><br><span class="line">    <span class="comment">//emp[key]通过属性名获取对应的属性值</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(emp[key]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="检测对象中是否含有某个属性"><a href="#检测对象中是否含有某个属性" class="headerlink" title="检测对象中是否含有某个属性"></a>检测对象中是否含有某个属性</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;属性名&#x27;</span> <span class="keyword">in</span> 对象<span class="comment">//true-&gt;存在 false-&gt;不存在</span></span><br><span class="line">对象.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;属性名&#x27;</span>)   <span class="comment">//true-&gt;存在 false-&gt;不存在</span></span><br><span class="line">对象.属性名===<span class="literal">undefined</span><span class="comment">//true-&gt;不存在  false-&gt;存在</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="对象中的方法"><a href="#对象中的方法" class="headerlink" title="对象中的方法"></a>对象中的方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person=&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;tom&#x27;</span>,</span><br><span class="line">    <span class="attr">say</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> <span class="comment">//指代当前的对象</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">person.<span class="title function_">say</span>();<span class="comment">//调用对象中的方法</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h4 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h4><h5 id="数组字面量"><a href="#数组字面量" class="headerlink" title="数组字面量"></a>数组字面量</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=[元素<span class="number">1</span>，元素<span class="number">2.</span>....]</span><br><span class="line">数组中可以存放任意类型的数据</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="内置构造函数"><a href="#内置构造函数" class="headerlink" title="内置构造函数"></a>内置构造函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> car=<span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">5</span>)   <span class="comment">//初始化一个数组长度为5，可以继续添加第6个元素</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Array</span>(元素<span class="number">1</span>，元素<span class="number">2.</span>.............)</span><br><span class="line">访问数组中的元素 </span><br><span class="line">数组名称[下标]，下标是从<span class="number">0</span>开始</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="获取数组元素的个数"><a href="#获取数组元素的个数" class="headerlink" title="获取数组元素的个数"></a>获取数组元素的个数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">数组名称.<span class="property">length</span>  <span class="comment">//获取个数</span></span><br><span class="line">使用数组长度添加一个新的元素</span><br><span class="line">数组[数组.<span class="property">length</span>]=值</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="数组的分类"><a href="#数组的分类" class="headerlink" title="数组的分类"></a>数组的分类</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">数组分为索引数组和关联数组</span><br><span class="line">索引数组：以整数作为下标</span><br><span class="line">关联数组：以字符串作为下标              </span><br><span class="line"><span class="keyword">var</span> arr=[]</span><br><span class="line">arr[<span class="string">&#x27;eid&#x27;</span>]=<span class="number">1</span>;</span><br><span class="line">arr[<span class="string">&#x27;ename&#x27;</span>]=<span class="string">&#x27;Tom&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="遍历数组中的元素"><a href="#遍历数组中的元素" class="headerlink" title="遍历数组中的元素"></a>遍历数组中的元素</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>循环，循环遍历数组元素的下标</span><br><span class="line"><span class="keyword">var</span> score=[<span class="number">85</span>,<span class="number">79</span>,<span class="number">93</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;score.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    i代表数组元素的下标</span><br><span class="line">    scorep[i]下标对应的元素</span><br><span class="line">&#125;</span><br><span class="line">注意：只能遍历索引数组</span><br><span class="line"><span class="keyword">for</span>-<span class="keyword">in</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> arr)&#123;</span><br><span class="line">        key 数组的下标</span><br><span class="line">        arr[key] 下标对应的元素</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(key+<span class="string">&#x27;---&#x27;</span>arr[key]);</span><br><span class="line">    &#125;</span><br><span class="line">注意：既可以遍历索引数组，也可以遍历关联数组。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="数组中的方法"><a href="#数组中的方法" class="headerlink" title="数组中的方法"></a>数组中的方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">API</span>-应用程序编程接口，预先定义好的函数/方法</span><br><span class="line"><span class="attr">say</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;  &#125;</span><br><span class="line"><span class="title function_">toString</span>() 将数组中的元素按逗号分隔成字符串</span><br><span class="line"><span class="title function_">join</span>(<span class="string">&#x27;|&#x27;</span>) 将数组中的元素按照指定的字符分割成字符串</span><br><span class="line"><span class="title function_">concat</span>(arr1,arr2,arr3....)  要拼接两个或者更多的数组</span><br><span class="line"><span class="title function_">slice</span>(start,end) 截取数组中的元素，start开始的下标，end结尾的下标，不包含end本身;负数表示倒数第几个。</span><br><span class="line"><span class="title function_">splice</span>(start，count，value1，value2.....) 删除数组中的元素;</span><br><span class="line">start开始的下标，count删除的个数，value1，value2....删除后补充的元素。</span><br><span class="line"><span class="title function_">reverse</span>() 翻转数组中的元素</span><br><span class="line"><span class="title function_">sort</span>() 对数组中的元素进行排序，默认是按照<span class="title class_">Unicode</span>码有效达到</span><br><span class="line">对数字排序：</span><br><span class="line"><span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> a-b;  <span class="comment">//由小到大</span></span><br><span class="line"><span class="keyword">return</span> b-a;  <span class="comment">//由大到小</span></span><br><span class="line">&#125;);</span><br><span class="line">常用的数组操作：</span><br><span class="line"><span class="title function_">push</span>() 往数组的末尾添加元素。返回数组的长度</span><br><span class="line"><span class="title function_">pop</span>()  删除数组末尾的元素 返回删除的元素</span><br><span class="line"><span class="title function_">unshift</span>() 往数组的开头添加元素，返回数组的长度</span><br><span class="line"><span class="title function_">shift</span>()    删除数字开头的元素，返回删除的元素</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">数组中的每一个元素也是数组</span><br><span class="line"><span class="keyword">var</span> arr=[ [ ],[ ],[ ]..... ]</span><br><span class="line">访问二维数组中的元素 arr[下标][下标]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>包装对象：目的是让原始类型的数据也可以像引用类型一样，具有属性和方法</p><ol><li>JS提供了3种包装类型：String、Number、Boolean</li><li>将任意的数据包装成字符串对象<br>new String(true)  返回object类型<pre><code>        String(true) 返回字符串  &#39;true&#39;</code></pre></li></ol><h4 id="转义字符—-反斜杠"><a href="#转义字符—-反斜杠" class="headerlink" title="转义字符— \ 反斜杠"></a>转义字符— \ 反斜杠</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">转换字符的意义：</span><br><span class="line">    \n将字符n转义成换行</span><br><span class="line">    \t将字符t转义成制表符（table键）</span><br><span class="line">    \<span class="string">&#x27;将引号转成普通的字符</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><h4 id="字符串中常用方法"><a href="#字符串中常用方法" class="headerlink" title="字符串中常用方法"></a>字符串中常用方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">toUpperCase</span>() 将英文字母转为大写</span><br><span class="line"><span class="title function_">toLowerCase</span>() 将英文字母转为小写</span><br><span class="line">length获取字符串的长度</span><br><span class="line"><span class="title function_">charAt</span>()获取下标对应的字符</span><br><span class="line">charCodeAt获取某个字符对应的<span class="title class_">Unicode</span>码</span><br><span class="line"><span class="title function_">indexOf</span>(value,start) 查找某个字符串的下标,value是要查找的字符串，start开始查找的下标，默认是<span class="number">0</span>，如果找不到返回-<span class="number">1</span></span><br><span class="line">lastIndexOf（value）查找某个字符串，最后一次出现的下标，找不到返回-<span class="number">1</span></span><br><span class="line"><span class="title function_">slice</span>(start,end) 截取字符串，start开始的下标，end结束的下标，不包含end本身；如果end为空，截取到最后</span><br><span class="line"><span class="title function_">substring</span>(start,end)  截取字符串，start开始的下标，end结尾的下标不包含end本身；如果两个参数是负数，自动转成了<span class="number">0</span></span><br><span class="line"><span class="title function_">substr</span>(start,count)截取字符串，start开始的下标，count截取的长度；如果count为空截取到最后。</span><br><span class="line"><span class="title function_">split</span>(sep分隔符)按照指定的字符分隔为数组。sep—是分隔符</span><br><span class="line"><span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(index)  获取任意<span class="title class_">Unicode</span>码对应的字符</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="匹配模式"><a href="#匹配模式" class="headerlink" title="匹配模式"></a>匹配模式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">作用：用于查找、替换字符串。</span><br><span class="line"><span class="title function_">replace</span>(value1,value2) 查找并替换。value1要查找的字符串，value2要替换的字符串，value可以使用字符串形式，也可以使用正则表达式形式/china/ig</span><br><span class="line">i -&gt; ignore 忽略大小写</span><br><span class="line">g-&gt; <span class="variable language_">global</span>  全局查找</span><br><span class="line">match（value）用于查找匹配的字符串，返回一个数组   可以使用ig</span><br><span class="line">search （value）用于查找满足条件的第一个字符的下标，如果找不到返回-<span class="number">1</span>  只能使用i</span><br><span class="line">内置对象，宿主对象，自定义对象</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Math对象"><a href="#Math对象" class="headerlink" title="Math对象"></a>Math对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Math</span>对象不需要使用<span class="keyword">new</span>创建，可以直接使用。</span><br><span class="line"><span class="variable constant_">PI</span> 获取圆周率</span><br><span class="line"><span class="title function_">abs</span>() 取绝对值</span><br><span class="line"><span class="title function_">floor</span>()向下取整</span><br><span class="line"><span class="title function_">ceil</span>() 向上取整</span><br><span class="line"><span class="title function_">round</span>()四舍五入取整</span><br><span class="line"><span class="title function_">max</span>() 取一组数字最大值</span><br><span class="line"><span class="title function_">min</span>() 取一组数字的最小值</span><br><span class="line"><span class="title function_">pow</span>(x,y) 取x的y次幂</span><br><span class="line"><span class="title function_">random</span>() 取随机  范围&gt;=<span class="number">0</span>  &lt;<span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Date对象"><a href="#Date对象" class="headerlink" title="Date对象"></a>Date对象</h2><p>​    用于对日期和时间进行存储和计算</p><h4 id="创建Date对象"><a href="#创建Date对象" class="headerlink" title="创建Date对象"></a>创建Date对象</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Date</span>（<span class="string">&#x27;2018/11/11 10:20:30&#x27;</span>）</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Date</span>（<span class="number">2018</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>） <span class="comment">//第二个参数月份的范围是0~11</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Date</span>（）存储当前的系统时间</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Date</span>（<span class="number">1000</span>*<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>） 存储的是距离计算机元年的毫秒数对应的日期时间</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="获取Date对象的信息"><a href="#获取Date对象的信息" class="headerlink" title="获取Date对象的信息"></a>获取Date对象的信息</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">getFullYear/   获取年</span><br><span class="line">getMonth/     获取月</span><br><span class="line">getDate/       获取日</span><br><span class="line">getHours/      获取小时</span><br><span class="line">getMinutes/    获取分钟</span><br><span class="line">getSeconds/    获取秒</span><br><span class="line">getMilliseconds/  获取毫秒</span><br><span class="line"><span class="title function_">getDay</span>(星期<span class="number">0</span>~<span class="number">6</span>)/  获取星期几 从<span class="number">0</span>到<span class="number">6</span></span><br><span class="line"><span class="title function_">getTime</span>(距离计算机元年的毫秒数)   例：<span class="number">1542339376789</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="转为本地字符串"><a href="#转为本地字符串" class="headerlink" title="转为本地字符串"></a>转为本地字符串</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">toLocaleString</span>()<span class="comment">// 年-月-日   时：分：秒</span></span><br><span class="line"><span class="title function_">tolocaleDateString</span>()<span class="comment">//年-月-日</span></span><br><span class="line"><span class="title function_">tolocaleTimeString</span>()<span class="comment">//时：分：秒</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="设置Date对象的信息"><a href="#设置Date对象的信息" class="headerlink" title="设置Date对象的信息"></a>设置Date对象的信息</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setFullYear/setMonth/setDate/setHours/setMinutes/setSeconds/setMilliseconds/</span><br><span class="line">    setTime 距离计算机元年毫秒数，一旦使用后，年月日时分秒都会受到影响</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>例题：计算当前距离2018年圣诞节还有多少天多少小时多少分多少秒 </p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原理：计算两个Date对象的时间差—相差的毫秒</span></span><br><span class="line"><span class="keyword">var</span> d1=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">var</span> d2=<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2018/12/25&#x27;</span>)</span><br><span class="line"><span class="comment">//两个对象相减，返回的是两个对象相差的毫秒数。</span></span><br><span class="line"><span class="keyword">var</span> d3=d2-d1;</span><br><span class="line"><span class="comment">//把相差的时间转成秒</span></span><br><span class="line">d3=<span class="title class_">Math</span>.<span class="title function_">floor</span>(d3/<span class="number">1000</span>);</span><br><span class="line"><span class="comment">//获取相差的天数</span></span><br><span class="line"><span class="keyword">var</span> day=<span class="title class_">Math</span>.<span class="title function_">floor</span>(d3/(<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>));</span><br><span class="line"><span class="comment">//获取天数后相差的小时</span></span><br><span class="line"><span class="comment">//相差的描述和一天的描述取余，得到的结果是不满一天的秒数，把秒数转成小时</span></span><br><span class="line"><span class="keyword">var</span> hours=d3%(<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>);</span><br><span class="line">hours=<span class="title class_">Math</span>.<span class="title function_">floor</span>(hours/(<span class="number">60</span>*<span class="number">60</span>));</span><br><span class="line"><span class="comment">//获取相差的分钟</span></span><br><span class="line"><span class="comment">//相差的秒数和1小时的秒数取余，得到的结果是不满一小时，把秒数转成分钟</span></span><br><span class="line"><span class="keyword">var</span> minutes=d3%(<span class="number">1</span>*<span class="number">60</span>*<span class="number">60</span>);</span><br><span class="line">minutes=<span class="title class_">Math</span>.<span class="title function_">floor</span>(minutes/(<span class="number">60</span>));</span><br><span class="line"><span class="comment">//相差的秒钟 和60取余</span></span><br><span class="line"><span class="keyword">var</span> seconds=d3%<span class="number">60</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;距离2018年圣诞节还有&#x27;</span>+</span><br><span class="line">day+<span class="string">&#x27;天&#x27;</span>+</span><br><span class="line">hours+<span class="string">&#x27;小时&#x27;</span>+</span><br><span class="line">minutes+<span class="string">&#x27;分钟&#x27;</span>+</span><br><span class="line">seconds+<span class="string">&#x27;秒&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>例题：创建对象保存一个员工的入职时间’2018-11-16’，3年后到期要求到期时间，合同到期前一个月续签合同，假如续签时间是周末，提前到周五。提前一周来通知人事准备续签（提醒时间）</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> workTime=<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2018/11/16&#x27;</span>);</span><br><span class="line"><span class="comment">//复制入职时间的对象作为到期时间</span></span><br><span class="line"><span class="comment">//到期时间，年份在当前的基础之上加3</span></span><br><span class="line"><span class="keyword">var</span> target=<span class="keyword">new</span> <span class="title class_">Date</span>(workTime);</span><br><span class="line">target.<span class="title function_">setFullYear</span>(target.<span class="title function_">getFullYear</span>()+<span class="number">3</span>);</span><br><span class="line"><span class="comment">//复制一个到期时间</span></span><br><span class="line"><span class="keyword">var</span> reworkTime=<span class="keyword">new</span> <span class="title class_">Date</span>(target);</span><br><span class="line"><span class="comment">//提前一个月：在当前月份基础上减1</span></span><br><span class="line">reworkTime.<span class="title function_">setMonth</span>(reworkTime.<span class="title function_">getMonth</span>()-<span class="number">1</span>);</span><br><span class="line"><span class="comment">//判断是否为周末 6  0，周六提前一天-1，周日提前-2</span></span><br><span class="line"><span class="keyword">var</span> day=reworkTime.<span class="title function_">getDay</span>();</span><br><span class="line">    <span class="keyword">if</span> (day==<span class="number">6</span>)&#123;</span><br><span class="line">        <span class="comment">//设置日期为当前的日期-1</span></span><br><span class="line">        reworkTime.<span class="title function_">setDate</span>(reworkTime.<span class="title function_">getDate</span>()-<span class="number">1</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(day==<span class="number">0</span>)&#123;</span><br><span class="line">        reworkTime.<span class="title function_">setDate</span>(reworkTime.<span class="title function_">getDate</span>()-<span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//提醒时间：复制续签时间</span></span><br><span class="line"><span class="keyword">var</span> remind=<span class="keyword">new</span> <span class="title class_">Date</span>(reworkTime);</span><br><span class="line"><span class="comment">//设置当前日期在原来基础减7</span></span><br><span class="line">remind.<span class="title function_">setDate</span>(remind.<span class="title function_">getDate</span>()-<span class="number">7</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;入职时间：&#x27;</span>+</span><br><span class="line">                    workTime.<span class="title function_">toLocaleDateString</span>()</span><br><span class="line">                );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;到期时间：&#x27;</span>+</span><br><span class="line">                    target.<span class="title function_">toLocaleDateString</span>()</span><br><span class="line">                );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;续签时间：&#x27;</span>+</span><br><span class="line">                    reworkTime.<span class="title function_">toLocaleDateString</span>()</span><br><span class="line">                );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;提醒时间：&#x27;</span>+</span><br><span class="line">                    remind.<span class="title function_">toLocaleDateString</span>()</span><br><span class="line">                );</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Number对象"><a href="#Number对象" class="headerlink" title="Number对象"></a>Number对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Number</span>(值)  创建对象</span><br><span class="line">将一个数据转为<span class="title class_">Number</span>对象，本质还是数字。</span><br><span class="line"><span class="title class_">Number</span>.<span class="property">MAX_VALUE</span>  获取计算机能存储的最大值</span><br><span class="line"><span class="title class_">Number</span>.<span class="property">MIN_VALUE</span>  获取计算机能存储的最小值</span><br><span class="line"><span class="title function_">toFixed</span>(n) 保留小数点后 n位</span><br><span class="line"><span class="title function_">toString</span>() 将数字转为字符串类型</span><br><span class="line">数字+<span class="string">&#x27;&#x27;</span>  <span class="comment">//隐式转为字符串类型</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Boolean对象"><a href="#Boolean对象" class="headerlink" title="Boolean对象"></a>Boolean对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Boolean</span>(值)  创建布尔对象，本质上将数据转为布尔型</span><br><span class="line"><span class="title class_">Boolean</span>(值) 转为布尔型</span><br><span class="line">!!值 隐式将数据转为布尔型</span><br><span class="line"><span class="title function_">toString</span>() 将布尔型数据转为字符串</span><br><span class="line"><span class="literal">null</span>的作用：用于释放（销毁）一个引用类型的数据。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SyntaxError</span> 语法错误，错误的使用了中文，缺少括号....程序不会执行</span><br><span class="line"><span class="title class_">ReferenceError</span>  引用错误，使用未声明的变量</span><br><span class="line"><span class="title class_">TypeError</span> 类型错误，错误的使用了数据类型，错误的使用了括号</span><br><span class="line"><span class="title class_">RangeError</span> 范围错误，参数的使用超出了范围</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Array</span>(-<span class="number">1</span>)</span><br><span class="line">引用错误、类型错误、范围错误出现后，会影响后续代码的执行。</span><br><span class="line">异常处理：</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    尝试执行的代码，可能出现错误</span><br><span class="line">&#125;<span class="keyword">catch</span>(err)&#123;</span><br><span class="line">    err：捕获的错误信息</span><br><span class="line">    处理错误的方案</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p><a href="http://tool.oschina.net/uploads/apidocs/jquery/regexp.html">查阅手册</a></p><p><a href="https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference">Microsoft手册</a></p><p><a href="https://www.jb51.net/tools/zhengze.html">快速入门正则</a></p><p>正则表达式(regular expression)描述了一种字符串匹配的模式（pattern），可以用来检查一个串是否含有某种子串、将匹配的子串替换或者从某个串中取出符合某个条件的子串等。</p><p>例如：</p><ul><li><strong>runoo+b</strong>，可以匹配 runoob、runooob、runoooooob 等，+ 号代表前面的字符必须至少出现一次（1次或多次）。</li><li><strong>runoo*b</strong>，可以匹配 runob、runoob、runoooooob 等，* 号代表字符可以不出现，也可以出现一次或者多次（0次、或1次、或多次）。</li><li><strong>colou?r</strong> 可以匹配 color 或者 colour，? 问号代表前面的字符最多只可以出现一次（0次、或1次）。</li></ul><p>构造正则表达式的方法和创建数学表达式的方法一样。也就是用多种元字符与运算符可以将小的表达式结合在一起来创建更大的表达式。正则表达式的组件可以是单个的字符、字符集合、字符范围、字符间的选择或者所有这些组件的任意组合。</p><p>正则表达式是由普通字符（例如字符 a 到 z）以及特殊字符（称为”元字符”）组成的文字模式。模式描述在搜索文本时要匹配的一个或多个字符串。正则表达式作为一个模板，将某个字符模式与所搜索的字符串进行匹配。</p><p><strong>普通字符</strong></p><p>普通字符包括没有显式指定为元字符的所有可打印和不可打印字符。这包括所有大写和小写字母、所有数字、所有标点符号和一些其他符号。</p><h3 id="非打印字符"><a href="#非打印字符" class="headerlink" title="非打印字符"></a>非打印字符</h3><p>非打印字符也可以是正则表达式的组成部分。</p><p><strong>非打印字符的转义序列：</strong></p><table><thead><tr><th align="center">字符</th><th><strong>描述</strong></th></tr></thead><tbody><tr><td align="center">\cx</td><td>匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符。</td></tr><tr><td align="center">\f</td><td>匹配一个换页符。等价于 \x0c 和 \cL。</td></tr><tr><td align="center">\n</td><td>匹配一个换行符。等价于 \x0a 和 \cJ。</td></tr><tr><td align="center">\r</td><td>匹配一个回车符。等价于 \x0d 和 \cM。</td></tr><tr><td align="center">\s</td><td>匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。注意 Unicode 正则表达式会匹配全角空格符。</td></tr><tr><td align="center">\S</td><td>匹配任何非空白字符。等价于 [ ^  \f\n\r\t\v]。</td></tr><tr><td align="center">\t</td><td>匹配一个制表符。等价于 \x09 和 \cI。</td></tr><tr><td align="center">\v</td><td>匹配一个垂直制表符。等价于 \x0b 和 \cK。</td></tr></tbody></table><h3 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h3><p>所谓特殊字符，就是一些有特殊含义的字符，如上面说的 <strong>runoo*b</strong> 中的 *****，简单的说就是表示任何字符串的意思。如果要查找字符串中的 ***** 符号，则需要对 ***** 进行转义，即在其前加一个 *<em>*</em>: <strong>runo*ob</strong> 匹配 runo*ob。</p><p>许多元字符要求在试图匹配它们时特别对待。若要匹配这些特殊字符，必须首先使字符”转义”，即，将反斜杠字符*<em>*</em> 放在它们前面。</p><p><strong>正则表达式中的特殊字符：</strong></p><table><thead><tr><th align="center">特别字符</th><th align="left">描述</th></tr></thead><tbody><tr><td align="center">$</td><td align="left">匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 ‘\n’ 或 ‘\r’。要匹配 $ 字符本身，请使用 $。</td></tr><tr><td align="center">()</td><td align="left">标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 ( 和 )。</td></tr><tr><td align="center">*</td><td align="left">匹配前面的子表达式零次或多次。要匹配 * 字符，请使用 *。</td></tr><tr><td align="center">+</td><td align="left">匹配前面的子表达式一次或多次。要匹配 + 字符，请使用 +。</td></tr><tr><td align="center">.</td><td align="left">匹配除换行符 \n 之外的任何单字符。要匹配 . ，请使用 . 。</td></tr><tr><td align="center">[</td><td align="left">标记一个中括号表达式的开始。要匹配 [，请使用 [。</td></tr><tr><td align="center">?</td><td align="left">匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 ? 字符，请使用 ?。</td></tr><tr><td align="center">\</td><td align="left">将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， ‘n’ 匹配字符 ‘n’。’\n’ 匹配换行符。序列 ‘\‘ 匹配 “&quot;，而 ‘(‘ 则匹配 “(“。</td></tr><tr><td align="center">^</td><td align="left">匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合。要匹配 ^ 字符本身，请使用 ^。</td></tr><tr><td align="center">{</td><td align="left">标记限定符表达式的开始。要匹配 {，请使用 {。</td></tr><tr><td align="center">|</td><td align="left">指明两项之间的一个选择。要匹配</td></tr></tbody></table><h3 id="限定符"><a href="#限定符" class="headerlink" title="限定符"></a>限定符</h3><p>限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有 ***** 或 <strong>+</strong> 或 <strong>?</strong> 或 <strong>{n}</strong> 或 <strong>{n,}</strong> 或 <strong>{n,m}</strong> 共6种。</p><p><strong>正则表达式的限定符有：</strong></p><table><thead><tr><th align="center">字符</th><th>描述</th></tr></thead><tbody><tr><td align="center">*</td><td>匹配前面的子表达式零次或多次。例如，zo* 能匹配 “z” 以及 “zoo”。* 等价于{0,}。</td></tr><tr><td align="center">+</td><td>匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。</td></tr><tr><td align="center">?</td><td>匹配前面的子表达式零次或一次。例如，”do(es)?” 可以匹配 “do” 、 “does” 中的 “does” 、 “doxy” 中的 “do” 。? 等价于 {0,1}。</td></tr><tr><td align="center">{n}</td><td>n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。</td></tr><tr><td align="center">{n,}</td><td>n 是一个非负整数。至少匹配n 次。例如，’o{2,}’ 不能匹配 “Bob” 中的 ‘o’，但能匹配 “foooood” 中的所有 o。’o{1,}’ 等价于 ‘o+’。’o{0,}’ 则等价于 ‘o*’。</td></tr><tr><td align="center">{n,m}</td><td>m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。例如，”o{1,3}” 将匹配 “fooooood” 中的前三个 o。’o{0,1}’ 等价于 ‘o?’。请注意在逗号和两个数之间不能有空格。</td></tr></tbody></table><h3 id="定位符"><a href="#定位符" class="headerlink" title="定位符"></a>定位符</h3><p>位符使您能够将正则表达式固定到行首或行尾。它们还使您能够创建这样的正则表达式，这些正则表达式出现在一个单词内、在一个单词的开头或者一个单词的结尾。</p><p>定位符用来描述字符串或单词的边界，<strong>^</strong> 和 <strong>$</strong> 分别指字符串的开始与结束，<strong>\b</strong> 描述单词的前或后边界，<strong>\B</strong> 表示非单词边界。</p><p>正则表达式的定位符有：</p><table><thead><tr><th align="center">字符</th><th>描述</th></tr></thead><tbody><tr><td align="center">^</td><td>匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。</td></tr><tr><td align="center">$</td><td>匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。</td></tr><tr><td align="center">\b</td><td>匹配一个单词边界，即字与空格间的位置。</td></tr><tr><td align="center">\B</td><td>非单词边界匹配。</td></tr></tbody></table><p><code>**注意**：不能将限定符与定位符一起使用。由于在紧靠换行或者单词边界的前面或后面不能有一个以上位置，因此不允许诸如 **^\***之类的表达式。</code></p><h3 id="最常用正则表达式"><a href="#最常用正则表达式" class="headerlink" title="最常用正则表达式"></a>最常用正则表达式</h3><p><strong>校验数字的表达式</strong></p><ol><li>数字：^[0-9]*$ </li><li>n位的数字：^\d{n}$</li><li>至少n位的数字：^\d{n,}$ </li><li>m-n位的数字：^\d{m,n}$ </li><li>零和非零开头的数字：^(0|[ 1 - 9 ] [0-9]*)$ *</li><li><em>非零开头的最多带两位小数的数字：^([1 - 9] [0-9]</em>)+(.[0-9]{1,2})?$ </li><li>带1-2位小数的正数或负数：^(-)?\d+(.\d{1,2})?$ </li><li>正数、负数、和小数：^(-|+)?\d+(.\d+)?$ </li><li>有两位小数的正实数：^[0-9]+(.[0-9]{2})?$</li><li>有1~3位小数的正实数：^[0-9]+(.[0-9]{1,3})?$</li><li>非零的正整数：^[1-9]\d*$ 或 ^([1-9] [0-9]<em>){1,3}$ 或 ^+?[1-9] [0-9]</em>$*</li><li><em>非零的负整数：^ \ - [ 1 - 9 ] [ ]0-9”</em>$ 或 ^-[1-9]\d*$*</li><li>非负整数：^\d+$ 或 ^[1-9]\d*|0$*</li><li><em>非正整数：^-[1-9]\d</em>|0$ 或 ^((-\d+)|(0+))$</li><li>非负浮点数：^\d+(.\d+)?$ 或 ^[1-9]\d<em>.\d</em>|0.\d*[1-9]\d*|0?.0+|0$</li><li>非正浮点数：^((-\d+(.\d+)?)|(0+(.0+)?))$ 或 ^(-([1-9]\d<em>.\d</em>|0.\d*[1-9]\d*))|0?.0+|0$</li><li>正浮点数：^[1-9]\d<em>.\d</em>|0.\d*[1-9]\d*$ 或 ^(([0-9]+.[0-9]<em>[1-9] [0-9]</em>)|([0-9]<em>[1-9] [0-9]<em>.[0-9]+)|([0-9]</em>[1-9] [0-9]</em>))$</li><li>负浮点数：^-([1-9]\d<em>.\d</em>|0.\d*[1-9]\d*)$ 或 ^(-(([0-9]+.[0-9]<em>[1-9] [0-9]</em>)|([0-9]<em>[1-9] [0-9]<em>.[0-9]+)|([0-9]</em>[1-9] [0-9]</em>)))$</li><li>浮点数：^(-?\d+)(.\d+)?$ 或 ^-?([1-9]\d<em>.\d</em>|0.\d*[1-9]\d*|0?.0+|0)$</li></ol><p><strong>校验字符的表达式</strong></p><ol><li>汉字：^[\u4e00-\u9fa5]{0,}$ </li><li>英文和数字：^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$ </li><li>长度为3-20的所有字符：^.{3,20}$ </li><li>由26个英文字母组成的字符串：^[A-Za-z]+$ </li><li>由26个大写英文字母组成的字符串：^[A-Z]+$ </li><li>由26个小写英文字母组成的字符串：^[a-z]+$ </li><li>由数字和26个英文字母组成的字符串：^[A-Za-z0-9]+$ </li><li>由数字、26个英文字母或者下划线组成的字符串：^\w+$ 或 ^\w{3,20}$ </li><li>中文、英文、数字包括下划线：^[\u4E00-\u9FA5A-Za-z0-9_]+$</li><li>中文、英文、数字但不包括下划线等符号：^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$</li><li>可以输入含有^%&amp;’,;=?$&quot;等字符：[  ^ %&amp;’,;=?$\x22]+</li><li>禁止输入含有~的字符：[ ^ ~ \x22]+</li></ol><p><strong>特殊需求表达式</strong></p><ol><li><p>Email地址：^\w+([-+.]\w+)*@\w+([-.]\w+)<em>.\w+([-.]\w+)</em>$ </p></li><li><p>域名：[a-zA-Z0-9] [-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9] [-a-zA-Z0-9]{0,62})+/.? </p></li><li><p>InternetURL：[a-zA-z]+://[^\s]* 或 ^http://([\w-]+.)+[\w-]+(/[\w-./?%&amp;=]*)?$ </p></li><li><p>手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$ </p></li><li><p>电话号码(“XXX-XXXXXXX”、”XXXX-XXXXXXXX”、”XXX-XXXXXXX”、”XXX-XXXXXXXX”、”XXXXXXX”和”XXXXXXXX)：^((\d{3,4}-)|\d{3.4}-)?\d{7,8}$  </p></li><li><p>国内电话号码(0511-4405222、021-87888822)：\d{3}-\d{8}|\d{4}-\d{7} </p></li><li><p>身份证号(15位、18位数字)：^\d{15}|\d{18}$ </p></li><li><p>短身份证号码(数字、字母x结尾)：^([0-9]){7,18}(x|X)?$ 或 ^\d{8,18}|[0-9x]{8,18}|[0-9X]{8,18}?$ </p></li><li><p>帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$</p></li><li><p>密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w{5,17}$</p></li><li><p>强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：^(?=.<em>\d)(?=.</em>[a-z])(?=.*[A-Z]).{8,10}$</p></li><li><p>日期格式：^\d{4}-\d{1,2}-\d{1,2}</p></li><li><p>一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$</p></li><li><p>一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$</p><p><strong>钱的输入格式：</strong></p></li><li><p>1.有四种钱的表示形式我们可以接受:”10000.00” 和 “10,000.00”, 和没有 “分” 的 “10000” 和 “10,000”：^[1-9] [0-9]<em>$</em></p></li><li><p>2.这表示任意一个不以0开头的数字,但是,这也意味着一个字符”0”不通过,所以我们采用下面的形式：^(0|[1-9] [0-9]<em>)$</em></p></li><li><p>3.一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9] [0-9]*)$</p></li><li><p>4.这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：^[0-9]+(.[0-9]+)?$</p></li><li><p>5.必须说明的是,小数点后面至少应该有1位数,所以”10.”是不通过的,但是 “10” 和 “10.2” 是通过的：^[0-9]+(.[0-9]{2})?$</p></li><li><p>6.这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：^[0-9]+(.[0-9]{1,2})?$</p></li><li><p>7.这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：^[0-9]{1,3}(,[0-9]{3})<em>(.[0-9]{1,2})?$</em></p></li><li><p>8 .  1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：^([0-9]+|[0-9]{1,3}(,[0-9]{3})<em>)(.[0-9]{1,2})?$</em></p></li><li><p>备注：这就是最终结果了,别忘了”+”可以用”*”替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里</p></li><li><p>xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\.[x|X][m|M][l|L]$</p></li><li><p>中文字符的正则表达式：[\u4e00-\u9fa5]</p></li><li><p>双字节字符：[ ^ \x00-\xff] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</p></li><li><p>空白行的正则表达式：\n\s<em>\r (可以用来删除空白行)</em></p></li><li><p>HTML标记的正则表达式：&lt;(\S*?)[^&gt;]<em>&gt;.</em>?&lt;/\1&gt;|&lt;.*? /&gt; (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)</p></li><li><p>首尾空白字符的正则表达式：^\s*|\s*$或(^\s*)|(\s*$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</p></li><li><p>腾讯QQ号：[1-9] [0-9]{4,} (腾讯QQ号从10000开始)</p></li><li><p>中国邮政编码：[1-9]\d{5}(?!\d) (中国邮政编码为6位数字) 33 IP地址：\d+.\d+.\d+.\d+ (提取IP地址时有用) 34 IP地址：((?:(?:25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d?\d)) </p></li></ol><h3 id="20个正则表达式知识点"><a href="#20个正则表达式知识点" class="headerlink" title="20个正则表达式知识点"></a>20个正则表达式知识点</h3><p>正则表达式(regular expression)描述了一种字符串匹配的模式，可以用来检查一个串是否含有某种子串、将匹配的子串做替换或者从某个串中取出符合某个条件的子串等。</p><p>列目录时，　dir <em>.txt或ls <em>.txt中的</em>.txt就不是一个正则表达式,因为这里</em>与正则式的*的含义是不同的。</p><p>构造正则表达式的方法和创建数学表达式的方法一样。也就是用多种元字符与运算符可以将小的表达式结合在一起来创建更大的表达式。正则表达式的组件可以是单个的字符、字符集合、字符范围、字符间的选择或者所有这些组件的任意组合。</p><p>正则表达式是由普通字符（例如字符 a 到 z）以及特殊字符（称为”元字符”）组成的文字模式。模式描述在搜索文本时要匹配的一个或多个字符串。正则表达式作为一个模板，将某个字符模式与所搜索的字符串进行匹配。</p><p>正则表达式，一个十分古老而又强大的文本处理工具，仅仅用一段非常简短的表达式语句，便能够快速实现一个非常复杂的业务逻辑。熟练地掌握正则表达式的话，能够使你的开发效率得到极大的提升。</p><p>正则表达式经常被用于字段或任意字符串的校验，如下面这段校验基本日期格式的JavaScript代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^(\\d&#123;1,4&#125;)(-|\\/</span>)(\\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)\\<span class="number">2</span>(\\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)$/;</span><br><span class="line"><span class="keyword">var</span> r = fieldValue.<span class="title function_">match</span>(reg);   </span><br><span class="line"><span class="keyword">if</span>(r==<span class="literal">null</span>)<span class="title function_">alert</span>(<span class="string">&#x27;Date format error!&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>下面是在前端开发中经常使用到的20个正则表达式:</strong></p><p><strong>检验密码强度</strong></p><p>密码的强度必须是包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).&#123;8,10&#125;$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  <strong>检验中文</strong></p><p>字符串仅能是中文。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^[\\u4e00-\\u9fa5]&#123;<span class="number">0</span>,&#125;$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>由数字、26个英文字母或下划线组成的字符串</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^\\w+$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>校验E-Mail 地址</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[\\w!#$%&amp;<span class="string">&#x27;*+/=?^_`&#123;|&#125;~-]+(?:\\.[\\w!#$%&amp;&#x27;</span>*+/=?^_<span class="string">`&#123;|&#125;~-]+)*@(?:[\\w](?:[\\w-]*[\\w])?\\.)+[\\w](?:[\\w-]*[\\w])?</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><p><strong>检验身份证号码</strong></p><p><strong>15位：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^[1-9]\\d&#123;7&#125;((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d&#123;3&#125;$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <strong>18位：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^[<span class="number">1</span>-<span class="number">9</span>]\\d&#123;<span class="number">5</span>&#125;[<span class="number">1</span>-<span class="number">9</span>]\\d&#123;<span class="number">3</span>&#125;((<span class="number">0</span>\\d)|(<span class="number">1</span>[<span class="number">0</span>-<span class="number">2</span>]))(([<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>]\\d)|<span class="number">3</span>[<span class="number">0</span>-<span class="number">1</span>])\\d&#123;<span class="number">3</span>&#125;([<span class="number">0</span>-<span class="number">9</span>]|X)$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <strong>效验日期</strong></p><p>“yyyy-mm-dd“ 格式的日期校验，已考虑平闰年。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^(?:(?!<span class="number">0000</span>)[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">4</span>&#125;-(?:(?:<span class="number">0</span>[<span class="number">1</span>-<span class="number">9</span>]|<span class="number">1</span>[<span class="number">0</span>-<span class="number">2</span>])-(?:<span class="number">0</span>[<span class="number">1</span>-<span class="number">9</span>]|<span class="number">1</span>[<span class="number">0</span>-<span class="number">9</span>]|<span class="number">2</span>[<span class="number">0</span>-<span class="number">8</span>])|(?:<span class="number">0</span>[<span class="number">13</span>-<span class="number">9</span>]|<span class="number">1</span>[<span class="number">0</span>-<span class="number">2</span>])-(?:<span class="number">29</span>|<span class="number">30</span>)|(?:<span class="number">0</span>[<span class="number">13578</span>]|<span class="number">1</span>[<span class="number">02</span>])-<span class="number">31</span>)|(?:[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">2</span>&#125;(?:<span class="number">0</span>[<span class="number">48</span>]|[<span class="number">2468</span>][<span class="number">048</span>]|[<span class="number">13579</span>][<span class="number">26</span>])|(?:<span class="number">0</span>[<span class="number">48</span>]|[<span class="number">2468</span>][<span class="number">048</span>]|[<span class="number">13579</span>][<span class="number">26</span>])<span class="number">00</span>)-<span class="number">02</span>-<span class="number">29</span>)$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>效验金额</strong></p><p>金额校验，精确到2位小数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^[<span class="number">0</span>-<span class="number">9</span>]+(.[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">2</span>&#125;)?$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  <strong>效验手机号</strong></p><p>下面是国内 13、15、18开头的手机号正则表达式。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^(<span class="number">13</span>[<span class="number">0</span>-<span class="number">9</span>]|<span class="number">14</span>[<span class="number">5</span>|<span class="number">7</span>]|<span class="number">15</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>]|<span class="number">18</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>])\\d&#123;<span class="number">8</span>&#125;$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <strong>判断IE版本</strong></p><p>IE目前还没被完全取代，很多页面还是需要做版本兼容，下面是IE版本检查的表达式。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^.*<span class="variable constant_">MSIE</span> [<span class="number">5</span>-<span class="number">8</span>](?:\\.[<span class="number">0</span>-<span class="number">9</span>]+)?(?!.*<span class="title class_">Trident</span>\\/[<span class="number">5</span>-<span class="number">9</span>]\\<span class="number">.0</span>).*$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>效验IP-V4地址</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\\<span class="title function_">b</span>(<span class="params">?:(?:<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>][<span class="number">0</span>-<span class="number">9</span>]|[<span class="number">01</span>]?[<span class="number">0</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]?)\\.</span>)&#123;<span class="number">3</span>&#125;(?:<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>][<span class="number">0</span>-<span class="number">9</span>]|[<span class="number">01</span>]?[<span class="number">0</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]?)\\b</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>效验IP-V6地址</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">7</span>,<span class="number">7</span>&#125;[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">7</span>&#125;:|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">6</span>&#125;:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">5</span>&#125;(:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">2</span>&#125;|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">4</span>&#125;(:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">3</span>&#125;|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">3</span>&#125;(:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">4</span>&#125;|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">2</span>&#125;(:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">5</span>&#125;|[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:((:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">6</span>&#125;)|:((:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">7</span>&#125;|:)|<span class="attr">fe80</span>:(:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">0</span>,<span class="number">4</span>&#125;)&#123;<span class="number">0</span>,<span class="number">4</span>&#125;%[<span class="number">0</span>-9a-zA-Z]&#123;<span class="number">1</span>,&#125;|::(<span class="title function_">ffff</span>(<span class="params">:<span class="number">0</span>&#123;<span class="number">1</span>,<span class="number">4</span>&#125;</span>)&#123;<span class="number">0</span>,<span class="number">1</span>&#125;:)&#123;<span class="number">0</span>,<span class="number">1</span>&#125;((<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])\\.)&#123;<span class="number">3</span>,<span class="number">3</span>&#125;(<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:((<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])\\.)&#123;<span class="number">3</span>,<span class="number">3</span>&#125;(<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>]))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>效验URL前缀</strong></p><p>应用开发中很多时候需要区分请求是HTTPS还是HTTP，通过下面的表达式可以取出一个url的前缀然后再逻辑判断。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!s.<span class="title function_">match</span>(<span class="regexp">/^[a-zA-Z]+:\\/</span>\\<span class="comment">//))</span></span><br><span class="line">&#123;</span><br><span class="line"> s = <span class="string">&#x27;http://&#x27;</span> + s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>提取URL链接</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^(f|ht)&#123;<span class="number">1</span>&#125;(tp|tps):\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- ./?%&amp;=]*)?</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>文件路径及扩展名效验</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^([a-zA-Z]\\:|\\\\)\\\\([^\\\\]+\\\\)*[^\\/:*?<span class="string">&quot;&lt;&gt;|]+\\.txt(l)?$</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><p><strong>提取Color Hex  Codes</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\\#([a-fA-F]|[<span class="number">0</span>-<span class="number">9</span>])&#123;<span class="number">3</span>,<span class="number">6</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>提取网页图片</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\\#([a-fA-F]|[<span class="number">0</span>-<span class="number">9</span>])&#123;<span class="number">3</span>,<span class="number">6</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>精炼CSS</strong></p><p>通过下面的表达式，可以搜索相同属性值的CSS，从而达到精炼代码的目的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^\\s*[a-zA-Z\\-]+\\s*[:]&#123;<span class="number">1</span>&#125;\\s[a-zA-<span class="variable constant_">Z0</span>-<span class="number">9</span>\\s.#]+[;]&#123;<span class="number">1</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>抽取注释</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--(.*?)--&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>匹配HTML标签</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="regexp">/?\\w+((\\s+\\w+(\\s*=\\s*(?:&quot;.*?&quot;|&#x27;.*?&#x27;|[\\^&#x27;&quot;&gt;\\s]+))?)+\\s*|\\s*)/</span>?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="String-的正则API"><a href="#String-的正则API" class="headerlink" title="String 的正则API"></a>String 的正则API</h3><p> <strong>查找关键词: 4种:</strong> </p><ol><li>查找一个固定的关键词出现的位置: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i=str.<span class="title function_">indexOf</span>(<span class="string">&quot;关键词&quot;</span>,starti)</span><br><span class="line">从str中starti位置开始，找下一个<span class="string">&quot;关键词&quot;</span>的位置i</span><br><span class="line">如果找到，返回关键词第一个字所在的位置i</span><br><span class="line">如果找不到，返回-<span class="number">1</span></span><br><span class="line"><span class="string">`问题: 不支持正则，只能查找一个固定的关键词`</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>模糊查找一个关键词的位置: </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i=str.<span class="title function_">search</span>(<span class="regexp">/正则/</span>)</span><br><span class="line">在str中从<span class="number">0</span>位置开始找下一个符合<span class="string">&quot;正则&quot;</span>要求的敏感词的位置i</span><br><span class="line">如果找到，返回关键词第一个字的位置</span><br><span class="line">如果没找到，返回-<span class="number">1</span></span><br><span class="line"><span class="string">`问题: 正则表达式默认区分大小写`</span></span><br><span class="line">解决: 在第二个/后加后缀i,表示ignore忽略大小写</span><br><span class="line">更高要求: 既返回关键词内容，又返回关键词位置</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>模糊查找关键词，并返回关键词内容: 2种: </li></ol><ul><li>只返回一个关键词的内容: </li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var arr=str.match(/正则/i)</span><br><span class="line">在str中查找符合/正则/要求的关键词，并同时返回关键词的内容和位置</span><br><span class="line">返回值: arr[ &quot;0&quot;: 关键词, &quot;index&quot;: i ]</span><br><span class="line">数组本质: 所有数组底层其实都是关联数组</span><br><span class="line">获取关键词内容: arr[0]   arr.0</span><br><span class="line">获取关键词位置: arr[&quot;index&quot;] &lt;==&gt; arr.index</span><br><span class="line">如果找不到，返回null</span><br><span class="line">正则表达式第2个问题: 只找一个就结束了！</span><br><span class="line">解决: 在第2个/后加g，global 全部</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>查找所有关键词的内容(不关心位置):</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=str.<span class="title function_">match</span>(<span class="regexp">/正则/g</span>)</span><br><span class="line">查找str中所有符合/正则/要求的关键词保存到arr中</span><br><span class="line">返回值: 所有关键词组成的数组</span><br><span class="line"><span class="string">`找不到: 返回null`</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="4"><li>既查找每个关键词的内容，又查找每个关键词的位置：</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">match</span>()不能实现: </span><br><span class="line"><span class="title function_">match</span>()不加g时，只能找<span class="number">1</span>个关键词</span><br><span class="line"><span class="title function_">match</span>()加g后，不能获得位置</span><br><span class="line">解决: <span class="title class_">RegExp</span>对象的<span class="title function_">exec</span>()方法</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <strong>替换关键词: 2种:</strong> </p><ol><li>简单替换: 所有关键词都替换为统一的新值</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str=str.<span class="title function_">replace</span>(<span class="regexp">/正则/ig</span>,<span class="string">&quot;新值&quot;</span>)</span><br><span class="line">回顾: 所有字符串<span class="variable constant_">API</span>都无权修改原字符串，只能返回新字符串！所以必须用变量才能借助修改后的新值。</span><br><span class="line">将str中所有符合/正则/要求的关键词都替换为统一的<span class="string">&quot;新值&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>高级替换: 根据找到的每个关键词的不同，动态返回对应的新值替换。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">str=str.<span class="title function_">replace</span>(</span><br><span class="line"><span class="regexp">/正则/ig</span>,  <span class="keyword">function</span>(<span class="params">kword</span>)&#123; <span class="keyword">return</span> 新值; &#125;</span><br><span class="line">)</span><br><span class="line">原理: </span><br><span class="line"><span class="number">1.</span> replace查找str中符合条件的每个关键词</span><br><span class="line"><span class="number">2.</span> 每找到一个关键词，就自动调用回调函数</span><br><span class="line"><span class="number">3.</span> 每次调用函数都自动传入本次找到的关键词</span><br><span class="line"><span class="number">4.</span> 回调函数根据本次传入的关键词，加工后生成新替换值返回</span><br><span class="line"><span class="number">5.</span> replace将本地回调函数返回的值，替换到正在遍历的位置。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> 切割字符串:</p><ol><li>简单切割: 切割符是固定的</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">比如: zhangdong@tedu.<span class="property">cn</span></span><br><span class="line">      no zuo no die</span><br><span class="line"><span class="keyword">var</span> arr=str.<span class="title function_">split</span>(“固定的切割符”)</span><br><span class="line"> 返回多段子字符串组成的数组</span><br><span class="line">固定套路: 打散一个字符串为字符数组</span><br><span class="line"><span class="keyword">var</span> chars=str.<span class="title function_">split</span>(“”)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>复杂切割: 切割符不是固定的</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=str.<span class="title function_">split</span>(<span class="regexp">/正则/</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gulp快速使用</title>
      <link href="/2019/06/23/Gulp%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/06/23/Gulp%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="Gulp介绍"><a href="#Gulp介绍" class="headerlink" title="Gulp介绍"></a>Gulp介绍</h2><ul><li>中文主页: <a href="http://www.gulpjs.com.cn/">http://www.gulpjs.com.cn/</a></li><li><code>此文档对应3.9版本</code></li><li>查看实例 <a href="https://pan.baidu.com/s/1DI7sMSdCb0BzKzuuQ6DpXw">点击下载</a> 提取码：otxk</li><li>gulp是与grunt功能类似的<strong>前端项目构建</strong>工具, 也是基于Nodejs的自动<strong>任务运行器</strong></li><li>能自动化地完成 javascript/coffee/sass/less/html/image/css 等文件的<br>合并、压缩、检查、监听文件变化、浏览器自动刷新、测试等任务</li><li>gulp更高效(异步多任务), 更易于使用, 插件高质量</li><li>简单目录结构<span id="more"></span></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">|- dist</span><br><span class="line">|- src</span><br><span class="line">  |- js</span><br><span class="line">  |- css</span><br><span class="line">  |- less</span><br><span class="line">  |- index.html</span><br><span class="line">|- gulpfile.js-----gulp配置文件</span><br><span class="line">|- package.json</span><br></pre></td></tr></table></figure><h2 id="安装Gulp"><a href="#安装Gulp" class="headerlink" title="安装Gulp"></a>安装Gulp</h2><ul><li>全局安装</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp -g</span><br></pre></td></tr></table></figure><ul><li>局部安装</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp --save-dev</span><br></pre></td></tr></table></figure><ul><li>配置编码：gulpfile.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入gulp模块</span></span><br><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"><span class="comment">//定义默认任务</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 将你的默认的任务代码放在这</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>注册默认任务</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>,[<span class="string">&#x27;js&#x27;</span>,<span class="string">&#x27;less&#x27;</span>,<span class="string">&#x27;css&#x27;</span>,<span class="string">&#x27;htmlMinfy&#x27;</span>])</span><br><span class="line"><span class="comment">//注意此任务应为个人定义好的而不是默认的。</span></span><br></pre></td></tr></table></figure><ul><li>构建命令</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp</span><br></pre></td></tr></table></figure><h2 id="使用gulp插件"><a href="#使用gulp插件" class="headerlink" title="使用gulp插件"></a>使用gulp插件</h2><ul><li><p>相关插件:</p><ul><li><strong>gulp-concat</strong> : 合并文件(js/css)</li><li><strong>gulp-uglify</strong> : 压缩js文件</li><li><strong>gulp-rename</strong> : 文件重命名</li><li><strong>gulp-less</strong> : 编译less</li><li><strong>gulp-clean-css</strong> : 压缩css</li><li><strong>gulp-livereload</strong> : 实时自动编译刷新</li></ul></li><li><p>重要API</p><ul><li><strong>gulp.src(filePath/pathArr)</strong> <ul><li>指向指定路径的所有文件, 返回文件流对象</li><li>用于读取文件</li></ul></li><li><strong>gulp.dest(dirPath/pathArr)</strong><ul><li>指向指定的所有文件夹</li><li>用于向文件夹中输出文件</li></ul></li><li><strong>gulp.task(name[, deps], fn)</strong> <ul><li>定义一个任务</li></ul></li><li>gulp.watch() <ul><li><strong>监视文件的变化</strong></li></ul></li></ul></li><li><p><code>注意如果加return 则为异步进行打包不加则为同步</code></p><ul><li><p>```js<br>gulp.task(‘css’,[‘less’],function(){    //当启动css时候去依赖less任务<br>})<br>//此写法也可解决异步同步问题 让css打包时先去执行less打包行为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 处理js</span><br><span class="line"></span><br><span class="line">  - 创建js文件</span><br><span class="line"></span><br><span class="line">    - src/js/test1.js</span><br><span class="line"></span><br><span class="line">      ```js</span><br><span class="line">      (function () &#123;</span><br><span class="line">        function add(num1, num2) &#123;</span><br><span class="line">          var num3 = 0;</span><br><span class="line">          num1 = num2 + num3;</span><br><span class="line">          return num1 + num2;</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(add(10, 30));</span><br><span class="line">      &#125;)();</span><br></pre></td></tr></table></figure><ul><li><p>src/js/test2.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> arr = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">item, index</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> item+<span class="number">1</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li></ul></li><li><p>下载插件:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-concat gulp-uglify gulp-rename --save-dev</span><br></pre></td></tr></table></figure></li><li><p>配置编码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> concat = <span class="built_in">require</span>(<span class="string">&#x27;gulp-concat&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">&#x27;gulp-uglify&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> rename = <span class="built_in">require</span>(<span class="string">&#x27;gulp-rename&#x27;</span>);</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;js&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;src/js/*.js&#x27;</span>)  <span class="comment">//找到目标原文件，将数据读取到gulp的内存中</span></span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">concat</span>(<span class="string">&#x27;build.js&#x27;</span>))       <span class="comment">//临时合并文件</span></span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./dist/js/&#x27;</span>))    <span class="comment">//输出文件到本地</span></span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">uglify</span>())                 <span class="comment">//压缩文件</span></span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">rename</span>(&#123;<span class="attr">suffix</span>:<span class="string">&#x27;.min&#x27;</span>&#125;))  <span class="comment">//重命名也可以直接写字符串</span></span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./dist/js/&#x27;</span>))</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">liverload</span>())              <span class="comment">//实时刷新</span></span><br><span class="line">    .<span class="title function_">pipe</span>(connect.<span class="title function_">reload</span>())         <span class="comment">//实时刷新</span></span><br><span class="line">    <span class="comment">// return gulp.src(&#x27;src/js/**/*.js&#x27;) 深度遍历 </span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, [<span class="string">&#x27;minifyjs&#x27;</span>]);</span><br></pre></td></tr></table></figure></li><li><p>页面引入js浏览测试 : index.html</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;dist/js/built.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>打包测试: gulp</p></li></ul></li><li><p>处理css</p><ul><li><p>创建less/css文件</p><ul><li><p>src/css/test1.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#div1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>src/css/test2.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#div2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>src/less/test3.less</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@base:</span> yellow;</span><br><span class="line"><span class="selector-class">.index1</span> &#123; <span class="attribute">color</span>: <span class="variable">@base</span>; &#125;</span><br><span class="line"><span class="selector-class">.index2</span> &#123; <span class="attribute">color</span>: green; &#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>下载插件:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-less gulp-clean-css --save-dev </span><br><span class="line">处理less     压缩css </span><br></pre></td></tr></table></figure></li><li><p>配置编码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> less = <span class="built_in">require</span>(<span class="string">&#x27;gulp-less&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> cleanCSS = <span class="built_in">require</span>(<span class="string">&#x27;gulp-clean-css&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//注册转换less的任务</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;less&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;src/less/*.less&#x27;</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">less</span>())                   <span class="comment">//编译less文件为css文件</span></span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;src/css/&#x27;</span>))</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">liverload</span>())              <span class="comment">//实时刷新</span></span><br><span class="line">    .<span class="title function_">pipe</span>(connect.<span class="title function_">reload</span>())         <span class="comment">//实时刷新</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//注册合并压缩css的任务</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;css&#x27;</span>,[<span class="string">&#x27;less&#x27;</span>],<span class="keyword">function</span>(<span class="params"></span>)&#123;    <span class="comment">//当启动css时候去依赖less任务 </span></span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;src/css/*.css&#x27;</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">concat</span>(<span class="string">&#x27;build.css&#x27;</span>))</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">rename</span>(&#123;<span class="attr">suffix</span>:<span class="string">&#x27;.min&#x27;</span>&#125;))</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">cssClean</span>(&#123;<span class="attr">compatibility</span>:<span class="string">&#x27;ie8&#x27;</span>&#125;))</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./dist/css/&#x27;</span>))</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">liverload</span>())              <span class="comment">//实时刷新</span></span><br><span class="line">    .<span class="title function_">pipe</span>(connect.<span class="title function_">reload</span>())         <span class="comment">//实时刷新</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, [<span class="string">&#x27;minifyjs&#x27;</span>, <span class="string">&#x27;cssTask&#x27;</span>]);</span><br></pre></td></tr></table></figure></li><li><p>页面引入css浏览测试 : index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;dist/css/built.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;index1&quot;</span>&gt;</span>div1111111<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;index2&quot;</span>&gt;</span>div2222222<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>打包测试: gulp</p></li></ul></li><li><p>处理html</p><ul><li><p>下载插件:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-htmlmin --save-dev</span><br></pre></td></tr></table></figure></li><li><p>配置编码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlmin&#x27;</span>);</span><br><span class="line"><span class="comment">//注册压缩HTML任务</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;htmlMinfy&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">htmlMin</span>(&#123;<span class="attr">collapseWhitespace</span>:<span class="literal">true</span>&#125;))</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;dist&#x27;</span>))</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">liverload</span>())              <span class="comment">//实时刷新</span></span><br><span class="line">    .<span class="title function_">pipe</span>(connect.<span class="title function_">reload</span>())         <span class="comment">//实时刷新</span></span><br><span class="line">&#125;)</span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, [<span class="string">&#x27;minifyjs&#x27;</span>, <span class="string">&#x27;cssTask&#x27;</span>, <span class="string">&#x27;htmlMinify&#x27;</span>]);</span><br></pre></td></tr></table></figure></li><li><p>修改页面引入</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/built.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/built.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>打包测试: gulp    </p></li></ul></li><li><p>自动编译/刷新</p><ul><li><p>下载插件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-livereload --save-dev</span><br></pre></td></tr></table></figure></li><li><p>配置编码:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> livereload = <span class="built_in">require</span>(<span class="string">&#x27;gulp-livereload&#x27;</span>);    </span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;watch&#x27;</span>, [<span class="string">&#x27;default&#x27;</span>], <span class="keyword">function</span> (<span class="params"></span>) &#123;    </span><br><span class="line">  <span class="comment">//开启监听</span></span><br><span class="line">    <span class="title function_">liverload</span>().<span class="title function_">listeners</span>()</span><br><span class="line">    <span class="comment">//确认监听的目标以及绑定相应的任务</span></span><br><span class="line">    gulp.<span class="title function_">watch</span>(<span class="string">&#x27;src/js*.js&#x27;</span>,[<span class="string">&#x27;js&#x27;</span>]) </span><br><span class="line">    gulp.<span class="title function_">watch</span>([<span class="string">&#x27;src/css/*.css&#x27;</span>,<span class="string">&#x27;src/less/*.less&#x27;</span>],[<span class="string">&#x27;css&#x27;</span>]) </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>自动刷新页面</p><ul><li>下载安装chrome插件: LiveReload_v2.1.0.crx</li><li>命令: <strong>gulp watch</strong></li><li>测试访问: <ul><li>通过虚拟地址访问页面, 并点插件图标启动监视</li><li>修改js/css/less页面会自动编译并刷新浏览器</li></ul></li></ul></li></ul></li><li><p>热更新插件：npm install gulp-connect –save-dev</p><ul><li>```js<br>const connect = require(‘gulp-connect’)<br>//热更新配置<br>gulp.task(‘server’,[‘default’],function(){<pre><code>//配置服务器的选项connect.server(&#123;    root:&#39;dist/&#39;,    livereload:true,    //实时刷新    port:3000&#125;)//open插件可以自动打开指定的链接open(&#39;http://localhost:3000&#39;)//确认监听的目标以及绑定相应的任务gulp.watch(&#39;src/js*.js&#39;,[&#39;js&#39;]) gulp.watch([&#39;src/css/*.css&#39;,&#39;src/less/*.less&#39;],[&#39;css&#39;])</code></pre>})<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 自动热更新后自动打开对应地址页面：npm install open --save-dev</span><br><span class="line"></span><br><span class="line">  - ```js</span><br><span class="line">    const open = require(&#x27;open&#x27;)</span><br><span class="line">    //open插件可以自动打开指定的链接</span><br><span class="line">    open(&#x27;http://localhost:3000&#x27;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>以上除了gulp对象，其他效果都包括：npm install gulp-load-plugins –save-dev</p><ul><li><pre><code class="js">const $ = require(&#39;gulp-load-plugins&#39;)()    //包括以下所有插件 直接可以$.方法即可const concat = require(&#39;gulp-concat&#39;)const uglify = require(&#39;gulp-uglify&#39;)const rename = require(&#39;gulp-rename&#39;)const less = require(&#39;gulp-less&#39;)const cssClean = require(&#39;gulp-clean-css&#39;)const htmlMin = require(&#39;gulp-htmlmin&#39;)const liverload = require(&#39;gulp-livereload&#39;)const connect = require(&#39;gulp-connect&#39;)const open = require(&#39;open&#39;)//例如$.concat()</code></pre></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 打包工具 </tag>
            
            <tag> Gulp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>html基础</title>
      <link href="/2019/06/18/html%E5%9F%BA%E7%A1%80/"/>
      <url>/2019/06/18/html%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">HTML注释，注释忠的内容会被浏览器忽略，不会再网页中显示</span></span><br><span class="line"><span class="comment">但是可以在源码中查看注释，注释用来对代码进行解释说明</span></span><br><span class="line"><span class="comment"> 开发中养成良好的编写注释习惯，注释要求简单明了</span></span><br><span class="line"><span class="comment">--&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">注释不能嵌套</span></span><br><span class="line"><span class="comment">--&gt;</span> 这就已经结束了</span><br><span class="line">--&gt;最后一个会被孤立显示</span><br></pre></td></tr></table></figure><h2 id="文档声明"><a href="#文档声明" class="headerlink" title="文档声明"></a>文档声明</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">网页迭代版本：</span><br><span class="line">- html4</span><br><span class="line">- xhtml2.0</span><br><span class="line">- html5</span><br><span class="line">...</span><br><span class="line">文档声明（doctype）：</span><br><span class="line">- html5文档声明 </span><br><span class="line">- <span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span> -&gt; 不区分大小写，本身无任何意义单标记，告知浏览器当前网页版本。</span><br></pre></td></tr></table></figure><h2 id="进制"><a href="#进制" class="headerlink" title="进制"></a>进制</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">二进制（计算机底层进制）：</span><br><span class="line">- 特点：满2进1</span><br><span class="line">- 计数：0 1 10 11 100 101 110 111</span><br><span class="line">- 单位数字： 2个（0~1）</span><br><span class="line">八进制（很少使用）：</span><br><span class="line">- 特点：满8进1</span><br><span class="line">- 计数：0 1 2 3 4 5 6 7 10 11 12 ... 17 20 </span><br><span class="line">- 单位数字：8个（0~7）</span><br><span class="line">十进制（日常使用）：</span><br><span class="line">- 特点：满10进1</span><br><span class="line">- 计数：0 1 2 3 4 5 6 7 8 9 10 11 12 13 ... 19 20</span><br><span class="line">- 单位数字：10个 （0~9）</span><br><span class="line">十六进制(一般显示一个二进制数字时，转换为十六进制)：</span><br><span class="line">- 特点：满16进1</span><br><span class="line">- 计数：0 1 2 3 4 5 6 7 8 9 a b c d e f 10 11 12 ... 1a 1b 1c 1d 1e 1f 20...</span><br><span class="line">- 单位数字：16个（0-f）</span><br><span class="line">扩展：</span><br><span class="line">-所有数据在计算机底层都会以二进制形式保存内存想象为由多个小格子组成的容器，一个小格子，在内存中被称为1位（bit）。</span><br><span class="line"> -  8bit = 1byte（字节）</span><br><span class="line"> -  1024byte = 1kb（千字节）</span><br><span class="line">  -  1024kb = 1mb（兆）</span><br><span class="line"> -  1024mb = 1gb（吉字节）</span><br><span class="line"> -  1024gb = 1tb（特字节）</span><br><span class="line"> -  1024tp = 1pb</span><br></pre></td></tr></table></figure><h2 id="字符编码"><a href="#字符编码" class="headerlink" title="字符编码"></a>字符编码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">所有数据在计算机存储时都是以二进制形式存储的，文字也不例外。</span><br><span class="line">一段文字在存储到内存中时，都需要转换为二进制编码。</span><br><span class="line">当读取这段文字时，计算机会将编码转换为字符，供我们阅读。</span><br><span class="line">编码:</span><br><span class="line">- 将字符转换为二进制过程称为编码</span><br><span class="line">解码:</span><br><span class="line">- 将二进制码转换为字符的过程称为解码</span><br><span class="line">字符集:</span><br><span class="line">- 编码和解码采用的规则称为字符集</span><br><span class="line">乱码问题:</span><br><span class="line">- 如果编码和解码采用的字符集不同就会出现乱码问题</span><br><span class="line">常见的字符集:</span><br><span class="line">- ASCII</span><br><span class="line">- ISO88591</span><br><span class="line">- GB2312</span><br><span class="line">- GBK</span><br><span class="line">- UTF-8</span><br></pre></td></tr></table></figure><h2 id="meta"><a href="#meta" class="headerlink" title="meta"></a>meta</h2><p>meta标签设置网页的元数据 </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span> = <span class="string">&quot;UTF-8&quot;</span>&gt;</span> //解决编码乱码问题。</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span> = <span class="string">&quot;keywords&quot;</span> <span class="attr">content</span> = <span class="string">&quot;HTML5，前端，CSS3&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span> = <span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;网页描述&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">title</span> = <span class="string">&quot;搜索引擎所搜索到的标题例如京东（jd）&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span> = <span class="string">&quot;refresh&quot;</span> <span class="attr">content</span>=<span class="string">&quot;3;url = https://www.xxxx.com&quot;</span>&quot;&gt;</span></span><br><span class="line">主要用于设置网页中的元数据，不是给用户看的：</span><br><span class="line">- name -&gt; 指定数据名称</span><br><span class="line">- content-&gt; 指定数据内容</span><br><span class="line">- charset -&gt; 指定网页字符集</span><br><span class="line">- keywords -&gt;指定网站的关键字，同时指定多个关键字，关键字间逗号&quot;,&quot;隔开。</span><br><span class="line">- description -&gt; 用于指定网站的描述，网站的描述会显0示在搜索引擎搜索的结果中</span><br><span class="line">- title -&gt; 标签内容会作为搜索结果的超链接上的文字显示</span><br><span class="line">- http-equiv = &quot;refresh&quot; content = &quot;3;url = 网址&quot; -&gt; 重定向 数字3代表跳转时间</span><br></pre></td></tr></table></figure><h2 id="title"><a href="#title" class="headerlink" title="title"></a>title</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">title中的内容会显示在浏览器的标题栏，搜索引擎会主要根据title中标题来判断网页的主要内容。</span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span> 网页标题 <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在HTML中有些时候，不能直接书写特殊符号，比如：</span><br><span class="line">- &amp;nbsp：空格</span><br><span class="line">- <span class="symbol">&amp;gt;</span>大于号</span><br><span class="line">- <span class="symbol">&amp;lt;</span>小于号</span><br><span class="line">- <span class="symbol">&amp;copy;</span>版权符号</span><br></pre></td></tr></table></figure><p><a href="https://www.w3school.com.cn/html/html_entities.asp">W3Cschool更多转义符</a></p><h2 id="标题标签"><a href="#标题标签" class="headerlink" title="标题标签"></a>标题标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- 从 h1 到 h6 共有六级标题</span><br><span class="line">- h1 到 h6重要性递减，h1最重要，h6最不重要</span><br><span class="line">- h1在网页中的重要性仅次于title标签，一般情况下一个页面中只会有一个h1</span><br><span class="line">- h1到h3经常使用，h4到h6很少用</span><br><span class="line">- 在页面中独占一行的元素称为块元素(block element)</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span><span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span><span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br><span class="line">- 标题标签都是块元素</span><br><span class="line">· 可以将一组相关的标题同时放入到hgroup</span><br><span class="line"><span class="tag">&lt;<span class="name">hgroup</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hgroup</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="段落标签"><a href="#段落标签" class="headerlink" title="段落标签"></a>段落标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- p标签表示页面中的一个段落</span><br><span class="line">- p也是一个块元素</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">p标签中的内容表示一个段落</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="行内标签"><a href="#行内标签" class="headerlink" title="行内标签"></a>行内标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- em 标签表示语音语调的一个加重</span><br><span class="line">- 在页面中不会独占一行的元素称为行内元素（inline element）</span><br><span class="line">今天天气<span class="tag">&lt;<span class="name">em</span>&gt;</span>真<span class="tag">&lt;/<span class="name">em</span>&gt;</span>不错！</span><br><span class="line">- strong 表示强调，重要内容！</span><br><span class="line">今天必须完成<span class="tag">&lt;<span class="name">strong</span>&gt;</span>XXX<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="引用标签"><a href="#引用标签" class="headerlink" title="引用标签"></a>引用标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- blockquote 表示一个长引用 -&gt; 块元素</span><br><span class="line">XXX说：</span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span>&gt;</span></span><br><span class="line">    XXXXXXX！</span><br><span class="line"><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"></span><br><span class="line">- q表示一个短引用 -&gt; 行元素</span><br><span class="line">子曰：<span class="tag">&lt;<span class="name">q</span>&gt;</span>学而时习之不亦乐乎<span class="tag">&lt;/<span class="name">q</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="换行标签"><a href="#换行标签" class="headerlink" title="换行标签"></a>换行标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- br 标签 表示页面中的换行</span><br><span class="line">今天天气<span class="tag">&lt;<span class="name">br</span>&gt;</span>真不错</span><br></pre></td></tr></table></figure><h2 id="行内元素和块元素定义"><a href="#行内元素和块元素定义" class="headerlink" title="行内元素和块元素定义"></a>行内元素和块元素定义</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">块元素（block element）：</span><br><span class="line">- 网页中一般通过块元素来对网页布局</span><br><span class="line">行内元素（inline element）：</span><br><span class="line">- 行内元素主要用来包裹文字</span><br><span class="line">注：</span><br><span class="line">- 一般情况下会在块元素中放行内元素，不会再行内元素中放块元素</span><br><span class="line">- 块元素中基本都能放</span><br><span class="line">- p元素中不能放任何块元素</span><br></pre></td></tr></table></figure><h2 id="书写注意"><a href="#书写注意" class="headerlink" title="书写注意"></a>书写注意</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">浏览器在解析网页时，会自动对网页中不符合规范的内容进行修正：</span><br><span class="line">比如：</span><br><span class="line">- 标签写在根元素外部</span><br><span class="line">- p元素中嵌套了元素</span><br><span class="line">- 根元素中除head和body以外的子元素</span><br><span class="line">- ....</span><br></pre></td></tr></table></figure><h2 id="布局标签"><a href="#布局标签" class="headerlink" title="布局标签"></a>布局标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">结构语义化标签：</span><br><span class="line">- header -&gt; 网页的头部</span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">- main -&gt; 网页的主体部分（一个网页中只会有一个main）</span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">- footer -&gt; 网页的底部</span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">- nav -&gt; 网页中的导航</span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">- aside -&gt; 主体相关的其他内容（侧边栏）</span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span><span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">- article -&gt; 表示独立的文章</span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">- section -&gt; 表示一个独立的区块，上面的标签不能表示时使用section</span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">- div -&gt; 没有语义，就用来表示一个区块，目前div是主要的布局元素</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">- span -&gt; 行内元素，没有任何语义，一般用于在网页中选中文字</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">有序列表、无序列表、定义列表：</span><br><span class="line">- 使用li表示列表项</span><br><span class="line">无序列表:使用ul标签创建无序列表</span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>结构<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>表现<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>行为<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">有序列表：使用ol创建有序列表</span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>结构<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>表现<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>行为<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">定义列表：使用dl标签创建一个定义列表，</span><br><span class="line">使用dt来表示定义内容，</span><br><span class="line">使用dd对内容进行解释说明</span><br><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>结构<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>结构表示网页的结构，结构用来规定网页中那里是标题，那里是段落<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">注：</span><br><span class="line">- 列表之间可以相互嵌套</span><br></pre></td></tr></table></figure><h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">超链接可以让我们从一个页面跳转到到其他页面，后者是当前页面的其他位置。</span><br><span class="line">- 使用 a 标签来定义超链接</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">&quot;https://www.baidu.com&quot;</span>&gt;</span>超链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span>  </span><br><span class="line">· https://www.baiud.com -&gt; 代表绝对路径</span><br><span class="line">- 超链接是行内元素 在 a 标签中可以嵌套任何的元素 除了它自身外的任何元素</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;01.目标.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_self&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">href属性：</span><br><span class="line">- 指定跳转目标路径</span><br><span class="line">- 值可以是一个外部网站地址</span><br><span class="line">- 也可以写内部页面地址</span><br><span class="line">target属性：</span><br><span class="line">- 用来指定超链接打开的位置</span><br><span class="line">- 可选值：</span><br><span class="line">· _self 默认值在当前页面打开超链接</span><br><span class="line">· _blank 在一个新的页面中打开超链接</span><br><span class="line">相对路径： </span><br><span class="line">- 都会使用./或../开头 ./可以省略不写 ./ ../相当于写了./</span><br><span class="line">- ./ 表示当前所在文件所在的目录</span><br><span class="line">- ./ 就等于01.相对路径.html 所在目录 path</span><br><span class="line">- ../ 当前文件所在目录的上一级目录</span><br><span class="line">- ./inner/target.html</span><br><span class="line">- ../outer/target.html</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>超链接href属性设置为#，这样点击超链接后页面不会发生跳转，而是转到当前页面顶部的位置。</span><br><span class="line">锚点：</span><br><span class="line">id属性：</span><br><span class="line">- 唯一不重复</span><br><span class="line">- 每一个标签都可以添加一个id属性</span><br><span class="line">- id属性就是元素的唯一标识，同一个页面中不能出现重复的id属性</span><br><span class="line">- id的值区分大小写 字母开头</span><br><span class="line">- 可以跳转到页面指定位置 将href属性设置 #目标元素id属性值标</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;bottom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#bottom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">没有任何功能的超链接：</span><br><span class="line">- javascript:是表示在触发<span class="tag">&lt;<span class="name">a</span>&gt;</span>默认动作时，执行一段JavaScript代码，而 javascript:; 表示什么都不执行，这样点击<span class="tag">&lt;<span class="name">a</span>&gt;</span>时就没有任何反应。</span><br><span class="line">- href=&quot;javascript:;&quot;就是去掉a标签的默认行为，跟href=&quot;javascript:void(0)&quot;一样。</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>啥也不做<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="图片标签"><a href="#图片标签" class="headerlink" title="图片标签"></a>图片标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">图片标签用于向当前页面中引入一张图片：</span><br><span class="line">- img标签是一个自结束标签</span><br><span class="line">- img元素属于替换元素（基于块和行内元素之间,具有两种元素的特点）</span><br><span class="line">属性：</span><br><span class="line">- src 指定外部图片路径 路径规则和超链接相同</span><br><span class="line">相对路径</span><br><span class="line">绝对路径</span><br><span class="line">- alt 图片描述，默认情况下不会显示，浏览器会在图片无法加载时显示</span><br><span class="line">搜索引擎会根据alt中的内容来识别图片,如果不写则图片不会被搜索引擎所识别</span><br><span class="line">- with   图片宽度 (单位是像素)</span><br><span class="line">- height 图片高度 (单位是像素)</span><br><span class="line">· 如果只修改一个，另一个会进行等比例缩放。</span><br><span class="line">· 注意：一般情况下pc端，不建议修改图片的大小，要多大裁多大。</span><br><span class="line">移动端，经常需要对图片进行缩放。（经常会大图缩小）</span><br><span class="line">- title 鼠标进入图片区出现黄框进行文字提示</span><br><span class="line">图片格式（常）：</span><br><span class="line">- jpeg(jpg) </span><br><span class="line">· 颜色丰富，不支持透明效果，不支持动图</span><br><span class="line">· 一般用来显示照片</span><br><span class="line">- gif</span><br><span class="line">· 颜色较少，支持简单透明，支持动图</span><br><span class="line">· 适合颜色单一图片，动图</span><br><span class="line">- png</span><br><span class="line">· 颜色丰富，支持复杂透明，不支持动图</span><br><span class="line">· 颜色丰富，复杂透明图片（专为网页而生）</span><br><span class="line">- webp</span><br><span class="line">· 谷歌新推出用来显示网页中图片的一种格式</span><br><span class="line">· 具备其他图片格式的所有优点，而且文件还特别小</span><br><span class="line">· 缺点：兼容性不好</span><br><span class="line">- base64</span><br><span class="line">· 将图片使用base64进行编码，这样可以将图片转换为字符，通过字符形式来引入图片</span><br><span class="line">· 一般都是一些需要和网页一起加载的图片才会使用base64</span><br><span class="line">效果一样，用小的</span><br><span class="line">效果不一样，用效果好的</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./img/1.jpg&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;data:image/jpeg:base64xxxxxxxxx&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="HTML网站历史"><a href="#HTML网站历史" class="headerlink" title="HTML网站历史"></a>HTML网站历史</h2><table><thead><tr><th>HTML5：HTML4.01升级版，大前端技术，泛指前端的所有技术</th></tr></thead><tbody><tr><td>HTML4.01在99年12发布XHTML1.0在2000年1月发布，语法更严谨</td></tr></tbody></table><span id="more"></span><h2 id="Lang属性"><a href="#Lang属性" class="headerlink" title="Lang属性"></a>Lang属性</h2><p><strong>lang = cn（英文） 或者 是zh-CN代表中文</strong></p><p>那么究竟html标签中的<strong>lang属性是干嘛的呢</strong>？为什么要指定它的值是”en”或者”zh-CN”呢？个人见解如下：</p><p>1.属性lang是英语language的缩写，意思是语言，”en”代表英语，”zh-CN”代表中文</p><p>2.在我自己的尝试下，发现，其实不写lang属性，整个HTML文档的显示是没有任何问题的</p><p>3.我们都知道，如果你在中国，本地浏览器的默认语言是中文，当我们打开一个外国网站时，浏览器会提示”是否将网页内容翻译成中文”</p><hr><h4 id="web与Internet"><a href="#web与Internet" class="headerlink" title="web与Internet"></a>web与Internet</h4><table><thead><tr><th>web与Internet</th><th></th></tr></thead><tbody><tr><td>Internet：</td><td>全球性计算机互联网络</td></tr><tr><td></td><td>俗称：互联网，因特网，交换网，交际网</td></tr><tr><td></td><td>www服务：world wide web（万维网），访问网站的服务</td></tr><tr><td>BBS：</td><td>电子公告版，俗称论坛</td></tr><tr><td>Email:</td><td>电子邮件</td></tr><tr><td>telnet:</td><td>远程登录</td></tr><tr><td>FTP:</td><td>文件的上传下载</td></tr></tbody></table><h4 id="internet上的应用程序"><a href="#internet上的应用程序" class="headerlink" title="internet上的应用程序"></a>internet上的应用程序</h4><table><thead><tr><th>C/S client 客户端/ server 服务器<br />B/S Browser 浏览器 / server 服务器</th></tr></thead><tbody><tr><td>C/S和B/S的区别C/S需要升级  <br />B/S不需要升级我们工作主要是B/S</td></tr></tbody></table><h4 id="web运行原理"><a href="#web运行原理" class="headerlink" title="web运行原理"></a>web运行原理</h4><p><a href="https://imgchr.com/i/Afjw8A"><img src="https://s2.ax1x.com/2019/04/07/Afjw8A.jpg" alt="Afjw8A.jpg"></a></p><table><thead><tr><th>web:运行在internet上一种B/S结构的应用程序，俗称网站Internet：为web提供网络环境web的工作原理：基于浏览器和服务器继续通信协议来实现数据的传输和展示</th></tr></thead><tbody><tr><td>通信协议：规范了数据和打包和传送的</td></tr><tr><td>服务器：1.功能  存储数据，接收用户的请求并给出响应、  提供了程序的运行环境  具备一定的安全功能2.服务器产品  tomcat(java)  Apache(php)  IIS(.net)3.服务器端的技术 PHP/JAVA/.NET/python/nodejs</td></tr><tr><td>浏览器1.功能  代表用户发送请求  作为HTML、css和js解析器  以图形化的解码展示给用户2.浏览器产品  Chrome  FireFox  IE–edge  Oprea  Safari     3.浏览器支持的技术  H5,CSS,JS</td></tr></tbody></table><h2 id="HTML基础入门"><a href="#HTML基础入门" class="headerlink" title="HTML基础入门"></a>HTML基础入门</h2><h4 id="什么是HTML"><a href="#什么是HTML" class="headerlink" title="什么是HTML"></a>什么是HTML</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HTML:HyperText Markup Language 超文本标记语言</span><br><span class="line">a 普通文本</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>超文本标记</span><br><span class="line">标记：超文本的组成形式 &lt;关键字&gt;</span><br><span class="line">具有自己的功能</span><br><span class="line">语言：有语法结构</span><br></pre></td></tr></table></figure><h4 id="HTML的特点"><a href="#HTML的特点" class="headerlink" title="HTML的特点"></a>HTML的特点</h4><ol><li>以.html或.htm为后缀</li><li>由浏览解析执行</li><li>用带有尖括号的”标记”来标识</li><li>可以在网页中执行js脚本</li></ol><h2 id="HTML的基础语法"><a href="#HTML的基础语法" class="headerlink" title="HTML的基础语法"></a>HTML的基础语法</h2><ol><li>标记，标签，元素，节点，对象</li><li>主要是表示特殊的功能</li><li>标记在使用的时候，必须使用&lt;&gt;包裹起来</li></ol><h4 id="标签的分类"><a href="#标签的分类" class="headerlink" title="标签的分类"></a>标签的分类</h4><ol><li>双标记(封闭类型)</li></ol><p>​         &lt;关键字&gt;&lt;/关键字&gt;</p><pre><code> 双标记必须成对出现，有开始就有结束  &lt;p&gt;&lt;/p&gt;</code></pre><ol start="2"><li><p>单标记(非封闭类型)</p><pre><code>   &lt;关键字&gt;或者&lt;关键字/&gt;</code></pre></li></ol><h4 id="标签的嵌套"><a href="#标签的嵌套" class="headerlink" title="标签的嵌套"></a>标签的嵌套</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.什么是嵌套</span><br><span class="line">一对标记中出现另一个(对)标记，形成了层级。</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">2.语法</span><br><span class="line">&lt;关键字1&gt;</span><br><span class="line">  &lt;关键字2&gt;</span><br><span class="line">    &lt;关键字3&gt;&lt;/关键字3&gt;</span><br><span class="line">  &lt;/关键字2&gt;</span><br><span class="line">&lt;/关键字1&gt;</span><br></pre></td></tr></table></figure><h4 id="属性和值"><a href="#属性和值" class="headerlink" title="属性和值"></a>属性和值</h4><p>允许通过<strong>属性</strong>和<strong>值</strong>对标记进行<strong>修饰</strong></p><p>语法：</p><ul><li>属性和值必须声明在开始标记中<ul><li>&lt;关键字 属性=”值”&gt;&lt;/关键字&gt;</li></ul></li><li>多个属性之间用空格分开<ul><li>&lt;关键字 属性1=”值1”  属性2=”值2”  …&gt;&lt;/关键字&gt;</li></ul></li><li>标准属性(通用属性)<ul><li>所有的元素都支持的属性</li><li>id 定义此元素在页面中的唯一标识</li><li>title 鼠标悬停在元素上时，显示的文本</li><li>style css中，定义行内样式</li><li>class css 中，引用类选择器</li></ul></li></ul><h4 id="注释-1"><a href="#注释-1" class="headerlink" title="注释"></a>注释</h4><p>​    语法：<code>&lt;!--注释内容--&gt;</code></p><p>​    注意：注释不能嵌套注释，注释也不能出现在标记中</p><h2 id="HTML的文档结构"><a href="#HTML的文档结构" class="headerlink" title="HTML的文档结构"></a>HTML的文档结构</h2><h4 id="文档类型的声明"><a href="#文档类型的声明" class="headerlink" title="文档类型的声明"></a>文档类型的声明</h4><p>&lt; !DOCTYPE html&gt;告诉浏览器，我这篇html使用h5的规则解析</p><h4 id="网页的结构"><a href="#网页的结构" class="headerlink" title="网页的结构"></a>网页的结构</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span>表示网页的开头和结束</span><br><span class="line">在html中包含两个标签</span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span> 网页的头部，定义全局的信息</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span> 网页的主题，展示的内容</span><br></pre></td></tr></table></figure><h4 id="head元素是其他头元素的容器"><a href="#head元素是其他头元素的容器" class="headerlink" title="head元素是其他头元素的容器"></a>head元素是其他头元素的容器</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span>  网页的标题</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span>/&gt;</span> 元数据，定义网页的全局信息</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">chrome 62以上的版本，自动识别中文</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;Keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;关键词的内容&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;描述的内容&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-xml">定义网页的内部样式</span></span></span><br><span class="line"><span class="language-xml"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>定义或者引用js文件</span></span></span><br><span class="line"><span class="language-xml"><span class="language-xml"><span class="tag">&lt;<span class="name">link</span>/&gt;</span> 引用外部样式文件</span></span></span><br><span class="line"><span class="language-xml"><span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=deivce-width,user-scalable=no,initial-scale=1.0,maximum-scale-1.0,minimum-scale=1.0&quot;</span>&gt;</span>移动端视口</span></span></span><br></pre></td></tr></table></figure><h4 id="body元素"><a href="#body元素" class="headerlink" title="body元素"></a>body元素</h4><ol><li>定义网页的主体</li><li>body的属性</li><li>bgcolor 背景颜色</li><li>text   字体颜色</li><li>取值：颜色的应为单词</li></ol><h4 id="head元素"><a href="#head元素" class="headerlink" title="head元素"></a>head元素</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>标签，包含HTML文档元信息，定义文档头部，描述文档的属性和信息，是所有文档头部元素的容器。</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">包括：<span class="tag">&lt;<span class="name">title</span>&gt;</span>、<span class="tag">&lt;<span class="name">base</span>&gt;</span>、<span class="tag">&lt;<span class="name">link</span>&gt;</span>、<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml">、<span class="tag">&lt;<span class="name">style</span>&gt;</span>等。</span></span></span><br></pre></td></tr></table></figure><h5 id="lt-title-gt-标签，定义文档的标题，这个标题会显示在浏览器的标题栏或状态栏中。"><a href="#lt-title-gt-标签，定义文档的标题，这个标题会显示在浏览器的标题栏或状态栏中。" class="headerlink" title="&lt; title&gt;标签，定义文档的标题，这个标题会显示在浏览器的标题栏或状态栏中。"></a>&lt; title&gt;标签，定义文档的标题，这个标题会显示在浏览器的标题栏或状态栏中。</h5><h5 id="lt-base-gt-标签单标签，规定网页上所有链接的默认地址或目标。它有两个属性："><a href="#lt-base-gt-标签单标签，规定网页上所有链接的默认地址或目标。它有两个属性：" class="headerlink" title="&lt; base&gt;标签单标签，规定网页上所有链接的默认地址或目标。它有两个属性："></a>&lt; base&gt;标签单标签，规定网页上所有链接的默认地址或目标。它有两个属性：</h5><ul><li>href：必选属性，规定页面所有相对链接的基准URL。</li><li>target：可选属性，规定在何处打开页面中所有的链接。</li></ul><p>以下语句设置网页上所有链接的默认地址为搜狐网站，且在新窗口中打开：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">&quot;http://www.sohu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="lt-meta-gt-标签，单标签，规定有关页面的元信息。常用属性包括："><a href="#lt-meta-gt-标签，单标签，规定有关页面的元信息。常用属性包括：" class="headerlink" title="&lt; meta&gt;标签，单标签，规定有关页面的元信息。常用属性包括："></a>&lt; meta&gt;标签，单标签，规定有关页面的元信息。常用属性包括：</h5><ul><li>content：必选属性，定义与http-equiv 或 name 属性相关的元信息。</li><li>http-equiv：可选属性，用于将content 属性关联到 HTTP 头部。</li><li>name：可选属性，用于将content属性关联到一个名称。</li></ul><p>以下语句定义文档的字符编码为utf-8：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>以下语句定义文档的作者为miao：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">“author”</span> <span class="attr">content</span>=<span class="string">&quot;miao&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>以下语句定义文档的关键字为HTML、CSS、JavaScript：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;HTML,CSS,JavaScript&quot;</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>以下语句定义每隔5秒刷新一次页面</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;refresh&quot;</span> <span class="attr">content</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="lt-link-gt-标签，它是一个链接标签，提供对外部CSS文件以及favicon、icon图标引用等。"><a href="#lt-link-gt-标签，它是一个链接标签，提供对外部CSS文件以及favicon、icon图标引用等。" class="headerlink" title="&lt; link&gt;标签，它是一个链接标签，提供对外部CSS文件以及favicon、icon图标引用等。"></a>&lt; link&gt;标签，它是一个链接标签，提供对外部CSS文件以及favicon、icon图标引用等。</h5><h5 id="lt-script-gt-标签，用于引入外部js文件包含JavaScript脚本。"><a href="#lt-script-gt-标签，用于引入外部js文件包含JavaScript脚本。" class="headerlink" title="&lt; script&gt;标签，用于引入外部js文件包含JavaScript脚本。"></a>&lt; script&gt;标签，用于引入外部js文件包含JavaScript脚本。</h5><h5 id="lt-style-gt-标签，用于网页CSS样式"><a href="#lt-style-gt-标签，用于网页CSS样式" class="headerlink" title="&lt; style&gt;标签，用于网页CSS样式"></a>&lt; style&gt;标签，用于网页CSS样式</h5><p><strong>网页标题前面的小图标一般是网页的logo</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;shortcut icon&quot; href=&quot;img地址&quot;&gt;</span><br></pre></td></tr></table></figure><p>那么究竟html标签中的<strong>lang属性是干嘛的呢</strong>？为什么要指定它的值是”en”或者”zh-CN”呢？个人见解如下：</p><p>1.属性lang是英语language的缩写，意思是语言，”en”代表英语，”zh-CN”代表中文</p><p>2.在我自己的尝试下，发现，其实不写lang属性，整个HTML文档的显示是没有任何问题的</p><p>3.我们都知道，如果你在中国，本地浏览器的默认语言是中文，当我们打开一个外国网站时，浏览器会提示”是否将网页内容翻译成中文”</p><h2 id="文本标记"><a href="#文本标记" class="headerlink" title="文本标记"></a>文本标记</h2><h4 id="标题元素"><a href="#标题元素" class="headerlink" title="标题元素"></a>标题元素</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">作用：在页面中以醒目的方式显示文本</span><br><span class="line">语法 <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span>一级标题  <span class="tag">&lt;<span class="name">hn</span>&gt;</span><span class="tag">&lt;/<span class="name">hn</span>&gt;</span> n:1~6</span><br><span class="line">      ...</span><br><span class="line">     <span class="tag">&lt;<span class="name">h6</span>&gt;</span><span class="tag">&lt;/<span class="name">h6</span>&gt;</span>六级标题</span><br><span class="line">特点：</span><br><span class="line">1.文本加粗</span><br><span class="line">2.字号发生变化</span><br><span class="line">3.独占一行，上下有垂直间距</span><br><span class="line">属性align 设置标签内容水平方向对齐方式</span><br><span class="line">取值：left/center/right </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="段落标记paragraph"><a href="#段落标记paragraph" class="headerlink" title="段落标记paragraph"></a>段落标记paragraph</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">作用：突出的表示一段文字</span><br><span class="line">特点：独立成行，上下有垂直的间距</span><br><span class="line">属性：align</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="换行标记"><a href="#换行标记" class="headerlink" title="换行标记"></a>换行标记</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span>或者<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="水平线"><a href="#水平线" class="headerlink" title="水平线"></a>水平线</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span>或者<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">width=&quot;50%&quot; 表示水平线的宽度，取值为%或者px为单位的数字</span><br><span class="line">size=&quot;5px&quot; 表示水平线的尺寸(粗细)，取值为%或者px为单位的数字</span><br><span class="line">align=&quot;left&quot; 对齐方式</span><br><span class="line">color=&quot;red&quot; 设置水平线的颜色</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="预格式化标签"><a href="#预格式化标签" class="headerlink" title="预格式化标签"></a>预格式化标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line">标签内部的文本，保留其格式，在页面上显示</span><br><span class="line">空格折叠现象，一个或多个空格，会被浏览器渲染成一个空格显示</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="特殊字符-实体"><a href="#特殊字符-实体" class="headerlink" title="特殊字符(实体)"></a>特殊字符(实体)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">空格   &amp;nbsp；</span><br><span class="line">&lt;     &amp;lt;   </span><br><span class="line">&gt;     &amp;gt; </span><br><span class="line">©    &amp;copy；   </span><br><span class="line">®    &amp;reg;</span><br><span class="line">￥    &amp;yen;</span><br><span class="line">x     &amp;times;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="文本样式"><a href="#文本样式" class="headerlink" title="文本样式"></a>文本样式</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">粗体   <span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span>   <span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">斜体   <span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>     <span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">下划线 <span class="tag">&lt;<span class="name">u</span>&gt;</span><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span><br><span class="line">删除线 <span class="tag">&lt;<span class="name">s</span>&gt;</span><span class="tag">&lt;/<span class="name">s</span>&gt;</span>    <span class="tag">&lt;<span class="name">del</span>&gt;</span> <span class="tag">&lt;/<span class="name">del</span>&gt;</span> 语意</span><br><span class="line">上标  <span class="tag">&lt;<span class="name">sup</span>&gt;</span><span class="tag">&lt;/<span class="name">sup</span>&gt;</span></span><br><span class="line">下标  <span class="tag">&lt;<span class="name">sub</span>&gt;</span><span class="tag">&lt;/<span class="name">sub</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="区块元素"><a href="#区块元素" class="headerlink" title="区块元素"></a>区块元素</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.块分区，用于页面中布局</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">独立成行</span><br><span class="line">2.行分区，处理同一行文本的不同样式</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">可以与其它的span和文字共用一行</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="行级元素和块级元素（元素的显示形式）"><a href="#行级元素和块级元素（元素的显示形式）" class="headerlink" title="行级元素和块级元素（元素的显示形式）"></a>行级元素和块级元素（元素的显示形式）</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1.块级元素</span><br><span class="line">在网页中，单独成行，就是块级元素</span><br><span class="line">从上往下排列</span><br><span class="line">常见块级元素：</span><br><span class="line">    h1~h6</span><br><span class="line">    p</span><br><span class="line">    div</span><br><span class="line">2.行内元素(行级元素)</span><br><span class="line">在页面中，与其他行内元素/行内块共用一行</span><br><span class="line">从左往右排列</span><br><span class="line">页面中常见行内元素：</span><br><span class="line">i em b strong u sup sub span</span><br><span class="line">3.行内块元素</span><br><span class="line">显示的方式与行内元素相同，但是具备块级元素的特征</span><br><span class="line">4.table</span><br><span class="line">表格的宽高是由表格的内容决定的</span><br><span class="line">内容多，就宽一些，高一些，</span><br><span class="line">表格中所的数据都预读到内存，一次性画到页面上</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="图像和超链接"><a href="#图像和超链接" class="headerlink" title="图像和超链接"></a>图像和超链接</h2><h4 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">1、使用</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span>&gt;</span>或者<span class="tag">&lt;<span class="name">img</span>/&gt;</span></span><br><span class="line">属性</span><br><span class="line">src=&quot;url&quot;  url--图片资源路径</span><br><span class="line">2、URL</span><br><span class="line">Uniform Resource Locator 统一资源定位符  简称：路径</span><br><span class="line">3、URL路径的表现形式：</span><br><span class="line">1.绝对路径，一个写完整的路径</span><br><span class="line">通信协议+主机地址+文件目录结构+文件的具体名称</span><br><span class="line">合适使用：</span><br><span class="line">             1.1使用网络资源的时候，使用绝对路径</span><br><span class="line">               优点：不占据自己服务器的存储空间</span><br><span class="line">               缺点：不稳定</span><br><span class="line">             1.2使用本地资源，使用绝对路径(项目中100%用不到)</span><br><span class="line">               从最高盘符开始查找 C/D/E/F/G</span><br><span class="line">               项目中不用</span><br><span class="line"> 2.相对路径（参照物是html本身）</span><br><span class="line"> 2.1在同一个目录下（兄弟关系）,直接引用</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;image/01.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">2.2子集目录，文件在兄弟文件夹的内部，先找兄弟，再找兄弟的孩子</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;image/02.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">2.3父级目录，文件是父级的兄弟，先找父亲（../），再找父亲的兄弟</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../03.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    图片与html文件在同一个目录下，src直接引用图片名称</span><br><span class="line">      src=&quot;3.jpg&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><h5 id="1-语法"><a href="#1-语法" class="headerlink" title="1.语法"></a>1.语法</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.tmooc.cn/&quot;</span>&gt;</span>Tmooc<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">属性：</span><br><span class="line">    href:链接的路径</span><br><span class="line">    target:指定打开链接的方式</span><br><span class="line">    取值：_self默认值，在当前页面标签页中打开新链接</span><br><span class="line">    _blank 在新的标签页打开链接</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-其他的表现形式"><a href="#2-其他的表现形式" class="headerlink" title="2.其他的表现形式"></a>2.其他的表现形式</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--a标记的其他表现形式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;1.zip&quot;</span>&gt;</span>下载<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 新建邮件，前提：本机必须有邮件软件的客户端 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:1148567490@qq.com&quot;</span>&gt;</span>新建邮件<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 执行js脚本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(1111111)&quot;</span>&gt;</span>执行js<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--返回当前页面的顶部--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>返回顶部<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-锚点"><a href="#3-锚点" class="headerlink" title="3.锚点"></a>3.锚点</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">锚点就是网页中的一个记号</span><br><span class="line">3.1定义锚点</span><br><span class="line">（1）使用a标签name属性定义锚点</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;锚点名称&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">any</span> <span class="attr">id</span>=<span class="string">&quot;id&quot;</span>&gt;</span>  <span class="tag">&lt;/<span class="name">any</span>&gt;</span></span><br><span class="line">3.2链接到锚点</span><br><span class="line">（1）使用a标签链接锚点，#锚点名称</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#锚点名称&quot;</span>&gt;</span>回到锚点<span class="tag">&lt;/<span class="name">a</span>&gt;</span>  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#id&quot;</span>&gt;</span>回到锚点<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><h4 id="表格语法"><a href="#表格语法" class="headerlink" title="表格语法"></a>表格语法</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="表格属性"><a href="#表格属性" class="headerlink" title="表格属性"></a>表格属性</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">table标签的属性：</span><br><span class="line">border：设置边框</span><br><span class="line">width:设置表格的宽</span><br><span class="line">height:设置表格的高</span><br><span class="line">内容小于宽高的，按宽高尺寸</span><br><span class="line">内容大于宽高，按内容改变尺寸</span><br><span class="line">align：设置表格的对齐方式 （table自己的水平）</span><br><span class="line">取值：left/center/right</span><br><span class="line">bgcolor:背景颜色</span><br><span class="line">cellpadding:设置单元格内边距（边框到内容的距离）</span><br><span class="line">cellspacing：设置单元格外边距(边框与边框之间的距离)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="tr属性"><a href="#tr属性" class="headerlink" title="tr属性"></a>tr属性</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">align设置当前行的内容水平对齐方式（设置表格内容的对齐方式）</span><br><span class="line">valign设置当前行内容的垂直对齐方式</span><br><span class="line">取值：top/middle/bottom</span><br><span class="line">bgcolor当前行的背景颜色</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="td属性"><a href="#td属性" class="headerlink" title="td属性"></a>td属性</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">width宽度</span><br><span class="line">height高度</span><br><span class="line">align水平对齐方式</span><br><span class="line">valign垂直对齐方式</span><br><span class="line">bgcolor背景颜色</span><br><span class="line">colspan列合并</span><br><span class="line">rowspan行合并</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="不规则的表格运用"><a href="#不规则的表格运用" class="headerlink" title="不规则的表格运用"></a>不规则的表格运用</h4><h5 id="跨列"><a href="#跨列" class="headerlink" title="跨列"></a>跨列</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">colspan=?</span><br><span class="line">从指定的单元格位置开始，横向向右合并两个单元格（包含自己）</span><br><span class="line">被合并掉的单元格，要删除</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="跨行"><a href="#跨行" class="headerlink" title="跨行"></a>跨行</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rowspan=?</span><br><span class="line">从指定的单元格位置处开始，纵向向下合并？个单元格（包括自己）</span><br><span class="line">被合并掉的单元格，要删除</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="table中的可选标记"><a href="#table中的可选标记" class="headerlink" title="table中的可选标记"></a>table中的可选标记</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.表格的标题</span><br><span class="line"><span class="tag">&lt;<span class="name">caption</span>&gt;</span><span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">如果设置标题，必须将<span class="tag">&lt;<span class="name">caption</span>&gt;</span>放在<span class="tag">&lt;<span class="name">table</span>&gt;</span>之后</span><br><span class="line">2.行/列的标题</span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span> 代替<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">加粗，居中</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="表格的复杂应用"><a href="#表格的复杂应用" class="headerlink" title="表格的复杂应用"></a>表格的复杂应用</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.行分组</span><br><span class="line">    可以将连续几个行，划分到一个组中，进行统一管理</span><br><span class="line">    表头行<span class="tag">&lt;<span class="name">thead</span>&gt;</span><span class="tag">&lt;/<span class="name">thead</span>&gt;</span> 表格最上面一行的标题放在thead中</span><br><span class="line">    表主体<span class="tag">&lt;<span class="name">tbody</span>&gt;</span><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span>允许将若干行放在tbody中进行统一管理</span><br><span class="line">    表尾<span class="tag">&lt;<span class="name">tfoot</span>&gt;</span><span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span>表格中最后一行放在tfoot中</span><br><span class="line">2.表格的嵌套</span><br><span class="line">一张表格中，所有的嵌套的表格，只能放在td中</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="列表-1"><a href="#列表-1" class="headerlink" title="列表"></a>列表</h2><ul><li>默认按照从上到下的顺序来显示数据，并且可以在数据前添加标识</li><li>使用列表布局（去掉标识，从上到下，从左到右排列）</li></ul><h4 id="列表的组成"><a href="#列表的组成" class="headerlink" title="列表的组成"></a>列表的组成</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.有序列表<span class="tag">&lt;<span class="name">ol</span>&gt;</span><span class="tag">&lt;/<span class="name">ol</span>&gt;</span>  order list</span><br><span class="line">2.无序列表<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>  unorder list</span><br><span class="line">列表项   <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>  list item</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="列表属性"><a href="#列表属性" class="headerlink" title="列表属性"></a>列表属性</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1.有序列表的属性 ol</span><br><span class="line">    type 设置标识符的类型</span><br><span class="line">    取值：1默认值，数字</span><br><span class="line">    a  A  字母为标识</span><br><span class="line">    i   I 罗马数字</span><br><span class="line">    start 指定起始编号</span><br><span class="line">    取值：无单位数字</span><br><span class="line">2.无序列表的属性 ul</span><br><span class="line">    type：设置标识</span><br><span class="line">    取值：disc 默认值实心圆</span><br><span class="line">    square方块</span><br><span class="line">    circle空心圆</span><br><span class="line">    none无</span><br><span class="line">3.列表的嵌套</span><br><span class="line">所有的嵌套必须只能写在li中</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="列表作用"><a href="#列表作用" class="headerlink" title="列表作用"></a>列表作用</h4><p>​    做名词解释用常用于图文混排</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>需要被解释说明的名词<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>对名词的解释内容<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="结构标记"><a href="#结构标记" class="headerlink" title="结构标记"></a>结构标记</h2><h4 id="结构标签的作用【注：h5新增】"><a href="#结构标签的作用【注：h5新增】" class="headerlink" title="结构标签的作用【注：h5新增】"></a>结构标签的作用【注：h5新增】</h4><p>​    用于代替了div，用于描述整个网页的结构，提升标记的语义</p><h4 id="常用的结构标记"><a href="#常用的结构标记" class="headerlink" title="常用的结构标记"></a>常用的结构标记</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">定义网页或者某个区域的头部内容</span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">定义网页的导航链接部分</span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">定义网页的主体</span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span><span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">定义网页的侧边栏</span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">定义网页底部内容，多用于版权，解释说明，备案号</span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">定义与文字相关的内容</span><br><span class="line">论坛，帖子，微博条目，用户评论</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><ul><li>提供可视化的输入控件</li></ul><p>收集用户填写的信息并提交给服务器</p><h4 id="表单的组成部分"><a href="#表单的组成部分" class="headerlink" title="表单的组成部分"></a>表单的组成部分</h4><ul><li>前端部分<ul><li>提供表单的控件，与用户做交互的可视化控件</li></ul></li><li>后端部分<br>​        对提交的数据进行处理（接口）</li></ul><h4 id="表单属性"><a href="#表单属性" class="headerlink" title="表单属性"></a>表单属性</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">属性：</span><br><span class="line">1.action</span><br><span class="line">        定义表单被提交时发送的动作</span><br><span class="line">        通常是定义服务器处理数据的地址，接口（url）</span><br><span class="line">        默认，提交给本页地址</span><br><span class="line">2.method</span><br><span class="line">        指定表单数据提交的方式（方法）</span><br><span class="line">        1.get（默认值）</span><br><span class="line">        明文提交，提交时内容会显示在浏览器地址栏上。</span><br><span class="line">        提交的数据有大小限制，2kb</span><br><span class="line">        向服务器要数据的时候使用get</span><br><span class="line">        2.post</span><br><span class="line">        提交数据无大小限制</span><br><span class="line">        隐式提交，提交的数据不会显示在地址栏中</span><br><span class="line">        把数据传递给服务器的时候，使用post</span><br><span class="line">        3.delete</span><br><span class="line"></span><br><span class="line">        4.put——往服务器放一些东西</span><br><span class="line"></span><br><span class="line">        5.point</span><br><span class="line">3.enctype 编码方式</span><br><span class="line">        设置表单允许将什么样得数据提交给服务器</span><br><span class="line">        1.提交普通字符，不能有特殊符号</span><br><span class="line">        enctype=&quot;text/plain&quot;</span><br><span class="line">        2.允许将任意字符提交给服务器</span><br><span class="line">        enctype=&quot;application/x-www-form-urlencoded&quot;</span><br><span class="line">        3.允许将文件提交给服务器</span><br><span class="line">        multipart/form-data</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="表单控件"><a href="#表单控件" class="headerlink" title="表单控件"></a>表单控件</h4><p>​    <code>能够与用户进行交互的可视化元素</code></p><h5 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">input 元素</span><br><span class="line">textarea 多行文本域</span><br><span class="line">下拉选择框</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="input元素"><a href="#input元素" class="headerlink" title="input元素"></a>input元素</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">在页面中提供各种各样的输入控件，通过type属性来设置输入控件的类型</span><br><span class="line">type 设置输入控件的类型</span><br><span class="line">name 为控件定义名称，提供给服务端使用（必须值）</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span>&gt;</span>或<span class="tag">&lt;<span class="name">input</span> /&gt;</span></span><br><span class="line">value  控件的值，提交给服务端使用</span><br><span class="line">disabled  禁用控件，不能操作也不能提交，所有input的公有属性</span><br><span class="line">无值属性</span><br><span class="line">type取值：</span><br><span class="line">    1.文本框和密码框</span><br><span class="line">        type=&quot;text&quot;默认值</span><br><span class="line">        type=&quot;password&quot;密码</span><br><span class="line">        属性</span><br><span class="line">        1.1maxlength 限制输入的最大字符数</span><br><span class="line">        1.2readonly 只读，只能看不能写，但允许被提交（无值属性）</span><br><span class="line">        1.3placeholder 占位符，默认显示在控件上的文本，只要得到焦点，文本就消失了，此文本不能提交</span><br><span class="line">    2.按钮</span><br><span class="line">        type=&quot;submit&quot;   提交按钮</span><br><span class="line">        将表单中的数据，提交给服务器</span><br><span class="line">        type=&quot;reset&quot;   重置按钮</span><br><span class="line">        让表单内容恢复到初始化状态</span><br><span class="line">        type=&quot;button&quot;   无功能按钮，可以调用js脚本</span><br><span class="line">        button 自带submit和button</span><br><span class="line">    3.单元按钮和复选按钮</span><br><span class="line">        单元按钮</span><br><span class="line">        type=&quot;radio&quot;</span><br><span class="line">        name属性：除了定义控件名称，还起到分组的效果。</span><br><span class="line">        必须有value，不然提交的值是on</span><br><span class="line">        checked:设置默认选中项，无值属性</span><br><span class="line">        多选按钮</span><br><span class="line">        type=&quot;CheckBox&quot;</span><br><span class="line">        name属性：除了定义控件名称，还起到分组的效果</span><br><span class="line">        必须有value，不然提交的值是on</span><br><span class="line">        checked：设置默认选中项，无值属性</span><br><span class="line">        CheckBox的name要写成数组hobby[]</span><br><span class="line">4.隐藏域</span><br><span class="line">    type=&quot;hidden&quot;</span><br><span class="line">        想提交给服务器，但是不想展示给用户看的数据，使用隐藏域</span><br><span class="line">    5.文件选择框</span><br><span class="line">        type=&quot;file&quot;</span><br><span class="line">        注意：</span><br><span class="line">            上传多个在 name里添加数组[]</span><br><span class="line">            method=&quot;post&quot;</span><br><span class="line">            enctype=&quot;multipart/form-data&quot;</span><br><span class="line">            multiple   无值属性，可以同时上传多个文件</span><br><span class="line">            需要name属性值为数组</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="textarea文本域"><a href="#textarea文本域" class="headerlink" title="textarea文本域"></a>textarea文本域</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">允许录入多行数据的文本框</span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">name 控件的名称</span><br><span class="line">readonly 只读</span><br><span class="line">cols   指定文本域的列数，以英文单词为准,中文减半</span><br><span class="line">rows  指定文本域的行数</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="下拉选择框"><a href="#下拉选择框" class="headerlink" title="下拉选择框"></a>下拉选择框</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span>  表示一个下拉选</span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span>  表示下拉选中的一个选项</span><br><span class="line">    .....</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">注意：当option没有value属性时，提交的时候select的value为option的内容。当option有value，提交时，select的value为选选中option的value。</span><br><span class="line">select属性</span><br><span class="line">name，选项框的名称</span><br><span class="line">size  默认为1，定义显示选项的数量。</span><br><span class="line">如果值大于1的数字。下拉选表现为滚动列表</span><br><span class="line">multiple 无值属性，可以多选，但是name要用数组</span><br><span class="line">设置了multiple之后，就算size=&quot;1&quot; 也是滚动列表</span><br><span class="line">option属性</span><br><span class="line">value</span><br><span class="line">selected 设置默认选中项</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="其他元素"><a href="#其他元素" class="headerlink" title="其他元素"></a>其他元素</h5><h6 id="label"><a href="#label" class="headerlink" title="label"></a>label</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">文本与表单控件的关联</span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">属性</span><br><span class="line">for:要与label中文字发生关联的form控件的id</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="为控件分组"><a href="#为控件分组" class="headerlink" title="为控件分组"></a>为控件分组</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fieldset</span>&gt;</span><span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span>  为控件分组</span><br><span class="line"><span class="tag">&lt;<span class="name">legend</span>&gt;</span><span class="tag">&lt;/<span class="name">legend</span>&gt;</span> 分组标题</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="浮动框架"><a href="#浮动框架" class="headerlink" title="浮动框架"></a>浮动框架</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">允许在一个网页中，引入另外一个网页</span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">属性</span><br><span class="line">src=&quot;url&quot;</span><br><span class="line">width=&quot;100%&quot;</span><br><span class="line">height=&quot;&quot;高度存在问题，需要使用js.dom来解决</span><br><span class="line">scrolling=&quot;no&quot;不显示滚动条</span><br><span class="line">framesborder=&quot;0&quot;不显示边框</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="H5新表单元素"><a href="#H5新表单元素" class="headerlink" title="H5新表单元素"></a>H5新表单元素</h6><p>​    <code>什么是新表单元素</code><br>​    <code>在HTML5版本中新提出来表单控件</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">1.电子邮件</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">    表单提交时，会验证数据是否符合email的规范(@以及@后面有内容)</span><br><span class="line">2.搜索类型</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">提供了快速清除文本框的功能</span><br><span class="line">3.url类型</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;url&quot;</span>&gt;</span></span><br><span class="line">提交时，验证数据是否符合url的规范，绝对路径的规范</span><br><span class="line">验证http://....以及后面必须有内容</span><br><span class="line">4.电话号码</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;tel&quot;</span>&gt;</span></span><br><span class="line">在移动设备中，显示拨号键的效果</span><br><span class="line">5.数字类型</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span>&gt;</span></span><br><span class="line">    只能接受数字，并且提供了箭头灵活的调整数字</span><br><span class="line">    value 指定数字</span><br><span class="line">    min 能接收提交的最小值</span><br><span class="line">    max 能接收提交的最大值</span><br><span class="line">    step 步数，每次点击箭头，变化的数量</span><br><span class="line">6.范围类型</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span>&gt;</span></span><br><span class="line">    提供一个滑块组件，允许用户指定选取的范围</span><br><span class="line">    属性</span><br><span class="line">    value 指定初始数字</span><br><span class="line">    min 范围最小值</span><br><span class="line">    max 范围最大值</span><br><span class="line">    step 步数</span><br><span class="line">7.颜色拾取器</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;color&quot;</span>&gt;</span></span><br><span class="line">提供一个颜色的拾取器</span><br><span class="line">8.日期类型</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span>&gt;</span></span><br><span class="line">提供了一个选择日期的控件，可以选择年/月/日</span><br><span class="line">9.月份类型</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;month&quot;</span>&gt;</span></span><br><span class="line">提供了一个选择月份的控件，可以选择年/月</span><br><span class="line">10.周类型</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;week&quot;</span>&gt;</span></span><br><span class="line">提供了一个选择周的控件，可以选择年/周</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="favicon网页标题图片设置"><a href="#favicon网页标题图片设置" class="headerlink" title="favicon网页标题图片设置"></a>favicon网页标题图片设置</h2><p><strong>实现效果：网页头部   百度一下，你就知道  前面的图标</strong></p><p><img src="C:\Users\Mc\AppData\Roaming\Typora\typora-user-images\1559705375367.png" alt="1559705375367"></p><p><strong>实现方法：</strong></p><p>首先图标必须是xxx.ico格式的图片，假定你的图标命名为为 <strong>favicon.ico</strong>  且和<strong>html</strong>页面在同一个根目录下。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">实现代码为：</span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>网页title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;favicon.ico&quot;</span>/&gt;</span></span><br><span class="line">就像用link引入外部css样式一样，用lilnk引入图标：</span><br><span class="line">rel = &quot;icon&quot;      type = &quot;image/x-icon&quot;    href为图标的路径。</span><br><span class="line">实现的效果和百度的一样。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>常规尺寸：</strong></p><blockquote><p>常用的favicon.ico图标有3种16<em>16、32</em>32、48*48。</p></blockquote><h2 id="HTML文字标签简单补充"><a href="#HTML文字标签简单补充" class="headerlink" title="HTML文字标签简单补充"></a>HTML文字标签简单补充</h2><h3 id="文本格式化标签说明"><a href="#文本格式化标签说明" class="headerlink" title="文本格式化标签说明"></a>文本格式化标签说明</h3><ul><li>文本格式化标签用于设置文字的显示效果</li></ul><table><thead><tr><th align="center">序号</th><th align="center">标签</th><th align="center">功能描述</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">&lt;b&gt;</td><td align="center">定义粗体文本</td></tr><tr><td align="center">2</td><td align="center">&lt;em&gt;</td><td align="center">定义着重文字，文字呈现斜体显示</td></tr><tr><td align="center">3</td><td align="center">&lt;i&gt;</td><td align="center">定义斜体字</td></tr><tr><td align="center">4</td><td align="center">&lt;small&gt;</td><td align="center">定义小号字</td></tr><tr><td align="center">5</td><td align="center">&lt;strong&gt;</td><td align="center">定义加重语气，文字呈现粗体显示</td></tr><tr><td align="center">6</td><td align="center">&lt;sub&gt;</td><td align="center">定义下标字</td></tr><tr><td align="center">7</td><td align="center">&lt;sup&gt;</td><td align="center">定义上标字</td></tr><tr><td align="center">8</td><td align="center">&lt;ins&gt;</td><td align="center">定义插入字，文字下方加横线</td></tr><tr><td align="center">9</td><td align="center">&lt;del&gt;</td><td align="center">定义删除字，文字中间加横线</td></tr></tbody></table><h3 id="HTML”计算机输出”标签"><a href="#HTML”计算机输出”标签" class="headerlink" title="HTML”计算机输出”标签"></a>HTML”计算机输出”标签</h3><ul><li>“计算机输出”标签用于显示计算机/编程代码。”计算机输出”</li></ul><table><thead><tr><th align="center">序号</th><th align="center">标签</th><th align="center">功能描述</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">&lt;code&gt;</td><td align="center">定义计算机代码，文本呈等宽显示</td></tr><tr><td align="center">2</td><td align="center">&lt;&lt;amp&gt;</td><td align="center">定义计算机代码样本</td></tr><tr><td align="center">4</td><td align="center">&lt;var&gt;</td><td align="center">定义变量，文本呈斜体显示</td></tr><tr><td align="center">5</td><td align="center">&lt;pre&gt;</td><td align="center">定义预格式文本，文本字体等宽且保留换行和空格</td></tr></tbody></table><h3 id="HTML引文、引用及标签定义"><a href="#HTML引文、引用及标签定义" class="headerlink" title="HTML引文、引用及标签定义"></a>HTML引文、引用及标签定义</h3><ul><li>网页上经常出现一些引文、引用等文字信息，HTML提供了相关标签。</li></ul><table><thead><tr><th align="center">序号</th><th align="center">标签</th><th align="center">功能描述</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">&lt;abbr&gt;</td><td align="center">定义缩写，使用title属性设置缩写文字的全称。</td></tr><tr><td align="center">2</td><td align="center">&lt;address&gt;</td><td align="center">定义地址，文本呈斜体显示</td></tr><tr><td align="center">3</td><td align="center">&lt;bdo&gt;</td><td align="center">定义文字方向，ltr（文本从左到右）或trl（文本从右到左）</td></tr><tr><td align="center">4</td><td align="center">&lt;blockquote&gt;</td><td align="center">定义长的引用，浏览器会在blockquote元素的前后添加换行，并增加外边距，使用cite规定引用的来源</td></tr><tr><td align="center">5</td><td align="center">&lt;q&gt;</td><td align="center">定义短的引用语，浏览器会在引用内容周围添加引号</td></tr><tr><td align="center">6</td><td align="center">&lt;cite&gt;</td><td align="center">定义引用、引证</td></tr><tr><td align="center">7</td><td align="center">&lt;dfn&gt;</td><td align="center">定义一个定义项目，文本呈现斜体显示</td></tr></tbody></table><h2 id="无聊可以背背常用单词"><a href="#无聊可以背背常用单词" class="headerlink" title="无聊可以背背常用单词"></a>无聊可以背背常用单词</h2>    <div class="row">        <embed src="https://6d63-mc-dc4b7e-1258736979.tcb.qcloud.la/HTML%26CSS%E5%8D%95%E8%AF%8D%E6%B1%87%E6%80%BB%20v4.0.pdf?sign=7b472c02aa83f81d3598c8c7ffe83749&amp;t=1560867665" width="100%" height="1200" type="application/pdf">    </div>    ]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> web历史 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>各种实例效果</title>
      <link href="/2019/06/17/%E5%90%84%E7%A7%8D%E5%AE%9E%E4%BE%8B%E6%95%88%E6%9E%9C/"/>
      <url>/2019/06/17/%E5%90%84%E7%A7%8D%E5%AE%9E%E4%BE%8B%E6%95%88%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="简易聊天室—基于原生websocket-nodejs"><a href="#简易聊天室—基于原生websocket-nodejs" class="headerlink" title="简易聊天室—基于原生websocket+nodejs"></a>简易聊天室—基于原生websocket+nodejs</h2><p><code>前端代码</code></p><span id="more"></span><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;setname&quot;</span>&gt;</span>加入聊天室<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span>&gt;</span>发送<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> ws</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;setname&#x27;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> name = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;name&#x27;</span>).<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(name===<span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;名字为空&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">             ws = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&#x27;ws://localhost:3000&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            ws.<span class="property">onopen</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                ws.<span class="title function_">send</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;name,<span class="attr">type</span>:<span class="string">&#x27;setname&#x27;</span>&#125;))</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>).<span class="property">onclick</span> = sendText</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;text&#x27;</span>).<span class="property">onkeyup</span> = <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(e.<span class="property">keyCode</span> !== <span class="number">13</span>) <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">sendText</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            ws.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="keyword">var</span> con = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;container&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">               con.<span class="title function_">insertBefore</span>(<span class="title function_">createChatPanel</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(e.<span class="property">data</span>)),con.<span class="property">children</span>[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;setname&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;disabled&#x27;</span>,<span class="literal">true</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">createChatPanel</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> name = data.<span class="property">name</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> text = data.<span class="property">text</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> span1 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span1&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> span2 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span2&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            span1.<span class="property">innerText</span> = name + <span class="string">&#x27;&#x27;</span> +(<span class="keyword">new</span> <span class="title class_">Date</span>()).<span class="title function_">toString</span>()</span></span><br><span class="line"><span class="language-javascript">            span2.<span class="property">innerText</span> = text;</span></span><br><span class="line"><span class="language-javascript">            span1.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;#00f&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            span1.<span class="property">style</span>.<span class="property">fontWeight</span> = <span class="string">&#x27;900&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            div.<span class="title function_">appendChild</span>(span1);</span></span><br><span class="line"><span class="language-javascript">            div.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;br&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">            div.<span class="title function_">appendChild</span>(span2);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> div</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">sendText</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> text = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;text&#x27;</span>).<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(text === <span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span> </span></span><br><span class="line"><span class="language-javascript">                ws.<span class="title function_">send</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;text,<span class="attr">type</span>:<span class="string">&quot;chat&quot;</span>&#125;))</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;text&#x27;</span>).<span class="property">value</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>后端代码</code></p><p>需要插件：npm i nodejs-websocket –save</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ws = <span class="built_in">require</span>(<span class="string">&#x27;nodejs-websocket&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> server = ws.<span class="title function_">createServer</span>(<span class="function"><span class="params">conn</span>=&gt;</span>&#123;</span><br><span class="line">    conn.<span class="title function_">on</span>(<span class="string">&#x27;text&#x27;</span>,<span class="function"><span class="params">str</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br><span class="line">        <span class="comment">// boardcast(str)</span></span><br><span class="line">        <span class="keyword">var</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(str)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span>(data.<span class="property">type</span>)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;setname&#x27;</span>:</span><br><span class="line">            conn.<span class="property">nickname</span> = data.<span class="property">name</span>;</span><br><span class="line">            <span class="title function_">boardcast</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">                <span class="attr">name</span>:<span class="string">&#x27;Server&#x27;</span>,</span><br><span class="line">                <span class="attr">text</span>: data.<span class="property">name</span> + <span class="string">&#x27;加入了房间&#x27;</span></span><br><span class="line">            &#125;));</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;chat&#x27;</span>:</span><br><span class="line">            <span class="title function_">boardcast</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">                <span class="attr">name</span>:conn.<span class="property">nickname</span>,</span><br><span class="line">                <span class="attr">text</span>: data.<span class="property">text</span></span><br><span class="line">            &#125;))</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    conn.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">boardcast</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;Server&#x27;</span>,</span><br><span class="line">            <span class="attr">text</span>: conn.<span class="property">nickname</span> + <span class="string">&#x27;离开了房间&#x27;</span></span><br><span class="line">        &#125;));</span><br><span class="line">    &#125;)</span><br><span class="line">    conn.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;(o゜▽゜)o☆[BINGO!]&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">boardcast</span>(<span class="params">str</span>)&#123;</span><br><span class="line">    server.<span class="property">connections</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">conn</span>=&gt;</span>&#123;</span><br><span class="line">        conn.<span class="title function_">sendText</span>(str)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="socket-io做个聊天室"><a href="#socket-io做个聊天室" class="headerlink" title="socket.io做个聊天室"></a>socket.io做个聊天室</h2><p><code>前端代码</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.mine</span> <span class="selector-tag">h4</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>:<span class="number">#0aa1ed</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.someone</span> <span class="selector-tag">h4</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>:<span class="number">#0ef5a4</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:8080/socket.io/socket.io.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> sock = io.<span class="title function_">connect</span>(<span class="string">&#x27;ws://localhost:8080/&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> cur_username = <span class="string">&#x27;&#x27;</span> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> btn1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn1&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> btn2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn2&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> btn_send = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn_send&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> ul = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ul1&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> user = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;user&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> pass = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pass&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> text = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;txt1&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 注册</span></span></span><br><span class="line"><span class="language-javascript">            sock.<span class="title function_">on</span>(<span class="string">&#x27;reg_ret&#x27;</span>,<span class="function">(<span class="params">code,msg</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(code)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">alert</span>(<span class="string">&#x27;注册失败&#x27;</span> + msg)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">alert</span>(<span class="string">&#x27;注册成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            btn1.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                sock.<span class="title function_">emit</span>(<span class="string">&#x27;reg&#x27;</span>,user.<span class="property">value</span>,pass.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 登录</span></span></span><br><span class="line"><span class="language-javascript">            sock.<span class="title function_">on</span>(<span class="string">&#x27;login_ret&#x27;</span>,<span class="function">(<span class="params">code,msg</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(code)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="string">&#x27;登录出错&#x27;</span>+msg)</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="string">&#x27;登录成功&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    cur_username = user.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            btn2.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                sock.<span class="title function_">emit</span>(<span class="string">&#x27;login&#x27;</span>,user.<span class="property">value</span>,pass.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 消息</span></span></span><br><span class="line"><span class="language-javascript">            sock.<span class="title function_">on</span>(<span class="string">&#x27;msg_ret&#x27;</span>,<span class="function">(<span class="params">code,msg</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(code)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="string">&#x27;消息发送失败&#x27;</span> + msg)</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    li.<span class="property">className</span> = <span class="string">&#x27;mine&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    li.<span class="property">innerHTML</span> = <span class="string">`&lt;h4&gt;<span class="subst">$&#123;cur_username&#125;</span>&lt;/h4&gt; &lt;p&gt;<span class="subst">$&#123;text.value&#125;</span>&lt;/p&gt;`</span></span></span><br><span class="line"><span class="language-javascript">                    ul.<span class="title function_">appendChild</span>(li)</span></span><br><span class="line"><span class="language-javascript">                    text.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            sock.<span class="title function_">on</span>(<span class="string">&#x27;msg&#x27;</span>,<span class="function">(<span class="params">name,txt</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(name,txt)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    li.<span class="property">className</span> = <span class="string">&#x27;someone&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    li.<span class="property">innerHTML</span> = <span class="string">`&lt;h4&gt;<span class="subst">$&#123;name&#125;</span>&lt;/h4&gt; &lt;p&gt;<span class="subst">$&#123;txt&#125;</span>&lt;/p&gt;`</span></span></span><br><span class="line"><span class="language-javascript">                    ul.<span class="title function_">appendChild</span>(li)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            btn_send.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(text.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">                sock.<span class="title function_">emit</span>(<span class="string">&#x27;msg&#x27;</span>,text.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    用户：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;text&quot;</span> <span class="attr">id</span> = <span class="string">&quot;user&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;password&quot;</span> <span class="attr">id</span> = <span class="string">&quot;pass&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;button&quot;</span> <span class="attr">id</span> = <span class="string">&quot;btn1&quot;</span> <span class="attr">value</span> = <span class="string">&quot;注册&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;button&quot;</span> <span class="attr">id</span> = <span class="string">&quot;btn2&quot;</span> <span class="attr">value</span> = <span class="string">&quot;登录&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span>  <span class="attr">id</span>=<span class="string">&quot;txt1&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;80&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;发送&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn_send&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;ul1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;none&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>后端代码</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> io = <span class="built_in">require</span>(<span class="string">&#x27;socket.io&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> reg = <span class="built_in">require</span>(<span class="string">&#x27;./libs/reg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据库</span></span><br><span class="line"><span class="keyword">let</span> db = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>:<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">user</span>:<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>:<span class="number">3306</span>,</span><br><span class="line">    <span class="attr">database</span>:<span class="number">20190704</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.http服务器</span></span><br><span class="line"><span class="keyword">const</span> httpServer = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">`www<span class="subst">$&#123;req.url&#125;</span>`</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.<span class="title function_">writeHead</span>(<span class="number">404</span>)</span><br><span class="line">            res.<span class="title function_">write</span>(<span class="string">&#x27;not found&#x27;</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.<span class="title function_">write</span>(data)</span><br><span class="line">        &#125;</span><br><span class="line">        res.<span class="title function_">end</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">httpServer.<span class="title function_">listen</span>(<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.ws服务</span></span><br><span class="line"><span class="keyword">let</span> aSock = []</span><br><span class="line"><span class="keyword">const</span> wsServer = io.<span class="title function_">listen</span>(httpServer)</span><br><span class="line">wsServer.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>,<span class="function"><span class="params">sock</span>=&gt;</span>&#123;</span><br><span class="line">    aSock.<span class="title function_">push</span>(sock);</span><br><span class="line">    <span class="keyword">let</span> cur_username = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> cur_userID = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 注册</span></span><br><span class="line">    sock.<span class="title function_">on</span>(<span class="string">&#x27;reg&#x27;</span>,<span class="function">(<span class="params">user,pass</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// 1.校验数据</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(user,pass)</span><br><span class="line">            <span class="keyword">if</span>(!reg.<span class="property">username</span>.<span class="title function_">test</span>(user))&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(!reg.<span class="property">username</span>.<span class="title function_">test</span>(user))</span><br><span class="line">                sock.<span class="title function_">emit</span>(<span class="string">&#x27;reg_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;用户名不符合规范&#x27;</span>)</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(!reg.<span class="property">password</span>.<span class="title function_">test</span>(pass))&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(!reg.<span class="property">password</span>.<span class="title function_">test</span>(pass))</span><br><span class="line">                sock.<span class="title function_">emit</span>(<span class="string">&#x27;reg_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;密码不符合规范&#x27;</span>)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">// 2.用户名是否存在</span></span><br><span class="line">                db.<span class="title function_">query</span>(<span class="string">`SELECT ID FROM user_table WHERE username=&#x27;<span class="subst">$&#123;user&#125;</span>&#x27;`</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">                        sock.<span class="title function_">emit</span>(<span class="string">&#x27;reg_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;数据库有错误&#x27;</span>)</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(data.<span class="property">length</span>&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                        sock.<span class="title function_">emit</span>(<span class="string">&#x27;reg_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;用户名已存在&#x27;</span>)</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="comment">// 3.插入</span></span><br><span class="line">                        db.<span class="title function_">query</span>(<span class="string">`INSERT INTO user_table(username,password,online) VALUES(&#x27;<span class="subst">$&#123;user&#125;</span>&#x27;,&#x27;<span class="subst">$&#123;pass&#125;</span>&#x27;,0)`</span>,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">                            <span class="keyword">if</span>(err)&#123;</span><br><span class="line">                                sock.<span class="title function_">emit</span>(<span class="string">&#x27;reg_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;数据库有错误&#x27;</span>)</span><br><span class="line">                            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                                sock.<span class="title function_">emit</span>(<span class="string">&#x27;reg_ret&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;注册成功&#x27;</span>)</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 登录</span></span><br><span class="line">    sock.<span class="title function_">on</span>(<span class="string">&#x27;login&#x27;</span>,<span class="function">(<span class="params">user,pass</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// 1.校验数据</span></span><br><span class="line">        <span class="keyword">if</span>(!reg.<span class="property">username</span>.<span class="title function_">test</span>(user))&#123;</span><br><span class="line">            sock.<span class="title function_">emit</span>(<span class="string">&#x27;login_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;用户名不符合规范&#x27;</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(!reg.<span class="property">password</span>.<span class="title function_">test</span>(pass))&#123;</span><br><span class="line">            sock.<span class="title function_">emit</span>(<span class="string">&#x27;login_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;密码不符合规范&#x27;</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 2.用户信息</span></span><br><span class="line">            db.<span class="title function_">query</span>(<span class="string">`SELECT ID,password From user_table WHERE username=&#x27;<span class="subst">$&#123;user&#125;</span>&#x27;`</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(err)&#123;</span><br><span class="line">                    sock.<span class="title function_">emit</span>(<span class="string">&#x27;login_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;数据库有误&#x27;</span>)</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(data.<span class="property">length</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                    sock.<span class="title function_">emit</span>(<span class="string">&#x27;login_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;此用户不存在&#x27;</span>)</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(data[<span class="number">0</span>].<span class="property">password</span>!=pass)&#123;</span><br><span class="line">                    sock.<span class="title function_">emit</span>(<span class="string">&#x27;login_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;用户名或者密码有误&#x27;</span>)                    </span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">// 3.改在线状态</span></span><br><span class="line">                    db.<span class="title function_">query</span>(<span class="string">`UPDATE user_table SET online=1 WHERE ID=<span class="subst">$&#123;data[<span class="number">0</span>].ID&#125;</span>`</span>,<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">                            sock.<span class="title function_">emit</span>(<span class="string">&#x27;login_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;数据库有错&#x27;</span>)</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            sock.<span class="title function_">emit</span>(<span class="string">&#x27;login_ret&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;登录成功&#x27;</span>)</span><br><span class="line">                            cur_username = user</span><br><span class="line">                            cur_userID = data[<span class="number">0</span>].<span class="property">ID</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 发言</span></span><br><span class="line">    sock.<span class="title function_">on</span>(<span class="string">&#x27;msg&#x27;</span>,<span class="function"><span class="params">txt</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!txt)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(txt)</span><br><span class="line">            sock.<span class="title function_">emit</span>(<span class="string">&#x27;msg_ret&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;消息文本不能为空&#x27;</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 广播给所有人</span></span><br><span class="line">            aSock.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(item==sock) <span class="keyword">return</span></span><br><span class="line">                item.<span class="title function_">emit</span>(<span class="string">&#x27;msg&#x27;</span>,cur_username,txt)</span><br><span class="line">            &#125;);</span><br><span class="line">            sock.<span class="title function_">emit</span>(<span class="string">&#x27;msg_ret&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;发送成功&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 离线</span></span><br><span class="line">    sock.<span class="title function_">on</span>(<span class="string">&#x27;disconnect&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        db.<span class="title function_">query</span>(<span class="string">`UPDATE user_table SET online=0 WHERE ID=&#x27;<span class="subst">$&#123;cur_userID&#125;</span>&#x27;`</span>,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(err)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据库有错&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">             cur_username = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">             cur_userID = <span class="number">0</span>;</span><br><span class="line">             aSock = aSock.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span>=&gt;</span>item!=sock)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="大转盘效果"><a href="#大转盘效果" class="headerlink" title="大转盘效果"></a>大转盘效果</h2><p class="codepen" data-height="500" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="rExrVj" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="rExrVj">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/rExrVj/">  rExrVj</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h2 id="基于swiper插件效果轮播图①"><a href="#基于swiper插件效果轮播图①" class="headerlink" title="基于swiper插件效果轮播图①"></a>基于swiper插件效果轮播图①</h2><p class="codepen" data-height="550" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="QXyBVK" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="QXyBVK">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/QXyBVK/">  QXyBVK</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><!--more--><h2 id="基于swiper插件效果轮播图②"><a href="#基于swiper插件效果轮播图②" class="headerlink" title="基于swiper插件效果轮播图②"></a>基于swiper插件效果轮播图②</h2><p class="codepen" data-height="600" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="rEerNx" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="rEerNx">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/rEerNx/">  rEerNx</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h2 id="图形验证码"><a href="#图形验证码" class="headerlink" title="图形验证码"></a>图形验证码</h2><p class="codepen" data-height="1000" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="gNbEwP" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="gNbEwP">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/gNbEwP/">  gNbEwP</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><!--more--><h2 id="滑块验证码"><a href="#滑块验证码" class="headerlink" title="滑块验证码"></a>滑块验证码</h2><p class="codepen" data-height="500" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="ydOEqW" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="ydOEqW">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/ydOEqW/">  ydOEqW</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h2 id="五子棋"><a href="#五子棋" class="headerlink" title="五子棋"></a>五子棋</h2><p class="codepen"  data-height="800" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="PrBLNM" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="PrBLNM">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/PrBLNM/">  PrBLNM</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h2 id="简易画板"><a href="#简易画板" class="headerlink" title="简易画板"></a>简易画板</h2><p class="codepen" data-height="400" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="rXOVVp" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="rXOVVp">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/rXOVVp/">  rXOVVp</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><h2 id="数据劫持简易版本"><a href="#数据劫持简易版本" class="headerlink" title="数据劫持简易版本"></a>数据劫持简易版本</h2><p class="codepen" data-height="500" data-theme-id="0" data-default-tab="html,result" data-user="MiaoChen123" data-slug-hash="jjLVoE" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="jjLVoE">  <span>See the Pen <a href="https://codepen.io/MiaoChen123/pen/jjLVoE/">  jjLVoE</a> by 苗尼玛 (<a href="https://codepen.io/MiaoChen123">@MiaoChen123</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><!--more--><h2 id="脏检查"><a href="#脏检查" class="headerlink" title="脏检查"></a>脏检查</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  脏值检查    先保留原有的值   有一个新的值</span></span><br><span class="line"><span class="comment">//  上一个例子中是不停的监控新放的值，$watch,$apply,angularjs的更新方式是手动更新,angulaer有一个scope的概念</span></span><br><span class="line"><span class="comment">//ViewModel</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Scope</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$watchers</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Scope</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$digest</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;   <span class="comment">//负责检查的</span></span><br><span class="line">    <span class="comment">// 至少执行一次</span></span><br><span class="line">    <span class="keyword">var</span> dirty = <span class="literal">true</span>;   <span class="comment">//默认认为只要调用digest方法就应该查一次</span></span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">9</span>;</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        dirty = <span class="variable language_">this</span>.$digestOne()</span><br><span class="line">        <span class="keyword">if</span>(count ===<span class="number">0</span> )&#123; <span class="comment">//已经查了10次</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27; $digest reached，Aborting！&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">while</span> (dirty &amp;&amp; count--);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Scope</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$digestOne</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;    <span class="comment">//检查一次</span></span><br><span class="line">   <span class="keyword">let</span> dirty = <span class="literal">false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$watchers</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">watcher</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> oldVal = watcher.<span class="property">last</span>   <span class="comment">//老值</span></span><br><span class="line">        <span class="keyword">let</span> newVal = <span class="variable language_">this</span>[watcher.<span class="property">exp</span>]</span><br><span class="line">        <span class="keyword">if</span>(newVal !== oldVal)&#123;  <span class="comment">//更新了</span></span><br><span class="line">            watcher.<span class="title function_">fn</span>(newVal,oldVal)<span class="comment">//调用了fn可能就会更改数据，更改数据就应该在查一遍</span></span><br><span class="line">            dirty = <span class="literal">true</span></span><br><span class="line">            watcher.<span class="property">last</span> = newVal   <span class="comment">//更新老值，让老值变成新值，方便下次更新</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> dirty</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Scope</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$watch</span> = <span class="keyword">function</span>(<span class="params">exp,fn</span>)&#123;</span><br><span class="line">    <span class="comment">//$watch中应该保留的内容有函数 还有 当前的老值，保留一个表达式</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$watchers</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        fn,</span><br><span class="line">        <span class="attr">last</span>:<span class="variable language_">this</span>[exp],</span><br><span class="line">        exp</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Scope</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$apply</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.$digest()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> scope = <span class="keyword">new</span> <span class="title class_">Scope</span>();</span><br><span class="line">scope.<span class="property">name</span> = <span class="string">&#x27;miaochen&#x27;</span>;</span><br><span class="line">scope.<span class="property">age</span> = <span class="number">9</span>;</span><br><span class="line">scope.$watch(<span class="string">&#x27;name&#x27;</span>,<span class="keyword">function</span>(<span class="params">newVal,oldVal</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal,oldVal)</span><br><span class="line">&#125;)</span><br><span class="line">scope.$watch(<span class="string">&#x27;age&#x27;</span>,<span class="keyword">function</span>(<span class="params">newVal,oldVal</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newVal,oldVal)</span><br><span class="line">&#125;)</span><br><span class="line">scope.<span class="property">age</span> = <span class="number">10</span>;</span><br><span class="line">scope.$apply();</span><br></pre></td></tr></table></figure><h2 id="VUE双向绑定简易版"><a href="#VUE双向绑定简易版" class="headerlink" title="VUE双向绑定简易版"></a>VUE双向绑定简易版</h2><p><img src="https://s2.ax1x.com/2019/06/25/ZZBKhD.png" alt="ZZBKhD.png"></p><p><code>HTML文件</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;watcher.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;observer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;compile.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;MVVM.JS&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 双向数据绑定 靠的是表单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;message.a&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;message.a&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;message.a&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;message.a&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;message.a&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 我们的数据一般都挂载在vm上</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Object.defineProperty  get 和 set</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// vue中实现双向绑定</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1.模板编译</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2.数据劫持 </span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 3.观察数据变化 Watcher</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title function_">MVVM</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">a</span>:<span class="string">&#x27;miao chen&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>MVVM.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MVVM</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">options</span>)&#123;</span><br><span class="line">        <span class="comment">// 一上来 先把可用的东西挂载在实例上</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$el</span> = options.<span class="property">el</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$data</span> = options.<span class="property">data</span></span><br><span class="line">        <span class="comment">// 判断如果有要编译的模板就开始编译</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">$el</span>)&#123;</span><br><span class="line">            <span class="comment">// 数据劫持 就是把对象的所有属性 改成get和set方法</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Observer</span>(<span class="variable language_">this</span>.<span class="property">$data</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">proxyData</span>(<span class="variable language_">this</span>.<span class="property">$data</span>)</span><br><span class="line">            <span class="comment">// 用数据和元素进行编译</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Compile</span>(<span class="variable language_">this</span>.<span class="property">$el</span>,<span class="variable language_">this</span>); <span class="comment">//this直接给 随便调用数据</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">proxyData</span>(<span class="params">data</span>)&#123;</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">keys</span>(data).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>,key,&#123;</span><br><span class="line">                <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> data[key]</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="title function_">set</span>(<span class="params">newVal</span>)&#123;</span><br><span class="line">                    data[key] = newVal</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Compile.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Compile</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">el,vm</span>)&#123; <span class="comment">//vm代表整个实例</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">el</span> = <span class="variable language_">this</span>.<span class="title function_">isElementNode</span>(el) ? <span class="attr">el</span>:<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(el)    <span class="comment">//#app 或 document.id</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">vm</span> = vm</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">el</span>)&#123;</span><br><span class="line">            <span class="comment">// 如果这个元素能获取到 我们才开始编译</span></span><br><span class="line">            <span class="comment">// 1.先把这些真实的DOM移入到内存中 fragment</span></span><br><span class="line">                <span class="keyword">let</span> fragment = <span class="variable language_">this</span>.<span class="title function_">node2fragment</span>(<span class="variable language_">this</span>.<span class="property">el</span>)</span><br><span class="line">            <span class="comment">// 2.编译 =&gt; 提取想要到的元素节点 和 v-model 文本节点 &#123;&#123;&#125;&#125;</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">compile</span>(fragment)</span><br><span class="line">            <span class="comment">// 3.把编译好的fragment 赛回到页面里面去</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">el</span>.<span class="title function_">appendChild</span>(fragment)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 专门写辅助方法</span></span><br><span class="line">    <span class="title function_">isElementNode</span>(<span class="params">node</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> node.<span class="property">nodeType</span> === <span class="number">1</span>;  <span class="comment">//元素</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 是不是指令</span></span><br><span class="line">    <span class="title function_">isDiretive</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> name.<span class="title function_">includes</span>(<span class="string">&#x27;v-&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 核心的方法</span></span><br><span class="line">    <span class="title function_">compileElement</span>(<span class="params">node</span>)&#123;</span><br><span class="line">        <span class="comment">// 带v-model</span></span><br><span class="line">        <span class="keyword">let</span> attrs = node.<span class="property">attributes</span>  <span class="comment">// 取出当前节点的属性</span></span><br><span class="line">        <span class="title class_">Array</span>.<span class="title function_">from</span>(attrs).<span class="title function_">forEach</span>(<span class="function"><span class="params">attr</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// 判断属性名包含v-model  //[v,mode]</span></span><br><span class="line">            <span class="keyword">let</span> attrName = attr.<span class="property">name</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="title function_">isDiretive</span>(attrName))&#123;</span><br><span class="line">                <span class="comment">// 取到对应的值 放到节点中</span></span><br><span class="line">                <span class="keyword">let</span> expr = attr.<span class="property">value</span>;</span><br><span class="line">                <span class="keyword">let</span> [,type] = attrName.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                <span class="comment">// node this.vm.$data </span></span><br><span class="line">                <span class="title class_">CompileUtil</span>[type](node,<span class="variable language_">this</span>.<span class="property">vm</span>,expr)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">compileText</span>(<span class="params">node</span>)&#123;</span><br><span class="line">        <span class="comment">// 带&#123;&#123;&#125;&#125;</span></span><br><span class="line">        <span class="keyword">let</span> expr = node.<span class="property">textContent</span></span><br><span class="line">        <span class="keyword">let</span> text = node.<span class="property">textContent</span> <span class="comment">//取文本中的内容</span></span><br><span class="line">        <span class="keyword">let</span> reg = <span class="regexp">/\&#123;\&#123;([^&#125;]+)\&#125;\&#125;/g</span> <span class="comment">//&#123;&#123;a&#125;&#125; &#123;&#123;b&#125;&#125; &#123;&#123;c&#125;&#125;</span></span><br><span class="line">        <span class="keyword">if</span>(reg.<span class="title function_">test</span>(text))&#123;</span><br><span class="line">            <span class="comment">//node this.$data text</span></span><br><span class="line">            <span class="title class_">CompileUtil</span>[<span class="string">&#x27;text&#x27;</span>](node,<span class="variable language_">this</span>.<span class="property">vm</span>,expr)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">compile</span>(<span class="params">fragment</span>)&#123;</span><br><span class="line">        <span class="comment">// 需要递归</span></span><br><span class="line">        <span class="keyword">let</span> childNodes = fragment.<span class="property">childNodes</span>;</span><br><span class="line">        <span class="title class_">Array</span>.<span class="title function_">from</span>(childNodes).<span class="title function_">forEach</span>(<span class="function"><span class="params">node</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="title function_">isElementNode</span>(node))&#123;</span><br><span class="line">                <span class="comment">// 是元素节点 还需要继续深入的检查</span></span><br><span class="line">                <span class="comment">// 这里需要编译元素   </span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">compileElement</span>(node)</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">compile</span>(node)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">// 文本节点</span></span><br><span class="line">                <span class="comment">// 这里需要编译文本</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">compileText</span>(node)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">node2fragment</span>(<span class="params">el</span>)&#123;  <span class="comment">//需要将el中的内容全部放到内存中</span></span><br><span class="line">        <span class="comment">// 文档碎片 内存中的DOM节点</span></span><br><span class="line">        <span class="keyword">let</span> fragment = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>();</span><br><span class="line">        <span class="keyword">let</span> firstChild = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">while</span>(firstChild = el.<span class="property">firstChild</span>)&#123;</span><br><span class="line">            fragment.<span class="title function_">appendChild</span>(firstChild)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fragment <span class="comment">//内存中的节点</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">CompileUtil</span> = &#123;</span><br><span class="line">    <span class="title function_">getVal</span>(<span class="params">vm,expr</span>)&#123;<span class="comment">//获取实例上对应的数据</span></span><br><span class="line">        expr = expr.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)  <span class="comment">//[a,v,c,d]</span></span><br><span class="line">        <span class="keyword">return</span> expr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev,next</span>)=&gt;</span>&#123;   <span class="comment">// vm.$data.a</span></span><br><span class="line">            <span class="keyword">return</span> prev[next];</span><br><span class="line">        &#125;,vm.<span class="property">$data</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getTextVal</span>(<span class="params">vm,expr</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> expr.<span class="title function_">replace</span>(<span class="regexp">/\&#123;\&#123;([^&#125;]+)\&#125;\&#125;/g</span>,<span class="function">(<span class="params">...<span class="variable language_">arguments</span></span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">getVal</span>(vm,<span class="variable language_">arguments</span>[<span class="number">1</span>])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">text</span>(<span class="params">node,vm,expr</span>)&#123; <span class="comment">// 文本处理</span></span><br><span class="line">        <span class="keyword">let</span> updateFn = <span class="variable language_">this</span>.<span class="property">updater</span>[<span class="string">&#x27;textUpdater&#x27;</span>]</span><br><span class="line">        <span class="comment">//&#123;&#123;message.a&#125;&#125; =&gt; &#x27;miaochen&#x27;</span></span><br><span class="line">        <span class="keyword">let</span> value = <span class="variable language_">this</span>.<span class="title function_">getTextVal</span>(vm,expr)</span><br><span class="line">        <span class="comment">// &#123;&#123;a&#125;&#125; &#123;&#123;b&#125;&#125;</span></span><br><span class="line">        expr.<span class="title function_">replace</span>(<span class="regexp">/\&#123;\&#123;([^&#125;]+)\&#125;\&#125;/g</span>,<span class="function">(<span class="params">...<span class="variable language_">arguments</span></span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Watcher</span>(vm,<span class="variable language_">arguments</span>[<span class="number">1</span>],<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                <span class="comment">// 如果数据变化了，文本节点需要重新获取依赖的属性更新文本中的内容</span></span><br><span class="line">                updateFn &amp;&amp; <span class="title function_">updateFn</span>(node,<span class="variable language_">this</span>.<span class="title function_">getTextVal</span>(vm,expr))</span><br><span class="line">            &#125;) </span><br><span class="line">        &#125;)</span><br><span class="line">        updateFn &amp;&amp; <span class="title function_">updateFn</span>(node,value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setVal</span>(<span class="params">vm,expr,value</span>)&#123; <span class="comment">//[message,a]</span></span><br><span class="line">        expr = expr.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">       <span class="comment">//收敛</span></span><br><span class="line">        <span class="keyword">return</span> expr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev,next,currentIndex</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(currentIndex === expr.<span class="property">length</span>-<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> prev[next] = value</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> prev[next]</span><br><span class="line">        &#125;,vm.<span class="property">$data</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">model</span>(<span class="params">node,vm,expr</span>)&#123; <span class="comment">// 输入框处理</span></span><br><span class="line">        <span class="keyword">let</span> updateFn = <span class="variable language_">this</span>.<span class="property">updater</span>[<span class="string">&#x27;modelUpdater&#x27;</span>]</span><br><span class="line">        <span class="comment">// 这里应该加一个监控 数据变化了 应该调用watch的callback</span></span><br><span class="line">        <span class="comment">//    </span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Watcher</span>(vm,expr,<span class="function">(<span class="params">newValue</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// 当值变化后 会调用cb 将新的值传递过来 （）</span></span><br><span class="line">            updateFn &amp;&amp; <span class="title function_">updateFn</span>(node,<span class="variable language_">this</span>.<span class="title function_">getVal</span>(vm,expr))</span><br><span class="line">        &#125;)</span><br><span class="line">        node.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> newValue = e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setVal</span>(vm,expr,newValue)</span><br><span class="line">        &#125;)</span><br><span class="line">        updateFn &amp;&amp; <span class="title function_">updateFn</span>(node,<span class="variable language_">this</span>.<span class="title function_">getVal</span>(vm,expr))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">updater</span>:&#123;</span><br><span class="line">        <span class="comment">// 文本更新</span></span><br><span class="line">        <span class="title function_">textUpdater</span>(<span class="params">node,value</span>) &#123;</span><br><span class="line">            node.<span class="property">textContent</span> = value</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 输入框更新</span></span><br><span class="line">        <span class="title function_">modelUpdater</span>(<span class="params">node,value</span>)&#123;</span><br><span class="line">            node.<span class="property">value</span> = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Observer.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">data</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title class_">Observe</span>(data)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">Observe</span>(data)&#123;  </span><br><span class="line">        <span class="comment">// 要对这个data数据将原有的属性改成set和get的形式</span></span><br><span class="line">        <span class="keyword">if</span>(!data || <span class="keyword">typeof</span> data !== <span class="string">&quot;object&quot;</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//要将数据 一一劫持 先获取到data的key和value</span></span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">keys</span>(data).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// 劫持</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">defineReactive</span>(data,key,data[key])</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title class_">Observe</span>(data[key]) <span class="comment">//深度递归劫持</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 定义响应式</span></span><br><span class="line">    <span class="title function_">defineReactive</span>(<span class="params">obj,key,value</span>)&#123;</span><br><span class="line">        <span class="comment">// 在获取某个值的时候 </span></span><br><span class="line">        <span class="keyword">let</span> that = <span class="variable language_">this</span>;</span><br><span class="line">        <span class="keyword">let</span> dep = <span class="keyword">new</span> <span class="title class_">Dep</span>();    <span class="comment">//每个变化的数据 都会对应一个数组，这个数组可以是存放所有更新的操作</span></span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj,key,&#123;</span><br><span class="line">            <span class="attr">enumerable</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">configurable</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="title function_">get</span>(<span class="params"></span>)&#123;  <span class="comment">//当取值的时候调用的方法</span></span><br><span class="line">                <span class="title class_">Dep</span>.<span class="property">target</span> &amp;&amp; dep.<span class="title function_">addSub</span>(<span class="title class_">Dep</span>.<span class="property">target</span>)</span><br><span class="line">                <span class="keyword">return</span> value</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">set</span>(<span class="params">newVal</span>)&#123;    <span class="comment">//当给data属性中设置值的时候 更改获取的属性的值</span></span><br><span class="line">                <span class="keyword">if</span>(newVal !== value)&#123;</span><br><span class="line">                    <span class="comment">// 这里的this不是实例</span></span><br><span class="line">                    that.<span class="title class_">Observe</span>(newVal)  <span class="comment">// 如果是对象继续劫持</span></span><br><span class="line">                    value = newVal</span><br><span class="line">                    dep.<span class="title function_">notify</span>();   <span class="comment">//通知 数据更新</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dep</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">// 订阅的数组</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">subs</span> = [] </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">addSub</span>(<span class="params">watcher</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">push</span>(watcher)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">notify</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">watcher</span>=&gt;</span>watcher.<span class="title function_">update</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Watcher.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 观察者的目的就是给需要变化的哪个元素增加一个观察者，当数据变化后执行对应的方法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Watcher</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">vm,expr,cb</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">vm</span> = vm</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">expr</span> = expr</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cb</span> = cb</span><br><span class="line">        <span class="comment">// 先获取一下老的值</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">value</span> = <span class="variable language_">this</span>.<span class="title function_">get</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getVal</span>(<span class="params">vm,expr</span>)&#123;<span class="comment">//获取实例上对应的数据</span></span><br><span class="line">        expr = expr.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)  <span class="comment">//[a,v,c,d]</span></span><br><span class="line">        <span class="keyword">return</span> expr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev,next</span>)=&gt;</span>&#123;   <span class="comment">// vm.$data.a</span></span><br><span class="line">            <span class="keyword">return</span> prev[next];</span><br><span class="line">        &#125;,vm.<span class="property">$data</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title class_">Dep</span>.<span class="property">target</span> = <span class="variable language_">this</span>;</span><br><span class="line">        <span class="keyword">let</span> value = <span class="variable language_">this</span>.<span class="title function_">getVal</span>(<span class="variable language_">this</span>.<span class="property">vm</span>,<span class="variable language_">this</span>.<span class="property">expr</span>)</span><br><span class="line">        <span class="title class_">Dep</span>.<span class="property">target</span> = <span class="literal">null</span></span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 对外暴露的方法</span></span><br><span class="line">    <span class="title function_">update</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> newValue = <span class="variable language_">this</span>.<span class="title function_">getVal</span>(<span class="variable language_">this</span>.<span class="property">vm</span>,<span class="variable language_">this</span>.<span class="property">expr</span>)</span><br><span class="line">        <span class="keyword">let</span> oldVal = <span class="variable language_">this</span>.<span class="property">value</span></span><br><span class="line">        <span class="keyword">if</span>(newValue !== oldVal)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">cb</span>(newValue) <span class="comment">//对应watch callback</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 用新值和老值进行比较 如果发生变化就调用更新方法</span></span><br><span class="line"><span class="comment">// vm.$data expr</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 聊天室效果 </tag>
            
            <tag> websocket </tag>
            
            <tag> nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>开发相关书籍</title>
      <link href="/2019/06/15/book/"/>
      <url>/2019/06/15/book/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="3d8faf1d2a18261221c776865d9493171ce4ecbfaa0d74325eea1b766dd6a47f">995a81a7ebbf3cb96856d48dcfe9eaa8398fe0402b8dffc53423b5209afd87fd64d9a25ad33949d996c80c8bdbeebcf95fa438b68a0a924f1ca0ea777765741f556b2a29686a1be9c3b1e14e283442caea84b76a7f90339b5956767caf43cc8a43c3c9738e55d291fe78109165cbf6d6e331a2baba1c78dd19e399082e613374a1e85b68475186dabca5cc7bd1c6867552a996da9b9399fcb107ac95a08eff7a3da2c102bd26b47e166c1eb70237bbe3ba455470a5286d30bd54608a71dab93a9c5e7306c68380b5ef5e514e404a2e8c9bdc824e9f67e07ed107c66c2bdb83ddbcda72b9fa7c48c7ee2fffd1d0ee44b970db6a301d3b39691d442f792c31e4aed0711dc414cb9914786222e1c42066c5a89e6108013f72d6e267d106578317dcb87bb0b73750da17364fe54ee9f2dba17a793f340bda5a524897b217f902f13c26a9d03c61624a70bc4f1a323c69833e955deced8d9d01b553a5aed88875b2ef934b62659a21b5986e294180f43aee5a7064531627cbc7ac040076764e1d8fbe1f80e798ad2e040ffd986c49d28a9752961f89a0be8c04e9d1ea83880ff3c50fee2466f888c60c9faa1a7e388ea241eff0cbe59cd96f4f6cb6fe7feaa0bacccb9da4a3aed8fb8eff8b00880e57f2c78b90b6feca33b9699c01f80a7aefeff2ef149cdbaf4751f0da183ac6d4c34e7b74009a4a8737c980c76e993b527df1e56bc554823db750f06969643b3a81c668976638fc109d561bf975cea645e5d0ee85504a5bb3effda7a6304bae927455f96ef95118ec3d0ca8d106cc9ae3ab38a114dc29f5e6893099fbc4ec0628caea300ba4e50c10e634a9b0ab757947d4ffda57c4184b39764d29b0d85ffb5a5fb5f2abef308e6bcf0005c88556740b34d7c8c0be1aa1eac501911dcf61e6049033825d41b986735e458105a580255ae6fa63397a8f053fa51e8f16c1907a30d8f8f44a88146415a6d2fc49d005fdd6ac7c83f40b247432296691d3f1790b0ed982c7278fc96f7f81f00eaddfd0dedaf9f2376a4f691a8891ae03e013fedc9cd74b83d9866ad5a0eb348181029a40b3e5016a3aff1673f6dc02fc35923e3344b685725eae4f47faa0d3f12fbe0aafaa87c16a1964862c9a09036cd906b321a36127500307603ac40a25de6c0252b3b91f9078e4056dc94fc306a474fd225ee743ba5f0a7dda856db88ab940783c077383d21051b2ce623145a75317841fc181f1936f69c8b99ce49ce23d04bca9c0f197b628e7f5758e0ba74538744bc795a172b03ec7a0a08eb34eb29e09e576f15ba32699c5962d1ee25aa4fd1fd9b034f2895101de8c5d0539482a6579a70ae92e0e219de69347a6b7cd8ea86c6dc0d39bfef01ca6613dfe76b7fd549790b05e29aaffd2bc352486ab4f28dca153d04f39b059a5db174da730e11a2e8cede02184fd78e050ee2c4bbe91fb972625cbff831787061f17745c1ab110a4dd45cf3ea857d0173f98c42441f1fd4f9a510bc1c96e110d65deb2ba5359753167d51088853013e2460e2f179c26b0419258877bec78dd887058496f8a4b1d6d9e52934740ab24c1fff970f39aff66a5547be48a945c189acf77982dde824e95578e5c669df5ae9bad373bdf528f6df1085c3b420190c04ddbfb101c6a4adb9fb6e775b5f2b3690e2654b7f336daf13e109b1d5b681ef79aa691cc6edfed804401a5bb97a448542c3e2b7bcd58fd47e165c8979ba349769aa057f20ce052e47fc9ba967833c9bb6093fd3a1843b166e35c1fb277d61e87e1a89a74160d12c481b064b4ccb1620396c0f1555d177df759dceaab45e7a8c38584912bb3e5096a9e7f327722caf1c0188059da60df0a92c7f8fa13c0085d7d1deb96a9f35d09ecd9e3a8b707bbec6d748895a80d3bf2ab1f5da6a525b86e0408674a422878d0ab2fcc915d2cd957086e44f954259a4e294f4c2d33ee4a1a39a5d2250424e8d51adf7da2b1fef7cdadd024aa9bf7c204d4be539176e4e9ffc6ca36111f2f59f48e99ae12cf954c455c18e5dff81035d5879b4a84b5046f432ef11dcd80e27eea8f24d1f40bdb843b02651921e39c4b8b374f456f835b3c83b12779fbbef0ec72749b077c7bbd06a3b126ae961daf36c4e45d23d8d1c78aae712c19cc3358a05e21e2d9208dd3940c8c30f17c79a94e67590e9f0dfb61a9330fd3b930def5f85ed63dc8b6d09084c60a4cfddc88c4d691d95588f52cfc9e31eff2353cfb2b9a092af1f8b6dbd7146d9cfd35f208f746c0c2d996d0ddf78f6107a0f712c68d270bffb2a282109532853c4279bf3af55df7fd671d7752cf45d533bc07a2bb254a96d4bb7b9159467d469e93edc1218f8299755f4e235ae9022f6f328865f84f6166f05e6364cfd7457251888807f5badc4d3344184cf9aaf44dbc816981ce2855046839ee6c8b91e1eb29bbe2ed9b013ece3e156856cb674ffe0b48a79320930c37a9b8a27c8ef9c5dab54e23ec801c7a7ff3381f9f278a0286e4edce8bd7f4ef0502d1d71f54c93240d961435e75bbbb8adc2b6b7bdc29016852c25d9a6ce47ac73ffb4e22c5bfff8ee73e50202bfe73a3e76185257a9578a588644e82620cf0d48f956d42942212b788ae331d65cd3cadc83869871fa818d9d61b052f1bf600293522950f02ffa5be06de7957be6ce67844ba63bcff74a1c8af1b2d885d3a8144c052a8d8e1dc409ee6e979e2c342377f10ba4d01078d76b43fbf6714b767bb160b83a54f74d182972362c058a2627a62681780321b2fd6871e463456ad1bea737a2aa2ca1a701cb58e1651c54a65b2cef6dae67f8cfe01af6b9550ef66a316ab11d6b49bca50a29de901ef20fd48dd81d63757b107b7e67672fdb4e909074134d8a3ae478709c19f51d591481e97d2f3ec632615d768d9efbe4eea79d5ff4e5d877bea928059f07158b748f15c8d4677ade3498d1bd3f82383827cc4ed881c9e5d566256732bd41241774c2c0b633f50791ba24c80b53b79ab24ace9967a2caa9a34a4198112a7ccecdb6841a83f25a9c2dbd2533c99077f0f88366de8aa40755fdc5e8435650aba44e49ad7ac2757cfc5390cd01cb38daf86e8a2d11e5d3c406c01316a55429004c0cf8744f487b31ff7bee7ad42c6822e063165c7a0e75e6b1df19bb72254ad4c87bc2095fe6beec79ff2aa76954e8b3026d24f95683768124c07e640cd9f028f15ddfcf5c49a135d72c3a9ab3a756e265c3f8aa4122bcc931ef6f9b5478f63998d3058a22013a0320f1f64a430dba8bd0de5170c3e2f6c741bda1a7c330c3a62d11687231ba62ad1406e7fe2fa579db1b79b300f546f059adc7c2883473321214dca97b827062ed31d89ad9ac7d8b70237422b16dd981b3436626d79243835a6809c1a9174c12629ad253e8c3b1e6c21c0b8ce7947b15b24685ecfddb6e8c07c5c3ebeb0a36722d9f02b36cb88b65f6a447a20fbc33beadbb834cfde69646d9274fbade12c83eaec2169081b0ed96d5851a152d683a7c58a3be86e83c384502694a70db15a33ebde51b3758293f52651f33f8fc81b48c5c7d9c76ff9555b9849bf241f89cb7d5b8ef68af5006a463f727970555a537ffe080400ef2e080c19d7926eb3c703885d400c67fba2665df8eeb171ffd90d6e93ce7e3c0ceefb5e76215d06a9176d22dba5575edf4d34d82a7a18d663ba356096f4a07a32b467cd82147b6ca1c954cf56c5cc69ccace2865b3a15072d3f11ce8816cd59ae65be67e99cf8296a69adb9c834910356bf774bdd7f4e860a0e0d2fddffe33a5d4f582a51d4dbf4c3b4735db0a9a00bf3b9e56ad653e891dab9ca8f987997daf708781ecf0bd2b0421c5e22f81a4dac9262664b98ccd84f1cd7762f8822b62c6537f502d07d65ce7ebd3fcb12c99240fda27ff8cec7b6abb8f21504b9a6aa68acd5cc1e4c9eceffe177f59ceeab266826d6bce1bc140f3390b5774347b714c1e5a2e3d08d9f59b47a0bf3fdd50b9330009796a2ed799bfd2a855f28ed4f288c554894909620008a23c59e8ad3cf6e0ae56089313b8e2cdffcea22f5eb1027ee63a63625b894eae28dbe40ad66d1cdb2bd1c91d5b9afa53a54dcead02fa5952bf216615bce24a14ed226088d714310f63d84652197eb0ac05b2eb7affdb8381a801b85456b67d2f75e5b2c14c25fcb06f213a7b264c711364ade5ab46b4194579c366418b8582a0ce4c5230fb66f41bdecde81ead03eb99538906e4325922f88b937b3cb7c8e30a227128413d8c6d010629a44f4832b8dda0eb9348ba51da1ef5e88fdf7781e40f3894e71805d56a0b5232ad3d9d9cc6613b28b4fb41ecc16b32a00a00dadd55dcb20d24d3b166dde7cb4a9b8798f772de2d2a55ae67c758ceca95d1bf954d26f521f93c8d3ac5a080959b2ee5723763fd234e58d833cdbc5872206a4cec6665f71318815b28bc75151b53a36aef29e80111079dd986f858ba952d8eab932c181164509a2d4b326a2a8725a69ee115ca3e0bf472e165caab1bae87619e8639432eb3f793f69d8509c7b7de6dc76edfb7e3cd413f32cc45cfade419379a0573f4b5358fdf445de98a170278bd8edcaeb8f4d9b8cb5e473f35c60d2eea16b74d81159615a5fa3b98fdc3a595d81be25093abd32983bdb7b88827f86827e8d075cdc7d1d3544832b784fdbd94c4233511cdecd7cee8e7c9c0720253e33e36b67c7d4221b44b7ae33afe7eec81787dafd9a10af70e9c84e541f58ad3d06fcaaf7b7a2245aab5f34fba538398aa028388633e7633eec2d68c9d20531c7a98d52816277d051aba3b99a2ff1816a0126ec3e4ca9031b75d7ae3f5a84582cdce1fbdfc42fb682166f48862fce0b9e0f5eafa21ec0c9efdc072b1c5a187f6970377d10797445cb4ebd4c2153d9fce50e94d0088cb75589d69176c545efa930e201398518f13666db4ecbcb0b246e1c36f081b30944445e11605527a9f89aaf4faad692a11c170cec2b776f4f876cad0c70438f450f938c15bbe8467b78c908175262005636739f757fcf3e08d8771818c3418b8c36dba35a6b7e5eab7c3a55e469b0bb119a515afc5ab638d2bbf854b5c4b0be43c5fff742ed6a219ab11b53a8a0a57d40bc6030b3529234eeccff192a76e870f155e2f0ad3258e30505e4447e5f6434c4d5a3e79d0a820cafb4308d4df99246b9206383a2227248c3e5a6d4757eaea95e3bd40fd768405b28cd5c299e7a268a5e18c91377c837646f0bd27b6799a122fa93f59988bd5c561312ff582c0e8da4bd85f56c5303cf8b1d5820567ebbcde87b593c31ffdb9bc0ed5dd12cf33d279c06683391e8f2f3771cd871f9f8e4de6fe444b6cf7d9dfa761e59aada198e1eb80eca28114faf3e3248f2f0e2cce87f90c23e6db02ad7fe08e0f64f2c83a708371f10235fbaa0c69fbb39e66b38738000fc385e65e2acd7bf2384c3473a5a4eabbc4826931843070cd79102ca85818da5a4ede5d9c8bdae9eec10d877be834567014d4ed59e7455a79b91da6fb03c3288708432346adc4752ab3dc8f3684b5a292f23b3698b4d8687fa336911d3bdbd13c58f4aa3a34ebd1ad053fba465a05305f1a3c85efba3db732007f1061f5edbbdb57a275909c116ef5732e47724b212428393592c643a1ae547dc3f3053483b4c672811b39e3787e3fcea0100ac61655ed39792826ca22ea889a6d5ca1f39e201fad9a97e659bbbf63460e7b6fa29899f4dc905353d55c829dd6f17a3d2d67ca66ca7143776bbca171cd2e12399cd025e17999acdc55af7020236da11f82ae7374d2f2882de8b037527921dc24a0350e63f0e4f52ef9b9c4fbb9073ffefdb599ebfd92fac103387b3f6cff0af7df8f869232e77665032a881c0ecefad5b59e2627c406fa8f14754ebff78fcf1ff2f1d134ae17df1e7aeec941652581525b36195af4746cd3326690f9794458205d66eb3be42ad67c85da84467400b5218ce7f479352d8db45897adad43ee290990e35467b0fca9fc8c4329c4f7a01a25863a3aa7f1a788953d724aadba04384044b883a50f4191a5d998a2893479d3337986642d855e9dffdf8ccb8e0a3057761b97780117e31118b0e15208ca50c8ac0ed72e48d48d378aeafb19a00ffa4f0acb95f93ee76ec0a7c6fb886bfc11a56c7d693fbd3b4a089a268d8a38a0e013ff82a225ce559e798fc8f60e8efab3314e50fd7a7ceaae2922609b0aa5b3b4607a1fb90d4587a41a764b3b87df3cc36ded0c03df5f37d79a1135eaab59c0ac711d533dccb39f1135cae722f9fe2f193f4bb23007ef11d5fce7a9ac0aac576c7915c6bb4c90d53720c736f6223d5e5402b42fb1765892cf215cd3e79811822c731db69a8084294db9b99c9f44d0d6159d1cf021460c4430d6ddf2e161c2c090fed7022dc3bd35e5371c0d2a177c16a965299cd2ecfac7436db688a3a4c47aed7be36bdb539ee3ed4da5defa8e1dcf13209dd0349da93150961a13ea5d030cc3a6c9eb5881d8a0677e44aaf95f6baf91b4c218c5886242e6a0cc34ca6235da240471ec3579a5373621ca8056dcac6b03a4813042409326b7c202dbd497d012b2e8b1bea3809dbaf7c173e16f4941a5c82dea7a961d4e07eb9e3cb516febaba3dd6d74b5adae3070a3aa73cd7413e8267e11694eda0f916ac2c2103e030b581c16e87aa577492e6bde2c29fb54c50a632f8f6594cf3c73fcab84528fa23da6d6e1d6630da7e440d9df531ff6501ae10c57a928569f87b11891d2b39a2db1ab9a01a78f8d4b6b31d3485d578488b143f5d1b4ac258d433d5df52873f2277cb45e6f4818c9afc422a710553fae0dcc7682b0a668ba3d7caf19644a7bbead32ed76478f0bfa3ec78ed20817f9022bbffbd30aaa4691c1e74b2e5d189258f3089e3f714d1ec1f61cb52a4cc7fb3839ba272a132d58be015775404e99645371461db85a908acdd0de6491fd8fcb8205849f7704287de51315899591bd7c987098387af8d3bfd81c8d91a43610655cdee74e0c26bec7b132c9251464d22a6677227a7208e40d9327769c8ca1831c26d4be02beed68b6f120af484d66316bfbaad5dc5b5d1ca5e34e9eb1784e019cdc62d91b4cc708927c70b6f7527deec7a8d0182542d206a28f9103c3cb49bda244c290bf2c16dcc0bf4070cd0cec088e60f3aa27579a0cdc4ecdfe99172485c1374b71ffae32e9aaf9b94e2483663cf10549c1f2092bc6dbbb33db77c13228e0a20e1b61f63562a0dba6d7abf12ae53a5626001d916a8c8aa261ce9f5aae7401ef445d6e7ac27ea3932b3ebbc811cbb1a47ad2dcd0081c34e319299414c60df60ba4360d45d1e5cd7cf81c531da59124181109c7c53a322986ccbc5ac9ade978a4421c2912238e25df760c83d408731bb6ea1efef086c71d5b1b0d9b7dcf4938953d789fc90d4e99925a480f7695e79a80c1da23b8ac30be5a0c6c38a5662fa7af6b1d8ccdde3a43cf5217054cb17a835b294dfc29ac5a39733e12cf795c0640ec0c273b575d27c06882bc32c1922f1a0c6ae99349d6024f4ea0e1e804622e4161055923b44b03174ab3c16483cfce097d837b5d2e95394bfbe2db9848022c1c15be0f1b6d0657f2fc0b53efb36975621e7ffc0f1a17f104a628fe71e781cdededf7935fa4b4723e8710b55d05abf692ea10433259c4a77a36140860656caf8ca95fcc59d14edc7547deedbd8e82837de35baedb17bd7b6d924bda39ae442a4806e965c1a3e37593d5c4a5fff34e8167c492f0154af6abfa7022656cc930d299379326b81a030de43c218801b5497989f2230679d6c3c2960a184b219cebef0618daafce5dfd2783643fc8c19ab47a051404637048cfec7dcc3a488874969560c479da3bc97dfae1b006928affe9c02758e07cd64ff58c65373744e332d084a00fa3420bc002618afc64c3d618c23b15e1f107f0bc65f75f6148434c43ae25ea1658cfdf75f9ec5b943c14a0cabf9bcaf44d812722a517ab0a614bd331fff55112274da2c352e9e6be5cf91f2fe3a3fecbefc2fabb35b88e5af7a862f5686bcd71ee7a69b243df98ba28120341691a67b996fd61dee77ffcc01d114cca2f75df9638377a94b1eac0e1021cc82f6c338169a3a8c237bbf46ad4c8322e2618f7f243f406e926b5806f761e489001b8f84df61b2c9a0d108695834b9c8b255354b3cb9aefe0c4a1adae9d6fc70cd3508099a267d4de7e9498d40067945dc61e41fd5dc67ab390dde6d45232278080a91f7fcc15cf9ad56da606a208a09156e993930509ecd69075d9934ddd1f11db5e7d320ea52ce24b8127a052964569d168af61798af8d00e3dde6e4ea1cbba2828367ee792256e7d874e8c50a9a8a2b30b581c201c84ffc63949e10e08572e4c68edb746b009f638de7a6d7dee79862467c79d89fbdde676dd92f98fec630e86204b8c8a0e0a4aeffbf7b222287178a2d0cb285227c328f3f9d6ab6a1e051337428c60fd5aa15e7534b1e3e3ca07b36cf0c684aff98389ac4663cf8d536d8e73f6e05664be0ae7c956fd43d68db67443b54a46228bc6f6fa243bb029039597a01b904d338043bbed566e5477110813c5a6b462aca543f2f79ceff20022651102a2268102316065c20e8c89400a24cf9b33d07125ddb49597944bf4d7468d4663ad89e0abd23be721edfa4dfac708cd298293b9b97db2cc1606d4213acd7f193c6fa096f5aa786a9e53be66cd0ea42c9c7853aec9004552e1c53eb34f89a692bfcd5e31d626e9e1fd8b1134b8e96eacd8470407c63e8bcccb276451aa9ff6bab3c2baf71ddfd2306ac1c7d70fbc405dda9a5f57f30d9637239c48bdb5f40b7f02d8f319043c2356c947e4aa0eb2907a11f1299c88f603d20ccc06a7cc4664f534c63951823d99001143f05f4f4e9942909d0473db38e20f3e712152a251d7e7e140fba4c20532dadc796641b2fd097fef37af7efa34f08a4526a1a0c6e9791c57488f98e652ddb242460c704e096f4467fbab3fa13f55aee2d8f2574141cdd5f92c71801eae6f5cbfa8ddbbb10d6eb18f8cdea36143f7156e8b8dc453ca0faa21a3568bc287c44c4763b659faf3476771ac1820b56d331a6daaa986e8b4702c9cbead8b84cacd95b9f414b699220afec88bac0626fe2b8a2379b9bbddd25a0945fa840d4400bf6d17d30c4ebdb11fdd1f6992d0c80d69d658fab8ae031acf638483324452788e09df19c4930cd04f336cfb060b5d96fb0e8ea8dee1ff49833b3ddbefd6688d2d07c1f2b59350a4ceed6e1a2f70bb33037e72de123ba7a09a31bd03bcef9f55c5b47c889e6762ad905e313f1a21e5a80c3a02cb5e392b565d60a86759f6e90c6a015e4ef945fd87c17d1a1f17ecb1903d5de85f66b7852232a48f544eb2bfbc76ee0f02990c9e5456a3c321be1e5579d33e5946c97e4776adc9ceb51dbdbf60058b4ea834389a0e2d4ccc6dc1fffcd9207ed29181462251b0d3ca19ef86d0c1ad1836e171ecbe2f85fcc044a72c8953e9bcabae4b619d6ace6b71698607629350fab40fb8bbd69e32a3a53e76cb9fde1c90700c913ef0e95cf37ab645f2892ff3963502cf45995151d42563de72aaaece7b7b7f435f77f78e56ec78cc2873a09f03ee9f2935aa99586222fa04a00adbe805fd69729e3470fbca413a9346224e800583f651e6a20d47965507b483a6a2377cbd0e835b6336030991b82782133c93ec693c6a46a41695088ce654c5cde090db33df4f1f4a15bf6280e24249cfc5a42f8c5a7066ffda671e7743dbd76bfa980f5e9a709e533f163ae322417eb599463073cae0d879aa5030fb48325bd7c69b90df822887dd045b07bbcb916fd9fcb6af99a90e7571a4a1a10243086053502260eeee2d1e4e4560abe42d417a4b2ff8da8e3e43d31ecd7447450e99d71d8aa1ef190479e5cf5b3791d3958e155433d37a216a5d7775d573846967f86439de7c3960938f8bfee7d7c6620d753dde795dd9c68d0e4875c27213815c7d90bb8676bfafbc02550646f27805aef4098bb2ebcdfdcc499989cdddc5118d0ea3f0fe74472dd4d254ca2a6f3ed9f20b3cbb4bc49ca240eb6b90ae71aa8981a40445b2dc6437dfecab5ed1fe41e64dfc39d02c74d0f554948f0521b0bc1d1d68331c1be2f861ec63b66fd9c3a3dd3ecd47f02fac1f03073dc3b36bf8ecff6bbccad197c55f9be1c43156f9a4c758ab2e574363cc72fd24d0dc2d840c4ddb448a825f97b62c9594cd03d90e27203a6ad7372d8017b0c198c072489cf5811a570c91012e5959eaa21ed08c7f5767d085e4db9e598feb16f35d2b86cdbf412a451f4d73700fccef3b57a46f9d7a935faebf89d230f1580c4cce7792a816617bde09ab43c13dc7a5be2433ce046e3c5114b0014cf4dca31645c9bf9ce7d95fe352ee746ee917a10c0e69e60b576d1966132553a2f63d7994987d99563d6e88cb643f1ebc4bc017191e02030826918d080f1a712349a02970096d3f5afa0045d2529ff99a75591234976143984532dfe7287603cb0dad1d556b27e31db640706a3ec8e52899e72b9fe277da9714732d4d7f4836231c2def633a05686703d1e8d64640c020651c3e4d3193017e1f60cbedd793679bfb43bca988d63a50f70d55462de11ccb374ac77cea66682a4a61d6bb9baa403ba4ef60b9bc3258da839f9bf9c58f2dd8b908c91d3f860a2aab4cf54f71979bb789a2caa6a2c0e03837abacffc77fccb2cecc396383f5576743c5e49f055323878b398e3bb4bbde58a85e3df79c7c30eab10fcdcdcc95e25b8b3e2a9582f7994feedd9d2fd11f87abece0b0638df69740e0e4728b7dc61dc8d74cd819bb1ae2c902412eeee95554d80fb4e0aafec12c0bb499aec72b89da29bf77ae96c29ab0ec7db2288aaf673f9e13b93ca55f5fd4f21e186f68be50f85679e4b782988396c4593d0e3dbb818358307c0ce7c06c8d9c87428c1c848260faef3e984995a21610b93bbc1d0451d665de3a48063d2e5bf5d5ded9858ab2f2a028c4830266c6b1825c8507717f7b300005301943a8bd0a77aa98baba815d90926a47c076188fff5ef56e7a2112503fc326ce2907ee1ff7bff2ef2a201f338b37d63db1921a2fc46c213b1d530e42555a888bbff812783cf2aef532c2e12731862eea161a2326e3519a4957ffb6a6eb39ebf9fb84b8fbf28f42f8cd960a480862e7d4af3c04c7582e6955833ac93af9c1bfec9b748066e4c2f4e37aa79d37b58e476762d034a4fe50ae41dcc2271f1cdeb3b72da3606248da8bef119dfb2dd3a71aec5580d99002f2cbf19be3b9c3f0213846a54821e9e449c61176643cd8dc4f99974ced668be051cc5de536e6207da3ba105ae1e7db16d4134cd4464e93d465977017626654da9dc08004b6a4ab078135fbf3e2217da7aa88f3557b74544bbc556e039116504d5bc203c71107e3bb74ac1bb81b2afe56d0b5502996479740bb1a8f97219294a33d4404ef9e964cf0b7c41d69f40acac9e4ad6a07b9c13a11a0276ae691e549eb12e324fbd25f53617f1e4616f408af3177fa69a4b8d39d0feaf9ee2d67a31dd785c99cad936e79c7f2e5626470eb32ffd2a3bcf0a9124256f72d0628f27447900121e94afb2e3b431cd66d4938844a4a56a8bc05e41c0355a0d34fd065deb09201b85aa1ddc88c2407cb530ea554001376dc937146e87b94d1a402ed04b74597d58dc7eb1bc8af83eb622639758961ee8097ec03e30f848ff94ff1ff8c1bf7c96f8edac3733bb3d5221f85fcc2a8950c858cf540f86c2ae6f45b7cb8ea7f8b84420a3ac670390967d402c4a9f13166ce3a9943b6ae6a93c3d852571cedcfb3a17d3ea497f17ee4f902998344fb40e19f1a70bc396b95582b47900b624f44b50ec85152b58408756d77ef0e3f3710e415d901f5cdbe903ba174e250319937e9558691fef449f46c1aada1aa9ae2f8ab8260db4cf0be74e68a97a68e6df13cffe341649d27a60767a500918f2fed47c6d3adb52fb9bb460f10a71aa5b6e8836398f44c8ada59001e8e3da3a01efd53dcdc8773b44b5e765c5ace59e3f3469920ad8ceea0f71eb405e5fea1a8c6a8e0bbef6fb0b345bbdc7823a01447bb616a5db6e1e4f155c20d198efbd728403af5f45bd32070ec370db0987244c2d160b551ec3bb1a2c70921770223ee72603e5d6cf71b274bbc34cfe7300958f82b3871286bf43ed6b214699c398d5c662b457eed500da9386c03a3429c6dfb39cbd755d4373008c44f63bf72c6c09c20cc93f85e5c78a00dbd8dff490fe5346a284231445c2a24a71a1e24fed2359d86e1a6ec341a4c26b8925d00503592e8634971c14a10c75d6f53dbe9dce11c8213b355dfcf1026cb17bcba66d35cdd471c9e6dcdfcb046d8091c939ebd2b5b151bc7182e9f3b2a91a830edda6465f9119f0a538d4d7ba6389c96d95f30fa7d7b901aa08a666ef093e623bad4b1d9ab774531e35da27bce3d71f08e117769e31106e40ddbafbff99de4fd056eac7b717c98ad2164c05cee70a88147b03092c1dfddb78f5293dd4264af257d58eaf40373c871f1f7cc419a5295eafa9d935da31420dc6eae50be773706c457488cf88f74c4d38471e32eeb4d0454d0c7d42c8d3a08a1c5da4657ff26b7b094f0fe7205c685daf1d2685eef4c6b32aa8bd76dfeaa0a0e2e4e2e97b640c315118fdcab9861149cf65fbe0044b3499f212b3f698bce410d656efaf87c56239e547b2a37d9e8a54aae914f44977f121b9cf80a61f3605181b8fc50e200a6052a53ac1b1a0cee1e60606c6e401c433a9c98cec027446724f94a10859b4870e12e390867f41af02530ce397250dd7c6ff81070aab00d40dc5fe600dcee83fa47a9f1f8cd8840b4d1001a03e8d6188081fa9c66aae81a34b91f02db251d9db006fdc63633555d6b94a4bb77a847898c4f9024c2e4c6c84f60108e8d1ed85ddc8dfb4caf7b5ccb2c7e4ad1308fed07294f1da7408368e76d1d8346aef0437704ea14377422d17460d82d70039a4779638e7a370a374a46e5bc68f7c4627bba2d141578b0a5d2361812dd55d8d4125ff20d58c55d5afc2ea5b36725a367d9138a33532bd26011bd4356d1ad7e6b352a380491db1b80ca776ab505b6717996e59d47ef8573e4bb689b64c732b2902ea04d05a3be225a35e8f335d2caff6c86f109d319df001be5506742b6cf2774d284329b5f7eecec1d2e1b75dfd005bc7ce32843efd7e0079cc621a77cd20b0dbe6f1dbd3c1693d394ed7722e8f4643415da1d167866cbb633128cefee45996fd609ab086ee58b28f8df90978e1c8799d1a251d08cc4f83bab778e0bee00dcb16cc071ec770f213053be91b3a1a65d44a63d88a4168cf219c12085d9339bce0cc48a178bf25e37304186aee3bf47c60c62c4ec2dcbcfd31ca8bc8ad9ef0d819ffd68d05a63d17fd494f7a48d19cec8554c332887eb71d9475a9050a791c4cda3855dde982f10cf7e10887ca3fd8aead058a6acf21c81fef56e7af17aba905371b21f3c9ccc1e8bd00b8c0d34f5132fc85ed4b1305a9d5dba997e1d0f27833ea305c12863091f6616ecf06dcd8cd8fc9ffefcd7dff73b6955413ee493f091bbff2f448ac8ae2f508945c8b4a87299568af8473ba5cb7e27040556e601089a42b04dafcf09cd9602762c1fcc131082560e26c91f1836ca728917059cb826f6620f41ffa52bccbd5f219a5761c139b023eb0c13234bb422d091311579e59cbbf7095f8503d3f5b1c28b9e499b50a64c9e2c68d3b3aa758da5b5ae7b2695ea0484ffe71a8de7198d4642ef811baf2efc48471d116575731a16db0fdb08a838cb0b0ed80f86a95b4031926d4149d67d391766f8d75eaebfdd81e94102a5ad66fcc919e4c1561d28fbaf657081a0bff7fe14e4edc10a6e39ab8494ec461802995abbd6843a980c0a2d5ef92ddb3803ad9c0cc5eb0a95548c429aa6812b06a784e3be85b101ead197e7de8e921a44831d2cd70973f0df44fda30fd7bba19c6768191c35dd3c55d29a7c689702492db7b123c5112e0826b43126f73f481b681088e4af645fc31b641d72fa1ecee75fe7345f6890ab037ff220e9c08463b2c03bb502bb49b3a91093a2252347ab6e43e955865a413156f13ee44fc08fdba4e772a537e0141d1cc0dfb07097b32b65e9a2c216a8db115915480013b47ea5b625a48573bf5f027efd7e49de29720957cc9ec1d789ccbe5fc6f876ba19032b1bb46038e7db250c57bb53114877a5e73d97dd5be3fa486e2189079a7c434977dce28ceff899257ce214f104b182f2840a1342a6c924beee4e3a5cac579804b726ca8a702f667430b2de786da124d0b9cd75c88ad6dd3ba171d43f2b857bdef8f272005493c246ec17d08b3d01ec07c44d7061cac0639c7b61f6f0e34518d673ef4940bae0fbd0c0f805a15ebd0ce401a7ccdb13c00bbc238c69e61927ffb9adcc5dd3ccb662aa33eaf64e5a4e2549802a4d10873a57cbfd9d64d0fc89ce6096be09744d580fb8699cc204ff6dfdab71452d97052b723391dfff6d4c8dc0e4c42b4d80a65911a3ecd018b75b8fdb8956bc39bc85dc3fd8aefdc28becb4d77a7e9e7318502a51bb41da9b98f455c16fc108cdd8c4282dd13e25ed2a536ee5020f87d936c2db4c49a51950ec5d45565b08df3aa9b35519bd6d3312a112dd5d1bbb60f4ef8198c1cc359eb127fafbe31281dcc81ab4d98b0d08a0240dd7f9918a01332648f50efc9c24c0d28ce989cfee4f69da03a66cda855f20c0d72e44997f06d01c3935b6c68d30ae3b36269049e3a2930be45d65108185fdcf06b8efe2bafb15b483a3607ac7dd9bc3bb19036702cbed174d14e71b150a37f8fd12ae84eb9dd8afbf36e5b1deba581109bf48fd379f426763276b1772da7fc826cb158751fdb9e01187f8158843d023ce7615323d4984b1d32f79d5abd8fac325b58e2d254245e5254a88d5c74e88beaf48489e2f14688ee53353fd280845cf8e9c400da38a6a6f815ea7f7ac8dc552d3d5b431588671dbd1ac7eeab257470d78f99c2e3f4b41572a2b554cea3d6125dcc36230d5d50a07b81c8f2aaa3d89d6b0c86970880c42662c1c5b2b5860582000381a5de001ca6c88504ebe00914bc83b047d3357943b80b361609cb2a90c7610a65c033a44da1b257b756b6e0ece7a34182de7fd4eeecf9652fd3a02b772a3549598748d52d5e5069e655d5533f24053dc97cd571b6cb6ae3bffc28129ec5ed565f2f0c380a003c7a2ac8b64b0bf74a2d4d2a40123bb8e6c99c665260f82d36756fae4c7b245ddf7e609a11387b4cb46be2e20e81da958bae081fbae22430e0ae498538779bc6f48dabc32a6b4ecea33846755d4102208def48a0f4f852ec1bcacc455e156360f2f60de3cbb05708ac569e894cd62025689e5f6dbd18d7ddac6d6a6df87b84a133e661ed13811f111896e277ff3c055b1c3f8956a3e95372ac3aebc6cfd9dd396a40e22ba28f3d188e8d3c6f48c4a88d26197c76b3ee16d9a91d06ec5637ffd4b1343e97994f807e9c55a50e66d8f2a4788cd2b27b35159a60e8233801e24e07d1a70d4d05b29342b7de20970b136c3a0583875b4d3a18517c4aec5d268838d14de606a4595d5334748c55e544a3d8232aaafb1cfa2ffd31cf9c7f3a89c4376ca6ef2a8ea48075cba23f40a02c71ff97849992c07e117c0a3b79b54e71519f6d999bd9b140f2e2ac2c9fd69f23985a2b2dc47ebecf6dc1ff71e15cf5ac674ec1c066632519be3b1fe25f51d8bc74280f3a271e11befaa6468eb1e7833baf9381804ee4f8f8fbab4b9c3ea00f42b10fe8d74a5f08cb1bf201b631f3efde8d72ee6d35d2ad1bb059400dc686a65a9a6c3da9e03bbc5703464fc858e2ef7108cc99705511b5f04c2d5739f4751b5a6936c4b8a9097f397ea84190e4ca65b5d3b96012da18e05026363680acf976b76a03e43183ac30b23dca2c065396a34acb7b357cd3dd1bdc26efcf843b2f3c2c5788289db773e241bf86b2129bd0c37b8673dd97b8fa2f53705f524c40fc7aaf9e4c9e889f3d6f87fb8009f00edffca090dffb0c3066be6836206cdcedea3b069c344af4308d0e9703211486af7a19ab5457d2c4533c114f62d81f8c88e3e2cf54c047cb234f591d1bd7dd038d5756983b9d0b2d6d9d9611441a359ed1ccc5c3a7ffda9a4e754091302e19b2f5d596a4d4783a069cee80354494d216e6268971e7252c32eb75536420480853c4e91cf1608b78650528ca9613fbc6a663ac568a76ed0cefb15ea5cf70b458b0821b4ed16fb0ebacaf0f52ed3fa644eaad4825cbac124a40981a82ff78fd1e2fa91e425a6f94ef934176c2ae16d40e6b1ca1b92fc9cd43ef748b715a174c76efe8a999e7791b090c11190d9782d56fab760b9959f7567b0fa8e9332ecdbd1c438d89221ed134295e0cc9c5ee561ed784e1d761819472b274fd512ec0dbda00988df6106d13b6f5b3cc70e27002b9fd52c10d757c37fea3ecd2290c7cc17d7e66a77d6e0aef0e144ab5d4abf4c4f50d30f33047408e0102c2ec4822e846a6ad21bd1c6fd7543b448b3851c62d2cce16d4e993c714fbd82e32f606f7929793cf859f538f4568cfa6449a96bbe77dd819c675d02e0a19112b04e1713d743e0bda333260ae41178379dee744c16f5bcb4aa1cb1fbbde953c201e3feab050b787abb16ac73ab6368f5a5890ef1a4e14b811c8030fca91500a216e53c6864e21f3a579320295f276332b213f9512ad49b79c7e4391d613f38803139211267a3f6b099cf77c80eca4433fdae3f465e439faec0d21605ceecc4c6ddaddb76286a4bd2a9cc6ccb4641b34ec7162e61922f948874df39f50fa7ba9a9fe790d6fc68de0218c1af791f790b48a4762d466139a3bd2d46cba3994c34414b32f5ebd15cc6086b1c856f638f01089c307c2f2f1cfd63f4b5d91f4d246062dd69b153256481c9157cf7e437e9347dcc7698b62abefefd30f772fc9825acb69c2715fb0a89a6eee5f43fb78e95d0b32733202980d9215b181b948f34c48e5d5769809447bb1e504aeb2cbae2d9ea1458e613cf5475c45ced95e889dfdd8cdbcb01f3ab2b8a30abab7dbcd0b9fe4caacd732f2034f7c74f32fa0a296fad598292bb42c74b6e3ace46ecfa145788ccab8fa25180119d44bdb2f327ff41fcf89f9b724cc2498ff96b9dfdb144df712615b3d245e63009c39555802415d7b21a8bb44eb42f6265435f7527ab693306afdd47531cf951b6eba2e293171977fdcd9a8eb2bf6e8425cddec09cf1455088d63631ef15bc3f07466fe07b5d66798f43f5e83f081e1870d80640f3bfa5242c93212a3e6a8359b497e80eda510b20805deb5b4de26d8430f42085e8ce0c7d3e71f24dc256a29fb21bb236376d724fb27da529cd1faede2a83edb6fe6c5da365e364054877babe02090ed28b27ec1147710072470659be8b301c409872f38f3dc409f9fe8ce87632f4bdfe260d80028642458f0ca4c77c04f108cd31052681d3cfc65ec691eae2d730c2b5cd3462983580de1bb818ac4b38c30615beac737f9f408a6119da9258d8084d8863c377f2fc2c7717c602447a0beb3e5a7e4f1a25cad6f2766f1f4aee8f5b35e357dd5277db6036f74638c076c057d78712a801f89d5f8ca9787ec3129ed43164d9b8e1db6f44ca729a130d7f329caa4307dbe63b9ab0c0830675d212ff4dac36f23e84f65449f08656b33e7b60520dbd1aa87e65cd0d25bff952ffee95c781941b92d2018f21a3aa768e1eb9a96f873fb396f02927fbe8be7ae49afe75d3865fcd90579d26fb4406c8c55b9955d36e0801e3f173aec23a0c70e172e8a6f233f24ff3416447fe393103fefe6a6108a010d181a5489dd4f280d9bc7352a2405fd5345dfba2e50da2a17009bd7fa224de823b28fba9087bc71d422a4b6aa326907740906fffd04d7bbc45f3b23ca25bc0314ab10c6e37bfd1f5c71f2e7b69495aea17778d92022750c562b28a34b3a8a786f2558137b22c71a4ded8c58c0c62168199e404b9e4110344b011fc853f438b6aa9d31edf63ec63d6e7bf02c5397be17e69b3f67bd2de066c5416a4d2a3206ad78aee3c9599754a40337b332529c8f300b2b4add6d25213ab4c723e0c0549100147f7877ea2d66f4b301751a9f9fb7f6154ff73e98a72cc87c251297e0fc9ebdf72844cabfbdb97b82e2f4873417820c7f3d13e0ee4bb8cfddefa0f18708fa8843e9b6ecb3af92023099e22e2cf105e677fa2d0e0c9ec63337f9cc19859b28bd4391fe37a2f514e9129cd07df63218f431484b92c100cf4f08b2174fe0c0967e7cf8b5e3c4c7d62a6b65c4e2c3f3c4259216dd14f18eca372775a5d2a6bdac8ad3af7e8826370a431f6192e5e79ee2e102392b1f03c50cedc9c7952877cace68a51b163ff1a426d4cc1cba418cdac1943744dd8bab39e172fd4589453e8c0e0e99c9472f2822b52d510e292d4da328d3343ea64dd4b2eb2afdc05cb6841c51fc5a266c16069d8028e43f51aec35df543dab1f275486a71cfd19329487bf139dae8bf9dfe6219c9688d52bc941d43fa22239bfdaede96a07eab941811f91843e96bdaede59136e21f3bd03bd34dc6aaa14cb284ce5b90c276d3c288a1becafab8189fa70f53fa79748140c54bffc4729e4fe2fb502b9a57c93dcf37a6ad6725f0a7c6b2150a4ddb7b90556b8151db2d31913ddb4aedaf54d2a39eb994089c8723707e6479d2299eeb1108393cfd36ed8496603b0352981480b598c69f0bf5b0ec1b2b440179c9d811f2ef127a9d611e7f15a880692cb3e02f9788259edcba54e4f9c2c4aa864031919e1f4cf3679e6c40a51b466e04196b3b5ffcbbb8b824617691818764c93a2413f8ef4a0b4481e98b8bf6a14644f34d2ca9f623b88b23122c0790e39fb0f312e581af3da9aecda80ab4b11bedb9c35e55318b2433188f48ea9d8d86cc9601adcd35237f3f65f38ec728bf00ab6738e128351632b628c9994d82ba14bc01317ca1354bad27678b548dc5701190dec3b1a75ccdc4d69a855734f6bf7271adfbdf2cc30ff78bb29fe8014aa80598255e6e85a348fd74b9a3ebb0f3c922cb749910af56baac9ca882b081001cff89d8f1124d1fef8119bb416fdff1ff411f55e2881da42bdb88fa295631d0a8f0922982778c7e93635b460f85ae294e572b4a66eae1a0d2f8ad5aa0601415319fc5ea60d96058d4afe5704cd7d9b125ceeb0fa54c66108f922e2b1c86f2095ce468a8dc7c937271402f21784857cbfa1263fc937d7e040dc47458cbad989e3c7f03e0045f0c66a85811655dedb8bb26c47b51b34e23cc86b166130428d89d9491df9649390fc26dd6a724eb9147fc8c3fec4605a5c9d1851f968a16ccca6f69c5ee3e351b903572af3152a6d21f1aaa3f4185e515efd8b8c0023473220488f73529dcd86c5c9825319077f04273de2bbf587a9e8b3c96d02001571d7b32aeed469a409181bfd3ed513d0046e29be5dcf6643d04ebd9e16a0ba65e55d6ae1c53a095e708a1cd6fb2b98895bdc25b880d6d0bcf60b1bf595ef649d5143ad4ac92a4b775397b27c3f3407c32871165fbf2db847dbd467c30a7708dc95e3ae540ba537db1b62884349f05ada2c9d0b41e52a253834d270b16ac48a0d53d4c755ca0ac9fdfd164ed20559fa8c9af0b833ac2591091e829d73ad216a03c0689c2ad5ad148a5cbe36f575af7b80378744e2cd925813c56e07539c047ac3fab9fdb16bb70f0382afd749b7bae1fb005f1a2dea68af60b984ba5ce59a6c7a7d382fbd3088a1e882d98217fb66d09b7fbaa91e7da69a7026bc896cb9e427fc63eb5f2b68931da83fd7c38730705ddcc6e67bc1241476a347593e39a7221d05692b2d615bcf6512454d8736bebde8a3f58dbcf945e0067b364076f5529eb90d8efb8b366cc62803922cadb0d22455655c1adbaedc6d2e3966dc8027ac101606fdaf7b1ca9642a25f5e6c58a059248364db501bd395ad2225459321b14b50b7f5701a9366183fdeec7207ac56ec17bee3f69ce0e7b2c70db04923f53f07f9a12cde6325cb8eae8202bc426faee2c04769404c349bdaec8d84681e8af5fa76eed59d208a616f28831ab0c74b94c6365446c499fb093c40310a473c057d3c83380104a964b28081b0c4b07ab7df25f4150015216c00a95667edf498cd6365adc4dea24c2706ce0d63eb46419dc1bfc307c297d00ab0f058d244176ee779eedeb66979b5947db979ab29f05d0b3619bf9eaefb49890d9ca92cf3b5ac95656355b93603ae05279a3c527db5c4c0ca28133dbaa31d0d83124ff594ff278a9cf814e6c64c42d3b176d28ec28347336de35f1a2cb37db63d4c0ab8708aac8dc1fc5ba81f2ed70f6b26ee2950771b1213e7f02607a1611fdb64e6e24cc58ef22b6554c34b49fc9037b864c90103bec270989672c44db3c328eb9863409c1134b578875afdeee544799b99053173b75f32c864b2349430fb7db1d94885b489bac45924110b42a25c916a75e7e48325d8a1c635aee1d1b8eff7476b65feefe05381504efcb59c245f2c22288605bb5eb0ccd62c0255da72ef8ac125eca064f986c40ec615475ececdc8475c97e1999643d144492f0604048dd41903929ce792255b71bf7e632bc3627038c9eb6823ba3bfce26a442ecbe8520f49a010ceb69a015d4961c23ba83793fc1a6d296d3e653a8e247605885d2c4d601815bcc5133b2cd1dd0f0da293262694c1c3e876357c0e326b2ea947532bbf804d3d0f34eb8ed6c2fe1b43ff4a1ba14eaea16e331d0222023a6e41ee4c42898d9e10475b6e416f2ea48f765c87e32a44736a33407eaf9fbe9a2cce7091cc3d54dc17cbae64f3ecc22800f4b98dd9c62f7d3b069a590cce998d67cfbd48903ee4312b650d811f34f31f7e39a7b3d98e87961648443ecf46202799e61d905eebaa0e3d572f80556f3a61b1c86ab5c667f62c4e21a1686a9c459e7b724cc3704a2b1ffb10d071a36ff3ea60b77ac6e3de66debef883dd5c1b0bb0b940fd55cded48ed9715944bd5d508aba6a53c6d699587ec5d7c63e0af1ca16625332feb30f0c06fb85d74cd4c55633b333110c59f1ba63f6c74572b6e70effcf850c3870769e053e0ca036e497af7583e7a9d1b56f0907b168bc0c7ab4e5c3a0b97aeb7ef983635942dddd412303a3af8dcf9196bc82ddb92185e0dff3ada3e88edce0c07054837344f51e9974c6fb5442980f5bece9d87a18264c661903f069c0e5d7892cfbe43fe4f4109e5c845a7fc244092a4f68b8190fc02c97b82a34d8fd7b383261cae440f93bb038f75d63dff4095272233fd311eaa5ec671a9fb4619b8c46609ebfab6f799eed5e3128c87807edb38cd51821af834e0ce926fafde75c4c764b64688104e7de650f85d3e1115139f941e00d8f791faed8204501e56a9b04471802180ddc4af988b63e9e3b6e4bd99e225947577dc4ddad43b8c8491e98b1f0be5a4a1aee03754837d68c57e9e450d13ef55a6e29479bb471bef035b0279a71de185b8ee6ec13b329544cf90144c22f5d729c604854bb83d13664e7433a26897b1f6613c044f6e49fb00e2516f53b8fb099c8a6e2b79910d4a3d213d5cabe41e5d913ee752f7becbfba731a5000f23a555700f57b3a214659554e62ec111c2752d3bb53d1494359f2aadd06b0d587443b2aa4d038f8faa764f9300a822efa4a61c4d606d29d0435272dd38db03576fa11483ee761df0f6d189775b12dc24b7f3f5d2cd7628903189b7b9984772d27b37d7bf1b8344fa6fe62b3d2199d545db819068ace1b9513c4cc63ce2bef9062d7b93ac089fbbb17274fa2dee5bc25eac1bc6fae26aae18d1b224de83db0875e95a18539780b160f33a5d6d1e20753307b1a202d21dee59bca76d91e44d95dd320944a869cc56990a3b3fafa3dce9ea4cb85766f89a82c2589ec161e14a2024074bfa6d3d1951d340852dcf2244ba81ec1f069d47cf5c270db65a1fe5e275058436880c3ec73a853c8af858fda8ffd18f96ac579ad552e588f62be62d958c49d59ee9e70e69a666cb0a358c980bf6cc0e7285dcae52710a6881c2ec277a4f5f02d5d15305ecf4339430437b69fda9f0e3d1d7490eca3e58db720d79581fff293e0b91b70f88b1d7ca22b4ac2e80da54436b19d129f9bca8dd5145024c33be45293c33560f0c6d3b5aca423fcfbe1b3c28b222fc496eaf96bdc7f3bd5fda70899a311a2a4e35e2250e2141c091756b6709d3a395576f4f1a5bbc99111ae817afcb07d3e037f44b307b79de90eac8b0b0a5e007ef7bde78089a7c4c7bdab20fdfcb5f56008a566b45a3bf8e76144ce2f82757c28134bf4f9706f8c5ec8e2a903eae0d4bdd342910c495f72ef89dcb40cda5921b0bfac75115b9d97e3779c08bea2aaf305d9a84b02b24083782c11cb44f4041fe0a9f368c4874e014f5c7247a854ddbe241efe44279755838547bee2da46429d88e8de3f41c0beaad92b6f50ddee21f8e8d29547e5665bfb3e2eaef4dbb4a1237cf0936912524f5297e340e84cb39ffd15d35c2d8bcd09ca740cbf7be0280d694a3c5398b1250af088f191186b57d4cb8c3f800404b4dfc6614ee2d57c062151939b43e57193ea0760182f1d9a2bb2ad7a1959010c296577c77f2d66b8cbc6bbaa8ab60c0e89b9719daea72416072872cd115062c8212e2138368015fabc301bcbeeca99ce33a38c53fc395be398c5c1ce8f3b482fe3968601839ec4b8c30897f96f0481ed95047be97eccee2accdd5d15c93938551bf0da6012916d97e1ec1fc2ba6f242a2fe0088a08c1342d2cad67b688a70504b84a719cefa0b964e468869deffba4468d61a36c37b5e8552104af702ab1cf0fe57a721c9f0a6523ba51e0bf4d58cb2d54ebea2886c816bf3cf76c5be1b3fc48b53ca50a108953a7e08be17ce05c3740dbd58d530c85e54be912b5306645a909935b93b971a2cb8a43e8cceeac1e5fb028e3444f2ccd2f82e322fc928d89a26504851f413f87dec70dc4b0e4de7d9f5f79cf2243436540f32e57c1faeb921a2619e315e635762bbf7558b4912402f53794dd8c877261f3b58a494a4a004e3b896e32a60fedbc6f559b2b3c1199eb17712d1dc8f7c63bc725296d5a85ea7514e88ce9ed75554f874b39353bb3a601907ed81b1657f295cf8c3602b3d82587a8e25e78ee4502570cc3477bf86ba7407f066d4cbd0a5a15bbeca9b87cd947f7d277edecf746da1a457b28a04f7137f158f8ab9bf103d1d5da394d3459a170d3df0a6c870a125cb8a83c7f89615bd19ce9b6eb07d89cf7a8a8ca47e80f89c1f535dd9ddad2226552fe0f3a85d627aa8a075e3d064d1c2f09370a53528c9bafd67c11ca703fe01e4a7e2a4a098892e42aba99f3b1415ad107e707b31a1c7c276c29cff2eed3e3589aa1bddd4ed61cc1239d26184d12579a7c20d1dc11678bdcee0c15b51fb3d86466dca029f877dcb3f71b0191bebcc99fcda5e8ec89a737f9d69099dd47168b6d920bd98a7cfd264b068e92694cf2e0479e6fb245dfb44265b3d40d743b751875a202f33a0c6b97cbd9e1d5eef3ca07b4bfdb61592560f7208872896b0ca40ff39990625d3c4dabc2c03a44f6e21987d21cc8bfc675884e22a116713acaff412ac91198d27b6b5a4ac0bcbd991086633fbf5edba2e313f0af6acbb8ab72729099c1de0420c837f537327ad95a0b9c8abb88d1880a475248b2436101ed3d7e1902521354b5f070716ca0c416d1d9eb85c6a22de3172e6021ea0823cd41198859bd9a73abc8768e876190a10087bd2d926fde453d13cc816b5a0570d3320fb2ca6d54e5b56b8a537c0bce2e06a4128a03f88171091969ee8a5dadd3925360bfc52cc52891bcf3d558559d63e39a197cec465c73bf154c0a011797c650afdfb0859161f4a172d6522bd9221fa90269d1f7fa3e141b42211843f8c492e4a99f1b0791ecde2c94f8b1bad22ab61cc0a31879b0fcaecfdf09bfac0541c3e44c20812130b625cdfc5a0ae8882eb1db0ad40cf3d4803de8ad1b49a8bae12de03406eae46013c0d96a6c73b6e45a261196db4ded9675b3a867ecff98ad6bcbcfb617b2feb003c15551b0dd05a61f1e766a786ee768acba8d405268876d5e3d5042265cbcf133b674a2ce2a36ef5fe1fc67c24164bbeb63b134e1a09b99d7df02dc5a65d56e86f834d1eda3d1fd9a368e29166291947c0787e3a0ee30111d6be2f6a90898557975d9c1cb63036de63f1c18a2432fbb32fb249b9c45d23807775c38ba897ae2296daaf0e5b82f8a1d4b497dbc2b91c798ef742da1e49d6a579ccc1ce42295b0d6896fa6f39515df2d167508dabdd615175124d511ccd754a41933234e99ef3ead3889d6407df37e128bdb8b40982172f2df99bd064150500d5d97a103920a968513b55f1669ddf1671b4dc7bd1ae30af9c6b5653694e8d40cb2b12ef8036d85d30590c8cde8d11ebaad274650eff732a01c32cddb7bf61aa79c228febb3f978bc999c98d91b1fd818fbd8023efae7e6b2a373dbc007cd5964c061017bbe0985d573fbc8bc466232a3a41f4c51c404ae06e1dee6746530b38ca8cef05c28823cf14926e3f973dab71f2a861e443c1d3dab218e251337917e853bdce1ffd75ae953f93a941c8b1a8dc0364e32fb495450a216f161cccd84abdc6493b99c702cdd2844aa0e15ba7b91a1c1c488c9edf0eb6e84ff1569f5d1ca7c50242d9f59bfd0b74b6a59d947bd69dd56b26c0ad93d9c180165b87060f16332cb206fb457c49cf6c831459ca53afd1306e7de35a57bf2bfaf55474022fce4ce8ecde9fbefc148110033907c9c213d7f5216ed4e360a4062faca70613948afb86701d8fce9090c471ad9c0eb188759513fc28f267c0d9f7e5daae2b12db6284dcf997a5682dc3cd2ccf91b56e0859a3a8eb047047d5c7e4181936eb8e7886961c26a4d5810392ca8cd40096f55649cb3667fe9ec361e5dadc319e2879ee042c4b94451f791c38a79a11dd14cc5e4c9b68073deb9e0a8600932b0d62af11dd878d5ff7fa7f097fb33ddd30b9d5b764eb8e3750de736bb9e384af574fe62ed55bbb19a5556a854b40c6d6329a4c3644a9f23449734cb954f96cfc3938cde6e74253efb7556d83520e79bae2131797175191d3c2e8132918a3973b3c8d5b6bebbe7bc867bd17c8a6d3fa77649c53fc4b9a622864f8e555ac72703f7159db69b16642d197c1dfef3321b148178540be960d0003f93a89d50fc57f521347a70c8cd1f63a76ce372053d5650a54defdfd0b65f92bb7edcdc7763b06608eb64370da7ed7699a920a897017a5eb845ad9dfb1c6911f9107d5e6680cd4351098b1f479811976b4ee5c7aa0144069cc8f0ecfc745c678fd1fe33c48ae852f80cb1e90985b7ca1678acb21aae90072b81ce2f4b15c60f7b4c2ef4cc08f84781f7336b400f119a3a181b539cc94011549d612c63799f079784910f9df467db6e3bc32947c50c469db414697984d61a2ee108a52acde7d4e8deca7ac5ff1d87e2c26d0392e7fa954a229143c80f87d6d3843ab1866c3c24979dd870b64e65445caa509099abf8970a24d580d50504d913f9fe9a55fb780dd83a319533f074f7870bc0397dbf2af31c347228b27a4d74deb59d003a5d51d481eaa8ea5be9fc854f229a67ac543797844bbd6600bd489afbafafa5eba5f72709f2f9772976066ad273460e6d02d236ba456ce9dc4db3500a76ae7d2e1bdd4fdd8f7da180b63261a2a3cc4ffb42c794d447725a36d3a1063ca3432c5c41ad41934be8c04a774b9b74e71e5e8050ad4be92de7810f0c33c268695cab242a9ceb2dc1bccc76c029e850b6a170a1abdd2fb8131bd3afcb4292f1752b770bed3dc5552673f1e722459da2f9c4485a2d645a62ebf90a3df735ddd886fe1921bf1bee92cb19368a906a1d94fc0a478c9af1974e6f21ba7e1caca332dcb5a16216678c76f401ff564764aa27ed97324237f7eb010bbeeccf62361d1fb5f2a0cfe3175f3ab15fa4940a07d056c855e44f00344d00ea19f24e090b2ba025c6bf8e0988be01965bbe08bc3779fb16f13d4e15870f1c60d0d8f22306a7fef922bc7d446521a29ef628493dbaaaefaffeb9f0d5575e5b5e787cc3cf99c7e57f2ecc4df3cbc0eb600bd5432ca7140e1600921f5eaef8ee8a76de34e2e8aabcbdb568de6c1250cbd619232ffff72f0f5d4564a1d76eab53a1c6d2093491963ee017fd4a241c30fa1426563ea38145b6b7edfdc988fe164249106feef160040a2b5fee9f1cbd4cbdf2a9b52028d6320a915a854ce4d96a774983a6deb5170b20e8756253e1fffbd6e107a709674693bd50d6fe224c1fb4639f0172da507631dd174108605d931ff3ecc7cd88aca824df8e055032d03a77c11d880cf495629e5a11e37946243080e170ab74819e77a34d9d32156eb5a085335efddd91c38d4d67be88874e996cd6e4f4ea7f101dfe497f24ea0c77319cb4a76db40ca70f5c5a986a1a6909838ecfc53f7152cc57159cf6d695774cdd1e414194eb3ee3dc3d3325bbe8fe9bfcf7be7493450fd3e73bdebee9597f18d16c90551c8f5595b2244256852d0658ec7b43956f97a2f49614268e21d656120166a172e220002900afd2839d14567b5730a1d0fdbe19bf65a359a6e9f2411cf1276b0f69533bd4e9098b09bcd6c509d1a4fb240a7158c6f60c2ea443e318ca671e0e3ec94c053f917254dfa6cd43855a314d31cbcbc1175441429f00c03ac58c6792d9e8bc802f57020605a3c1b6b84d0e218823d9a3e359f01ac8b72890342d155f2c5a27d88b0624c7383e4cb75a7b828af726ad79387830eec0bae24eedabd65979feadad72486e76ebbc27eb261bfbd24807fcca6bb64c3d883e4c89cbaae58aabf566bbe1fea57e816d7c53a16e5cca7b27c941caf9d63bf06b88f1269ef011397e9c0ddc959654dd485863f19cb3a6db41bd7dc8a79d16e2ff30465dcc5dd3100ba9dee55f894b7c3320f0c3c9b24b13280689fdbc6608990e4d91eeda117d876e72f98fc4f42e4461c6f34f458781ff0cce9ba48d48413dc5fe2ab5d400a944b6b709e8beed42a61c2d1b9008b79e3d388c450cf2696c306651ee89c27ab6f8770d375b40ab482b8f869b70076802b4f2f432d47e3e56134bd1d8cb271ce7371a5815b79323f1f0fe376ac196c8c2dcd45904c746eb5415b080a5ffd86bf1124d01f2a62ee06e49b9f7c4d9d7e26afa6ca68b1cbbaa230767c73c348a5a8555e9269a7cae9565e9ddd771b2b75ad9f9f64099d8fc4fe47b2357826fb160aa7c2b5a7c45eee70fa745a19a795da5fc3167fdb4006356185519495eeadeb00c470553846fbd6a286ccb26ec63457d7a0431341843921be6288826b0fc7b9c5220ada1d1df6513e05ce35f4a5d75a658c358fc2c08de7b95021b2af493cf84b001ced799f2c870fbf168cfc68ba00e4e0141274f19162f8b0555d99c95bc1ff4f67ab5e7114ad7009f0507ef32c4c732e1d509355b31996891f0232167c1dbcb636583234f1a46d3bed564b70a2d621d1e5fec38fffb48237ce9791bfd9aa7a53c340970a6aeb56410101f65c2fa602eaed7bd3d15a86a1b1c2534219b8082075077c9dc23c8c59608d8a0c6b076a2dae65ebe0a8377c21636fd6a7ac246d0876dbdb5637db615368b19d43aeab70ff03c4c256e95947f1d286fed077b584fa18ed315c163f45ee50e79acc338bd97fdc12d8a88f2ef8e662ddf640d8e34940c1f0c7f7aba5083801255d28c2e10cd2b08052fd172c0fe4ddd2dde2eb6e34a833437a3e7f459409357535193332e533c7dda8f46af0f7ea6f0ee5bc8ddc6ccf07c0c1a06b9c530d265d66bafc61c37df3750daee6a964474b19c1f3311d1e1c7b48d2f1c847921479040a154957061672d2e2c212f9e76da377d24d10101692bcbb34248ac5710862532031b320a8011007e493c469b51fa0994ef2329983396b23cbdbdda11eacbb8a04353b245963cb68ef05e1b41f38be782eddd250dd406b140275e067bb949c9bb5f3bae13ccca4ae424610d802b4d4f9647956077e15d79b3c2029a3b3ca7152542d3bdef53f38c123d2270dc13b19555a14f7c3715afa7c0a08188a93c431120d95b14f94fb45bf7cb8ee09cf302bf3f5835e3fc9bc1ad2ef199e6094a4295adb5100a92f0196b6104a7eba3eb878404cb38d18fc27ce5054487a61e37c33a1e934fdc1f7890961afa93095414af952ffc3d09f39efff3ec733a968427db4ab18c7ca85475a6990cc6270b5c756805962841adcc4b714957759d6d4e38eb79d639d3f85ab6947745323acb32ccaa49a2e1adfcd50449d4122caa0d6dc895effbf008725ce6b28543c1e61af36aacd597ea2f2bc5e284b19ce978af237ae43566764741943924544bba7fd361334f740c804424d253f9a5f63bab05a288ae73ba1111e5672789671824df0d4c350636095c7ea9c22f5d869f7693389a9be1ad19c53abaf3f013a00c3821388692e3ddd32150e2083927a64028bf3796c51b6e89b3eba789dfb8738115b1b0edbc5f6d5157e62a35cd0a54875f8ad7f88b0187b70c303677a1ca7bd04553dd89b6e24caa33ce398b3979101c03a7012f43b22144c9c786b86cc97d5932a94ccfe75af5d0b7d1ba12a5c8e4aa9c3c5507f5ebb44d36129df5398bcbfca4f9231d036b21a418e4fd6fd8dd3f418d11f730dd722a515b657a3adc982b00cdffafa82b2deef8ed4c980e4b939a3c7a242fd2220fa16fb07bdb9892308dd3227b9219e800cf3e42b36bf823f6185f6d0a8bd96810d662c7c3220b8e6cba8ae5d00215fbe56d4621cc1e97e14b9ec1754942c2e0488ae9e922a1d1b55e6618d8f95dac1e9ec098e6e858d473395375cea941002e5f87c51122d233be011cbb4a7fd69da64c4573f63a7ab30f08a8d928a5955795904858a0fadc6c20b584e6ffae86b82bc396d9e1d64848a79027a104760aa5ec9c3ac88622d9afe7f7929acf834a5756a573d43f01ffc1c0910984e2d6743eb871535a4c523c11dcf5c561606b02bf159909189c91552fffc6b9d2617c05c26306537ac53a599cccc00483c1c883be8fcf673f972061cbdfea3e5fe07defca13dd3532f50b94cf592ef38ef951fcb754f0283a46b7545f92a3c391aeed10bca779095b9e14de60d1f9a32ba65838073d43d49ecb6cb0728e506cfb743b1ffb2cbd9c0b8a66c3285633830a19df057c213616dba4c430ff7f4a031f8d43642dc192d71eb976294ed24838891307cf1a994896ad50f22fb56b1c3f0cb8f123b27411bc6f0cb7518c669cc1ee2b1a8a882e5563df2b8dde8f28cd31fbc2d0a39b17e8ff3c0cbccf96a6a12ce79b9a4f5eec42b85a4868c855132137bdcb1ead08d85418642389f1ec6f1b1e443f135177bc4f36aac4eacfef7fd796985ba9a0fe8c7431f2f68cdce1c86fe5b716928a1a8dd777c6ede53a00a1eb31a5e8257fb3cf748630113b3da674403ce1acc6f7da062cbd2d7d2f0a866e0954857e6bfd7509cf282036464e6597e9a15a07220666bd2ce6193fd5ab0abe5b6df836c31f7d46464c80e689bae78600500884e9a3d2fee817f3fc1f1cd96cf92b158b9d1de5d8e054dfeef25f5c616900c57b9a74ac182ee698fd3f27eda38a834db6efcca0c21ae7e33a29341e1b28a8ec90050b82ca434ce611c86e441b33d083e73ba3873b76918a7484a49643df585006c5982f8434749f3b2d83dab488c98a36c3ba261319504e7978600d8bf121bf62b73715f97b23cfaaf3beed4f9c66f519fd4c47d752d486a2730afd7185a9a9c9aa49946d610b43b288a045d17c377468d4831369bd6063bbcd94d013f7901b3a3aec571bc1dd2c988a147c86f1f50d2d23e70bcc8244c301be303c873d558efad853ad2ea19cd40fe3f802e494324e43f6c19d6184a78b5c140cc362fd8f583bf49d510f7ea225a18fb42a4821084e35c5d9ff48584bb50b56792aa6943a7b9a52118050d97096efba44ea60eddb00a21913db2d7c4af2c3d360f6c959718f2288ad5d8e23f9cb5671355f648c41739cff3e77d8564c4c3f54a07b87abd3cf1e2a38cdf2c4580829b0047716ed33065d93b59f176d6a5a786395ed67a04a014ce7c80e44c2c9d1640fa74300470b6bb6e695c20033afd2467ca15e65bc68ede88f2cac8199478c8a725b8831076cc47cd5d2fdbdcba2f9b53d8e6aec6a6b36d33fd663ec23c257e0f9996d8e1ce12732afe329c5d8b3760ddf814cdd98ad9c7b1b7e255ced0b3c709518695e6a7c4248ba63e9751a59f7303c0b268c1e66b0feb1cef413f8eb27887e5094816a91775d1b690b2fb3176b095739ace9444abf4ae6f2e949507991d4a364eeaed973d95948596e0c95c0974c7a1c2b3ae11a75ce1e0fe2aa9931dd3fcb11483e692bdebf1ce28e6861cb53904f38686b3b8a599c93be4a8e55d7b092eef71b66b8b44b35f694117c2ab344244daf29dceacae7660463205f9d9440c2364e48fe4429475dde158e1a47afd49f86856a66f7adde636040714665270ba87ceaa8bacda60fa9a1276dc3ff6710879f2feb96b53fa091c0f069a8a366e91749186e3ba85441415bbfc0e259e12afd16c010c9c0725f90ac2d5fd86edd182fbbfcc7f5dc25bba889af83be3e1d2f8d5f18cbc17bf00f16657422a729ad72f05af3db80d6247021f841c06c8699bdc4d035e29b721481eefc4a57d58a40b901bf2aeb9a02775d06c7e57e147d2b22c0aa58a1a3d2d3c9eba9c232714f66d43cea4d23046e4b6f6c3083221adce1ddba5c5f6256ab1b9b16d8bfc17bbe1ddd44fb5dea456729f986b29499f46f6884e24cbc3075d4fe84c80c14991ddaa4a66ef089a6e20feb594695b2a89e502d142bb6d5be97a07282f99f0075be4f5cc618ad8eb6eb8d9ea2fd4fdc7ff566221826ba084f0be77232a418dff1a26860026bde9d1070c0be3ced6814c41b6e7f56cd256f4c27904cae43b08a95a6b884ca2df4c4e254b01cda85aa2d6baca64b274446afe88075cf44e30dae76fc12d349b6f5050fc7c5c3318c0446d707f6af18a68c75e623e5209d77a14375a0e7e91d7e23473f90adc32c2dab0c4829a7e72a22bb95c3493373a473050678501ac84aed48acb36c9ed2316a60ba6611a98225c589cbde7cecd36a45c9759b2e573067b58685b1d7dc6d5a8d55bcbedbd1148a7b1ae210e2419eab1ec54463d092eb3f2b4e0af9c426b8fc52cfdf7c6a8555d3c6ca100059fcb5efef4836a21e94a65e077734e66967b10cb1c9d620811c15408c2b6c7c804c2fd3cf63db91500fb2a70c576cabb471245d829948b1630403142c97c1b6e051ddd7685102f6efd64bb1e129e48366d2d0483ac46816c63a4403976e139cc3fcb39fec87a5529db7d17c7a0b1b73a01468e00e73bac4565ef8e0b79be97ec6e316ea5ee3347153309a877ec19e35d6097b558f052f439013f514a1a3622639b4bbb2d0b6faec195d8215f4bc4f0c02a12f068797389377ffd8b37e00b8083742554fcd1d5f1145470adb75a95c81123ac59c30556edb3453c335c256030b8f974da4b776bf7d7864daf75ea5e436a38d270703943663451c9886c6602171cea59ef3de91e52bd58b6710bf690a1155216c15afb3eb4cf6cdf557bf1f4bdc7faf2b755c5aaf7dca90acfb17944a4ab7eab56a989534389be0b0804055b6d66e518b793cd61739b426383b8646089d2adda3c8391135e39213679f650deca608e60a0c2158817b3024e6320a0c8d3ac7ac97a78b1b4a5907783490841550ba4dc5953b61f54f60ed82ca15c7b5d682204a731b6072bf6745f2638b27971c2a16a7211155640a3a656b95d8646a4a7021d4f0e31d59cec4bbc5d409f1dc55c895158e99e6dfeed939c523b0c7e992dc7ccdacbec921f0a982fb66b8572f2472d97854d76a8d9bbf57ce03df477519623ae526dd55af2ab045d08b6e2cb54c0be7a7e614bf7530eeef156ce31103cba7fa41a96d18687d5a24e462f2c6235eee7d55c7cf9c32ca2c9e3d3e7136197d90806f6748143d70cd60f2f5497017e4d7f9c220a75efbd0e83f21dcc5dc49198c40c57e5abae74a8702f1faaaff8c915b2adfad9917c7c50b5fab6743c689f4f3043fcd221e30a290faa32ba381141dca648efd0ba330df3c74413b7e62d2a93feb9aa9bdd5f543f3d033bd57228032b18b6db3bdf7c1018796065d3888cf14da4471ff65d05879cbad2748bbb86468b3394cdcae2d4d2a87fe73c4b2254191d23efa30c2c146bae11a8428336ec64cec4764680f54f70e1fdda1d175f18b463a74c51f50b4bc7bf4fe379cebc7705696439f43eea13e0faed51b1bc6270cdd76b52450c7c1ddc31097b50b4928b11e6e8dae4332ebe2bcd215609a9a7cf7e723f5fc2f48dbb9ae7a651816d59af88e7cf531aa5e7926138344f84af192c7d6100c7d4c02be9f7fe666302f084b51c999af419d41069b7413b79b21b56aaa2df720b76f8f3e7d2b5aa373b01b770afec28f890b6f755b0fb97fb1f4b1c19b8b3e6d096bffa0cf23553baa4f4e39017292a1949f46c38196eb9df8f3b499e305ef9201d2bb21a426a7278729f541180da5965e08d73cdee1085b3c72c4083103d7b8d66f15dbcd8662d6f71b061e36ac3602247d4a9c87d9cb785f460cabe335bbb29c893bb02c721a92fd98bff9fea9dbd2ceeb6519ead4bf20958004430258d04da08f87ba6ec9b0776c9e82cb78b28ab950fb17cd1439f931c405ede14b294720a9a322fde24103561106da714fd4b0b9c13ca43c76f4211f8a5ac6255d128c96b61333a2929c41e56cce3155e31731cb4e085d888535027ad9748055f8882f1f40323077c44b5e3ebae17566d1960b5eec6687e8e578113f99c87f62f3befba2c6d5b8083ada5444981dced3fca494f5be4581de6a84c6508902ec802186082e5196c71b4b776733853f8e14cbf0bac997cae949815aa5e2bb794dc17a9d60a4e63a3ec0c21f27cd945c8f72672c7c4358a351a68a43e511fe4b57bbb01f010d950beaf5c9b375eaf34ea87f9a576a85ccabd31156b6b92cf8e197feafdc52637b0294c9ced35a1eff7810c1cd01edf6306839dbb68be76fb20cdd30ce1e114449f6fef223db8634d9a3bd4d15f660b7bed999fd89d7bbb272db8f078f5d3b2cf5aa8e17ff7f310748b5f7b9c6c1675c6681731f807ee2c828c9a06049d6ad45a8c1d0ecbfb5fdec50811955e83a85ca7f06d6c4505b78e1543572667f76921560f89643c80702aeb0542641dcf0f5896a45ca6465f3e3b97c8c2a3b7c836327ed63bea754234dbdf78dd59ed63ee8932452c30ce2630476207f842452b612252c9178c16f190a7c09ea6a02b701412e2776876b770d3b5917da469669d5a8a1f329b7bd79fa9089c7e0a27edb5f905de9f4513b4e27ef5fd34bab69617f662f4a1f36225d0541fb3a2e7ef3aece9eb4300387041235b4a2b244052219aa8542c5798dd06eebaad4b2f55e9ea51b4aea6848a1e94a3f3a5ee924b9ce0312f7f5bbe842456e90b8d10fa18912b6e590756d20bf346adc18238a83fb076d335dda78c831d39909eebe9991eb34e326e76f5c7d1ffa3cbbd5924c6db104ecd9c32f19cc10206293c87c5e29e7849c82d5174192b279dba11d729ef9db16801eca78aba679c8cc2ced14ece8be5a54922c6841bedcd9a5f96674ef6da5453d22831a011032357f43c7ccacfc6275c9dcf15487de590348dd8bb462e8b6b1ae0e8000abb90b298a58c0347b48229909e3b572f32852cf89bde27bc71fffd366218470cae97dbbddb9d2971c0d2f06c63dcb0ec19616cbf575d18a17a364518ca74a8cd257494b28a23e81b23c24598a11ad6b5cb0c1340fefe1d37c461663379e8a1e05c0607ae372b946b56a0111d6c6761bc21c3c31ce9a6ce3ab7f1e9bcc7470a66685ab0beb3df67dffbcf732c1ade245cc8fe64697bdb9fb487fff76f9f875fde409cbf08b136d1c678039ea513e137899693448fba0aa9f695b43b0792676b83429fc44c9b4953257d03f3394e3f017fb14b65742e1f12d1d5cf71308f09ea37a5cea6819681fb2a2e128af42a9319be1c08b397791f0ef772435c85e1066f7bb588f4c086cced0dbf6cf877fd4f675358b4d461d70431a48dce74402695ef0d0b1c4cc71308d0fe8e55a7ebf3098ca4d10c98b4b70f77cb4054a06ef4bc480f8ef0504759f0ac194070a84b7d4d227b1764e4cef11b8bb13cb3d8de01f239a1665770324ce9ffa1d31c24d856ba088e5fd10603180d05d56a79e72f986d61b5ba91d6c8b1ce030c1cd8e535bd77f1cb15fa95d48811452f8a1da56a8f1df13ce42ccfa76826a3a83b2e5f061f2935c566a7493b4dbcd17ce2712be92c93c0fa10be346b06a712626b3d415bf52d24d5141cd219a491031bf9641c089194bab0135bddc79a8e51e56ac4e4d38479c108117a84ecb767c9151a38ff69a519038ed8690f1654e973e5c2f99646564209990e4ab84d3d613ed7ff5db5753613f3fbe2964793dd66beacf103f60aba3c821575af7435cdbbce1c77441cb981bd91b6adb9da61629309ddf89a636b71de36ebc417709f308bdfefec5a3fc93f8e4c0da13d59eccbaa01b7668ac43038575e08ec24dc24660909734fb2d0d3bff18dbdc170be1b0538d880a4bee03affec5786625a7692310993293e2d7192ec8923a4bf530f5779d160df11b9c797532ecaa93fcfceadade4e32d42ce70b8e672833970f4a9e20424d7995e30a1d92d2b57e34510fa6680d1df5594d00f322b44d7e675f36d9b8ed97845d1cf6475423b5fd4c2d5b5b79da2eab258873e3f14841a452494e67e28453ac9a697810ee864a52667e4f7eda8c450d059353e10482fb50ad07724aba3815545026a4100471f8a54c1b329e46de8f478283363c57afe71355fe23f83ad189a47332dc6b58d415aaed207ddbf2e673937a7cd7d80a7f67647a0f3eb3fb2cee6f68e208b5d7e1b123197cbfc2ac2040509339547a1eeca197441cf869e78618e34ed3616055a67392ed6da33363975d48ab4f0e8a9e8b05dd85b6ef97ef9a814c714c8bb045b7740ebc383c7197aee07b1f053393b10f582f377485831ae52ef811fdb8513f5e3b5edea9a828a7a0c34e412a019bd61dda884c366ce4dfe67324e8e2d30139623424504905e54265e7d595f49ecf4fc95971101de86a5e302911eeb239bb8e7a18083b9db034cd213cc70100cd24c7aa6485a93b0ea126907c8f2c449844eb9e03c550e8d5d41b10a6c96f52d17727e80bcee51cdaff05d67bf0cce8cd503451dec08ace37d47232ad687af4cdaa69ad097070ef269aefeca2e9d6fa03cbc66d0f8b434de6d54e51ad959c567588feae778002553209133efe32c807c24a7f61f1dfe230220b933a57f6ff8597f3c802858e0d78f1f3a638b7db172181f12bcdf972756d765320390eb10be59726c75742cfc4bca7c738289ef4c3fd9b915e7d9bffe0ba9b1667eb4a5bb63650f35e446a39d9225e93995a8f1d3b0ad0eccbcd0c0f7f80cc2c2af7e690436329d89a3d4e53688602c20580abdbf9d4db2d9d7c21bc8b3ec430b07ee0914f9a7d4c88d50f82aecf383b75e6033909a8dfcaa57b82cfa8445c0cd8e440bc67e24644f09876a0c3352923ed51a387362c7439c9a15446d1212102c7e54488996eb8d2b299cdf73b4da92621634dbc0e95e40b815275a3451f18134cfa6ca88ed9323c0d6002ee3344afd7bc44f3cea7069813834f6a14a3b76de18b87bc1b7bb821e70bc0e0bab224e5b56a4bc7dfce514f6db407915d848733e06454458bc6dcad3632ba6271189d2d635ea31856f776c64907862571b60410f3970ee5b4bc9356cceaaa4f895a6ec81f03656d4455684009a52cc9c645377c9fbc9e8da16098d409dad7557e772749c713de3a47101b87ae3808ec3a303af762d65214249dfa3e3059a5fded3399d71ba57e4c8618f56fb08f5e97156401fed5e95b911a2e913514448f066eebfbc42951422b0c1ed68b8db159e3c1447ecb7bd7caeb35000469be95712fa081ee1b71ef853128289fe865295aceb833bd5a202177e6bc874b5bac6e0fb4aa0cc3f1361f84bffa281c75524f42219075c4d1c9c42243294b21840beb78c32d6dd6977e166b1ee628d4a2c2d81336ac996e69d1ee4a24ed27464803fa6111ec34118f9da466021950abb1013425c743a97e2a53bd514bc0585a68000eb21e136bac46930c73c89930b3c8561146a3689dac5c98733a8ec38cfcfc834431e7aab9e99abfcc620c843159c71e46716a4253d6534d9768b2f4e938678dd7b15df316c88f493087ac7b04ab203b03c88b138e6feea1f088836834cdec51a0742635234581b3ca97a4eeb6355495dfa922bdcda08acdf46db93a487d21b3228707d9c72a4ef0520e3d83f475f264cf54d7b22bf5537a3f88542e0a2b00d6cca13ca5b6c1134913023b44abb0e276bd7a9434c047371deb95352c76fe968ddfa5d0afb0f2306c0af82ada11c5fd6bf56c794de5a380f3bb4b3ce786230ddb488e69ecaa82ec6b8fb125497de42c0d74762e38f837c26fa573e76ac11b09c82fa8092ee5c3f7fca73987add905ea08f53a324b7055d21c785bac8d0f6860bc6c1d9a54065581724fe5ff1ad10d2034d1946680ea6ac081d8b2984e92bf1a4fdfdd08c0dc06ba3f77415d40c100ff049e6844abfebb8205dfb297ab769285da1ad1b6131b1a9ccb9f3b6fc620589ac6f7f778d62261a56acbb901611b474aae5cd0a93b890e055d1e4421374bbecc0967e38ec1fd051a5eb2f3978d48cf1585bac38488fd4f0a94a5656b16fc698f5e6dd5ec2b6a0c579ac23055dc29adcd272eec1a215cbaa780070a0ea14c320d8e5bde12acbd748b3cffc8c5b275ca4d55a784e42645498d240dd8afc019dc688b256680dece5f6932f0bb3f0bd2fc42cb616c51debe999e661d23fec7b3e96face45fcad89d8fca54213818decbd535f9b563ee4d5768dc30d334526147bba01d1f86f6620236f16ad7f23dbdbd110b5796ef6b00936d91e15eeca3d98da341beef903ebc818c50ebd7c24426bf12fc1b63b92be33bd89176748c729cbaa9a22bf827d9da3fb2511534d03ecfee4c581c29a6dc1fbe4747631248825b65389fcc7a959065c99c177b804635cd507b16d9ed71b6e9adf21c63351ed6818e76b20fc8d78991388b55fdf2efb45725847fecef96aac4708e49019b376ee365daca664cd8a7138cb1a7c5ece11e28dd6cc7eabb04e53fdf44dcac77c7236ae4077510031bff8637f3e0cbafa22d3f16a540899360c520c42cf35d55a859ccb8516d1e68938807b0d10b9f07e20c1736d748b11b96e5eb0a7d5e63e06edf8e9400bfe391c17f6aa5f65fe05536d2247609e0e2f8953d263cb5b20f961abc27f429d98e5478f00f1be278cc984c826d59d5296389d3e521194919de5e451123c9bc139c9f5d98fd14aff03dd1377991fa535760cb6c6f870df00431834a20873ce157b8c872cff5b10035bbe699c059e00c46aa826a27399d10191a993095d22ccc2e97903b3f9334298225a4318339f355d44f3c10d74453d9887d7c1a08b68637dc9bb155e4f72da4016c2c7f6e667a78532be03d05be6815761abfeb7e59cbb9915bafe41d06083d82d1c448db1f403b7f0db540c5ca8976596daf18f9abb0bcbe9d2e73396355f3f1291010464b17120967bb7c4e1e8ae4dfce811dbe869ce47ebaf4c873b637051a682f1132f8978fd5ef3ff06a789b812c3f4f2f03825b3db693ac4d8971770c261c14116623d8a8613e697669430ce85b2cc39fbb0016bdfadc6864d1e5b25dd765ad366f4f735ad5f5d2f8a70d6bc83376f5eb03500106281a1980d76c5057bc67e3b5f42d96d94094218ca6a5f3693dda881f1dd44bdb342802612e9cf4a1ad7a217dd56beb62a7b2b27f33035d90dd48380c2b1d252d5bac2d6ad5170f4b5d9f40b5f15b128b803b7d46d430a2da2e415e46c617f422febbc53f0117e4d9c30f6c02fc0944a7ab59219a3dfbcf7102d4457ddab8071ffd4098d899bf90571c37ed1a7b0804a417bf591fdf84949ec134e21fb750011bdc00488e832b3b469b29ea0905648d5934bcdd7a204943457f9072369e0a9eafc8b5f7b4e1bc275e7d8e8dc7802c451c165c5e69e54c4ad1e3ea9d219ebdda865bc0df0029ee031eb26471aa1fb5497180337fbdb891bbc0b6639fa718b56f88eaf081be9ad3091f7dd8b9ef2e6656305b5ac982e358a62873973c2f971659c29c6689d97dcaf7928d8f94b5349711fb5ab004f1b5527ca9faaf29fc9ef0562275785b1982f94e549d5fcff1f2e568b823261611aaeb36db749e07778ddd9f20668fd583764b762ae122bcef1158cec0c600dd3c4a7ed749004fe1ad3e3104018ef894075c921e88dd3959c469ccedf81855d73448a577d53cd5e2decb352a1292f3e8c993b5092f02a35b56a46833a422bfe2c123a2df30fbbd76cd04685427548fe29f78604935d078df03333c01449f6f6c368c8f01954498214be9b566158a0b36fff599de0ca27023cbbb63b60d2d27bba1004eff57beaac178bc1bad4f1455598323dd0eb12ef1eb158619899d5e327ab922eacc5f9f47710b1d2850fa241ac5735fd7b20c7c04654ea951fa6601c71481ccaeb9a9175a9f0a153a0df0c44128e70f2eaa522687b458b6c975876501e357af8ffc1b4d9154ba04b26a61ff7709982ecf61610b5e0bafa28d371d526a27e914a7beebfe0e6f0c6e98afb7cf2ef00c11bd21aeea8efce5834960edd33577ba32b9a1572d77cc8258d2a139c066d20fd0009a655e5bbe4b6e6fb1757185b1040006e3008707da1b4a39115cf0f05066b4545017c66adbda017f854644394242d899f0ff9d983d64153cc13dcd1c3ce69321f759d57dcba2be73f169cf10861247aa6227413accaa27ee2c8166598b5c1567e2545ef18356718887992847b5bc5ab6f17175b71ed41bfa448ae39a4a84a2881f94e2bb0d939ecbbfed96e6ccb087b4a401ebec515dec1167ff678c1c75d0c97a0271c924ac1e1cc178ad13142bed1bca2b47177e6f1dc269d2c941b62debd4bd3e8c2c6511d005cb0723d72fa478da598273988d7b732d920e6a91816260513a926c6b1156e3d1d4d60122495e6e765115b0d113289127d349b9cc522770a9c3ab330dec03bf27dee684e64632bd909f709e2fe9e198c9ba961c39a3df5d7874ac9e1fddd8c6f67602d96ce175696de56e129f90d77912982fe59711ec81431e4da02ad506303439e5d84d31dcc1482acdd5e70ff4a5309297343a294fc18bca2aed04b646328d029968b3290713a039f90a11b847c27bc0f95472f22cb0f8e80b7ddf150195df33c136e488cee33c2485f794f223293662b385487ceedaa53b0b38dcb5bce9579677701b097fd1f3a972b4dc3bde9928eaea3e94e728399b5f6bb0ac42a53d832bab164f3b10481f0779a7fd4f7ee55d61553930f74f7d38045546e1c2080ffb749aed609d48c02ca537cee6010d5160d11c80477dcfdce0c771f8cf2ab35f5de5a41f0f19cfec616eacaf6899a7fb534ccd4e710edde06ec280f46b228535cacc8d756cf3fa98e28baab53853d9ef4108b29dac58f08f3ffba009132e60169562cae085691e3d77f30c3c80243404f846b0b7fb39710155c95d4770505762e6936fafbae0629a4bd710b849f1087adf5a285060abd6b76edec5d51ed4fca53de6759c29b14bcce813daaa2162786671cd92d9314b784361b7fe0799829198f16a56fb235097be33d78aa8f26381c302e1f2e924029f90d35100917bac70a76fc221ccab63f674ff39f767fded39232ef45d7b8dfa4244386faddd4120d16e8f0e000197a6b7ca37547a75693a579fc6c8e97d442ece1259f3f8b0848732d512fa0db20377e165a256f90286cd23d2f2bf8b2569e8b910cc71a38e74683d58828fb738066b7e140ee473b2eeb21da66bb81f1ea79de2741229d70c6d94b8fd247dfd9c0c0e8b112220838655bba789673fabd06b53119a0d5c7c5c357a73d8ec580d0ee25570b9592335e55f6f31c4fe340a5daa1d48c07343aeb322fb63c878c589856c6167511c291cc6102905222b5ee56572d3c9ec7565db2fc17f9ca3628d2364c16c4640fc0f75d5deebb62bd9c5955edc102d8392c7a1698f6f8ca3289a182ec58a294acc2e5403959c1a746e2c20b6903d664598b27bc11e1ac1012189b1ccce8ed2f0a2460ae7742b7038d82cc819a753a9129fa9b732c8997194173e869638b4b98bb56cc6016dfcb0b16657b8fa707267b8caf064d3b531e5508109bca704b5ac2d643541f86f7e2d3fed1df89fc52daa64d5929bed3adbad64f3a3042e7f93f292eb88a153b47ebee2846238894d6723bfc5a5b8bdef794c25943ccc80fa810bcc11e87b9899c709ccad2698f6adf5137bb9b827286e6313309ac96dfb016695f736f3e6841bafb99bb266a3cd2b6a5f091202637926126c43061a85bc3d6ca37adb76d7a0a03671a3a61f91f44d6aeef472555278b26ec216a1e5917ed7be1681933222019b587c1ecc12358bc2913f94aa8ca6e31ca433a9914d8d45987652286273259552fe84cbaf977183841f91e55ca393109364b3c6b90b66e08ada64e003cd4bfe20d8c826ead9b23f6ddc1f4fc70ac256a26ce6cca735f86d3184d213b60e14c5b925a33ac5873d8b64d692900a76b670c7c20fa0d8b1e1e77c2c3fedcd778ff097f6e31775695a0104be1e0ee31baecaefb02637dee2b7388b50e9d15f1e4d8bb3f73be277f7cd8b772f7580662afe4309635c07cbccb2874720d684c371fbe57305155e156037c5298739a3f724204e5ddf08cd99621b8ee9938c17e520d31551a1ef908686980385b5954abd845ee45e930b671d96586236a8ce18c250f5d5da75f647dc3821c051529f9360567b9219547318f6866555303c4848becbd81ae83cdea5632df9ab2e9bc7d734a3602e28aa38ea572de61ca0dc4ec4f6d610760c44783f9764c579071f4676e4dc9f1cc9508b2496cda7133780dfaa786cbc28ea7ee8cba5a73a0a30ca15a72b955bf41275eef61bb149eb0a31d8c7a2fee5bd9cf167a32331ec0b17f11bb903cfe49c3ebad706d123be8a3870c4315294e7798a774ec023e64cb8b8daf3f72d4045089059d472fb30444340ffbbd7ce0ce614bcf37b848f9d98768ab72fb52445dedef08d09268de5e0fe30b52ea7eae29cd16a4e6dcd0fcb248f00c5acb765275481040bd7b4786fa1f98027cf125cd5ce05aa23db694bddff0f054f7c97bdbe12bf34a109955e78c34c87405b0737227cf587c6e80bdb15fb3f044e398a977e943e04539d45e9012d7ff202bf5cfdff6d8b2befcc4c6c6e3da6125dfe7c9b70b432f53fe022a261a00e22d23d7fcc38d9ec85faab899523f714e1411f49f1a91c2eb9cd5ba18a7620d069a9dafc239467fc30a4a667a9d2bb52ad1686c704e5731d42e792e51fde140aead685fde68ece1679cdecf8caea25bfafb30677957bd1232c364ae5bfcbbd922bb89f260e9da3ab3942b24888f59f0e30c5e99b0a7a0da97658ab7bc35339d252c7ef0e821be37eace3d2acd7ec55a95aacedf6697c680dc1b255c58a5fbdf7b3441af14c30523c1490c8cf87645199614a8cc8acc6337cd76cbc75b2c9f15a76c2290e7082e28d523c96907b5db114646b5621dc7fa19c48b35dfb58de3d83db52e2eb1ad1a0cc1c76d56763bf17431d3fa76d4ee5990703ba00c33914db56d7cc8ceee057066b56b37dbf20f192d538de62c0aac74a11e6c1251ad6f3957ec83aeafb254aeef9059ba82ff7974b00009a5784c3f15654c441679ae32464aa970acd5d6d6619b7923d3286de53fa309bd03d222e12b8e6caf84dc3383062913cd4820d21ba21696727a959b6fdfdba59aaf16ed9ac6a01721c37fa445081296ad55910bc3ac8fecdb2e2804e6b5ff975345d1ac173486b24b04fa1d15998b497550d194f443ec79c448faeb4157978ea11125517b0d3773405b29f18a10019b28af2878710496dac868e3f36a577b22f10512058d026654da1e4260510e924653885fe7a10d4f5120e0f7e4385d3bb36cfdf734a5ff6ce4d3b4e0c969fde2da7513a8baa172161b16056e0b825b354e1ce7adc3f2b3f0db73610a774ff564b6b00313d82bd0b2e1d251d1d4024b9040ab478945dae313b4140691793ec5a02e514f934ae31407a037fe60083f7769acdfd5d04c8bd2e4f10a9da1ab8e32a733b505fe9c1dd2571019d2cfac2d8bcb09dc56f25e06cf4b18ddbf2b2ee37ece52db7038521238a0ed2fd0fd78ba5836d6986c877e20a93ef96b5b3de91ed26cf93d7062f96366e6247840083769e8d74db16cc695339680037d0709b93dc1755432f485715cdbad31b45bb152f906f91411d41c3171f8b7235432e82d8fa3ad4a5484f446b5dceebbce970cfcec4e0c34ef2268fea1c0e247f6eb16ba8242f79b408fea2f9723f4c0a4d8cf66eb65d7cd57222dc5ab64c467056237e8d0e4711f07ab66a49a05ceb3e8bd3e84592eb83b64db6b2e56be87a5b5f19cb4cce3be4ec2661a46feea754260f6de63ba6fb704cd4ead31861ea0d2ebd841a8fd2f0aad9d167b91793c45a503028d6c6c8e98c96b21427195484dd4bfb48de79d818e71aed1c10de32179cc6271dbb610008bf9f23de3731cc3dee1c49a4762ffe0242ebe30cf3aa40f7954e8d4983f2a65b92b551a47c8cb781804c1b278717a8ca1173c021ff4ce291b4f0e043d907a26d8d76136ce2f6005cae4a9fb4edefa71f89963e5a7c6233a1260b986ba1c2698e88c447bbea05bac5df1e10b66e67a15ec2e2a7da8248000687ae6f0429a2ffc586d477d480e1ee5eb4f807b772e742b9a307cb317518dd1d64950f84bbfe2bca182302a8c92fd8bd17bc769f21c966203a84286e6ab90775b5968d379f380397041ca423619d66cdac7df31132583186de6a66879dd621c26a17cf96b7300b76bbe0e583319543cd38f35b8fcbfcf8dbc6378cda66a70f33b17aed860e876828de3a535c379154697395335ce5ad989cacc747e9eb4545322539e80c601e4c642fe8985314cea1d8330d75565924c387cea09f8ed6952fa62686c68c5e4d3aff3b342a951f741beb28fbd69804f830fee8694e3d5b7a2c5f8a6246e38a2040333305737b2f7758d48b3ff3f56489c95d0730d248c281135c2fc95e4e0a3ec26f697be6e63bc26f499faeeb69812edbea34ed89d751628e53c09168c4e21cd0626c3ed4bde4ecf69fbd7940ab43fd165bca1538d0056d7570b3d99bf5c0e3ad31f811fdce6ec287ffa140ab36cafb8132022354971ee7e43261adf81af729b46e184069d98061b966250396aa11162ca3929895201f1f9c7894af9e7dcd643531185629b859b0fc97cad10cfda9233be134ac454fea7a8d5bdfd43a1c58e2cf642bbc33a38ab8dede427816deabb8e3ab5ef1ab724c4c692414d775d75f29ff493ac557ea21deaf17ddbf9b5f904440757deeb00843ea802f6bf3491f980cd80b0557ebca57f6a00840527fa59c5c08ac6580e4c1224e60be7c578dd06ffe3b23cc55077096c87c0beaadc6bf6c67b5b96ac0577612d3d5950f5aa7db30f0c6df2e61f4e993954bf5deda8c8236a2aefd8459d5b5a2a1a23a0f411b84d1fd494e485b907d44a005d445393e13ec64cd70e771604c0d11aa02de6d14df0b6173c706519a99d967a8476d7242bf4127fbde607236f797146ff17b6978be4d85dfe9ba3877761a7b2c51c40783c5933b43c5f09431a618e411ba5f820c0f4f2ca84946f16c1faa979d88ceb57eb89c3486d67e9e766f60f88f2d9c67039da9ccd47d3c9f1129398afde002427ae5d4365d5c2aff3c9765cfee3fbf242ed9daae80bda88e0ed80f9cdf732dc10718cff8a1c20cdf7e3c2e028d9a6cb017aeab730f26347e88dc51d64b766c4f05a3e204bbde2a8b6e68a6e2c65ac1727091ca12a2ef47b9f7345b35c7391ed8e10cb920cd2ed15e39af9659d862a032fea046fa6ca95fea53b6c1f715e8a2c16b59edff9d9350066c8a05b1c21a4b22a6a20b3498be87ea78138cdd0f0ec89d97604f9e5c0feafdaab8f1e9bbc4e5f4d3aa9d99d1d2f63ad064e5b6a4462d018f96d9833b58373068c59d4776ca80589bb1cd9c9fb6cdd96842fb7ca010ec6d35a03ed274be6bced611c854da5a2d9bcde282c3e3f9897868c9b8c208c94f966b50a6a33263ce92133f4b6f9f7acac3f21b2b0a18bd67b87181b0c9eefc811660953b2cedf73add12a4d92576f86b9e42ea192089eeec8f35239fac1d21e7364ef3ff728458e9fb3486f960973ebcbacc4c26d290a862fe8d8d70f1e7352f417589ed4457534973ca84da31612bf7dc45d6db29e60d2a564844c4f0b8a8e88a32668336345d9f98f0dd332c9553f8176db64fd708b86bab9d10c7d732d57ddc547d7cb63866d7f7eef467fd4bfdb686bc92fd74247c82c2406d5d87f079830cc9b126576e52eb7c634542947c3c35cc3cfbc32ff14a93ced34d26cf173e3e02328ca708b453feac49eca36089ce79e2209eb2bc9fafa69cc7ed235ee6dfea274e5c8e7518647e73aab7c4e8dddd1ed01e0d89fc47515f6593d2e359af908ff358ec09cc4be10f9596e59a162a1e9952a3f9ef9eddb47782796ac1135809d88ac3b8d5cf1b32686c08c3409c396d6fe6184c76ef0c6d5d467700d80dd64b0cb7a4a401547aefcc539ce8440109c70ea778bfc175ad7975b386d2c470b00e6c9d0678cdea7a115971581fc3191d3ad2fea586f88efa4099a07d683ac485baadcc387f8c0c342ae32a9bc8c43466f162d6a73c673c30f6f02e98eb31af7668c29b24d9bbd05fda2f3813544cf4d87513ecd7153ad40e1c9726baa5d779ad4a773c7ae3c390300b1d3d4e4bace2cfc40b41cf9abf4683b8626d8c38ca40ac23c91258ed35cdf9263cabcc4f76208852082116e07d7cccbe0b890326b16bea54f56502671e3d2718182c605c7c2c0c6749e8f52886ad084a1bf7b820f85ed5ea1943e81847990ebb69154b2affeef436f5db398b66d81c2aa49ebfdcd2947b23a1c2c7c8e4a38072d10b79499fbd407815fb205852ba9539d8b9b784559b80619f2bc2e02883990159466380ba64021652f74a717fe02159f64e5b4b14d603c1d8219ef4d1ce89c240fe4229fe32a805a7a5764342b9540d2a30c496cad0347915d985df58406c4ae58ced8cf9a56c4c82ea6a625c86a2cae3859373840561d0834a833929fc7df01da9d4210e72f45062aafc4b61d25132e96dec70012e6d22d3347101bd4c4da0f954f7edf6b461a60a127a15a57e85bed45539e35d5fb36a1baa34bbd0918bad8758494bca22a27026f946780c6ed487e666141b7b516e7775682a785b3c5d21d83c9fc45bf2103cea11d127809e30c284df7e498149b801289a834e637df0752c2df64446b236eae599ed29f9d52278d32b6a8607241d6e45ff69148b79bc806c3ea9be2358765d48e1afaae5af0af60aa3e4304bd5b91053ad7dda750fe051b48b36adf620efe28f97d32f3914d55fffa3e89250fa0e3b6f00f192f062d373e22ec8094edd8dff2c316309d94b1621d371772afae08705031891358b8eb3f4b9f99f9468e89c2704ca383a7d7a41f485527d0c4db956c838d83535affa3101026f4d2cc4f39ddb897d4780f0fc11f8c079b736443fa0510604035fb9166c5063f491caede06a9ac538db0eea19161b86687e2e02fa4e3201ef3882c44c2dd32724883724fae038b88d0b8e85c0c9fefd1a3beeadee67df35f181a50a716a557e0f2946e1ecd8ba198501e9a7479f06605b21e5d737d9c982dc7cb7f49688576dbd46547ed6c46246b46a8d6532a5ec98ea3fbb1ed66ea984ea800977ee6e4cb0e3ec3744f7236f004720eb79e50f9c1ab6172a433af3f9f23f8e81de81a9a35ba97cd8f92e0d1907a66245d167181ea2c49d26f702adc0646103433b79b69ffae21aa46447c4d6ac443f9ca562847a5abcd9959bbac90c98dbd12878db69042f1cf2a79697c9a2d5a1bc1a83f907aa26a15ab90b6de5cd20af4195055f7bc24b1422054864aade60009cb0b48f6c0518311c8603fca42f1493692165dec3f21e17135bea3d1dfba1e2262fe04a1d6e85729a183f0835d19e7325a388389e644abf381712bcac83e80a387c3d6c6dd41e71d101656a6961c722a6a65e5aa2deb5681fd7105babfe498686387328ec1edbd419006cb479c751d50a391042a8958f77dfb08afc0c1ec26330d90cf36c6cc5b8b1f6d3798a7253e22490691ff2270ebd2efbd3fcbc5036178db5e4143c9b3b4c0553fff2d0e23ece3340c2b21156a5db961c8c0a84983d005cd88b7117ed088765c2f819fb65ff1f92c502fd72f2bdf93831e5e51d18d44ddad472f253e1420b2353c04155332ad8f11b546bb13221b837c11e46e437e43ff3b5baf52168f0bc10581b427358c0784b6f9d3df18264d89f9f26142dc4def2fc32295e3c90313a63edaea84c6df8faa9b015d986bda169a6788c3f988f1ad680453535341198c8233415c0fcb3b18dbf1a399680260727e60190403c5bc6d2401cb5e53b4bc15c7a8a1082b6b3691aac6ef4dac81426a7beb61e7aab10eb48f2a79db4f2522bbb0f5a2d60641f780baed9c3b133a8a0223df983dcd88c73654319c92f310d58dd415b3ff1627f2fc7094d345078e983a21b624a3a5a720d6a13915027114c8e097f14d0487d454689f9996fd6ec39bcb3c7dc9a7be9b0214dba97e5d3077a8af6062bd8894411af1d6274e00063402033636588baad9e3815128ce5fba84e31152fbdf08af3540b56e6275f93bcaf657d4b594c4b63151da86798345355ad935b6468f7a6abb5c200f18806da2ed239620c6a730e77498a6c7f7d3ba94b4765d499413fa4d796246d83f92d7a5b4ddaea5a878e8a2915c1e8d2bb63b0be8da3d2e145ca69e4356fd26ce33041a9bde1a0190169f0938a6dedd6735ee0ae9f573da6fd35c6958feddb7123b91198b193695ba5da1fdf8d67c8953d4159fdd2b3f6eb7a78abaaf8e1d422152a00bce377d9f62e445bc43d26c78967697e9ae2e3b246603d80fccc83ea16ade3d956383b49e2cceca245cb803ecfca042950169d5a6c943bae803cc94f5e9bd57309f26f51c0e2ec3dcd081c1cc6c71c94a367d8f31ce51fdf1c6bed0a72f584e359f1a48adacbfb90f0ecfdc70ab1a3cd2d75f25f8ec05469fad8cbadded66348f703c80101ddc52b2b35f71dba5c4ec49a58f15db70cce52ecf45ed0092d7be569c1a7be5860ff2a20c539a9933f67192891d0c687576bc0bb0e03c6801c3f71ee43dde4f0973a6e62149b32080a0eec5aece29f9336f533eb0f5e6738566714eb9a6600c661c1f5c3024503b0acd5e9db87cea8e0aace75d5fb44ffcc4b03320a5043e0180b3a779f2365ee3b17aee5f48b26f94a02eee817eedea16aa2ab455113eb350337fb8fdf7658aae3f89fea84a10601d67bb5cd9a1644bdb7f830597ba8a5a7ed3ea2e17e100032c2c0cc4b237d50b874109bc4a74d11d4a027fa9d940bb042c27e3526ab1a1a8c14f9f0526ab6a632553cc5903567444847a2037deadc489c20a8402a1d010dee0aae265983fa4474b67ef507ff8facc6e5a1c6a3fd39cd11987bd6275ebbf3b599cbb9341d932501c31980fc46cd9f70d0c9ac3bece0646be6b69870660114446bb4bfc50641ad121ce02d35159d92f740f42bac0e14c45b1986fc119000ad1c0079a3e00f8d6740864ce34f1420da37e7c8bee9f6ec218c1e61046f3e970118c2c91f36a04a734916aa29f8f8aa1fe9512bb712fa0f4a8c71272d1ca417f2c8d4f683b8681adde7eeb4a27bc932444cad9a86d8a82c2a30e652cb755781b21f674c8017c2868c454263fbb2eaac9fd1b041e6b9bcc5cd15a742d128b35fa1ab23f26805420c442cf21f2404cd94af78bd1449d16a1a989ad2d3d452c839261c3abd4d5c466336dfd3d131a0fdb60673c72600e68716e360fd8d141e72452bf0d3b35013e4457949b6da44a5e914234d515e2492a4524777c647ba65f2bd2ca3caf4392aee810426e4c2bd9046cea171b7a1fff6e85d5e90f73ccaa000af3b26a72c6ee77677944e9441ab2fec08a41e47962615d800e727373706300e6f0e2b17783bb5d54277e877c1159de4f3db84bc8212b4cdce6f1345b61443f9962f49ae55fed6e0235ba0a82625597f74bf7542ba3c33bf79a642afbb5bf053ba32ce2d69faf29620c4ed47ef935574faa701977064843a46a9dfa3f04d2de9023bb536b71cb276fd7270f29d389bd390bf4f8a73c2d04a1e09369cfc88223d97f990a94c6b126e32fffde65c0409bca2e868050d00fc89faa180378fdffa2110cecd76e1e76e3f08c251815e9bc6034c888fc691e2a698e8954b6b4eeddbc64e6420dcff86d7cb377ca65ab56c74b5b275137dc7946b98e514c6bfec86e934da9978675f7578263d6670eb9ec2d6cd085841e4d6ac2335699504f599513e20fdc1b4b5a4c14d0de4888a9a830b35a2ab9b4cf70c3dc7f4de5d10f5ed6a9d0223dd3b137395eac7e76ea8ba10a4111d6ce2d3b4ef7e3b4cdf4fe4e773a5d9ec6a89b3a49378f9c5a6ee76d6f0cf5269244538ab92b73c3d29e744f22b2ed449942f7ec0888c00e08eab60e92e08ee1c08f296ba5b04ac97c2cd0dae13bff29da4f836f371c84658f33f467b0aad5c3a45ea11c9cec69e5e55381c0169ef764f1c85c5d14880acb694758fe1a240e89389d22e8a7b02222e028d59439cdffa3ee18d7dcc7b1e0d6c9cdf0906e22e1079b86aa803db2c27c45c2d66df43fe8edaf75ca2c03bc94a46994824b08fea871e782ea69db34446b81630026a10876ecca00209035049c407a02d544f5091c52793cd88d6babb829fff1e865e7370e90d05d5d5f283a0f4e7493ff1df0401864305025d97d6b202015daddc663e1bcb5e9e0e82763a662a6e43f91178c1355bd6ccc54a7cbba5ce2eee7b7a117ccd5adadf2af384dbd382d7630c73cdaadeead91b3145286e0f171036bf900c175ef6efb9f7caad50bc0fd0a0d1d65a2e551299791d3f2f8f99967ad98437104bba2e8125dc4ad5de15fb2e25ccc5fab3974c57fbf5bcc9169b5640dc0f08961c3da5b4003a47a12d866767ac25abea7b2a5ee0d5e25023d354097f6f01e6e53bd543fb51c40038f3c78da2579c394b85f7124ae123380f3a9ca46beb0c5009ef393017ef8f95d68c4d50c42292a4b1cfb6724ac7cc980628107fe11a2a81b4cf43a678abd56f54423816729905f69ca1e022ef914cba99dc1fc424ce4bdf615b1138933952520dd29483987e8c9db437b14d72e770ab7eb64080438936f61bc3c5f1f7bfa7b361901ee048e07d52f00333559dc2ab2f1a322fdcb30fd3c3a57d18aa9972607d29f1aead4872bb450ccd46b6ace4858f35fd5ddea7bc021d980c5a3b508d23a0ff1f72364f4b9c0341c3679e48084f72c48c59fb4dfe9aecddee13ef0bd95649e6bd7aa97a65701143ef8fd289ab692ecdc0d9b3894b333ffcc16e5fc30a2a084f4a1f656f6c091f764c13558570157783fbfe406e4e54f1295679239b079e00c44a4348adaaf21f1910110217322d853ca5032ab4242ce4bf9bb76fa03dbd58aef7440ddaf5c0303facd27357e05cbc39653906ce373f2d58d6b4a983f8a78dbf7787d623c40bddc675023e7313f7159c3a15c05bee2261560a21c81e8487db8e7a6539a04fbcc0b315ad38a5069f9d757b8a15b30cd6e28e612986e0bb2a0f53494ea5acbcd4cd24d57307ac07771b7152f80e2d6b3f52c73d0e620201d8ff5fd9363f1cfc1a5f1b0cf803ad97da41ce745417de59a7378d903660dcef26aa77cc695db22abef0af2565fb25f36825d5258c1ab2b3d8f0377527612aebe1f59f91ecd1bf61c1876b48ab845b5e1dcef79141e79b66248989098da6efd919d53cc7cb275e2d8c895028805e705e4b08426fad5af12ba854d840d989eabf61133a767fd73beda7f5d1d4fd478a31fe758e473a90a78fc0e98253e15f10f5533a39fc5437a02412c946cef3655780c61eab9b770cce90b1bf26703ffde695ca05ea5ff247723ac346fd86cf711bd12f2520cabc3acf9588e3bc2af3b90964538e1f840e8da73237ebe2a5440e3ab7dab1b6c263a8377cde21e1356b5537097562594c7cabd93b12bfe0520372566e2f65e5ef1313d2e09cafacbba3db4897640c30c38c8bd7970d31168bde46619866180c8025313db5d9c99c65947f6839b550ee6763c54a86aed0fed0febf63b54997a67bbb1b7a6893c7b21febe4388a202fae4b83d44b150063ab6e1919683027a6364d02ccd93a81c7def970536408b353b2acdc783021ce0294494636444ce1f028d1bab17a5d2cb6e2fc6ef275c1f82ebdae96edc8cbaf46ffbc7e7c710b960a5a0d337d10436dd28b935b6814fc0a3be4b1db0c7b24637b06b88c26478046733bcccba478ead068d059f70e33c8fe4aa0f5bc1101b796c7f4a3ad103e3a655e1e2ff7de275868bd2c421f5c492c55ac598039f6db3bd7e7355f3c24183b721329f5c32fe7cdb4aabd42c3c6d95f4412a4543ca91eb8d83ff5bb9453956539e1aff9ced5a517ecc39455e153a37de2f53a877397f21c7db106ad7d846726bee27368c54abf5d6a2e33122d4cb8bf86da274167480357f692b89925b8aa06dc13ca72d8cec2eab9a7270c6aaeffba977a725e7ce5f50d8ac9115d3b0f922068a253224c36aa8c47ffa1cb1c89249790f6d5a62d9821fb58fcb4f1045e2400772e3484d98b3dcb6a77a99e95b1eaa83de5e8490f2792544d10cd88484020af0e295d49cc73cedcb6818b9e6a81e6a842641f792e1152eb911737bae22e2a52424beedcdbfc0a6d8002aff30476e68d42c4e95e732a49abc5ae21869a47c57e9a2d2978583a8c9d5e4c6b8e073b01a2daa4fe69ccadb3cafdea300740b3b6b96f5fa7cdd9a06fbf9907109b49739a85962fafb80c4c8ba0fe66f5944b89ff62832bc415c398a940a5b272785e9502c687974c51d7bf4c0559e1d0c6b01ebbafa89df85dc8e37910ac40142198bad128d0cbd4ad57d5c32015ef54ce9a512bed4ee777351ce2d658d007962b9e4d86a492a800c7965956330d74a8279e923f2760f75e8f95fe48dbabf8bcd4539bbd6a6f07dbc46bf70995b7e67af73d8341e0a3156ca4c5ef13e39fd7165d0327133e09251bf121a699ff6882b721e91d9e7be58801a7843f8fff1f1080adf5bdfdf948af349fe978fc955e9e609bb85744100d3bbda1f621d42fe10ec86c71d76b3f7cd17ad79acc5d281874bb911acff0064684e1c4b5d4d093210754cb0c5770817a17789e91f53561448183c3d3097e92534957c0da02405429428986bea7b3b38dd76047a0951b9360fc62cd7cfbe1f47f9a29719da1452859c8c07f1ca766fe7eef08d35da712dc798af9248ea6087f75002ef3a402854a3e1c404ac67be84aeba4a8542802712010701cebb3246869a5be97bef5f8170016446807d9f48f0cc94df67837cc18e1ee9e9e55d79866c88f987398b5df5aaf86d1d06ce7793714028c4d5610ddc329e8d583c3414e055c0e8c26cc36a8a0b521aef21c1675d59828c80cd40a89c71e99439a94bdb2c2f5b0e2a63c855693736f9025978cdec06ada9055161791a3294fb06477fae6944342a5851cccfe41dee42d699241a246782fdd68141c01316ad4c0de199da4694c8dbed6af74137565a3c10a0e3a4f79773b27b3d47178f9183eb4cb90e2157ba0f9413ea64dacd2a0dee612acb8e0910ae801a640fb85705331679792868b3a5ef74c277dfa0a489fd117d2420620fd680c564c8bdad24d24c5354f703d8ce8bcc737a7faf92dc33626c365caf66c7a997a89ed81180c7a189f5540e2343e9ce89aaf1a8358f0b24ffd61cb4175f64989f8464f66942c84b7c13dd9a1093f5be35fca5c40af3d7b963550973f59181f5b87c69661e507ffbed9c2091755e2bf2d617d5ab83e41b3738c2050cac4eccd9754cae3a37715bfcf18aa2aec80633ee516094d4c189d4065635c46ae5e75b6d2a794aa00d6d26836cfb8a3428818e27bc894d37ec71ac4d42968598a780ee5987456fcc9750f0a9d066f5f88247a6aabf887be1ef9a9ec5fb31ab6ea78dc03ffab1240da023090858be0ca5151c7ef651e96f6a7a6f8c1faeba065ddd17d24f9293c678864b90779c48332519034d8d4773594a48c2137d878a821c66a19e9a66e95d32137074bb0a166b1a0aa1824b0ed1a8138054d5f4c222b850397f4fb934ef9ce40ddcc72d7411850b62d7d4271bf480efd417ebcb7d31b851fec29e23fb294ed4bccbddfa2586cc9a2cd2ab0ab1c9ce4b338a5a8cbf238fd186b070a6c2a3a7b5721ae2ad5292128147af8d35639aa864dbc13d45c76fed55379572e00298dab3df9bf6a4304b879cbafd57d3603d347da562f1d3a401e94804ff5a66fdd8162ddab559fdd4c9b2d12e466a4e2d2732a940dd3d31b77aeae7acdce7eacc8ca29079aa9fc77bd42d021aea71378a6a75531594c938dc4aa9900df89533f982534f6330580d33292b18b6c147137785393f32a41fc427f7b41bd9ef75ed6670febdb45323e33f62a164d71f972044ac918af3494cc7575bfeb03c6f1ebe6b3dc718921ee80253f16586a8fa2ab1013fbc2283f1d3f2577af7f7c033e55468360fee6dc320b03874ff044f82a35b0c1e4faa99326c056479ea98964c12d087cb376c734a3660fdbe0666538ceeaa5f0e1b70ceff56646e832483939a99b49c27628948fedc85e9cb17a3cb117b91b535e0ee702b1c91354cfec3233d0b92fdabca2545efbd5067e8ed33f252ccddaf91ff2472c61ad3a7ecae863c2fdb19c7daf7e923975551d87843bf766f690ab286eed1aaab5f56848cf31f97accb77cc847879ff9304743c450c5e7444a34b2ec3c072dad3ec2afee7df420c72a14e28b6ea3bc17799b0c6e1aa2b373aa2efe694eb17873b5a0ebf40901179bb529d6c1a0d307f9c0754f709bccd2495b2e6917d931a22c3dbc99d460f90246dc3a9aae08b3442f3fe3f6beebac479969587af551b7b866cea171ff26fd0f213fc3a6dae5f7e50b547acf61743b67b5f915cbbaac880e8580c99b70d9d3781066f2a9ac3e3dc3e3a5ee21d7ebf92e272f5501b666576dae8e417e5503a317c24ac899f4689d77c97fb766075641ede2ef9c22544d070cfd52367ef97050bf4d84312d4b248876295e6f5b9d5a86a0c3b6e33fe48ae738aa0363959f24ead68a1d1fd0e48632f3d8188e42c083ee85d3de7843a30172c0d70f353482bafe9b1773e9923ce08f4a9e12a426b33081de076519c4db4771cb9207406da7fe896c00dc7a0db415bb37e6cc3b03c1ef4a574f6d6d4843fcca1c748779df41a0c5797e460740718e6f84d36d3c40791ee6131d7a9bb64c3e6cbd55c31246b5fa5831b7307b2a674cf249cef80a32fff40aeb3b1ba05b1d4493a60b261e90fb7c353e0aaa004de56d8306e4731914b52ae592856040730313455b663b33f6ade4dab57c2dc13fae16f44feb90f44db6f62fc953868a2d3c9f1f5d311446c5e0cef957be756aede84da6235f74d97ddd9bab27344a20a437811305b83078aaadc9f8aefb1218a48b645fd4c6653366185d46903bb51ad7e213debf46b21fc098a9964a04e217e4197343232184dbf90cf00c8f2c13d87ecd880e497c6d42f2360bc7abe4f88f93f7a5f9ed24eb9bf2a6ee616d60aa79d80c13d4f6e64ab2de01843251e058b020cab73eae244e01a03b6f89aafbb121049c459990131074543ccd11c5a8b255d7131950910a1c06db3dcc5650b27273df298264171d831ae080eadd96bbb5d183cd99760935e6cd60ba6ba780d86203d73d9c3441fab6a412189f60b8300b477f985516f32e831bcd7f1b28da6ed4e0d7f033237676b28dc69bf469642f9b6fabc9a2aa56e3441c6cc7a5f8f5bd0b08bc32d68ef2eaea6c335aa05d71f1a0979b9c38e7c0c9525b6f5efe24d27f92dc202838de55f7426578880f5d19bce51d3deb5429b97f2bd00893515e2640e1362561780a67c2369a7bc44b0bb12ece2a8ccf5ece30880f9da593f359ac78873a3ac1bdc4e1669fbbbe7813b4d5a2ad0a4b76e61a106df6490b0bbfc2866e1221bba7667f3a1fc743c306026617514635d8193cbba8249757d98506870fc7ef97a06a8bb5f569a9783d85cee54d57afda1dc7b59fcac1a8c3770b88a9f6e25afd64aaed754cb2f0197e33b16172ecf9154fbefb0f1dbd61be3a25aa9aef0d8ee977e5fb184cba83e06df66ec0323cc39f31842723d3661002d1a453eb323759ab092818eee0436e7a18bee18cb84f4bedfb4e0ca812b702a0b07998415378279c42607f33c2c54349b7d366fbaa08823c88358dc86dfb07495a07e33aa64e637942db7bbc94c2640632cccc42a261208332f887394273f87a43a6c6160ee4c621e8f23faf76bb05dd826ed766a5432022e62d138416cde08b8a8769fdad51d1d6d8080baefefd4678301cdb9d0dcc47288f4ff7fb4f1d5c21ceceb97de507625936bf13f7a2daaa122e5a12c1ea0c0b4e16154d7031071edd92e5a6fcdde28402826539a94609e188bd16a6de7770745575de11c95abef1a8c0603d5380f2585ec3623c7ad2a9966e8680269f69cf4c1ed13407db65f3ed274210dda79d64c8075057b0935c3812523c97e400faffca08a8815f764e19cdc1b3711cc715885979a977df951fec178be103a0499949e4751083bc8286aa9e27352fed98973903093923def2fee286a396083f483cb388f125c5c122881f4143497387a9bb00d531efaa02d1f06fdaf8350001a9fb6b0e0f49600ef6c0c61dee3821f93c2952ebe1d9865ceb33b552c747b2647bf43618103670d1ab81d7185fa54c8e9da85876014f3df1939d536ca6e70798f7cfb9cc69d10f300bbec08a38b9c26554dc547f9a595fead95b90930e7ad11d3ca7154622ee7c117ddd2fcac8be9f487984e3d6e9774a426099fe529aa60897ef25c769a046e5f42e8adeed43d251cacbc00d47afb2f19a0ebcd163fc7c92c315753666eae74ab1912b800003c775c8d89f715f975089c22e88af1a5b163bc52e5302489875d48ab599ff9d1b249b69f2ec8ae69833092837e1222dc62735bf3e227eea10391dc97468c1cad3c6ca3b92232316cc3b84d5ada1985bc7b7084bd936558f75543a53a31c3fb39acff43ba999bbaf410611cf84700366d649bea3095f736b65cbdbe85b07c209f7fc18ef7eb4ae49ed5a379d7d054e91d65e28aa841f4a0105e1074f6fdf3993e2e4457b075e041d322cf7368123696088490213a96c8fe94619670a00ef75c381238ab9ce4f2e5c585fe0c34a3e7d1c96efbfa7b6ee975db8cef3a308bdf323fe9adb84d49add542a7df1f837a8e3f088cbc836b30f6d6600db538d6797b4e81639921b3756f99bad1dcbf75139f76f8fc89a3a2a82c8d905e270cd167d9a8d510a2e26ee9cd9dfddba58cc3b8b0a3b0534fd216081d35c553bfb98f25e9b0ca90634aa23635ffae3217a0e7b8f1da630075c4cde8373d409dd1a9a716e72873f8f204425d45ab50c0f2ab0b011fd9fc46c27bdb183dd2801d75a81294d84dba37bc51b16ea4cf070e6f8f679a5aa76c88dd534053b182675078f1ff8a6ee10bb08860f83f30f0871cd99a3e500a5d947bf9e3148bf0ee5d151a91a3f730267f8213f4db75514629f59519f1347bc41e404d2a29afa125f62bf8422e4a8385b78f745fafadaf80c2c174ea5a09d65661ecdded611f54b66cf603a0074e4c497851b4d5989c5e800ab4ee1269d6812f912c9faab39a52b5b24a77f5036758376c246167d73911233aee92349879b52c664b7cac0e21430fc2c4e544f7c623f0f3ae35306f6a6275223856c3e7da18b25073b026a0d1a5378ad23b62f7a0bfb8140f1ad60f8666469a6e89d3fe9b3b42f44a6d027c7a6f309e1b8a2d7bd32d99d9d5e7eaa3284c4262baf04ca312d560324c50af8cb9ebebe74f80b21f57ac640269b791059165dae4059eb7e9c9fbd9eaf97fd8073695759055879d326d13fa9f0057c81605f7c99769d23ef16bdf523b9c08111381834eb6463f2921ed11ef68654db66ba3434cf28b281c9c887c23d2e6e0400904e394366f278db4ac612711a2d5a3fcd3f3105f435da7c1705c025b4c6ce331a045a3f5efd8f1379e7e7112efb353f891d3adbcdaa169d0f91d5d111fda5661cac3da5375676c220fadbe8c641e007d17c74f5647d1463b54cceef5961a768260d87478058c049df48d96c6df5e4e7b5bc505231ab11a9fd3dc0490eb8009a623625e1fe6711ce768d34cf744a2dddd6e3445e0bb383ea2309b45efb6650d29a8b6a7841a4e7de4fe239d76bb5f52dc81e8f031f62f09b59aaa5871f13bfad99ece498669383b763d3b957bfab2f32598e2de154dca6032672ca5e474287430a86bf903f866f05e0b5bc1996f7984e49a4c81928d2635dfbc7b2012abed7382d36841f1ca59b3b8bbcf886151cffa1a6dd8dd0e93e77af175e6faa053a4b68d758bde0483e2bfb8427f3f7b5dcc640ffb9279fb8372ef7de0a762af4f7d4b9fbdadae0411e92ea7e63ddce0d707246cf340f684a1520c26d65b5911c6d8ae83423686e078d8e3af7ee6264dc33ca73c20d510de236223a0a21a08cc2155a3e86ff8ae945c0e24410adc4b5e3e2bd7488b4efc6f6c3e6e2cc80753435c429035871487f4eea490513e146de6daf5f0e354c7be0f2b625671141a56f16574110ce2486d2eb32b120fc483fb59d01975add0f491d6afe8bf822bafa41a39230c92a73b163a7884248dc682d329595ae35c1c178312b1c5d89f2356fa8ed89f11cff0c7309ec5fe56c8ee7f94af1807aba476e53182611109d83ada63f678ca8610f761e3d3d2127d266bb6cf5ca7206c8e8b2de099edbca7cb73ebfb04e9128aa53564cb98f0b5019176c30efb065a94f6c487de295c4dec68c864c65dac3e7f62c6cefca758b16846e6ced9d7d92184775b0b43b2d85450953de1a56dd728de35b8ce509763b829fe092324828fe67a67e7beb60dc7cc20f2967ffdfdf5d05ccbc6127ab38f10b943992cac021e96782330fc6108f40acf1e2e60c3b54e54552cab4a7ee424f58bcb530e1148063003ac491ffa4eedb4d1292d470f22c10749d09202381be92f832019ea787ea29386b3006f54f819fcc873dcbc5e7cdeda2542d5627cccb9f6da24283f008a181fc7cf855bf459e98d72b52f161b73fd20548ab371f6b4a9df388924c4c5a8886648a800353b36b8bf5c0cbd9da9225ece94d0558dff19935825556c2ede04f1e28071b6aa626e1540bea741460763a473dd61de77cffd1e61a3939e456bfd9b87b117a25a2e67f6875d29da42ae98dfc54f792f4f142a41d40af351b36408610f0dfe16aa45ceaad8f269f50efdfde4f8114f913b585bcd7df4c6f758c8428efb73759ba13f91115b11d2441889a7a7fdb0b128f6d22404e74514c6bfe5181f270ed9d13d4fb0fec4057f8254c6fb9aa15acbc1ccaf62bb9ab5db2854dac03f423595419123764447302d4aecc28065a5eab1da52ad90c62ef77a2171afd1fd54f537ed552f5a73aca96be51f55a07356eb8c522e3fbc703b3f71ee5eedcd99efdb79a0689018d00ad1a91036ba19a4b19a2613d7ae5fdd5224ef8e6f113cb8f04e28494555f30910ab1c02cfb7a99a7a3630a15f381eb188a16190ce7f4a981772b0e9fb66bde5212957138ce9e81447a0ce417c730a31e87014f4d5a64a7bae29b0641aca4392412e6fad55e32ed22d74782ac13c7066777c4889915098e61885fb403118c5f1bd5731f5ca4d41358ac1149f89730b12023e5fd77aa14dd44671dc53856b16a914e2ab423fdc6a7c4fdec1350df709921b10fc1c41d7a4013ed1af3d7c38a9c6ef88def1ab4bf2e1bd3c55edbde07614b6d7b9758d759e006b6085b0e09411b21d5fc66c9751bd7bf863651a965576fca937cf5d71007cafaed55de433c6ac76021c727a004c82c5b412e10349d7e46fb0fefeb19c427b54d81a26359870c310ac3b0eac5d9e80696b933304f2ff0b3ec92fce572c6334f3388f02ee9604ce5309d5ed5313f0246bc7e4b61278fea6d91f313db3dc347e76241148dbbef5d2027ada470851854cb7180a03265022794ad56273d98a6c60f45a33c17c706d129d61839e36094cca188b910d647c61b9c2d079c1fc4f554500a52fa7844bdb571c13caa0afa9eac86d76ea08ff45c60911d5db9ad3b12b7cd6ff04cdf8e3d3eb1d568ca6b66e2a287df95ce3903272b712447df63dd5d6f60fec7b6a8251fc065c70bc3950887b04275bb971306ddf626b6cae2cbf34316a9dda11d9b21a5d10069876c005b0e9009370f7a1d9c80a88953c468b14de954dedf562610f7509fc7576a29e6bf600e6cd6b706d49910df1575160ed30ee9d8406052daedf63130b40d7d3d5c06ade2460972de6ee8fcc084924580764a12eb2b5786fa61e1731779434215af3096da5e180c706f5318bad596ee0a4d5e02ee770bb26203fe422f33730866c2ade663ecd26bc41cc6d04f895f2f39293e3a0e9c2207aa02870a0bcc26cfa04ea5e9abe2a2f868dcf8400abe5cdbbd45be3e5cb3d4d714b5554b122fe30862d9609e931a5ce41f974263ca69315cdfabe2aef0132910b27cccb04cb141c76f3f14dc91bb6651310473c447ab0b4d1fb83bfd48f7a706110f76409a0e158e7447a26dc532b44bfb191cf78c759b753286495e52057ae271d45b2fdc34817a7dd93978333d9b7a531c4758a5716073bc702cb53a7d8df904986de99ff129ded1288beffcea229fbe5931b53bf820b693c1c59ce178f8d1c885fcba10c9a5e656ff769677b55ecba857ff6edbd1a821eff1656dcc613dd7ae7a517530d21b9000aed2f6baccfff66baecac165200515c4311e97ed85434717527f46b8e1b7c6f88ca5dd658f392b426922dbaf80bb518cdae9adcedc514a7b8720839d4f94efad5be7a6848498620b4735ab03257a6c84c39476454b846970825fb7301663d3c8cfca8bfc827354fea796bd1bec37938efc8d468fcd87b7844a379e522724af9c751dd9b6bf8832ebb1776a4b03dae52ac502a56c40505f7e89906ae6d54b4441e8aacd63ef910c66bfda1670cbc41c2edaab97ce2025aef86f398b1f114cd29561ed33e08f6adf7a7ab2af0703a9411d0fe9a1cb2f1884c0e47a8eeae7ad69f0946ea8780cd2372829ed35f047ca06f91b617d0c3cd2f765fc974f6a28a65d4f66864f2ff4352a6342c797283d8834f0d7a796c4be7a82f896604d4cf91299489b036153b90e58856c3070da29ce6aef06ebc0384e54d0c2d14d64285ad0f8fa410792767c85ff9a4fd5c6d700f70c5430e0d621c8b787908646a7d4af61976223d967db3ab7acaf898d55269bfcbbb7e233dc8c24f47e55e586c8112a165c56ebab153734e3e0d43da2ae1dd1e8fa9bd9f00bdf1d084549c8f8d8e9350abaa8b7787f7c94616f7f2567d7c456beb8bc862003e7a2a63bea0311c13b21751edc6930ece9bb193a5be0d6f929cbd4baef0a29a1e27c751ef13b9bd2410e50189a299e9f322881bc2d250e8d79c871bdf0f36422022f4921f471152dd19e9ee1b36ce7275af6d1f8660c632cf8edefa85fd95ed21aa7e13a69cb08f5e0770cf11dc4fbc90a599763b9c135bc124e603f93c2ac8072f95c032cff6901bb3eae048b9c67346c9ae80cb8ed179b0439b49bd94a0c0f0fc50cbe5354b6c48e571853e174b4d722e63b814b1b1b615c692f3855c72147a4cc9db9fde076746e7f8e951a68a3e5ccce07bb612c72e12a84952c6a7c01bd7a5d418d964b3af5353c3cc5da6cd45f7d69f1d0c56bd77008aa4ef0a29685cebe9fa58372d707176f63a72584452af8a049932944ef43606093885ae42f3a3264a1f45af686bafa829f2a48e6d591182a983ef4d81507b16442aea9358a00a5218290edddf010aeab0897d7e6f779845ec87b091e898d9bc00d985d46e42aa5a81135948988eec81d84321814bf8fad32e718a91d542b411329affb600a974cb5dc0e01727216e2926cc15d31bbcef8ecd7ef38ca7446ddfe05d5abb01cf8f926db2b4f1b7209e813cfad2c77e8cc278049c00cbac7aad19f830005dd1b2570da28cc51dc5ba07f15b4abd054f1eda6af150c673c121fc095da3837dd9d4941dcab2cc171bdb1319ee2a988628aea9cb09ee6296c011bb5be634accf503b1bf1978af4b1c68b04df0914906f531230e3a020a342bd481189b3035a4742cb92dfe0d1c6122eb7c302ba463542202272be4307d2df77d5a9b0f8ad05f779557356673d6f69092922ea44724fb7395972b314983fe616a9aa3f227732f169c494ce158ce9d50ead0eb0800105d449752079b720dee1ddba4efef914ed37b0df6d616f42d45fa5997f511075b95cc5e67178e3cbdcb7298c8294d63ca506160c10145a507177fd3e35a52d37ea86bcbf1c67f976a2ab246cbee5d40058395b197365be7f05eb7eabfd15663a93bed4cd78b1d4d53ac724c4b4cb82eff325b133f50f80f02112c7e8da14e23fb58ed5a83bf19e108f5f54e1a32e460238f7c84ffa45a1e88bb272e8c5257fdd3e6181697ef9beb8a0831769072eb49564082385af33ef96306f7c6cb6c58ff4837d5f9b7ede2674d4de859d86315995c4a3d85c604ca1ac53e8c4ad43ea7aa484e7933cde200012802465e9c9b7ff4a0beaad4a9240ae298fec9992b46e3b5fc8c8b3b073a8495b6eac664ac604b9148358e2139f413993f9849558f6d923a5df274a1d751b52205c15c790185c8326c044a1c48b761b7de4f1b0bdaff790371c6644e0aff891f394106eb299f9a46a904032d3743bc7b854755c4d133219c13be640dd2acdf7132349f42784b1e168dd337cc8f6878db692acf909415991dbcd94f2b2207fe7157c9e13d87ce85c9dd6badb48e1d4dbea908ac70e648a0b23792d17c842b1dd156ffa58f809bc45580827c7c8fe70156fcf1915bf62be07d6ac96b72c1d2fe73b43763727324b5beee5758859bf29079e4b913a348ce6a15eb92485375cedecdc2e06d53047b24eeb791a5f122370d81bc1aab76bb09185da63b3458dde3e3218bc8f258d1f3001ec8a5bfcc901e8ba6d43f85b55a807612baa022e79cad23335384ad4dfa69e1928b066903258cc2f7606afc37beb771062e15257da3b1b6651c9f27f551b975b762b7ecb211b6d936ac90a1a9a0ae4962f77220d2d6392627f4be01af1254511915c1cf48f7713ffdeacbe6659eeb591336ed86d6b265f508f0ed70145593e960b30c8d6a9c61633f891d85d8cc5940c7caca2eccb6318b5fee166947dd04b9a280a0e408e551ef2fc8340fadb321fb834d426edbb724779ae6861d89d1b8ff28b9f3501a3c84571e71994b8d7e4f67177ab400fdec5c308add20e3d99a2f29d129b734c6c62fbcb70d7d4c86eed201f0f13fc5b3652e4c6059d1db3de841a96a36dcb3c1a137c50c3229db4ffddaff92a0163baa7d448f6cefebab89a7057fdc3dcf1213d1feedc3003d136979a76cd9733394731821f1e5bf9dd7fff9795537d779a67ce8e9bcf296086a9566e05d0435d67edc205ccd91c28c2011260ad2747144f07c4b1b97f8694ff45fa488ae8a9a8864e0deecf2245becf1a5df8713d575f5931dc0446b91aacbe1b07b6b08d4c95aac4d172aa322ec20c3451be8b3ee4a6eb647543a25f41eec49e025ba3e4a966eb3a5d255290dce6540db007fa68601ba92d874b8703bc11a7d8fde5b41a7986d41702be10649147ab257782391b47861798c19335a7d441bc963f6be768490938bf39b77b55c6d6b28b8e30bfdebea0ff50ebf7212c0111288b4fe55c17b2690cf2dfbe296ba3fcbaadbcc29668f91cbbf8ee9c65a0f97fc656e95f426e7600eedd4f4c2c9bf25992515963c0eea293f4b1e9f0477a603f548df2fbac71394f5c4bd4e4ac3de9ff9b41caf239cd4da1bcc2d6f07ddbe27d285c0e788f9577f74bdd4f5dd622a0fb72829000c0cb619053f4ec51414f16ac170a5934cd1b8c8d8ced502ed24263db86fe899ed522940b895e08216cd34c047f62465508ff87e60ab2dd44e85f1759d023a30da98ba36220aba8a7ad924ecf74e70953ba6b9dd08907f55c250a5b4e5b8c1d64aa51447993e19fd2fb3f18f905fac9a9cdc3d5f844b855706d9737d91639f3e1c056053da530b3848d2d2db9403aec724666af3cb5c352326d521084d4769cb51621b24397e66736e9c1a00b1dcd1b305c49c0ecaad0e6feb6eeef85640ad8e50c4be6a1de86955141d138d31f32672d95906d963caadf7c05ddec5e3d62642139f07ad0dd16f960f1f4ce717f3e88ceb37b4ca633227ce6d639f5837d7145d870074fb03d5475042eb121e34845b5a7bb5f74d2628e1ac4df7e925ad9a32d1f165261ed1e26de1e7a13acbb8070a1ea46607d3e9505e43bd621252952db24a4fe67c7e49ec84519587351a9d7d00c9e1f347dbbdf93a2d8e96d2dbade9fa2b8c2e50f7525f72674ff8c530ce02d709b72fcaa191fda48362be53a51e317ad3b368cbd851e654fb7c83b4511a4a156dafefe19d633b29e94273ec731365818d56b0760cdc99f82bbaf72a695cfcbbb6b6568ee5ef63a1a3682a9069bfea1cd9f7379c48595fdbc0b9fc34bd2b4ec5ea735034b4d5b6a7a4f69aabb40f15a8cbad07addb6dc63b685b023ea728f52c7f0e8ff551e9bb5ac0268c6636de24db4d884e5f1cdfdcc864f833ca394b98d3243eb445a998b04684b1272545fdd44d722f534042ff20d388631cc6b30f4147b35696a6c8a1a0e8a7c822d07c240b9453ec5da82de73b48f5eeee66ece97aed453cc274c34fa95c71e38e4aac35771fe5d60611efc506695842148b046b3b4eabc675c7347577006619dd9a02ea8845868fb484a8767bce4d58e841bd2cf0af2cc2eddcf2629eda40051a53fbd9a46e4a993e91a0461d9a7fc73f1150f1d04947d536846fb318c460a9afba16731e89e7c41291276fb26ffe7883a13b0996ee6eb3a101ff22e41b81734b22e6f8829acad6d70ea49ab31d3a8ccb579beed9374d049e027c9893aebead384db1206a016837cf1c1c479a250dd42477c4b88ec068f6c6c0a8e3eb183fd0519659b1153c5133e7c88c6b5b75a436443af476f15adab6c193a919058787d1418e85105ed79f879e89d63bf207dd7a7057c48706a63885c2dc0f431fac028aa9c2da8458a5b84daf343e9b0f414854d5991cefd023b1c93eb964c8e53ff860e4ba09c2945aa150f8ec09f2e1cd0cde66aa93ec5b9883cb2e017f3de4d33c368eac0000cc690f17215c07af4cf158a5c37665844cc25abfa622a2714711d7dee8df0a1cd9c23c79fae7edf0e9a38c5a329aaad43cccd2a8a26911e080b9a3358ed2f9965d929be00660b91172b749b04c5827fa3b42de4157e19171e1be5f43689010e82492b74ce316b7e5d64ffa4fe42fd34a62eec0a42710d311df21530f402b336e13223c02cc86202849551fe8ebeb495b38ed1891fd11337941669d49ef4ec22d6c7ab277f7cd512e1dc91506a43956eb76463a9810fb1d23e392c8acb8fbf3a8354ecb9da5b2ce0afc699e25244d982c343a7cf7b58bae77d69c3afa9d7586addc558b85a7c43fa16d394b03aca887064c4aa56671ad5ecf138c20e51cbb0b2f970a1d7bad28ad85e76b661f60f4b28164e3371d86c6f7387b90c8024c8731a835c654226c85b9b9ac96a4c317a3a7394f5856be2d622808c5ea5e8ee95d460cb81f90ec56d36c484e92629cd285dc57c7e3cb7139342f4adfd28948ba6eb9a9b31acb29ab214741b3007863548fcb54b54a34b1055def4cd0209ccc68008dd60de2dbf25279bc14439eb9fb9db570852e21ab1a6598e67d73d214c5ad010169f97938283c939b640640f63c4591ce31d2c7df6926f5adad4b38ba32d21825e784bed65a05b67bb2889cf1fb9b213825ad4811e0673163b39604bb248b5d1108487c015e08bd5beed27cb73f68f09846dfd6f5eda70c75a3f8a80ff4d8a8d84c04bf6a295bc30ab36a8cca9f04b5d3e951c5dbc434b3ed0dc2ed3f92171800ac8474c93f9b9b1d16b263b70d959dd6cf0ceaee2e44d4be07e738906f99ded000abed87bf760316d0d997078e3ffcf39a95ea76a8c22eceb77be9b80d0e3cdf0f388cb17114b6547766d26e028249cef081b9948734fefa3ee64670463bf353035c1d89dba722cdca3f886ba1a604ed7ec076b081588bdf0c4e15f2e98a3cde9dd2c875d83c7e4f4a69aca546bf7ea5f53d747b69f621ed32e4977af46f6b0eea753d13b6defe76878b02d84963b135d673629ec02fc2ba326f37fdecb46b0fe133f31fd73deaab1f5f78ee4d5805f6cc96fa3ab66d0bffa6352b790995c537ead7ab02548f0e501d77977a23b6bf2c0ae62d8b1fa79a42a06c5d1f39995521befd6dd12738ce64f8f8c8faec70673d830f71c1672a9386f8b3d17f685af1cf98a200c419e465b48126f4f62617b62fb0fc9a8e075bbbb857edc6386ffba48f80496f7b90e847a52a1f4ab4542f532c2dadce514dc81031567ace1afc6af616b5761726834f40403025edaced386e280980b07230fdcb60ad983f05d42c9efd57355d9a3b1c0a8c3876a3f4112e916e3467b4a79bb92153bb68cfc20cf0fdf2da0e3de4c13118dc1fd52ec2b4eea571ed86e37f445411aca57e74fe62a60ef4e065e8b507d11ad1bd50ad9f900cc624b37a166edd68b58f894bbffd93c0332d736b20c68f66203a4bed901a534e37e12eee23d20b277e3bd29b30045010601a92216cd22bcc53f813ff6eb3799345d79759e4c80c47e1fbce1c336e60a469e4fe316ebd40bb4c02d90dd5a852eadc5959f937b09b1443167e72f1fcb503953df1cde601edfc832721b165bfbfd67b2d643611a311e0214beec7df909726861deb39342f588c47360c244d0c76794224c5be736385f82fc60a2c88cde766c7f186e15c3161cb0c5e14a900e3ff9f91c47c57853b713462f1f5aab3c123e1edaa28347677d154e12e5ed76f356caa8dbcf996ff15c7b5a3b389b80e6979f4c0156dd07e0745f0008e06431badec06ffe896497108af63412f596db37727591eaee5dc1c6b2a6194eb925cfa05bd40eb71410d5d0ef88e68f672e0c1e919d27b616f7e0e09cf5f1e4ae30e49a0f6f6b4c65db9346c0ef9ff4be8093c2148965f96edb6569969e89d3c41ad46c49377156fc9f25e7627fb86dbe814019b216d9448edc969df7e40a756d394a83882c4372cbea2bc69d7edbad298f28137ac395e810b14bed181f34d8bef42abcac88837bb2ee6c211391ba8e19bb4c42f3997c2da7d323b66c7600dd6dbe0bd4880c6aa1ae013aa0c49d0d15cc3a923b29a19741865030ec7e9bd1c7d05ba5ff93e7c9497224df5a46d6afc25ee175ee918432b08fab315bef6e55f71970ef17d4eaf5e74ecd2ef3cf366c8b4e50ac8759b6e9a5567e82074130cd51d00154454769f29ed4b73a9148cafb5b1cd7fa8a83715ab69499d489a3116d4196d08a88a3e429f0ecb35da62d4433033c9dc17d82539f0123d8ac357b8590cfe4b817a8479ecde0a305165da2060c41ba58cff3717c9da84d4d4173af01c342ab3224b478266414f3b7476934bc9efde448a1569bc59a6b52f81163ece50a66103d64f3d9d2ff272001312958b52fda97fb7b85f6fe2502100791102b1900c5c834a7fc72f5f83e6eec43c6f06c3d2e067f7c34e4b6d105846090684ee239e8c7c908c41013e636edd67311e4454923ab7a75641ba76b1ba692e3f5d9e26c871b361f47226e556b742305f71618cffca5fcff6a7bbb47974b99c97ce33f7fdb9e0067cc8bcf1743260cf3d4974a9b8c26065939f9cf7a30ed904a3bdd51dfeeda526e0221b7a97bdf120349e041a54ea93c0b69f40807a7913702142db1b40593d779cda5493a804f25b5225176fd3e1b556a06ac9ba09ff2d4ec0a5f3849629b457345324952df0545942635d672e73a131cdab34a8a4eaedd83586e4e93d324e1c6d7865b6076fbe0c9f96f469a57801e775c545a97748437802fd3635566d6044e18c185a4d108d6c90b2bbe932b1e7a4df7e5cfa5436e452e89c1a58a94fa76a7dd312271bc632b1436683f81b0e4278915631724d60d16b14ea77787adfd42b5820b7b0cdb799195112c0191f3164564417308c0e16e9abfd06048da5217e5af2d97d4d2ef4d1ad88193280f149397ad48df48f8fe593e48a9b0c8228f77692a171e5f3462cd2cf06f52c00485a0a33671d24588f12857b3aed9a00df6286a9ec403934583c68a3ecd1bb1d28864e715e107e36682b9e978adde8602c661ef65c2e6fa043baf801fe088ed22a30e6d87b80e2f71ddb132770125016e0587e97b0dd4821affa3937d87cb27c75be4ad7262ba394700e6d90fdde22e93f0440aa072deb4abcdd4fd71d725907957fc156f18229cc91b4a52ca05dcc7eedcc8f68567d79f6173126a38e474a4acf4d7ccc46ed1fd869477d4514476a29fae849ba056d489f8d2eddeb664aa3620d877f607c18a01aa8b3fc09cb515e57206bbcc6f8a23c5275610ea0b7f58eb847c54c2a9bf7b867552dcdaacd039198d632078326962ce222c5fe2eb708ff38d9a30b50ec16d9572f2a6f0fc29beb2c38a5f36d5b3abd19c7d755dbdae2d708b181ea9ce8f3313a4cdd088b9564306aec8e72858fe6033c31e8d77b50a181b74487db4da0c0c89db11ffc2105904b70e812f449aab0aebf2276c5c53b55c64a38e63dbaaf686aa4c17ca89e8559a74959e19ec0d44405d2d52b9ca730623f65b153b9602318382914b24fc8e76875b19b88eb9bc666e26378bfff4e5526f29db9c25c09b9b70853eb7531a2184a973bfe3085a1815d56d569297fc9334c346fe78a26eae173950739eb6dd9d16843ef43ee226c6159ff2ed641d557ce66c4abc8b91e096d5ddcbcc26969f6ae919b930e99cc8ffdac13b45c0bc7b44bce1605b9cde93640dbe688f7b631d28e0c36c2a094d965dbd9de17ad72926664cde59574a6f18402e47e5bf0dc471e12dd8e530c7906404a3914a9b4776e538410d1d977cc9c32dac9296ed97e89d701a9501fa0fcbabf0704a5a2f95c8e3ea706e1ac1e628cd86a587663bd61f4eabaded946b305883821b48cffdba7464a3448f6c3f61f414b86b3cab480178e52d50a01a6f5c372ccc235372cebfec958dcf95341c0c47983fec6891a84a3666034cc1ca06b3cfdf54cf11f790e7b08171b81e3252fc5bfdcbaf130b25efb33e157412ba9121a7822332ad7a4f98862d553bc6194af01c621919e0d82fea3d617ae6562c146f486300b6fc086d7122b001f5b2e603978b60987fee1e7dee6df670af5243decaff9b0f48735324ac48242e9e81cacbfdb07ac21c7b5bda89076f5b9f82680ca0721c5ba6180de2416d895cde56d688a50f347caa5ede8b1d042e9e4c3cd03f1972c70e4b1898a98d991deb15c9cc94ef94604f86dd07db62200b49d20506f8ba3f69dc736fe1fa5811132d5b50d218e5d3822033251ee71eae6f9d2cf1116a9ea718738897b4d7a5795b4b3541f667162da23b4767fe199bd4842136f1320b799137d22923f43dc1dd9c4a17667ee4c29505d8c10dbe655a2cb2c811ef721fe5addd5742821740647fd6df0d479d566cf1fb048951095b9fda5d37e9eab18ef9736cf3b30b5fe541f5ef74bf73b8d738902506e57d403a30dc9e226c779d7c9ba34f3a5be11e8f8f048b49d5d4c6e8f508dd4945f1c0c06c980fdbb5414a42d8307a5b8cbc74fb2e790f2708dde613f81a2c3b2027f68bcaeae05a8d52eb118aeedc5a58446cc29e8cf5ad4e94dd75ab4a844193d89f260f5444812a461deb298f9f325fd2253bedb71d1d6c810d4ae970bf0485811ee8483b9dd212f6ce34c40c78c636221d66d1f33a1825633e7b310d16fcc98dee46a2169347025422840b0fa6705232071c401433d88aff743ab9507d99c5f95136bbee2fe9a0a78c40465c80b4ca2b248840275e7f5002c8458927133a8e8333d49f4c62a5fdd167ed187cdf90753fd8753ffa3458186a4a6ff5a3e59cf55ad77f7e8a4602c366b81f5d0d5534041a7428b9e4fc5c5a2ebe23c1f07d3a5fb2df73233fe806d0b235dbfde3f51d6560189a14b5effc5dd1e3aa370e390b934f13a8db4d166940b9149a09123599f3e822830b4b5b0180790fb3831c98f63dcde594d073a14f5c2221a45fea4d8db2d8eac05757bbdace0922afe69c35ae129d24061915d7906f925388cfdbc24ca7f1115e4108e26bd47d7cd2605c6ae21917c8047769b930608ab390842f7b482996e656a85c8a5e1489fcdab9b6b9d1b1ee3b379ed81fc188dace270d5326db09357132dc834637c16b89c527588bf4333ec3ddf29f01a5443c5445cda075b58b678bdbaee6a7a0a6e1ed0f76822b304f4ceee59e5ba58ac74fd675456474b4a249b7deeba978b56c0bd166fa5dd1596b12240d462a3972ce67f49d2ac6df5a4efd30eadcc10fde3ab97a5aafcbe3333bd9a81068d8bdb594410a33493d691e69cf9c8b1f3f18d5f9b46d13a1f13315b38f8e361bb9620da5e173a9201a906b3615278ce4e780c81bcad8a9bc5a002cced1cca8b08f44d72a86b27100049d534d0370e65da742cd51813c675a210a8d2e9a8869f1ca8de26c162e320d88a8f8e265f100b698005e16d880e3c5a01721a9ad2dd58500599b1d87465a2abe885e01f41354dde6f55398dcb49b59815c07c0b5c0378f84503e20588bdbc25524b3e5fe901056c93c0e27a1c5f6ecd21c7897ff36f0705cc7133c112f10f1d4bf315d280e7b7b470f1873c305bbfb14c14fb9f28fb4f770cbc1e303b8efb175eef156f4fcce36c8feb64444dac134c3135ba6a3496d2c003ab3c74b9a366d427479866128c17c6019c6a826543a359fceae3e363d2ff24a38e2d5dfea88dadd2a0d5b47ed7ec12029dfb2d169c6b55130178352535b0122891bd838ae26705900fccd0c22430ca2376766b9d3781fd806a4b5ce8e6401d43bd79fd7d8de115e72913e6e0c8af5aa25cfc43bab6a43bb9ec5e6d5157a20f3d7218aae84e7da63b578a7ad3648b297f1ad7d2cf2c044cefe891c0efe70887780897be5f4dcbf73174b2225cdcd74e3148200bb2f03ab2f2e6e66797f568a493b6086c31258c831f753697fd8f1b0f8eb958355db72a6c6cc2fb698ba6659f53a6931517877b10aa68c12bfb841ed71bb2fae187f8a97bc2b583f957274d7b7e7403dd49cda52c4f122eb907137b68876b7390b9a7a92fdd6c578143591ef5f3711a999aa2f015b33d8dadf915c60dd2ac2b0f47d443dacb8e2e23e2e5bcecac39634b8e8f52cda278df03dc36302f3ad440511c5526152a298a4c6c8c7b9bf8ab390f59268046c8798afe8d2c3800b78c58605111f5606a32c7ca553da61dfcc87843dd0a4c18781bc449af4c0f051ec1e5425e5e41572a4414efc14165af618d3f6b3af4cc6fcef209a75a3130662c884e15d593dd6fa7a2e349e8df76db4d60bdd4c1c7f969752023f9a3ce9a6e387f914583f317eb9d1c5124b6bb34143e6d228ab23a7579f4f050cb38f095567851e3e309ec2a96430fcf9c2e7b85c12fb98fcde7d8a0fa9fe89885878d8aab48bccc3d6875df113e32d3b299514b1d8100ad9d06ddd81222f1b56cfe6cdbe1673863f41833e7f4bda5cdde572673f82e85b3213526ed199eedf500818d0f16571d8b4f976229fb7040c7f813a4f768a790abdf01285e3b940bc7b835923010020773deb716a23cab9a05c68c7622e5456e09fc2f7c8ca5b265f28b9cf7753a6812b1df15e89bddaf2cda7ec4e44a5a4f2e40939910bd8bc5b2a82e4f6f612425ff16bc6b7034e3563f5a18bda65dc81ea14460bdc22a46952289f862fb36933ad4e928ea65dcde5f4e571af3d5274e7ca6b5f0f4649967227c5f3bae6a4249a81148dab177c54052b3775b7b195176b4eb491c3148e296701112e597f3d9d0f4f6367e1ba2bcb997969b13b78e159a011b532f248703c638add9e80a5e88dc900f16dacd25aa0ae97e6205dc95e38ef797d35ae2db533a8338bb5435afadb67c82a43244b092bc7862fc76e70379f25f3cfd026faa1973593a5609fb7e7a063a1f574d9694153dc4c4e70594c0a615948c662109ed191510149088e84902cb36706530b922467f246322a0fae99be46bfeead4dd1695952650974167240deb95c904618ad1e4dfff569de9b571d7b25c1c409c6584157eb2491809f990c15031f1361f264bea1beac1f729bf51c7569d50f70e8bf49c91b2183139f3e138a00612edda5501733941d193bb76485eeeee4a0b870764be328ca481e33c2ef2d5db8b73b80b54f7afc48a8bded7c0655d94742182298b20bf7c6a9fcdcbccf92c19c179d746b7a253af6024d335535cbaa24de6929bf09e7bcc2dee58fada824419dad4f4540fa09cf3ffad9839b088d7bfa21f61f77095b8154ab2ca4c33c54b60a62b847685f73d722c4ba77cfa6d72743dacebf3e741ae7adf58b14e0b1691314eeeccb01b1c83afed7a831056eec5de5c0a8092d6f2f3f9673c7f1166d3e9738054221fad586e248619b5bc7c06ff33580560bf2cfd822858d71c5435b1e5ca56788f82dc8e56e5a38d1b1a0ad400bd068fb0dbf1525a565291462b7a657d1296e5c594c9ff6024e9038636b7c68e08218201932a9c239eb53036eed5834cfedc97c3242d24b8909d4077a21f20530fb74c21488ba8d5b4265ab77e0027d8ed98fbab5c30b131b25ad09c0ff344fa9d799c3842bed63e820726d82c5792cbcd8e5aaef6267d9ea2e2120f486cbaa455b9d94b71724edad422123026d7e3a7697c85f873ae76d6f67271a48345bf9c635eff87671b4c672dbce4902196e95c4fc894469137a43344580b501bf64be91db30239d365be12c1ad4502c5decd00638960daa6f173e9b2eeb644d3a99d060cc5704fa7670a585a9fc3f6f078996961e605f60f72aba0dfe489515c675505c9a21d1d00e4544d74f60a4dbf4aaccbd6f2945a68472ca3699d9e942a4b6dddf206ff52b50dc566962e11ed9647bd29c3e404002b60b30c912388f439aef3e709bf2bda93b54d11a89a0c21d37edf4afc832e87b9ba3c6f1311d51d713df8c31525c42e921b3dfef72a58cbeca0650c32f20ada31f165b76c6395cbf35972ddc493fc63a181f187493a24cc4651a0837b63eec3d199a82e1f5789b88e8ff181b17168be30e198912fe1849042f89aaaecaed7d34d372a8e39b52ca5770225e998c51564e03027d68c0cc97d9e89c410a7ca8fec13c58e9fa1d965a7f497002360ab12fb35b5c9748fb216bf8330ce1654e493df2ad3d9a459ea35145312e5c8a5a448ca3077733c593ca00863f13c6e2a94784b30a617a8d4a5ac90090b40e0465aacd5eb049611afd1e917cb7f18f79ef0a19d51ab22ab3d2a512d4303170bab757b5c68eef287c7b9cd03276e8666b6ba302af328f2a8e50395c335cc5e5a0520adbe474f01c3a5f5cd57fbb24b97febab78f319a702e108f9278e97b111729c313c6c8438c89495e6dfafb23b7ce2ee3a462684b4a3a9428b04d4e067f84e4c43306a8b9d357532352016c9ca079e9d7e9e5d51b09817f6d4ec4dd6a2b371eab440f33f26f247a6fb50c374c76c65203baf59829de0233bbb7717f64ac670fb1974d9d44a2a1b2c87e870056f2b994f31d64113943cffca52df1242819ee1d4fd21b1999e749f32a2f66f9f51f8043c6c49ff9d58616e9a791f333830978ec8f99d0e73dcd038ae069b9183c1f1e27c68ecb66ded3ea82b52ed0bcc809977e30059978c5111bd29f87d5eeaf87dc03c6ddb2940b53481883ace40afa28ce9725afa12d7cae22085dda516c63e2d74f445d0ee2b49d23fcbb8ad16b79ee5014859c97b2ae9cff4f257ae2bcfceae501fadc9a4f99e9e7d8d8e2252e9c3b9b934acbf956c320671a7028c3f244ad9c0480fb595fe963ffb705900806d7b03a94e0b7ff6df4a12f619ee85f3667d83ad1315bf78cf4cc29679a9d77096b3e0109e7e4efa92e4c4f98579ecd6c35c0edd9bb71c65b2ff174bb47dc4935eb89de564d69528215b50ce2f5efb093ee54e0f16853ea5c6e1086952ee0c5fd711d771f90392b56ae09db38e471de810155844b760c5724e9c4d4d80c7256dfd101be398a80004efb3b1e276367812d4c3a57a9961df4215b5f33578d9afe803ec8221adc77fb51ee36b79c8ac2c676cdf85e53816c7d039ecdde14ef06dc8d6271487c076880a99088114960ab31b1d80d3d25f4c936443f4f5a039a285788b56a7e115589979a260974538a59dfdc535c477a6777b42ec41293315211b2db94c3d23c34e804495785635b965a22ff12bc35ecd9528b1871a0f186c6d3e687393165e30c3aacaceb0b72b7a063705ecd77f965ec6424c4c8a1946b6998c1e5f8a889ae6a37520a450846a79a8dfddbfbd6a8d3173ba562dfc540077ac87f9c183ebe1338b55b35d81800c9d5a8be2c76fd4361643907b848898dfe26cedb5ec1e02e2bb717f88090139e1168ea9acf657ab669da6826e8833ea1246f1c7204eb077d2243e8cb7812740dea6f1eb406ef690d58861d6579051d5a1a366de6b58df23c5e4728831e9b0ad1905e8058a7c3ca1d741dc06269962a21fc94f6386b08cc6521f385c75ad7518cb1fe86d57be8aee24079144b33991f2c50fa66fee0f464b40cff9b1604546e8d94f0e7c7449d261985411a4ebae80f26613156fa3300aac93e8e9f5bbeb0ac9318d39c0d97604e4760a9b79769094a0373aa1e5c06311e898ebed1a34b583d5ec308d865b80fc1f71c944f9a5359fb0a2a6ae14f1d82d0f25ed723222f013cd434eaa8027ee553dd70d8f7bfcf9b63efbf0f11df946a48e73838ccec82ca82c8d73f03120f969a1d4b31acc5b5ad296f5644e369cff54f037a07e6a8ee14ec6c644243769ea2d8d81fe562d2ffc842f7adb1f1d07426aa8843875cc8a096374dbf5cdd27c097f0992d5fb2bba3ab482cc555a94af9171cef6270d115bf91abd7f9e00e59ad97aa744e58e4f60de9e34cd48b882a94b94adbf06b337b9fce56234fe28ba0255933c0e1160a06d366c6123330a38a10c377bf18fe33948c9ccb734f4473bc9631d7a82e6892accd98903239cd04f57be13c256d7654c9dc0d39c14dc741cd904b80d1b1321a6b705909a7979c9dcc3508ca053173ce1424439f4128972494233cc99b6621519a4941a627a4de1da5e072e5f6aeaa6c9a38c0dcdd972a1333ec44e6a41525e4e99c744071c1367418b0be914dbd31a4f6b70f08830cb9728c93f75f0b7b47623218e23572dcc0346baaa4527d35956182025482516be1b06234e837437471821793fcaf26e83925ad3ddd33ba367b1cfe77f1aa8380a76f99be341e8b1ac89a7786a04a01cf2f037c86016fb69ec3e0c1ac5fbb30a29e508ae120b2e037e3e7e8662cc3bb5b79e63cc31f4945f5a6cb0b67ef3a83551abbcab179cbb02f90167b5cf79a19bbf9268733c4ab2e13e030f61c68374cb285418f09904487487f1b56851cc68c64a02a80a57c3a185eefa9aaa5e33e9a7ea57c25120f9ca47b447a181113d97c44740680ac41f90552632e5a812b11c517a475d0eb426884ab976a4ff6cba9a5f91061ccf2c18bf9b77cd6e19a846d1def21b8093aa16d00b58e1599ecd840d5ad68eee70f791482a1bab393509282aadbe9f78b913aacc492a72e325325de43ec26d1adeabe69e1e1ab3a99170c3adba88b52885788b1ebad95c307c8f47c322e82e89cb7e055e6e1a46bd86a834076963aaeb382eca0141b07003d7377de7e7e767b553a161b056a10475bb4bdd11512adb7f4e03723cec5b0d54d4368566e3e27663cec704fb25428d2c3b365310c8f1c5c12a22fa4d414540c12ad265b6d7693746390c6f294de4673893c176736d083a6a65dd9e8a7d1724b2fe1247ab462695d3d922257efda74ebd00d7a5a9ab66a86d8841cbfd5941fa685f9535a0c51a3b8babca5376a82230b53734de18cef4817111a4abb33ab02da4d52fd6500067003a42fceb2d39d054833fb212f9f9672e2f93d9ac0cc8a197bfb8da40bb61a9405c164a1a7908570804c0b98d7ee0c9b4ae5f70493c6192a8a4355c572313d40873363a34f16cbba016bd30dd868cd38181d83331ae8df648fb2650d2d34b1b12106407e21ecfa7e2ef8f00b20d9277b1079c1522e019f2bcd97e69db906217853fb0bb1c5286ef62f7d4a80502cd0eca5af418da1eea127d03aad34be6935fadd525affd5925f029d6d55b4b9ca5c823b94f4ff7521018e9a32fc2b5576a535aa30b1250a7a182fe78472a2d5ee6c612998c5b8bf73ad5fd47626e9dde3f9b7fd1d3b682e7b507727463fdbb57ebb4a9f66226a0395de4e87cd8397f670b63d0aec331dbccf7c0abb85e43535cd81e0f4f9aef5fcc5ce2885545e90547c380ce493496e0e3fb92c87ac2f8cfa4f966f2354717438f8648dd5253755fa04b1836cc7de403f7a417641d7bf830dc6edab0f2996d1dc306bd788d0ccbeb5fb39ce5b92e33a317e70eff3ef2a73f729b575d95fc88aee10f468a267456d91025bfa59a77a5de599d87b20b1afbcf91105730b8c8d97d598756924cefcfd435afe27aebf6d03a7594334fdfbc4e35b664ca4fc8526d0a526e58da9507613cf56450ddcdaa1ced7008c9462df7c70324b5029ad4bdb47a22f0e5e4516b9a19af1a78878cf4fd3ff0bb471db33a28c64cb92581488534465b231681251a4eac508cdbd6a6f53f80826011b94753f6fff569c692f9ad12188d2e4d6252e250e86026dc36bd4a54abea8e4d5766fc15b6db488db196f890265415df91543f5c05953630cfeae56a9a37f5be23d76193f592a90de76b14bf1d0a80a401ce17a8282041889be2369e675f34bcba237b3691b619092a674096d8f0f75302634e2b660c3af7e8c5faee308c0b936786209f369133df8e71c34bad8b3971c12dd9877ea328d8435f47bcad6c2c613a9a3ca56071d59984060cdf1f014aa1c889ee6f506072c95d26499820e752d26a555ea543d78ae29f44c042ee187b137151c436f39cd25028f29f96c579c8bf187483b00b522ca897437ff701278abd2af868e7ba2e177c4ed49aad1782c6e275fa8acb7651b8ec7676f0b224047f1b92417e80c7393df46ed5b4c1750ff378ceab2eeee9bfd802de37f258780e5f681a5e1ee4c9e6a8728dd2461af67865ef23f50786412b34c3aa4f4adb69c9a447f7142e743ce197fa70be9c33d8a21c24c35bfd0f3570e7c22187c916dd1be6ff8534a18f4b60b4d961e72395882b6496d897eca1b77b7c5b75d1fefe1570a9fad145d9cd1c9a927e223895c6dc188695aacbaddfb319eb2567b6bee9db4a2d3b65f20bcfe6d584aa753ccecb8f17a56ecfb90822abf9cb9b82fd8f744141c2a394389340d23510e46f34c49afbe00d85fb6f22bd436f874aeafb2808cad4f89c15c7ea6b2c819d933e32985ca033aa083fd99b6754e28669f0bac8a514b49657df2d1d65641f86ae9e6e9e9d6102091c478f523efe28d19be32c84042ab2c7807c57ffd268177ea9cbe17a23f79712e5b100dc9dde3c489556315b2f32b50ef6fda2e59e789abf64be2b7a4c9d900f0876e4ba9f971af6ffe27ada79a90c74db40c5709f7c2ad968160943d49a9a22f93cd5bf0e59d012d83f9dbf9a76709e04cb49f3c2ff1c9ad85622a8d48bc5fabde402f015de1273ccfb4e9f04286d9ff5b5dfa99748b16c8ead20d1e3e860e57420d88eb288e4f2ef6444a9207f778c6eea34ad0edd2fadc773e67121e18e8762198c59e8d330581d68e5cd107fcddc732a7f305aae37dae28451b6281943a441df3ff3c6c1c62a568101381fdbafac6fb7db6d4427a97fe481e0f2b1df8359d970393206cb5a0e04c2f7c5757ef86f1ce41d74f1f81442e3ef7ded46b720e8209b725e728fad2c74e4bd436c8af40cfcf971a5998c231001fe28a19a12cd1d4f8fd5bcd8b05a159640ac7ead98d94cb3a4940702652efab6913201b8395948ff0670ed710dfd2f1843f65875d66c83786c4d3391bba21775495be29b6ffeff797dfaad7157bf4b8fe509166a60c82cb44ec4081457151fd7c9dc48dff6e7759023e519e158ad32877ee5b11a90536690e2ea083e2725b29537be2f7e6f335406146b6d050759ea7f38b11511aca9934a619a4847c06baa0ea8ba53bd5453f6a6943c8aa6e6bbe75b7df4288f2445926ef06db70a1e32963ecfbe743a098f63576503637824ffea6291bc400662b321e792ba8930525458c8e259b254ea1b791953d58f0c96d58a21b00cd1d7c7f28b7ac0670e659be7042a012738abca945ed97973373425c85f4e1819b94f8fb2d24449d52248753a79a63d703c28e1f791efd291e182c2afdc2143fa05698f99f2f6e5fa663bcfeeebe133fbfe08d865690207f9f82695afb7b80b6b420b5690e00ab0a6f0d40b16520c793fc0849f2e2329babf3eba397c0f41b5b35644f17c73db4156a93d5d98a96fa5233ec69ae8fe78712135c28ec8f10e0f48f9ee275795bdda0fd2ac74cf4f70a9635526f924a1d750480c2b3f7e9c4772a53f3df3cb41c379ad38e69f79de689ec41cc633136faa52b3aca841e9dd0e4b360a7b6049e752fe764d808e0cb4ddb17ae90883bcb171a4affcc96117b6e2e0467b4b32bea5fcc843d7bf611969bdd78a6944af6fe23fc0befbe3c5d08a01ef2216795411d853ee7245d5d4b4d0f25945da6e11ee15b582eea98d1fa3f857e48ea06346124dbe10c59d3aaa1372273df65c5fb2b8475ee7bf9198a8666d2aa03e6a8035b849ee03d7ca54419e78513fe583d4816bbce4527ff8f75ca6b48081dd94207790662c00bc79fb25ada99537cf1c89e274cd5f5699674ce7e8c2cdb14134d542de887615c4ea8dd34b3964c2273b1b54351df6d4b1d775cf5076771bedfd069f5ada0ad3e6575f724da04fce20b467ade49649b6f767dedd5d034007bc7f8f53a075f56d41166bd707f0631c6457f9db98618fa01d0fd5898259140a0afb209f7e795cda0822f510390a612a5475bb9dba3aa54da87ce8e964961f3a9dc8317aea0a949d0cb32e73c52caeb67f63ca7d1410399602dc82913958ae6dad6c2f6a9ae1f878cdba520d8c77afaac080433cf23e38cd3fce7494ceb97d29e4942af62c603dfcb247e4f97228c7ade814042a86af08921d2d90e0d229c18e56951b00f78584b98bf9481fc8f9be30cfa79d93453105e1b706eb406bd09501de744cda7f02191665332c46cbd946bd6aaf1970b5f411775e9a1804ed601437a941c66f97ed365b1442ad4f2eccc25a82d34a7f1f21e425c68fb0d1fbeee794946e83f092afe9d2e59bc88c118c11ab19c3f7fc35182d88249312b156e07a3284804012fab60a171ea08f6c8ca99c774878e58271316ef502d15058d6788c8c37e2dd18c09fa9024d286ad3214028375476b9943d139565f6bf90335d975ba3dac655ebfd69717065c2608c7302d8c170becab0d0d8c03e61e65a2b06dbfba6ee2541f07fd0884e9e6df4b2e819df26c1f7a731b8c0d80fbcf7f11d5ba4c6a5615bc2d085d1ffad4fdc1d86ae30758bf29ab3136b19712c18f1b2189214bad2340aa6394b2a2fcc237d0c4968ca86803efd1d0d71250ad80eb3ea202d7bc9c5e4d35a782d823aa3a22a81fa8acaf5fdf201222c20bb326d49b09de6fc450a6ae6a5d4d0526bf6910c92a720220cf42d2ab3921a3be46087fb153137e091bfe2c63cdaf451997a42303e5a8107793e69c7041df80a12218f514e4b7a933a9ff4b10abd19f39936e8cc4630dbe2b3023510899903eef95abcc65e59a3710b532da62732feac712c46387ec27ea01870290f184b7dbce84bb08ddccade12a650fbce8a11237d9f8c089ce6fc65e7d1b6ed4351fcb1b8244c3452ac15a69f973ae89aebb028fa5ad848c90c75649133eb5a58b197defbc127f615949d6d297a90e48075a7df66d39d51e2f7bfc09303619d3be9b28750556e14a1afef5e10644c5438af37e1289e87038cbf0b521920daf11699573942415c37cc3c6b8bf16e8d9963d0f3372fa09be66743c0e77f5238fad6a4dee2cdf209517394add9cf0c53f995610f612b63da6fa137c6538d962e1a0fb48dcd18cfcf04ee29a464a5f1c220c265a995e3a95760071ca0fc75f0af89f89315d58d8d8b85cfad64954111254f2b007712c7d9db29eb165f105abdfca994ad3a039b38e758698b6e5fd758dc19c302a892c3b621b793d7148b71d054749d90815a07859009a4635860f6ad293a5fee30d0c71e3d20bc0f5380b5b7bf13643bc5ae770819d599df890da87b4b12a93d31e7eb06bc39c8bf146cbacd6b5961b955dc9f71bfd2ea4258f1ad3531b34b15d1de6edcc779f9630f000dd1b5d6880d5f1704da622fbb2a649d6a1e0169c5ed865dbe073c3666922511b8331a62d9ea9c1f93f8f72b9965d8a4b5d09b85c0d8a480588dbdad8f2ca8c049278087d59d1990d3c26a054d6ef40ba61ea1894ad7a701f7a5182da08f24de0f0d2c99be57113e60e0e180a63be33fbcec2c70322e3925f0117c6c23450b1d19295dc87abd14a5667df254cb556f324c72edb20903937bdea9819eeb1dc261362d48605ebc28bf65a83dc37bfa300809482144a3926bd5537d67c01e641f1883bf6317bd5200ca6e75b0650b504065d3069b0d78c28c74ce866e3167bd86e6d73215993ee1bee2e05a4faef21d46a2ff6ca1c39e4c87cd2b3406ab98c1aacd398ae09c02d8c69fa1f50f62477a9980f6f4d7e13eb1f9dbfe4b7eacc1273e2cdbe9dd637b840b1f51155290f65e5922df4c6d1143defcc653f514c8c2138425043b7a439c301d7cd8530cfd685c22b49f6ce1767a3d10ad2806c14cc8060bfd9c6e61708cfd684edeee0985ff707e4db852bdfa892c87b60560ccfd913d58060784276faf39e90731018e0a972f314c855634a3c211c7934f0c46bd1ee83858dd901c93eaa51775d3f0bd81f31787de8e693fdd8dbe6bf06c4b81789ff34dc423cb3ab146983c1be8c1a633e5b6ecfd2340d6fe19770b5a7ad2f069f9266e2ad60d7d6a540dd44109f893316208870dafb60eaf14cf0dd0524a32ef8c7a31b3939cf06a23af05d27afee88268d501d957e31f98916f6b00c4fe8fb896abf2c3784e2024ad96e095c1a79057c251fec10cd03133cb79051ce53f910012f9d491bc43d903396e758d34e80bae25a218dea040ee5db5d2b76333cc5c0e585aa30825017acbc0b9c657bc95ab1b4cbe0b6ee4df7e6e35fc02b6dde1df7e96d502869b2dcc9b9541d795930a98fe0a6c5e6f801fafe8d4f13c8ff6c3e6104712d272112d1f83dc08fcf4154c07fa36af995ea6f8581da7cb3d652636f716ccd29f494bc91ded7bdbbb3cf1faaf411e3685a1820b74ba8eb011e8701116163bbd3285f653343db59b1d22948295bee8590c8a752d16eb7645f809c9a31375226448e404cb2d1b7fb9ff989650b5a220369ffdebf4f9eaad46f26d6ba349cb05e6f6d1e7d9604097b23743f1e5b5315bff7070e72a0cd52cdd6ed9cfeabc28e957a66e3fe72903465953b5a97fda09f99e94e05766ed4e535c98b0b1ee3cd44db2724d5d3d0fe01217d8f9fa73b1e112aed9312ff49521261a2f432063cf24b7eb6803d6afe1baf6d5051507631a2f18a1692571f7f38efab6b052d2b82e87d5eda8768f61ab7d8b2f1af594b2d53e99b0b617759947fcc6684b56a1b6900be02debf5ff7827c51346da2a17a649c7d6e020f843d192f8e59e506a5c116b6190bcb1a5d1dcd4b5832a97b6725a4d446152b7edf92b9c2c47ec0023372a01955eddf7bf9857e65e2fbf894f5984070ec5365b295255e63ad5364a10162b5b612d8af215d63ccbd54b2fc16d7b96dce17c9085c249a68f2d7a784b38474dcc2f4c4206638f6d2908aaa150740c4e8bdb3d37cb644a138762509461d4615d91f4b605451e393b9a3701c9c7ebba11e32429dda19ec18f445536edfe96a7bb3767da632f07d1b7411c25bf78eca7e33822afd0a668564af7840b85c39dcf450f3f70d77c8116a06117510f62dc6707d77af1930915a0b5eac20444234c2a152c39bac5529b6f1b7fe4d07e2f9e624106d98e1828b1953d7b35be1b305773ed62a469b52c84b2205ebeb59bc5cb0f3a30062dc8f3e71a9ef274c5c8e0a40dacd8a6e29aba827abf5bbcb7bee9fe04870d3773199291c98b36827c92c8f5a76a84aeff83e50e3a5aad8e1e60e6c3cb152dddcb5f20c0f30b63284f0fc6780360b6fdb4128c2740dad79e78f21df46ccc3f98573d7858c1fce0633728396a30ca4f6fca560922141c8be945d6a18873c321669e076c73fc65a2d5325229f073e77d6e3801cce5e25c80372fff9a1f147f890396a198d23a03f3dc41342756b0988a2b31683f63a6341e2ae18a54545c75973fcd505415bd03628a47e949718ff57a0ff1c79210dd1f002c80cbb9fec43daa86fc54327a76d93c8a3655a7fcb3281343c68f2809e46fcb2e3ce2a8f70370124af1f8c49257ad54519521344cf210d1caece22bab8ffca46a32d0eece94b534caee290d9a9af4039830bbd3c640be17f16a60eeff8a5a44eeaaf1d389c5b373d5952a6ee2ef7172a511e8f3358c5d149fe796452438e1280bb064a1a3f7063e828ef28a14948a6628c90d2f37e3a7655a2062c55e107c4507f3bf38c4b7df976f7046d3069e8a12dd3d48debf3738915ecbe0121289776ac7d3fd5163b33bfd4b95e29606d6a8a0fd8884a5af27c2cdfbfd4934f6ce341699fdb9cea6ec296573bc2e98dab01c411556db1c819f7f15f9c40cc5018ffce1c04457840660a2f6c47ad0e0d5a87cb01e10369ea9b8e10f31d2f42429dd7df1a808471c31bbc9e038335d3611f3d487d6e07696bb946749ac27828826536dd1f2f4b013f9708f9ad20f9d9f94aea2f391a5cc243230b2d734a12a5b0685bc2607d9f33be42670967b2196ddcf91965ec7ec210a08b9d560350c67f4390a2cf1c3c5060029707883acc3cdbf0de86e40838b6bbd33c5135bc8fdf7c5736272914b1182dc03f8d9e50b7a5c5abced4519bc41ad02e7527b1b692ada2bd04810a01e3758bab8872a7b3e646fc4c8bf3dd048c81fbe57cd1afeaee97d7659dfa7cd270c1f915bc6f77cc1649f276ea7000564bf5b9d2776fd2f311a483be10e95d42db613786acd5040beee2efc5ac2ad28bebe29e3e86fb8f792f4949c13b95e877b476f74d20be0de2c945c1e38ca32f1a71629aa0d99c22e9a9b3cc353a4114fc645eb05e96016d9fa3a1dd9e4e7a0ebc36e0c035f111112a70306c10d274180881a6bd3510716a3a18803bb813be0c83cc805115c740f6ec68fdad733b5aaa3ae48d85951fb8b5274e681e05354aa89539f09a78c3e6974dae1187ed1edf9b808fca6c01843ad38b4f5730635b5dbd3b35461895573497d935fb1b1350932be91677988782de4afb4f0c897b260b4623b547e120576d90996ee5bda9e4806b1e39644a8650c0b9ed268d9c2d50d3177a988841013a87aed24ddd6d310b4d378463c36d724f8f98336f647ad372df760606a97a4cfe90ee6fac9a6b8d75e9f7ff56ffb80dc10c051d4f30f0aa5cbd64214aeb44240899251633c07c1297e358fc168173d20e3406b881244f80701d20107824b0ccfd1fd1830c6ee7d18faa5b75d7cb80985a40bf61fc5e730094ae9fc40cef2451caadf89d01c3479606c82388b56d3cc16c1bec623ca1ed7931a7ab71bf835a032906f4f1fc10ee9ee02296a16a37446ec165d3ac08b388bb676fc3092e4e0370fadf92264c6386d98bf1051671884ac426aa6746e1fcf622976147110b2052dbc76868785d21257ff84f330b3e166d348bf1c72e3c70cc36d819fb73a5681db83c1204926eb3a70cec88f173f8fb68ee811b70648f0d26c2ecc7618477feb74c1aebe73c78ce2a0a5460d2547b74cccce0d52729bcb7dae7f682a2cac31ebbbc8edf1cb37694e9ef5f34c4d6d7ba66b18fea37707e3c60124d4bed7ca6579c24f49ce1165402c1bcd754b14057e3cb8da3f55ad3ae55b9da8dfbf1d15540a1422df59a1568105d7736c1da610c69822db7e8a2d2880a8d7978082526899be2da13b0148bafb4ab88afbde01e41ca79ca8fad70a35a670672de38186c956f7614eab97abcba7359acedff562e8382fb06faa14eed1282fe01aa3d684315f48b681413cb34dda7ddda8752c316ca7299d01b46f5286e0a29300d56bb22b458578b2efe645873ff8094813e1c4bb93745348e65d2d9f578995c07240867deb5147f6e13584a5abc5ea42faa6d5d09da98c1d142486757ce47ac65423b42bcb976754c32fbefa27f8b061327b80995237e25894675c05bf46edf66698bf151e38df5c73741ec84eb860d3fa36bdbf3a5c00793eecfb206dd0d589d4711f4a4787c40864f3155b25ac10ae278c9714b8f5446bbe47a7787acb4f2be9739727bac2d876c6ca24b08d6eaf828eaafce5271382050fd95ef525d947c44e6374c3027c76579233e38fbcba7ede5f2aae7649323540b2eea6a072425a624fd59ca0582c52ac33112fb664d0641a71bc776636668bd886de4508891a6ced56045ae437ca1860ead87aac51d641354e0eda8e3bd45fbe16fde6e76d8dcc9eeaa2d951c5ff9cb58be4f59406e27c26de006744fd29196e0197130ffd469a225faca6ae945b31d815f58c14af56f48dfba40817963340f399f81e525a2cc5b932e4edfd2159dca013527fd8f1fdebe15617297716d05a2473d06888aa5d73c5f773914d02a43a4fe464ba49a5087dbfc78dae3ff8fca262dadac53b9e337f8a178a0696723bd7b5bebcf2020c87ab458922e1a9bdca19c7f1aa6fb4d74b14c199fb95dc70dab61ea54f55597122d633e5cb9ffdd2c9c225996efd25c1bccff783cc69b0ff61e2742722ad305a43f3c4c329e1a6d58f2462362164db6057b30cfbe5e7b0bfd648431b5bfa6faa430d57fa028dce6d31ebded2e19a192d80526e5e9bf8a9ea86da6914d898d522c00f3772d7c7cc72bc6cbd9fcb7d264269291bdecc5f207008aa9c8cc097c4e238ffba21790fbe9449d113cde8aa94e97c723b34390b957ea84576c29058800e390f63e51639346ee61210b37aea91291d4ab39cf5598d4b3712acb073f2730940a1f6b8b3e48be03520960083e765a80e98f277f0344ea7e06f8a5b55f1b979ae5e1322cf03349f49e0e59a452c36ac7f84f6aad0ad9114b4ed0af6d924e242f4898719a41a305f9ff243e32fef3f1b53a13dc94c4197b0f2de6e2d190e088f3d86daed08e05f13e7d7d9c7b72365b91bb951a9f13fdcb7126776110adc875ff76d4cd024d39a79f11a235390bb45ab202f888a9dbd2b4fb0f0c080fe41632334762bec756364bf69247fd146d8927bb61f5ba468bdc8a5dee15ef1fa0a0040e99e669d6166b507a0648694fd5c49a702f3964da224fec53a475b74787ea8b82b763d6f1ebb95d4e75e4c4fe2e1333173d0ff78bd3e3c8f3ecc92fae55960104d73ce77a8d808bdad4cbe02d358ca09974dcaa04003c968c2214b89b8d8b35e87e61d8211fb43c0b7745b2d8797e99702642416237b67773e5b0de5ef83d83d45c67eb5db44e403b1a58cdeebfdac6b7eb46a37fb76b4f9a5d8e931163c2323669ebc39df8c4123a99ffc2631363945f17b0c6af5b07f54b8401c1df87d1d8baed7b68568c951286ad336764f59e387261126cf2db22c38ff373020f82ac45abc1e4a688a6cf643bdf9d721cd75b2c6b91c3c0db57ae7c9365177cac013fe23fa9536a73be831fd133b5f99624aa0e2e24fe04cfda3e0b94cf3a9e9c351023dc78d7b8dded8b4403037cdfdfc66ad90b0f650660e8025e0a3997feab14ce92964efe502d1bb068190b60917bbdbc829430d695d5f2735da979a87f9f5bb24a306b191ba8723bd060d864fef4a9cc93c709018da459641194f80aec4332b792a7f547575824a8206fac25f9c42e5f5f3d6836363c661782db270a7f33d9b1fc92aec25f18cfdfd4503d1234938461605432657c5407eadd511249ac99e44714dc01d7e8ab4228d783d8a1ca99ab83a9b60e7230749117305ec9dfff08210d7c35439cd770142bfa2d0a553d6c620944a0c3539235deea27f52e9d7b3a1f4f9b6bcf6ce3744b702b4984a2a6f0765cbd9fa7257ac91282b2b9579549abb7dd32e1bb54a6206c1e58112b9fc707cf7eddc79a1031bb7d6da7c21ee23f57f8314d21a1885998afbe6c8016804c84e3c77ee1876971f9a53b605678a6d76cb727db3f62569af2ee9b0b821dc974613eaf91741af43424332779299cb4d7addc656f3f340023c88c4cfec75ac2214a18a4851dee29a44167b54a1707bedca2f0c38e8cf76bee5ec7f776e02bb0647cb7dfabb4002402984f1778f66919d65196090f9c71411990bb0618ae64af6b2da2c9ed02d6fe1ca3ea191346bc4866d1562233c84014c741603f3d035d2703dda8b1bd2cf087cf27402c7444f8e10dab9947ea86db7ea4c1f00f5f971b36d4aa6c8bb3beaf104994d96b9ec0abe7a8d9a12f7e8d68cd54d915a1a351402536b0a3cc3d9b85d09c106292779c539d1281a19aa9e2fc7da098018c1b8112952559df9f608d757a7bca2e1231ccacc37ce78bd31baddfe51f8e3ca814d78c234f7a7e8a3e9f76ea6adc800d26ec2d03bcc0cbae01bf653fa30ca971ef773ba348d66f1c280ad10233a50f0d1f5b9cc510ccf56d376a3870c40121c49a83df4fa07b79094817a9abeb0310331cd396e006bfb6fd6af3aa9fb1afb0d9b7120ff88c60250ffec2f268b46809c0f50411699779fd0a22a70ef250292ad1c074b5b4dcc0414540cbe57e535bff8af25c25d2143e1e833b8bec967a6f4c38fdaefb825d99a7b6f54e6c038bd62feddd5d7b6dc6cb760f394afa4e5d8726c535294f6ac09d2908a85d16fbf574c63277ab22fba4a4e0809edb0ab8f01744016c5dba86b1afbc58df846d9b069da1d7af0de880e306097e6d2a35b63c7825588f399c0aa43bc24eeeb6cdbceec9f20cdea95d0a96b0dc183962718797536100dc323eed3092ddadb1dce059e045cab0910634b2539ffb6ecce9196dce14f1c85c4b12f7f324996fc395165e90a3319fb38f19e6bdf268ce89663b9f988a2387f64c1e4358898a6ad3b8ce85d6570984c00e28ad2574fe8b0aeff30887f8076ae985bbb0b60e682caa2e971b9f7f1e5dee2a6e3ff315625f9377f7ca34e04a832cb87b882e2b55a0b6b4e0163e28f9247c3dcfc8d59e4d718847a2fc012fef3bfc4115f0360547031244598074a069d33c237040be548012a65a631aeb4af7d0c0055fe440fa211b54579f45c3716d7519df3fd0db388a4787fb04ce8e2341ab1b444d19ba7947989ece2c9293d1ed1bb8605066df6f247e10e02fdad44ec5edb91a3b015556c250ab155f13d4df3490f0cfa1417825e817a037f348a5510532763670443bb24357fc5137d6b5f3bce7a88cf9d5de47230d51fe31824c125d774566289e9b86a7fa5d447c7f810d888e907e50c12a1ebe0583705d4630eda52d1c748548e0968c99907fd436144145bb0584cfb69665903082337187e275a8195ffe38080910c6466c06aa12d2e93818d42092797427ec5c776004278e79800c1efa084e63d3b0cd376236103da4454b498978097fc04d52b29974d015fddbce2bf55f6273cb4322656db90962d8944ef5aef03e9aee03422c671b961f25ff7056b9270c6c7560dd625020de95c82d395ab8b6c0f323fa5dca878cfc6ffc0a420d831c04faf4ca469bd4b3d72f4e70f91f26d59c4e9da368899816cf9feb041ba0b035ca1dc7d3db178ac32556de37cc7323015bc09b995df6b96c4f3915fe62178fe458bc31537386882ab172d803f0e7583ab8c532b7fa0d3684419679ff09e63ed088a46a7aa9822b6b1a7d0d7ebcd9e069876e8393ef72a10b3c51093ee6b80fd6f2c263a298454360ef4d721d9a4cdadbde1c57a93e13a1d5a5e5eaa3dd0fc4f58b160374d09ea621e561144e63da86781685f9d83be0eef34994bdd19b34ff6ad7e92f733b99041ea2af3831487f851e3a1b81088180ceeea06e30ce5f65da633514e048c05b90a962e32a75ed8068a5b706c07691ef38f137a13c2836516d603c91874c23989d9e04f0f96e82d7b380b81463501f5c5f62ebce79d24caf7066966bced37c38c85a60f7f53d828a20a142709c10df0ecd068ee8e718b0a7f2c51a60c08a4134155e5b9b168fd6d3225ed01cc62ab151df74b54060fc05a42078592aa850944703c1f8624a0c7480ebafcd13f8838c423769d4f7c8d4a78bc5f375fd74452f1473019a2de37fe6b58f7871649bc6540db39ed846bd6ae4faccd81deb8254c712d694d7e8945b83dbf3d7d5ec20403d27b2f8ca022a11b2a3a0df31844bc7387037fcfeda1b379ee5fa2a5956b0c0be4ce5f18cb87f5e3dc60ab42452e0f02e36fcb1f4e35c506573e6296e302307456d229c07e8e594bb2be19bf704e72535cd3dfb019618e5778b9b6b7f2423d514fbbf2608f055dcedbe002990d510dd14eb29485bfdd04da36ae8c9f30529004adb61342ebcfb45128c82dcaed7f9301d0f8c2a69b90bd7a66212425ad2e805347975d138b40f842ac8d66c6e71368e9cf86550102299accf72217cc244d3ae19f3dae062765da893be309560b067e9cc744e201478bb6f3fa11769a69327927aac15962b796790176d341b175f5afbc360e91e8853bbac92de88629d387b10d49a8fb81709b815ceb3604901196024bd32328e17b2c7226a5f6d32a219ba562b67279e07ac87fdd97ba4ecb4f7e3c0ceac96aaa79fceffbf70793c8e843044afc4113c9c5259494dc4870257d21184fe705f63193219b5223a2ed06bf916d01a7c97894b324d81148cafdee2261c6ac4b9d2b80462dc3e278b7a5d84bbca10e6dcd9de15d15be5695f1840a6fb93229ab20b5598bbc8a8732bfb2853494ead66b3e0c08e943fc18aa43ac5e8c41c3122bf29750e1f61cd7ca0e814983610c40ad836f851e8a480032f1cb0a9664e72341cea4fd93a2f39a91c7bf88ea96f9f270a14e262236cd69cdee4cdb1677629f85da7aeca922f0155ff73fe5550c36f067a34bfea9b81cf9f9dd30c44afa878ff3d9571bf4e4d03fad7b3d125089eccc7546322ce48b4ae996e01edab1affd1d5b010dfa3f7c3c8c88a40ff7c489a8197eaa7b0a75b9fd83863ca10b557eed0c620b12f606ab092a2f82bc72dbeee62129f375ab243f830ea92a255a1e7c0a23e85209ea1dd415c1c9778e14779ac0814b7c8f13ad3b1b2029e8bc4e3430165d7b08047c04644e902f000a251208379e5299705c0aa6e716f4e4654de23428f079bd53a1704bca07fb69b7799a56e1777e01b20bdb0629da00f3ef37a9a69bf5512f33f1ede13be0c1932c7634d985fac00b615976d99c4f84c6cf61107ad8d6a7a7764bf1df9db28e725df9cdd757ed0b684d46053dc071c7a7348e11176a55bbd430ab6f5b0dc0bbf0314c0b1eac11b6c35d79229865f02c81644fe491579af0f50d5c11bccc6bb7bfe76d608c8bae0cdc74c9a47b3149f927f918c7b637c28cf9509d7c02bf6c8c2d3ee537877df557913af9c940b56c94c660c0296758ca3251087f4206483e60f010f22dacaa974b3b65ac3c98a2d4e4c625c81c7ebad59e46b6a0f5be5c60c6d700813f431c972468f0be20f62f47f79bfd2c2cd3bb7d8c77dc7445df7e53a3de3b1b55f43ea4c5a9381a68dfa1e58910fc6fd8e1397d5de944c3fa928875321434fcc0503353cd13b52c0f623315fbf482204facd0906e1f56e711a4edb1a42a6d7bef858517107cdf6c9f4e0d8e77fc47a1a69ea605b284b49c11d0713ab02a21b77cb50c5f8761055a393e0157fbe20e3bea1e21f803722c0b7447d550710797a588fcb0121d17d03aa234f0b6de9d97e284acdcd6819329b5049ae84f724fb1726ecdd9a8aa4bfdc97ea36cf176c2b480187c2104e468ff39c699d40416035413538d38de054ccc51b55d07639ed3d69459e8ef8c1e61d235630db3cacbba0b2bc9be392dcd1448b06909967dfe9faee024fc3da6dbe824d0b148ba5338edfe0c1af084fb0a3c02d9fb5d56443106df767c300f90c1a03ab3d407216428d30eaacdfab32f51cd6688eec2a89d143a6d421ac46d63e5c65bc0794b43ffc923c0ec61db1fc9cd5df8fe801df4b7fb95df35b2fc65a645b69caa1a6085040110b3b62e659bd1c6c566b66293b2b16085bf2bb6d20830b252b42c72306a0ec17904f3d771f69be</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端书籍 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack初学使用</title>
      <link href="/2019/06/14/webpack%E5%88%9D%E5%AD%A6%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/06/14/webpack%E5%88%9D%E5%AD%A6%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><a href="https://www.webpackjs.com/concepts/">官网文档</a></p><h2 id="webpack-安装"><a href="#webpack-安装" class="headerlink" title="webpack 安装"></a>webpack 安装</h2><ul><li><strong>yarn init -y</strong></li><li><strong>yarn add webpack webpack-cli -D</strong>     [D代表开发时依赖]</li><li>默认可以使用npx webpack命令进行打包</li><li>linux命令： rm -rf [build] 删除某个文件<span id="more"></span></li></ul><h2 id="手动配置webpack"><a href="#手动配置webpack" class="headerlink" title="手动配置webpack"></a>手动配置webpack</h2><ul><li>默认配置文件的名字 webpack.config.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack 是node写出来的 node的写法来运行</span></span><br><span class="line"><span class="keyword">let</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)  <span class="comment">//内置模块无需安装这个模块可以将相对路径转化为绝对路径</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>:<span class="string">&quot;development&quot;</span>,<span class="comment">//模式 默认两种 production development  生产和开发</span></span><br><span class="line">    <span class="attr">entry</span>:<span class="string">&quot;./src/index.js&quot;</span>,    <span class="comment">//入口</span></span><br><span class="line">    <span class="attr">output</span>:&#123;</span><br><span class="line">        <span class="attr">filename</span>:<span class="string">&quot;bundle.js&quot;</span>,   <span class="comment">//打包后的js的文件名</span></span><br><span class="line">        <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&quot;build&quot;</span>),<span class="comment">//路径必须是一个绝对路径 加上dirname代表当前目录下生成一个dist文件夹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>配置package.json文件启动项</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;build&quot;</span>:<span class="string">&quot;webpack --config webpack.config.js&quot;</span>  <span class="comment">//启动命令 npm run build </span></span><br><span class="line">       <span class="comment">//第一个webpack代表是nodemodules包里面，第二个代表的是自己配置webpack打包参数的文件</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;webpack&quot;</span>: <span class="string">&quot;^4.31.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;webpack-cli&quot;</span>: <span class="string">&quot;^3.3.2&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="本地服务"><a href="#本地服务" class="headerlink" title="本地服务"></a>本地服务</h2><ul><li>临时服务器（内置express模块来完成）</li><li>简单执行    npx webpack-dev-server（这样做好处就是不会真实打包而是在内存中进行打包）</li><li>插件安装：<strong>yarn add webpack-dev-server -D</strong>     [无须引入]</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">webpack文件：</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">devServer</span>:&#123; <span class="comment">//开发服务器的配置</span></span><br><span class="line">        <span class="attr">port</span>:<span class="number">3000</span>,              <span class="comment">//端口号</span></span><br><span class="line">        <span class="attr">progress</span>:<span class="literal">true</span>,          <span class="comment">//进度条</span></span><br><span class="line">        <span class="attr">contentBase</span>:<span class="string">&quot;./build&quot;</span>, <span class="comment">//指向打包后那个目录</span></span><br><span class="line">        <span class="attr">open</span>:<span class="literal">true</span>,      <span class="comment">//自动打开网页</span></span><br><span class="line">        <span class="attr">compress</span>:<span class="literal">true</span>  <span class="comment">//启用gzp压缩</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line">package.<span class="property">json</span>文件：</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --config webpack.config.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>:<span class="string">&quot;webpack-dev-server&quot;</span><span class="comment">//启动命令变为npm run dev会自动生成网页形式预览</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="将打包后的js文件引入到生成的html文件中将html文件也打包"><a href="#将打包后的js文件引入到生成的html文件中将html文件也打包" class="headerlink" title="将打包后的js文件引入到生成的html文件中将html文件也打包"></a><strong>将打包后的js文件引入到生成的html文件中将html文件也打包</strong></h2><ul><li>插件安装：<strong>yarn add html-webpack-plugin -D</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用模板生成HTML自动引入js</span></span><br><span class="line">webpack文件：</span><br><span class="line">注意：需要先引入 <span class="keyword">let</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">output</span>:&#123;</span><br><span class="line">        <span class="attr">filename</span>:<span class="string">&quot;bundle.[hash:8].js&quot;</span>,   </span><br><span class="line">        <span class="comment">//打包后的js的文件名     </span></span><br><span class="line">        <span class="comment">//如果希望每次生成的打包文件不一样也可以加哈希戳 </span></span><br><span class="line">        <span class="comment">//每次修改产生新的文件 可以添加冒号代表只显示几位例如8</span></span><br><span class="line">        <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&quot;build&quot;</span>),</span><br><span class="line">        <span class="comment">//路径必须是一个绝对路径 加上dirname代表当前目录下生成一个dist文件夹</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>:[   <span class="comment">//数组 放着所有的webpack插件</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>:<span class="string">&#x27;./src/index.html&#x27;</span>,    <span class="comment">//找到最后压缩引入的模板</span></span><br><span class="line">            <span class="attr">filename</span>:<span class="string">&quot;index.html&quot;</span>,          <span class="comment">//生成的文件名称</span></span><br><span class="line">            <span class="attr">minify</span>:&#123;</span><br><span class="line">                <span class="attr">removeAttributeQuotes</span>:<span class="literal">true</span>,  <span class="comment">//删除属性的双引号</span></span><br><span class="line">                <span class="attr">collapseWhitespace</span>:<span class="literal">true</span>     <span class="comment">//折叠成为一行</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">hash</span>:<span class="literal">true</span>       <span class="comment">//生成哈希戳</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><blockquote><p>插件地址：<a href="https://github.com/jantimon/html-webpack-plugin#options">html-webpack-plugin#options</a></p></blockquote><h2 id="样式处理"><a href="#样式处理" class="headerlink" title="样式处理"></a><strong>样式处理</strong></h2><ul><li>如果link引入会直接原封不动的将html打包 并不会链接到css</li><li>可以用js require方式引入css文件 但打包默认不支持需要合适的loader做解析支持</li><li>解析器安装:<ul><li><strong>yarn add css-loader style-loader -D</strong></li><li><strong>yarn add less less-loader -D</strong></li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">webpack文件：</span><br><span class="line">放在<span class="variable language_">module</span>.<span class="property">exports</span>里面</span><br><span class="line"><span class="attr">module</span>:&#123; <span class="comment">//模块</span></span><br><span class="line">        <span class="attr">rules</span>:[<span class="comment">//规则   </span></span><br><span class="line">            <span class="comment">//css-loader   解析@import这种语法</span></span><br><span class="line">            <span class="comment">//style-loader 它是把css插入到head的标签中</span></span><br><span class="line">            <span class="comment">//loader的特点：希望单一</span></span><br><span class="line">            <span class="comment">//loader的用法 字符串 只使用一个loader</span></span><br><span class="line">            <span class="comment">//多个loader需要[]</span></span><br><span class="line">            <span class="comment">//loader的顺序 默认是从右向左执行  从下到上执行</span></span><br><span class="line">            <span class="comment">//loader还可以写成对象方式</span></span><br><span class="line">            &#123;</span><br><span class="line">         <span class="comment">//处理css文件</span></span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/\.css$/</span>,<span class="attr">use</span>:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">loader</span>:<span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">                        <span class="attr">options</span>:&#123;</span><br><span class="line">                            <span class="attr">insertAt</span>:<span class="string">&#x27;top&#x27;</span>  <span class="comment">//解析完后的css样式插入到顶部不会与自己写的样式冲突</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">loader</span>:<span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//可以处理less文件  也可以处理sass stylus </span></span><br><span class="line">                <span class="comment">//sass sass-loader </span></span><br><span class="line">                <span class="comment">//stylus stylus-loader</span></span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/\.less$/</span>,<span class="attr">use</span>:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">loader</span>:<span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">                        <span class="attr">options</span>:&#123;</span><br><span class="line">                            <span class="attr">insertAt</span>:<span class="string">&#x27;top&#x27;</span>  <span class="comment">//解析完后的css样式插入到顶部不会与自己写的样式冲突</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    </span><br><span class="line">                        <span class="string">&#x27;css-loader&#x27;</span>,   <span class="comment">// @import 解析路径</span></span><br><span class="line">                        <span class="string">&#x27;less-loader&#x27;</span>   <span class="comment">// 把less -&gt; css </span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="单独抽离css样式插件用link引入"><a href="#单独抽离css样式插件用link引入" class="headerlink" title="单独抽离css样式插件用link引入"></a><strong>单独抽离css样式插件用link引入</strong></h2><ul><li>插件安装：<strong>yarn add mini-css-extract-plugin -D</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">webpack文件：</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">MiniCssExtractPlguin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>);  </span><br><span class="line"><span class="comment">//如果需要抽离多个css文件 多引入几次就可以</span></span><br><span class="line"><span class="attr">plugins</span>:[   <span class="comment">//数组 放着所有的webpack插件</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlguin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>:<span class="string">&#x27;main.css&#x27;</span>,    <span class="comment">//抽离出的文件名</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line"><span class="attr">module</span>:&#123; <span class="comment">//模块</span></span><br><span class="line">        <span class="attr">rules</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/\.css$/</span>,<span class="attr">use</span>:[</span><br><span class="line">                    <span class="title class_">MiniCssExtractPlguin</span>.<span class="property">loader</span>,<span class="comment">//不需要放在HTML里面 而是单独抽离到main.css文件内</span></span><br><span class="line">                    <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/\.less$/</span>,<span class="attr">use</span>:[</span><br><span class="line">                    <span class="title class_">MiniCssExtractPlguin</span>.<span class="property">loader</span>, <span class="comment">//不需要放在HTML里面 而是单独抽离到main.css文件内</span></span><br><span class="line">                        <span class="string">&#x27;css-loader&#x27;</span>,   <span class="comment">// @import 解析路径</span></span><br><span class="line">                        <span class="string">&#x27;less-loader&#x27;</span>   <span class="comment">// 把less -&gt; css </span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>抽离css插件文件时可使用<code>optimize-css-assets-webpack-plugin</code>优化压缩css以及js文件</p></blockquote><h2 id="特殊样式自动添加对应浏览器前缀"><a href="#特殊样式自动添加对应浏览器前缀" class="headerlink" title="特殊样式自动添加对应浏览器前缀"></a><strong>特殊样式自动添加对应浏览器前缀</strong></h2><ul><li>注意需要单独创建一个<strong>postcss.config.js</strong>文件</li><li>注意放置顺序！</li><li>插件安装: <strong>yarn add postcss-loader autoprefixer -D</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">webpack文件：</span><br><span class="line"><span class="attr">module</span>:&#123; <span class="comment">//模块</span></span><br><span class="line">        <span class="attr">rules</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/\.css$/</span>,<span class="attr">use</span>:[</span><br><span class="line">                    <span class="title class_">MiniCssExtractPlguin</span>.<span class="property">loader</span>,<span class="comment">//不需要放在HTML里面 而是单独抽离到main.css文件内</span></span><br><span class="line">                    <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;postcss-loader&#x27;</span><span class="comment">//自动添加特殊样式前缀注意要先处理它</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/\.less$/</span>,<span class="attr">use</span>:[</span><br><span class="line">                    <span class="title class_">MiniCssExtractPlguin</span>.<span class="property">loader</span>, <span class="comment">//不需要放在HTML里面 而是单独抽离到main.css文件内</span></span><br><span class="line">                        <span class="string">&#x27;css-loader&#x27;</span>,   <span class="comment">// @import 解析路径</span></span><br><span class="line">                        <span class="string">&#x27;less-loader&#x27;</span>,   <span class="comment">// 把less -&gt; css </span></span><br><span class="line">                    <span class="string">&#x27;postcss-loader&#x27;</span> <span class="comment">//自动添加特殊样式前缀注意要先处理它</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">postcss.<span class="property">config</span>.<span class="property">js</span>文件：</span><br><span class="line">只需写如下内容即可：</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">plugins</span>:[<span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://github.com/postcss/postcss-loader">postcss-loader</a></p></blockquote><h2 id="打包抽离出之后的css样式"><a href="#打包抽离出之后的css样式" class="headerlink" title="打包抽离出之后的css样式**"></a>打包抽离出之后的css样式**</h2><ul><li>插件安装：<ul><li><strong>yarn add optimize-css-assets-webpack-plugin -D</strong></li><li><strong>yarn add uglifyjs-webpack-plugin -D</strong></li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">webpack文件：</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">OptimizeCss</span> = <span class="built_in">require</span>(<span class="string">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">UglifyJsPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;uglifyjs-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">optimization</span>:&#123;<span class="comment">//优化项</span></span><br><span class="line">        <span class="attr">minimizer</span>:[</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">UglifyJsPlugin</span>(&#123;</span><br><span class="line">                <span class="attr">cache</span>:<span class="literal">true</span>, <span class="comment">//是否用缓存</span></span><br><span class="line">                <span class="attr">parallel</span>:<span class="literal">true</span>,<span class="comment">//是否并发打包就是压缩多个</span></span><br><span class="line">                <span class="attr">sourceMap</span>:<span class="literal">true</span> <span class="comment">//es6转为es5需要源码映射</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">OptimizeCss</span>()   <span class="comment">//注意如果使用了这个插件 js不会进行压缩 需另需插件</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用babel来将es6语法转为es5好进行调试"><a href="#使用babel来将es6语法转为es5好进行调试" class="headerlink" title="使用babel来将es6语法转为es5好进行调试"></a><strong>使用babel来将es6语法转为es5好进行调试</strong></h2><ul><li>插件安装： <ul><li><strong>yarn add babel-loader @babel/core @babel/preset-env -D</strong> //es6</li><li><strong>yarn add @babel/plugin-proposal-class-properties -D</strong>     //es7更高级语法转化</li><li><strong>yarn add @babel/plugin-proposal-decorators -D</strong>            //类的装饰器</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">webpack文件：</span><br><span class="line"><span class="attr">module</span>:&#123; <span class="comment">//模块</span></span><br><span class="line">        <span class="attr">rules</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/.\js$/</span>,</span><br><span class="line">                <span class="attr">use</span>:&#123;</span><br><span class="line">                    <span class="attr">loader</span>:<span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>:&#123;<span class="comment">//用babel-loader 需要把es6 -&gt; es5</span></span><br><span class="line">                        <span class="attr">presets</span>:[   <span class="comment">//预设</span></span><br><span class="line">                            <span class="string">&#x27;@babel/preset-env&#x27;</span></span><br><span class="line">                        ],</span><br><span class="line">                        <span class="attr">plugins</span>:[</span><br><span class="line">                            [<span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>, &#123; <span class="string">&quot;legacy&quot;</span>: <span class="literal">true</span> &#125;],<span class="comment">//解析并转化es7中的修饰器 </span></span><br><span class="line">                            [<span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span>, &#123; <span class="string">&quot;loose&quot;</span> : <span class="literal">true</span> &#125;]<span class="comment">//解析es6中的类class</span></span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="处理js语法"><a href="#处理js语法" class="headerlink" title="处理js语法"></a><strong>处理js语法</strong></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">插件安装：yarn add @babel/plugin-transform-runtime -D</span><br><span class="line">yarn add @babel/runtime <span class="comment">//注意此插件在生产中也需要不要加-D</span></span><br><span class="line">yarn add @babel/polyfill<span class="comment">//同样也是补丁模块不能加-D</span></span><br><span class="line">webpack文件：</span><br><span class="line"><span class="attr">rules</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/.\js$/</span>,</span><br><span class="line">                <span class="attr">use</span>:&#123;</span><br><span class="line">                    <span class="attr">loader</span>:<span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>:&#123;<span class="comment">//用babel-loader 需要把es6 -&gt; es5</span></span><br><span class="line">                        <span class="attr">presets</span>:[   <span class="comment">//预设</span></span><br><span class="line">                            <span class="string">&#x27;@babel/preset-env&#x27;</span></span><br><span class="line">                        ],</span><br><span class="line">                        <span class="attr">plugins</span>:[</span><br><span class="line">                            [<span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>, &#123; <span class="string">&quot;legacy&quot;</span>: <span class="literal">true</span> &#125;],      <span class="comment">//解析es7中的装饰器</span></span><br><span class="line">                            [<span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span>, &#123; <span class="string">&quot;loose&quot;</span> : <span class="literal">true</span> &#125;], <span class="comment">//解析es6中的类class</span></span><br><span class="line">                            <span class="string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="comment">//多次使用只需打包一次</span></span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">include</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;src&#x27;</span>),  <span class="comment">//只匹配这个目录下的js </span></span><br><span class="line">                <span class="attr">exclude</span>:<span class="regexp">/node_modules/</span>                  <span class="comment">//忽略node包</span></span><br><span class="line">            &#125;,</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line"> a.<span class="property">js</span>文件：<span class="comment">//在任何你需要includes这种高阶语法时引入</span></span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&#x27;@babel/polyfill&#x27;</span>) <span class="comment">//需要先进行引入</span></span><br><span class="line">  <span class="string">&#x27;aaa&#x27;</span>.<span class="title function_">includes</span>(<span class="string">&#x27;a&#x27;</span>)<span class="comment">//然后便可打包使用并且最后转化成es5语法</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="语法检查校验"><a href="#语法检查校验" class="headerlink" title="语法检查校验"></a><strong>语法检查校验</strong></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">插件安装：yarn add eslint eslint-loader -D</span><br><span class="line"><span class="comment">//首先去eslint官网找到demo 找到实例 并勾选你需要校验的类型 然后下载一个json文件</span></span><br><span class="line"><span class="comment">//下载完成后放到项目根目录中 并且文件前加.</span></span><br><span class="line">webpack文件：</span><br><span class="line"><span class="attr">rules</span>:[ <span class="comment">//loader 默认 是从右向左执行 从下到上执行</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/\.js$/</span>,</span><br><span class="line">                <span class="attr">use</span>:&#123;</span><br><span class="line">                    <span class="attr">loader</span>:<span class="string">&#x27;eslint-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>:&#123;</span><br><span class="line">                        <span class="attr">enforce</span>:<span class="string">&#x27;pre&#x27;</span>   <span class="comment">//previous之前执行  post之后执行 注意要</span></span><br><span class="line">                        <span class="comment">//先执行eslint校验</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="解决全局变量引入问题"><a href="#解决全局变量引入问题" class="headerlink" title="解决全局变量引入问题"></a><strong>解决全局变量引入问题</strong></h2><ul><li>引入方式有3种<ul><li>expose-loader 暴露到window上</li><li>providePlugin 给每个人提供一个$</li><li>引入不打包</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">插件安装： yarn add expose-loader <span class="comment">//注意：生产也需要所以不加D</span></span><br><span class="line">index.<span class="property">js</span>文件</span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&#x27;expose-loader?$!jquery&#x27;</span>; <span class="comment">//把jQuery暴露给全局上</span></span><br><span class="line"><span class="comment">//expose-loader 暴露全局的loader 内联的loader </span></span><br><span class="line"><span class="comment">//pre 前面执行的loader normal 普通loader postloader 内联loader 后置loader</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">$</span>)</span><br><span class="line"><span class="comment">//以上属性内联loader写法</span></span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">webpack文件：</span><br><span class="line"><span class="attr">rules</span>:[ </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="built_in">require</span>.<span class="title function_">resolve</span>(<span class="string">&#x27;jquery&#x27;</span>),</span><br><span class="line">                <span class="attr">use</span>:<span class="string">&#x27;expose-loader?$&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">//以上属于普通loader也是将jQuery暴露给全局并以$符表示</span></span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">index.<span class="property">js</span>文件：</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>($)<span class="comment">//在每个模块中注入$对象</span></span><br><span class="line">webpack文件：</span><br><span class="line"><span class="keyword">let</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="comment">//这样做好处就是不需要每个js文件都引入 只需在webpack配置文件里引入一次</span></span><br><span class="line"><span class="attr">plugins</span>:[   <span class="comment">//数组 放着所有的webpack插件</span></span><br><span class="line">        <span class="keyword">new</span> webpack.<span class="title class_">ProvidePlugin</span>(&#123; <span class="comment">//在每个模块中都注入$</span></span><br><span class="line">            <span class="attr">$</span>:<span class="string">&#x27;jquery&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">//需要注意如果用cdn引入了外部插件 并且 import也 引入了 会有冲突需要配置如下 </span></span><br><span class="line">webpack文件：</span><br><span class="line"><span class="attr">externals</span>:&#123;</span><br><span class="line">        <span class="attr">jquery</span>:<span class="string">&#x27;$&#x27;</span><span class="comment">//忽略并且不打包</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="图片处理"><a href="#图片处理" class="headerlink" title="图片处理"></a>图片处理</h2><ul><li>JS中创建</li><li>CSS中引入</li><li><code>&lt;img src=&quot;&quot;&gt;</code></li><li><strong>插件安装：yarn add file-loader -D</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack 打包图片</span></span><br><span class="line"><span class="comment">//1）在js中创建图片引入</span></span><br><span class="line"><span class="comment">//file-loader默认会在内部生成一张图片 到build目录下</span></span><br><span class="line"><span class="comment">//把生成图片的名字返回回来</span></span><br><span class="line">index.<span class="property">js</span>文件：</span><br><span class="line"><span class="keyword">import</span> dog <span class="keyword">from</span> <span class="string">&#x27;./dog.jpg&#x27;</span>; <span class="comment">//把图片引入，返回的结果是一个新的图片地址</span></span><br><span class="line"><span class="keyword">let</span> image = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">image.<span class="property">src</span> = dog <span class="comment">//就是一个普通的字符串</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(image)</span><br><span class="line">webpack文件：</span><br><span class="line"> <span class="attr">rules</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">                <span class="attr">use</span>:<span class="string">&#x27;file-loader&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="comment">//2）在css引入 background（&#x27;url&#x27;）</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>路径</span><br><span class="line">css文件里<span class="attr">background</span>:<span class="title function_">url</span>(<span class="string">&#x27;路径&#x27;</span>)正常写</span><br><span class="line"><span class="comment">//以上两种使用相同配置即可</span></span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line"><span class="comment">//3）&lt;img src=&quot;&quot;&gt;</span></span><br><span class="line">插件安装： yarn add html-withimg-loader -D<span class="comment">//解析html并且编译图片</span></span><br><span class="line"><span class="attr">rules</span>:[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">test</span>:<span class="regexp">/\.html$/</span>,</span><br><span class="line">        <span class="attr">use</span>:<span class="string">&#x27;html-withimg-loader&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">图片转化成base64插件</span><br><span class="line">插件安装： yarn add url-loader -D</span><br><span class="line"><span class="attr">rules</span>:[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">test</span>:<span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">        <span class="comment">//做一个限制当图片 小于多少k的时候用base64来转化</span></span><br><span class="line">        <span class="comment">//否则便会使用file-loader产生真实的图片</span></span><br><span class="line">        <span class="attr">use</span>:&#123;</span><br><span class="line">            <span class="attr">loader</span>:<span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>:&#123;</span><br><span class="line">                <span class="attr">limit</span>:<span class="number">1</span>     <span class="comment">//判断图片文件大小 超过指定范围默认产出</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="打包产出文件分类"><a href="#打包产出文件分类" class="headerlink" title="打包产出文件分类"></a>打包产出文件分类</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">webpack文件：</span><br><span class="line"><span class="attr">plugins</span>:[   <span class="comment">//数组 放着所有的webpack插件</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlguin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>:<span class="string">&#x27;css/main.css&#x27;</span>,    <span class="comment">//抽离出的文件名  添加css/代表目录下的这个文件</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line"><span class="attr">rules</span>:[</span><br><span class="line">    <span class="attr">use</span>:&#123;</span><br><span class="line">    <span class="attr">test</span>:<span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">                    <span class="attr">loader</span>:<span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>:&#123;</span><br><span class="line">                        <span class="attr">limit</span>:<span class="number">1</span>,     <span class="comment">//判断图片文件大小 超过指定范围默认产出</span></span><br><span class="line">                        <span class="attr">outputPath</span>:<span class="string">&#x27;/img/&#x27;</span>,<span class="comment">//最后产出的目录</span></span><br><span class="line">                        <span class="attr">publicPath</span>:<span class="string">&#x27;http://www.miaochen.com&#x27;</span><span class="comment">//可以给图片添加地址前缀</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">]</span><br><span class="line">也可以给所有引入文件添加引入前缀：</span><br><span class="line"><span class="attr">output</span>:&#123;</span><br><span class="line">         <span class="attr">filename</span>:<span class="string">&quot;bundle.[hash:8].js&quot;</span>,</span><br><span class="line">         <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&quot;build&quot;</span>),</span><br><span class="line">         <span class="attr">publicPath</span>:<span class="string">&#x27;http://www.miaochen.cn/&#x27;</span><span class="comment">//给引用文件添加统一前缀</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="多页面应用"><a href="#多页面应用" class="headerlink" title="多页面应用"></a>多页面应用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">插件安装：yarn add html-webpack-plugin -D</span><br><span class="line"><span class="comment">//用模板生成HTML自动引入js</span></span><br><span class="line">webpack文件：</span><br><span class="line"><span class="comment">//多页面打包</span></span><br><span class="line"><span class="keyword">let</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>:<span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="comment">//多入口</span></span><br><span class="line">    <span class="attr">entry</span>:&#123;</span><br><span class="line">        <span class="attr">home</span>:<span class="string">&quot;./src/index.js&quot;</span>,</span><br><span class="line">        <span class="attr">other</span>:<span class="string">&#x27;./src/other.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">output</span>:&#123;</span><br><span class="line">        <span class="attr">filename</span>:<span class="string">&#x27;[name].[hash].js&#x27;</span>,   <span class="comment">//多出口</span></span><br><span class="line">        <span class="attr">path</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;dist&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>:[</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>:<span class="string">&#x27;./index.html&#x27;</span>,<span class="comment">//注意当前模板html文件所在位置</span></span><br><span class="line">            <span class="attr">filename</span>:<span class="string">&#x27;home.html&#x27;</span>,</span><br><span class="line">            <span class="attr">chunks</span>:[<span class="string">&#x27;home&#x27;</span>]     <span class="comment">//选择你需要最后生成HTML文件引入的文件</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>:<span class="string">&#x27;./index.html&#x27;</span>,<span class="comment">//注意当前模板html文件所在位置</span></span><br><span class="line">            <span class="attr">filename</span>:<span class="string">&#x27;other.html&#x27;</span>,</span><br><span class="line">            <span class="attr">chunks</span>:[<span class="string">&#x27;other&#x27;</span>,<span class="string">&#x27;home&#x27;</span>]     <span class="comment">//选择你需要最后生成HTML文件引入的文件</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="source-map相关调试设置"><a href="#source-map相关调试设置" class="headerlink" title="source-map相关调试设置"></a>source-map相关调试设置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">//以下任选一种所需</span></span><br><span class="line">    <span class="comment">//1）源码映射 会单独生成一个sourcemap文件 出错了会标示当前报错的列和行实际会生成源码如果出错会跳转到相对应源码位置 大 和 全</span></span><br><span class="line">    <span class="attr">devtool</span>:<span class="string">&#x27;source-map&#x27;</span>,<span class="comment">//增加映射文件 可以帮我们调试源代码</span></span><br><span class="line">    <span class="comment">//2）不会产生单独的文件 但是可以显示列和行</span></span><br><span class="line">    <span class="attr">devtool</span>:<span class="string">&#x27;eval-source-map&#x27;</span>,</span><br><span class="line">    <span class="comment">//3） 不会产生列 但是是一个单独的映射文件</span></span><br><span class="line">    <span class="attr">devtool</span>:<span class="string">&#x27;cheap-module-source-map&#x27;</span>,  <span class="comment">//产生后你可以保留起来调试</span></span><br><span class="line">    <span class="comment">//4）不会产生产生文件 集成在打包后的文件中 不会产生列</span></span><br><span class="line">    <span class="attr">devtool</span>:<span class="string">&#x27;cheap-module-eval-source-map&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="watch的用法"><a href="#watch的用法" class="headerlink" title="watch的用法"></a>watch的用法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">webpack文件：</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">watch</span>:<span class="literal">true</span>,         <span class="comment">//监控代码变化时时打包</span></span><br><span class="line">        <span class="attr">watchOptions</span>:&#123;      <span class="comment">//监控的选项</span></span><br><span class="line">            <span class="attr">poll</span>:<span class="number">1000</span>,      <span class="comment">//每秒 问我 1000次  多少秒监控一次</span></span><br><span class="line">            <span class="attr">aggregateTimeout</span>:<span class="number">500</span>,   <span class="comment">//防抖 我一直输入代码 停止操作后500毫秒进行打包</span></span><br><span class="line">            <span class="attr">ignored</span>:<span class="regexp">/node_modules/</span> <span class="comment">//不需要进行监控哪个文件</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="webpack3个小插件"><a href="#webpack3个小插件" class="headerlink" title="webpack3个小插件"></a>webpack3个小插件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">插件①安装：yarn add clean-webpack-plugin -D<span class="comment">//每次打包清除旧目录内容</span></span><br><span class="line">webpack文件：</span><br><span class="line"><span class="keyword">let</span> cleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">plugins</span>:[</span><br><span class="line">        <span class="keyword">new</span> <span class="title function_">cleanWebpackPlugin</span>(&#123;<span class="attr">path</span>:<span class="string">&#x27;./dist&#x27;</span>&#125;)    <span class="comment">//清空目录里原有内容 参数可以是字符串 也可以是数组代表情况多个目录</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">插件②安装：yarn add copy-webpack-plugin -D</span><br><span class="line"><span class="keyword">let</span> copyWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">plugins</span>:[</span><br><span class="line">        <span class="keyword">new</span> <span class="title function_">copyWebpackPlugin</span>([ <span class="comment">//拷贝插件  将别的文件 也 拷贝到打包后的文件中</span></span><br><span class="line">            &#123;<span class="attr">from</span>:<span class="string">&#x27;./doc&#x27;</span>,<span class="attr">to</span>:<span class="string">&#x27;./dist&#x27;</span>&#125;  <span class="comment">//拷贝多个就写多个对象</span></span><br><span class="line">        ])</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">插件③：内置插件无须安装</span><br><span class="line"><span class="keyword">let</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">plugins</span>:[</span><br><span class="line">       <span class="keyword">new</span> webpack.<span class="title class_">BannerPlugin</span>(<span class="string">&#x27;miao ni ma&#x27;</span>)<span class="comment">//用处 会在每一个打包后的js文件 前面加一段 注释</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="webpack-跨域"><a href="#webpack-跨域" class="headerlink" title="webpack 跨域"></a><code>webpack</code> 跨域</h2><p>设置一个服务,由于<code>webpack-dev-server</code>内含<code>express</code></p><p><a href="https://expressjs.com/zh-cn/starter/hello-world.html">express</a></p><p><code>server.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/api/user&#x27;</span>, <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">json</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;miaochen&#x27;</span>&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>)   <span class="comment">// 服务端口在3000</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>写完后记得<code>node server.js</code></p><p>访问 <code>http://localhost:3000/api/user</code> 可见内容</p><p><code>index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 发送一个请求</span></span><br><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认访问 http://localhost:8080  webpack-dev-server 的服务 -&gt; 再转发给3000</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/api/user&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">response</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: <span class="string">&#x27;http://localhost:3000&#x27;</span> <span class="comment">// 配置了一个代理</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="如果后端给的请求没有API-「跨域」"><a href="#如果后端给的请求没有API-「跨域」" class="headerlink" title="如果后端给的请求没有API 「跨域」"></a>如果后端给的请求没有API 「跨域」</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">express</span>();</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">json</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;mayufo&#x27;</span>&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>)   <span class="comment">// 服务端口在3000</span></span><br></pre></td></tr></table></figure><p>请求已api开头, 转发的时候再删掉api</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;/api&#x27;</span>: &#123;   <span class="comment">//注意一下 发请求的时候 &#x27;/api/user&#x27;这样的格式 每次要带上</span></span><br><span class="line">            <span class="attr">target</span>: <span class="string">&#x27;http://localhost:3000&#x27;</span>,</span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123;<span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="前端mock数据-「跨域」"><a href="#前端mock数据-「跨域」" class="headerlink" title="前端mock数据 「跨域」"></a>前端mock数据 「跨域」</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">before</span>: <span class="keyword">function</span> (<span class="params">app</span>) &#123;  <span class="comment">// 勾子</span></span><br><span class="line">        app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">            res.<span class="title function_">json</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;miaochen - before&#x27;</span>&#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="有服务端，不用代理-服务端启动webpack-「跨域」"><a href="#有服务端，不用代理-服务端启动webpack-「跨域」" class="headerlink" title="有服务端，不用代理, 服务端启动webpack 「跨域」"></a>有服务端，不用代理, 服务端启动webpack 「跨域」</h2><p><code>server.js</code>中启动<code>webpack</code></p><p><code>yarn add webpack-dev-middleware -D</code></p><p><code>server.js</code></p><p>就相当于后端启动webpack</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express</span></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">// 中间件</span></span><br><span class="line"><span class="keyword">let</span> middle = <span class="built_in">require</span>(<span class="string">&#x27;webpack-dev-middleware&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> config = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.config&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> compiler = <span class="title function_">webpack</span>(config)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">middle</span>(compiler))</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">json</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;mayufo&#x27;</span>&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><h2 id="webpack解析resolve"><a href="#webpack解析resolve" class="headerlink" title="webpack解析resolve"></a>webpack解析resolve</h2><p>以<code>bootstrap</code>为例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install bootstrap  -D</span><br></pre></td></tr></table></figure><p><code>index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;bootstrap/dist/css/bootstrap.css&#x27;</span></span><br></pre></td></tr></table></figure><p>报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ERROR in ./node_modules/bootstrap/dist/css/bootstrap.css 7:0</span><br><span class="line">Module parse failed: Unexpected token (7:0)</span><br><span class="line">You may need an appropriate loader to handle this file type.</span><br><span class="line">|  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)</span><br><span class="line">|  */</span><br><span class="line">&gt; :root &#123;</span><br><span class="line">|   --blue: #007bff;</span><br><span class="line">|   --indigo: #6610f2;</span><br><span class="line"> @ ./src/index.js 22:0-42</span><br><span class="line"> @ multi (webpack)-dev-server/client?http://localhost:8081 ./src/index.js</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这是因为<code>bootstrap</code> 4.0的css引入了新的特性，CSS Variables</p><p>安装<br><code>npm install postcss-custom-properties --save-dev</code></p><p>配置<code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: <span class="function">(<span class="params">loader</span>) =&gt;</span> [</span><br><span class="line">                <span class="built_in">require</span>(<span class="string">&quot;postcss-custom-properties&quot;</span>)</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="但是每次引入都很长，如何优雅引入"><a href="#但是每次引入都很长，如何优雅引入" class="headerlink" title="但是每次引入都很长，如何优雅引入"></a>但是每次引入都很长，如何优雅引入</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resolve</span>: &#123;<span class="comment">//解析第三方包 common</span></span><br><span class="line">    <span class="comment">// 在当前目录查找</span></span><br><span class="line">    <span class="attr">modules</span>: [path.<span class="title function_">resolve</span>(<span class="string">&#x27;node_modules&#x27;</span>)],</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;bootstrapCss&#x27;</span>: <span class="string">&#x27;bootstrap/dist/css/bootstrap.css&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;bootstrapCss&#x27;</span>  <span class="comment">// 在node_modules查找</span></span><br></pre></td></tr></table></figure><h2 id="省略扩展名"><a href="#省略扩展名" class="headerlink" title="省略扩展名"></a>省略扩展名</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="comment">// 在当前目录查找</span></span><br><span class="line">    <span class="attr">modules</span>: [path.<span class="title function_">resolve</span>(<span class="string">&#x27;node_modules&#x27;</span>)],</span><br><span class="line">    <span class="comment">// alias: &#123;</span></span><br><span class="line">    <span class="comment">//     &#x27;bootstrapCss&#x27;: &#x27;bootstrap/dist/css/bootstrap.css&#x27;</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="attr">mainFields</span>: [<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;main&#x27;</span>],   <span class="comment">// 先用bootstrap中在package中的style,没有在用main</span></span><br><span class="line">    <span class="comment">// mainFiles: []  // 入口文件的名字 默认index</span></span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.css&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>]  <span class="comment">// 当没有拓展命的时候，先默认js、次之css、再次之json</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="定义环境变量"><a href="#定义环境变量" class="headerlink" title="定义环境变量"></a>定义环境变量</h2><p><code>DefinePlugin</code> 允许创建一个在编译时可以配置的全局常量。这可能会对开发模式和生产模式的构建允许不同的行为非常有用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable constant_">DEV</span> === <span class="string">&#x27;dev&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 开发环境</span></span><br><span class="line">    url = <span class="string">&#x27;http://localhost:3000&#x27;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 生成环境</span></span><br><span class="line">    url = <span class="string">&#x27;http://www.miaochen.cn&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.<span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">    <span class="comment">// DEV: &#x27;&quot;production&quot;&#x27;,</span></span><br><span class="line">    <span class="attr">DEV</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="string">&#x27;production&#x27;</span>),</span><br><span class="line">    <span class="attr">FLAG</span>: <span class="string">&#x27;true&#x27;</span>,   <span class="comment">// 布尔</span></span><br><span class="line">    <span class="attr">EXPRESSION</span>: <span class="string">&#x27;1 + 1&#x27;</span>   <span class="comment">// 字符串 如果希望是字符串 JSON.stringify(&#x27;1 + 1&#x27;)</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>magnet:?xt=urn:btih:8bdbb86adc883dd0bb740a577de3fb1a95ed29c3</p><h2 id="区分两个不同的环境"><a href="#区分两个不同的环境" class="headerlink" title="区分两个不同的环境"></a>区分两个不同的环境</h2><p>分别配置不同的环境</p><ul><li><code>webpack.base4.js</code>   基础配置</li><li><code>webpack.dev4.js</code>    开发环境</li><li><code>webpack.prod4.js</code>   生产环境</li></ul><p><code>yarn add webpack-merge -D</code></p><p><code>npx run build -- config webpack.dev4.js</code><br><code>npx run build -- config webpack.build.js</code></p><p><a href="https://webpack.docschina.org/guides/production/">官方文档</a></p><p><code>webpack.base4.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">CleanWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="attr">home</span>: <span class="string">&#x27;./src/index.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&quot;[name].js&quot;</span>,</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(process.<span class="title function_">cwd</span>(), <span class="string">&#x27;dist3&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                <span class="attr">use</span>: &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">presets</span>: [</span><br><span class="line">                            <span class="string">&#x27;@babel/preset-env&#x27;</span></span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">plugins</span>: <span class="function">(<span class="params">loader</span>) =&gt;</span> [</span><br><span class="line">                            <span class="built_in">require</span>(<span class="string">&quot;postcss-custom-properties&quot;</span>)</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>,</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>webpack.dev4.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> base = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.base4.js&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(base, &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="attr">devServer</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>webpack.prod4.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> base = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.base4.js&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(base, &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>package.json</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack-dev-server  --config webpack.prod4.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;webpack-dev-server --config webpack.dev4.js&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="webpack-优化"><a href="#webpack-优化" class="headerlink" title="webpack 优化"></a>webpack 优化</h2><p><code>yarn add webpack webpack-cli html-webpack-plugin @babel/core babel-loader @babel/preset-env @babel/preset-react -D</code></p><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;main.js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">      <span class="attr">rules</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">              <span class="attr">use</span>: &#123;</span><br><span class="line">                  <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                  <span class="attr">options</span>: &#123;</span><br><span class="line">                      <span class="attr">presets</span>: [</span><br><span class="line">                          <span class="string">&#x27;@babel/preset-env&#x27;</span>,<span class="comment">//解析es6</span></span><br><span class="line">                          <span class="string">&#x27;@babel/preset-react&#x27;</span><span class="comment">//解析react</span></span><br><span class="line">                      ]</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>,</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="优化：当某些包是独立的个体没有依赖"><a href="#优化：当某些包是独立的个体没有依赖" class="headerlink" title="优化：当某些包是独立的个体没有依赖"></a>优化：当某些包是独立的个体没有依赖</h2><p>以jquery为例，<code>yarn add jquery -D</code>,它是一个独立的包没有依赖，可以在webpack配置中，配置它不再查找依赖</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">noParse</span>: <span class="regexp">/jquery/</span>, <span class="comment">// 不用解析某些包的依赖</span></span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">          <span class="attr">use</span>: &#123;</span><br><span class="line">              <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">              <span class="attr">options</span>: &#123;</span><br><span class="line">                  <span class="attr">presets</span>: [</span><br><span class="line">                      <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">                      <span class="string">&#x27;@babel/preset-react&#x27;</span></span><br><span class="line">                  ]</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行<code>npx webpack</code></p><p>从2057ms  -&gt; 1946 ms</p><h2 id="优化：规则匹配设置范围"><a href="#优化：规则匹配设置范围" class="headerlink" title="优化：规则匹配设置范围"></a>优化：规则匹配设置范围</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      <span class="attr">exclude</span>: <span class="string">&#x27;/node_modules/&#x27;</span>,   <span class="comment">// 排除</span></span><br><span class="line">      <span class="attr">include</span>: path.<span class="title function_">resolve</span>(<span class="string">&#x27;src&#x27;</span>),  <span class="comment">// 在这个范围内</span></span><br><span class="line">      <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">presets</span>: [</span><br><span class="line">                  <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">                  <span class="string">&#x27;@babel/preset-react&#x27;</span></span><br><span class="line">              ]</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>尽量实用<code>include</code>,不使用<code>exclude</code>,使用绝对路径</p><h2 id="优化：忽略依赖中不必要的语言包"><a href="#优化：忽略依赖中不必要的语言包" class="headerlink" title="优化：忽略依赖中不必要的语言包"></a>优化：忽略依赖中不必要的语言包</h2><p><code>yarn add moment webpack-dev-server -D</code></p><p>忽略掉<code>moment</code>的其他语言包</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">IgnorePlugin</span>(<span class="regexp">/\.\/locale/</span>, <span class="regexp">/moment/</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><code>index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span></span><br><span class="line"><span class="comment">//设置语言</span></span><br><span class="line"><span class="comment">//手动引入所需要的语言</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;moment/locale/zh-cn&#x27;</span></span><br><span class="line">moment.<span class="title function_">locale</span>(<span class="string">&#x27;zh-cn&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> r = <span class="title function_">moment</span>().<span class="title function_">endOf</span>(<span class="string">&#x27;day&#x27;</span>).<span class="title function_">fromNow</span>()  <span class="comment">// 距离现在多少天</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>从 1.2MB 到  800kb</p><h2 id="动态链接库"><a href="#动态链接库" class="headerlink" title="动态链接库"></a>动态链接库</h2><p><code>yarn add react react-dom</code></p><p>正常使用</p><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  <span class="attr">exclude</span>: <span class="string">&#x27;/node_modules/&#x27;</span>,</span><br><span class="line">  <span class="attr">include</span>: path.<span class="title function_">resolve</span>(<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">  <span class="attr">use</span>: &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">presets</span>: [</span><br><span class="line">              <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;@babel/preset-react&#x27;</span></span><br><span class="line">          ]</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;render&#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>111111<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>, <span class="variable language_">window</span>.<span class="property">root</span>)</span><br></pre></td></tr></table></figure><p><code>index.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>独立的将<code>react react-dom</code> 打包好, 打包好再引用，从而减少<code>webpack</code>每次都要打包<code>react</code></p><p>创建<code>webpack.config.react.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="comment">// test: &#x27;./src/test.js&#x27;</span></span><br><span class="line">        <span class="attr">react</span>: [<span class="string">&#x27;react&#x27;</span>, <span class="string">&#x27;react-dom&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;_dll_[name].js&#x27;</span>,  <span class="comment">// 产生的文件名</span></span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">library</span>: <span class="string">&#x27;_dll_[name]&#x27;</span>,     <span class="comment">// 给输出的结果加个名字</span></span><br><span class="line">        <span class="comment">// libraryTarget: &#x27;var&#x27;   // 配置如何暴露 library</span></span><br><span class="line">        <span class="comment">// commonjs 结果放在export属性上， umd统一资源模块, 默认是var</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">       <span class="keyword">new</span> webpack.<span class="title class_">DllPlugin</span>(&#123;</span><br><span class="line">           <span class="attr">name</span>: <span class="string">&#x27;_dll_[name]&#x27;</span>,   <span class="comment">// name === library</span></span><br><span class="line">           <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>, <span class="string">&#x27;manifest.json&#x27;</span>)  <span class="comment">// manifest.json 定义了各个模块的路径</span></span><br><span class="line">       &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://webpack.docschina.org/configuration/output/#%E6%9A%B4%E9%9C%B2%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F">libraryTarget</a></p><p><code>manifest.json</code>就是一个任务清单or动态链接库，在这个清单里面查找react</p><p><code>npx webpack --config webpack.config.react.js</code></p><p>在<code>index.html</code>增加引用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/_dll_react.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在webpack.config.js 中配置，现在动态链接库<code>manifest.json</code>中查找,如果没有再打包react</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">DllReferencePlugin</span>(&#123;</span><br><span class="line">        <span class="attr">manifest</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>, <span class="string">&#x27;manifest.json&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><a href="https://webpack.docschina.org/plugins/dll-plugin/#src/components/Sidebar/Sidebar.jsx">DLLPlugin 和 DLLReferencePlugin</a></p><p><code>npm run build</code></p><p>打包后的<code>bunle.js</code>文件变小</p><p><code>npm run dev</code></p><p>可以理解为先把react打包，后面每次都直接使用react打包后的结果</p><h2 id="多线程打包happypack"><a href="#多线程打包happypack" class="headerlink" title="多线程打包happypack"></a>多线程打包<code>happypack</code></h2><p><code>yarn add happypack</code></p><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">Happypack</span> = <span class="built_in">require</span>(<span class="string">&#x27;happypack&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="string">&#x27;/node_modules/&#x27;</span>,</span><br><span class="line">        <span class="attr">include</span>: path.<span class="title function_">resolve</span>(<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">        <span class="attr">use</span>: <span class="string">&#x27;happypack/loader?id=js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Happypack</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;js&#x27;</span>,</span><br><span class="line">        <span class="attr">use</span>: [&#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">                <span class="attr">presets</span>: [</span><br><span class="line">                    <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;@babel/preset-react&#x27;</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>js启用多线程，由于启用多线程也会浪费时间，因此当项目比较大的时候启用效果更好</p><p>css启用多线程</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    <span class="attr">use</span>: <span class="string">&#x27;happypack/loader?id=css&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">new</span> <span class="title class_">Happypack</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;css&#x27;</span>,</span><br><span class="line">    <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="webpack-自带的优化"><a href="#webpack-自带的优化" class="headerlink" title="webpack 自带的优化"></a>webpack 自带的优化</h2><p><code>test.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">sum</span> = (<span class="params">a, b</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + <span class="string">&#x27;sum&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">minus</span> = (<span class="params">a, b</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> a - b + <span class="string">&#x27;minus&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"> sum, minus</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>使用import </li></ol><p><code>index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calc <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span></span><br><span class="line"><span class="comment">//import在生产环境下会自动去除没有用的代码`minus`，这叫`tree-shaking`，将没有用的代码自动删除掉</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(calc.<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure><p><code>index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> calc = <span class="built_in">require</span>(<span class="string">&#x27;./test&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(calc);   <span class="comment">// es 6导出，是一个default的对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(calc.<span class="property">default</span>.<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure><p>require引入es6 模块会把结果放在default上,打包build后并不会把多余<code>minus</code>代码删除掉，不支持<code>tree-shaking</code></p><ol start="2"><li>作用域的提升（scope hosting）</li></ol><p><code>index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> d = a + b + c</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d, <span class="string">&#x27;---------&#x27;</span>);</span><br></pre></td></tr></table></figure><p>打包出来的文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r.<span class="property">default</span>.<span class="title function_">sum</span>(<span class="number">1</span>,<span class="number">2</span>));<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6</span>,<span class="string">&quot;---------&quot;</span>)</span><br></pre></td></tr></table></figure><p>在webpack中可以省略一些可以简化的代码</p><h2 id="抽取公共代码"><a href="#抽取公共代码" class="headerlink" title="抽取公共代码"></a>抽取公共代码</h2><ol><li>抽离自有模块</li></ol><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;  <span class="comment">// 分割代码块，针对多入口</span></span><br><span class="line">        <span class="attr">cacheGroups</span>: &#123;   <span class="comment">// 缓存组</span></span><br><span class="line">            <span class="attr">common</span>: &#123;   <span class="comment">// 公共模块</span></span><br><span class="line">                <span class="attr">minSize</span>: <span class="number">0</span>,  <span class="comment">// 大于多少抽离</span></span><br><span class="line">                <span class="attr">minChunks</span>: <span class="number">2</span>,  <span class="comment">// 使用多少次以上抽离抽离</span></span><br><span class="line">                <span class="attr">chunks</span>: <span class="string">&#x27;initial&#x27;</span>  <span class="comment">// 从什么地方开始,刚开始</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://webpack.docschina.org/plugins/split-chunks-plugin/">SplitChunksPlugin</a></p><p>分别有a.js和b.js, index.js和other.js分别引入a和b两个js</p><p><code>index.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;./a&#x27;</span><br><span class="line">import &#x27;./b&#x27;</span><br><span class="line">console.log(&#x27;index.js&#x27;);</span><br></pre></td></tr></table></figure><p><code>other.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;./a&#x27;</span><br><span class="line">import &#x27;./b&#x27;</span><br><span class="line">console.log(&#x27;other.js&#x27;);</span><br></pre></td></tr></table></figure><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;  <span class="comment">// 分割代码块，针对多入口</span></span><br><span class="line">        <span class="attr">cacheGroups</span>: &#123;   <span class="comment">// 缓存组</span></span><br><span class="line">            <span class="attr">common</span>: &#123;   <span class="comment">// 公共模块</span></span><br><span class="line">                <span class="attr">minSize</span>: <span class="number">0</span>,  <span class="comment">// 大于多少抽离</span></span><br><span class="line">                <span class="attr">minChunks</span>: <span class="number">2</span>,  <span class="comment">// 使用多少次以上抽离抽离</span></span><br><span class="line">                <span class="attr">chunks</span>: <span class="string">&#x27;initial&#x27;</span>  <span class="comment">// 从什么地方开始,刚开始</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>抽离第三方模块</li></ol><p>比如jquery</p><p><code>index.js</code> 和 <code>other.js</code>分别引入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import $ from &#x27;jquery&#x27;</span><br><span class="line"></span><br><span class="line">console.log($);</span><br></pre></td></tr></table></figure><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;  <span class="comment">// 分割代码块，针对多入口</span></span><br><span class="line">        <span class="attr">cacheGroups</span>: &#123;   <span class="comment">// 缓存组</span></span><br><span class="line">            <span class="attr">common</span>: &#123;   <span class="comment">// 公共模块</span></span><br><span class="line">                <span class="attr">minSize</span>: <span class="number">0</span>,  <span class="comment">// 大于多少抽离</span></span><br><span class="line">                <span class="attr">minChunks</span>: <span class="number">2</span>,  <span class="comment">// 使用多少次以上抽离抽离</span></span><br><span class="line">                <span class="attr">chunks</span>: <span class="string">&#x27;initial&#x27;</span>  <span class="comment">// 从什么地方开始,刚开始</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">vendor</span>: &#123;</span><br><span class="line">                <span class="attr">priority</span>: <span class="number">1</span>, <span class="comment">// 增加权重,先抽离第三方</span></span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/node_modules/</span>, <span class="comment">//只抽离当前目录下</span></span><br><span class="line">                <span class="attr">minSize</span>: <span class="number">0</span>,  <span class="comment">// 大于多少抽离</span></span><br><span class="line">                <span class="attr">minChunks</span>: <span class="number">2</span>,  <span class="comment">// 使用多少次以上抽离抽离</span></span><br><span class="line">                <span class="attr">chunks</span>: <span class="string">&#x27;initial&#x27;</span>  <span class="comment">// 从什么地方开始,刚开始</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="懒加载-延迟加载"><a href="#懒加载-延迟加载" class="headerlink" title="懒加载(延迟加载)"></a>懒加载(延迟加载)</h2><p><code>yarn add @babel/plugin-syntax-dynamic-import  -D</code>    语法动态导入插件</p><p><code>source.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">&#x27;miaochen&#x27;</span></span><br></pre></td></tr></table></figure><p><code>index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> button = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>)</span><br><span class="line">button.<span class="property">innerHTML</span> = <span class="string">&#x27;may&#x27;</span></span><br><span class="line"><span class="comment">//vue的懒加载 react懒加载</span></span><br><span class="line">button.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line">    <span class="comment">// es6草案中的语法，jsonp实现动态加载文件</span></span><br><span class="line">    <span class="title function_">import</span>(<span class="string">&#x27;./source.js&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">default</span>);  <span class="comment">//miaochen</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(button)</span><br></pre></td></tr></table></figure><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    <span class="attr">exclude</span>: <span class="string">&#x27;/node_modules/&#x27;</span>,</span><br><span class="line">    <span class="attr">include</span>: path.<span class="title function_">resolve</span>(<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">    <span class="attr">use</span>: [&#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [  <span class="comment">//预设</span></span><br><span class="line">                <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;@babel/preset-react&#x27;</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">                <span class="string">&#x27;@babel/plugin-syntax-dynamic-import&#x27;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="热更新-当页面改变只更新改变的部分，不重新打包"><a href="#热更新-当页面改变只更新改变的部分，不重新打包" class="headerlink" title="热更新(当页面改变只更新改变的部分，不重新打包)"></a>热更新(当页面改变只更新改变的部分，不重新打包)</h2><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>:&#123;</span><br><span class="line">    <span class="attr">hot</span>:<span class="literal">true</span>   <span class="comment">//启用热更新</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>,</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">NameModulesPlugin</span>(), <span class="comment">// 打印更新的模块路径</span></span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>()  <span class="comment">//热更新插件</span></span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> str <span class="keyword">from</span> <span class="string">&#x27;./source&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./source&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文件更新了&#x27;</span>);</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">&#x27;./source&#x27;</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="tapable介绍-SyncHook"><a href="#tapable介绍-SyncHook" class="headerlink" title="tapable介绍 - SyncHook"></a>tapable介绍 - SyncHook</h2><p><a href="https://juejin.im/post/5abf33f16fb9a028e46ec352">tapable</a></p><p><code>webpack</code>本质上是一种事件流的机制，它的工作流程就是将各个插件串联起来，而实现这一切的核心就是<code>Tapable</code>，<code>webpack</code>中最核心的负责编译的<code>Compiler</code>和负责创建<code>bundles</code>的<code>Compilation</code>都是<code>Tapable</code>的实例。</p><p><code>SyncHook</code> 不关心监听函数的返回值</p><p><code>yarn add tabable</code></p><p><code>1.use.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="title class_">SyncHook</span>&#125; = <span class="built_in">require</span>(<span class="string">&#x27;tapable&#x27;</span>)   <span class="comment">// 结构同步勾子</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lesson</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> () &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span> = &#123;</span><br><span class="line">            <span class="comment">// 订阅勾子</span></span><br><span class="line">            <span class="attr">arch</span>: <span class="keyword">new</span> <span class="title class_">SyncHook</span>([<span class="string">&#x27;name&#x27;</span>]),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    start () &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">call</span>(<span class="string">&#x27;miao&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    tap () &#123;   <span class="comment">//  注册监听函数</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">tap</span>(<span class="string">&#x27;node&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;node&#x27;</span>, name)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">tap</span>(<span class="string">&#x27;react&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;react&#x27;</span>, name)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> l = <span class="keyword">new</span> <span class="title class_">Lesson</span>()</span><br><span class="line"></span><br><span class="line">l.<span class="title function_">tap</span>();  <span class="comment">//注册这两个事件</span></span><br><span class="line">l.<span class="title function_">start</span>() <span class="comment">// 启动勾子</span></span><br></pre></td></tr></table></figure><p><code>1.theory.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SyncHook</span> &#123;  <span class="comment">// 钩子是同步的</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">args</span>) &#123;  <span class="comment">// args =&gt; [&#x27;name&#x27;]</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span> = []</span><br><span class="line">    &#125;</span><br><span class="line">    tap (name, task) &#123;  <span class="comment">//同步注册</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span>.<span class="title function_">push</span>(task)</span><br><span class="line">    &#125;</span><br><span class="line">    call (...args) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">task</span>) =&gt;</span> <span class="title function_">task</span>(...args))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hook = <span class="keyword">new</span> <span class="title class_">SyncHook</span>([<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">tap</span>(<span class="string">&#x27;react&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;react&#x27;</span>, name);</span><br><span class="line">&#125;)</span><br><span class="line">hook.<span class="title function_">tap</span>(<span class="string">&#x27;node&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;node&#x27;</span>, name);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">call</span>(<span class="string">&#x27;jw&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="tapable介绍-SyncBailHook"><a href="#tapable介绍-SyncBailHook" class="headerlink" title="tapable介绍 - SyncBailHook"></a>tapable介绍 - SyncBailHook</h2><p><code>SyncBailHook</code>为勾子加了个保险，当<code>return</code>返回不是<code>undefine</code>就会停止</p><p><code>2.use.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="title class_">SyncBailHook</span>&#125; = <span class="built_in">require</span>(<span class="string">&#x27;tapable&#x27;</span>)   <span class="comment">// 解构同步勾子</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lesson</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> () &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span> = &#123;</span><br><span class="line">            <span class="comment">// 订阅勾子</span></span><br><span class="line">            <span class="attr">arch</span>: <span class="keyword">new</span> <span class="title class_">SyncBailHook</span>([<span class="string">&#x27;name&#x27;</span>]),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    start () &#123;</span><br><span class="line">        <span class="comment">// 发布</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">call</span>(<span class="string">&#x27;may&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    tap () &#123;   <span class="comment">//  注册监听函数,订阅</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">tap</span>(<span class="string">&#x27;node&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;node&#x27;</span>, name)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;停止学习&#x27;</span>  <span class="comment">// 会停止</span></span><br><span class="line">            <span class="comment">// return undefined</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">tap</span>(<span class="string">&#x27;react&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;react&#x27;</span>, name)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> l = <span class="keyword">new</span> <span class="title class_">Lesson</span>()</span><br><span class="line"></span><br><span class="line">l.<span class="title function_">tap</span>();  <span class="comment">//注册两个函数</span></span><br><span class="line">l.<span class="title function_">start</span>() <span class="comment">// 启动勾子</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>2.theory.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SyncBailHook</span> &#123;  <span class="comment">// 钩子是同步的</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">args</span>) &#123;  <span class="comment">// args =&gt; [&#x27;name&#x27;]</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span> = []</span><br><span class="line">    &#125;</span><br><span class="line">    tap (name, task) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span>.<span class="title function_">push</span>(task)</span><br><span class="line">    &#125;</span><br><span class="line">    call (...args) &#123;</span><br><span class="line">        <span class="keyword">let</span> ret;   <span class="comment">// 当前函数的返回值</span></span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span>; <span class="comment">// 当前要执行的第一个</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            ret = <span class="variable language_">this</span>.<span class="property">tasks</span>[index++](...args)</span><br><span class="line">        &#125; <span class="keyword">while</span> (ret === <span class="literal">undefined</span>  &amp;&amp; index &lt; <span class="variable language_">this</span>.<span class="property">tasks</span>.<span class="property">length</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hook = <span class="keyword">new</span> <span class="title class_">SyncBailHook</span>([<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">tap</span>(<span class="string">&#x27;react&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;react&#x27;</span>, name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;停止向下执行&#x27;</span></span><br><span class="line">    <span class="comment">// return undefined</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">tap</span>(<span class="string">&#x27;node&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;node&#x27;</span>, name);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">call</span>(<span class="string">&#x27;jw&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="tapable介绍-SyncWaterfallHook"><a href="#tapable介绍-SyncWaterfallHook" class="headerlink" title="tapable介绍 - SyncWaterfallHook"></a>tapable介绍 - SyncWaterfallHook</h2><p><code>SyncWaterfallHook</code>上一个监听函数的返回值可以传给下一个监听函数</p><p><code>3.use.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="title class_">SyncWaterfallHook</span>&#125; = <span class="built_in">require</span>(<span class="string">&#x27;tapable&#x27;</span>)   <span class="comment">// 解构同步勾子</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// waterfall 瀑布</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lesson</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> () &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span> = &#123;</span><br><span class="line">            <span class="comment">// 订阅勾子</span></span><br><span class="line">            <span class="attr">arch</span>: <span class="keyword">new</span> <span class="title class_">SyncWaterfallHook</span>([<span class="string">&#x27;name&#x27;</span>]),</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    start () &#123;</span><br><span class="line">        <span class="comment">// 发布</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">call</span>(<span class="string">&#x27;may&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    tap () &#123;   <span class="comment">//  注册监听函数,订阅</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">tap</span>(<span class="string">&#x27;node&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;node&#x27;</span>, name)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;学的不错&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">tap</span>(<span class="string">&#x27;react&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;react&#x27;</span>, name)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> l = <span class="keyword">new</span> <span class="title class_">Lesson</span>()</span><br><span class="line"></span><br><span class="line">l.<span class="title function_">tap</span>();  <span class="comment">//注册两个函数</span></span><br><span class="line">l.<span class="title function_">start</span>() <span class="comment">// 启动勾子</span></span><br></pre></td></tr></table></figure><p><code>3.theory.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SyncWaterfallHook</span> &#123;  <span class="comment">// 勾子是同步的 - 瀑布</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">args</span>) &#123;  <span class="comment">// args =&gt; [&#x27;name&#x27;]</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span> = []</span><br><span class="line">    &#125;</span><br><span class="line">    tap (name, task) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span>.<span class="title function_">push</span>(task)</span><br><span class="line">    &#125;</span><br><span class="line">    call (...args) &#123;</span><br><span class="line">        <span class="keyword">let</span> [first, ...others] = <span class="variable language_">this</span>.<span class="property">tasks</span>;</span><br><span class="line">        <span class="keyword">let</span> ret = <span class="title function_">first</span>(...args)</span><br><span class="line">        others.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">b</span>(a);</span><br><span class="line">        &#125;, ret);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hook = <span class="keyword">new</span> <span class="title class_">SyncWaterfallHook</span>([<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">tap</span>(<span class="string">&#x27;react&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;react&#x27;</span>, name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;react Ok&#x27;</span></span><br><span class="line">    <span class="comment">// return undefined</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">tap</span>(<span class="string">&#x27;node&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;node&#x27;</span>, name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;node Ok&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">tap</span>(<span class="string">&#x27;webpack&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;webpack&#x27;</span>, data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">call</span>(<span class="string">&#x27;jw&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="tapable介绍-SyncLoopHook"><a href="#tapable介绍-SyncLoopHook" class="headerlink" title="tapable介绍 - SyncLoopHook"></a>tapable介绍 - SyncLoopHook</h2><p><code>SyncLoopHook</code>当监听函数被触发的时候，如果该监听函数返回<code>true</code>时则这个监听函数会反复执行，如果返回 <code>undefined</code> 则表示退出循环</p><p><code>4.use.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="title class_">SyncLoopHook</span>&#125; = <span class="built_in">require</span>(<span class="string">&#x27;tapable&#x27;</span>)   <span class="comment">// 解构同步勾子</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步遇到某个不返回undefined的监听函数会多次执行</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lesson</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> () &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">index</span> = <span class="number">0</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span> = &#123;</span><br><span class="line">            <span class="comment">// 订阅勾子</span></span><br><span class="line">            <span class="attr">arch</span>: <span class="keyword">new</span> <span class="title class_">SyncLoopHook</span>([<span class="string">&#x27;name&#x27;</span>]),</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    start () &#123;</span><br><span class="line">        <span class="comment">// 发布</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">call</span>(<span class="string">&#x27;may&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    tap () &#123;   <span class="comment">//  注册监听函数,订阅</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">tap</span>(<span class="string">&#x27;node&#x27;</span>,  <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;node&#x27;</span>, name)</span><br><span class="line">            <span class="keyword">return</span> ++<span class="variable language_">this</span>.<span class="property">index</span> === <span class="number">3</span> ? <span class="literal">undefined</span> : <span class="string">&#x27;继续学&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hooks</span>.<span class="property">arch</span>.<span class="title function_">tap</span>(<span class="string">&#x27;react&#x27;</span>,  <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;react&#x27;</span>, name)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> l = <span class="keyword">new</span> <span class="title class_">Lesson</span>()</span><br><span class="line"></span><br><span class="line">l.<span class="title function_">tap</span>();  <span class="comment">//注册两个函数</span></span><br><span class="line">l.<span class="title function_">start</span>() <span class="comment">// 启动勾子</span></span><br></pre></td></tr></table></figure><p><code>4.theory.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SyncLoopHook</span> &#123;  <span class="comment">// 勾子是同步的 - 瀑布</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">args</span>) &#123;  <span class="comment">// args =&gt; [&#x27;name&#x27;]</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span> = []</span><br><span class="line">    &#125;</span><br><span class="line">    tap (name, task) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span>.<span class="title function_">push</span>(task)</span><br><span class="line">    &#125;</span><br><span class="line">    call (...args) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tasks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">task</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> ret</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                ret = <span class="title function_">task</span>(...args);</span><br><span class="line">            &#125; <span class="keyword">while</span>(ret !== <span class="literal">undefined</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hook = <span class="keyword">new</span> <span class="title class_">SyncLoopHook</span>([<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line"><span class="keyword">let</span> total = <span class="number">0</span></span><br><span class="line">hook.<span class="title function_">tap</span>(<span class="string">&#x27;react&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;react&#x27;</span>, name);</span><br><span class="line">    <span class="keyword">return</span> ++total === <span class="number">3</span> ? <span class="attr">undefined</span>: <span class="string">&#x27;继续学&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">tap</span>(<span class="string">&#x27;node&#x27;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;node&#x27;</span>, name);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">tap</span>(<span class="string">&#x27;webpack&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;webpack&#x27;</span>, data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hook.<span class="title function_">call</span>(<span class="string">&#x27;jw&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="AsyncParallelHook-与-AsyncParallelBailHook"><a href="#AsyncParallelHook-与-AsyncParallelBailHook" class="headerlink" title="AsyncParallelHook 与 AsyncParallelBailHook"></a><code>AsyncParallelHook</code> 与 <code>AsyncParallelBailHook</code></h2><p>异步的勾子分两种<code>串行</code>和<code>并行</code></p><p><code>并行</code>等待所有并发的异步事件执行后执行回调</p><p>注册的三种方法</p><ol><li>异步的注册方法<code>tap</code></li><li>异步的注册方法<code>tapAsync</code>， 还有个回调参数</li><li><code>topPromise</code>,注册<code>promise</code></li></ol><p>调用的三种</p><ol><li>call (同步)</li><li>callAsync （异步）</li><li>promise （异步）</li></ol><p>这里介绍的是异步并行的</p><h4 id="AsyncParallelHook"><a href="#AsyncParallelHook" class="headerlink" title="AsyncParallelHook"></a>AsyncParallelHook</h4><p>不关心监听函数的返回值。</p><p><code>5.use.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">let &#123;AsyncParallelHook&#125; = require(&#x27;tapable&#x27;)   // 解构同步勾子</span><br><span class="line"></span><br><span class="line">// 不返回undefined 会多次执行</span><br><span class="line"></span><br><span class="line">class Lesson &#123;</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        this.index = 0</span><br><span class="line">        this.hooks = &#123;</span><br><span class="line">            // 订阅勾子</span><br><span class="line">            arch: new AsyncParallelHook([&#x27;name&#x27;]),</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    start() &#123;</span><br><span class="line">        // 发布callAsync</span><br><span class="line">        // this.hooks.arch.callAsync(&#x27;may&#x27;, function () &#123;</span><br><span class="line">        //     console.log(&#x27;end&#x27;);</span><br><span class="line">        // &#125;)</span><br><span class="line">        // 另一种发布promise</span><br><span class="line">        this.hooks.arch.promise(&#x27;may&#x27;).then(function () &#123;</span><br><span class="line">                console.log(&#x27;end&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tap() &#123;   //  注册监听函数,订阅</span><br><span class="line">        // 注册tapAsync</span><br><span class="line">        // this.hooks.arch.tapAsync(&#x27;node&#x27;,  (name, callback) =&gt; &#123;</span><br><span class="line">        //     setTimeout(() =&gt; &#123;</span><br><span class="line">        //         console.log(&#x27;node&#x27;, name)</span><br><span class="line">        //         callback()</span><br><span class="line">        //     &#125;, 1000)</span><br><span class="line">        // &#125;)</span><br><span class="line">        // this.hooks.arch.tapAsync(&#x27;react&#x27;,  (name, callback) =&gt; &#123;</span><br><span class="line">        //     setTimeout(() =&gt; &#123;</span><br><span class="line">        //         console.log(&#x27;react&#x27;, name)</span><br><span class="line">        //         callback()</span><br><span class="line">        //     &#125;, 1000)</span><br><span class="line">        // &#125;)</span><br><span class="line">        // 另一种订阅 tapPromise</span><br><span class="line">        this.hooks.arch.tapPromise(&#x27;node&#x27;, (name) =&gt; &#123;</span><br><span class="line">            return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">                setTimeout(() =&gt; &#123;</span><br><span class="line">                    console.log(&#x27;node&#x27;, name)</span><br><span class="line">                    resolve()</span><br><span class="line">                &#125;, 1000)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        this.hooks.arch.tapPromise(&#x27;react&#x27;, (name) =&gt; &#123;</span><br><span class="line">            return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">                setTimeout(() =&gt; &#123;</span><br><span class="line">                    console.log(&#x27;react&#x27;, name)</span><br><span class="line">                    resolve()</span><br><span class="line">                &#125;, 1000)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let l = new Lesson()</span><br><span class="line"></span><br><span class="line">l.tap();  //注册两个函数</span><br><span class="line">l.start() // 启动勾子</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>5.theory.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">class AsyncParallelHook &#123;  // 勾子是同步的 - 瀑布</span><br><span class="line">    constructor(args) &#123;  // args =&gt; [&#x27;name&#x27;]</span><br><span class="line">        this.tasks = []</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tapAsync(name, task) &#123;</span><br><span class="line">        this.tasks.push(task)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tapPromise(name, task) &#123;</span><br><span class="line">        this.tasks.push(task)</span><br><span class="line">    &#125;</span><br><span class="line">    callAsync(...args) &#123;</span><br><span class="line">        let finalCallback = args.pop()   // 拿出最终的函数</span><br><span class="line">        let index = 0</span><br><span class="line">        let done = () =&gt; &#123;   // 类似promise.all的实现</span><br><span class="line">            index++;</span><br><span class="line">            if (index === this.tasks.length) &#123;</span><br><span class="line">                finalCallback();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        this.tasks.forEach(task =&gt; &#123;</span><br><span class="line">            task(...args, done) // 这里的args 已经把最后一个参数删掉</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    promise(...args) &#123;</span><br><span class="line">        let tasks = this.tasks.map(task =&gt; task(...args))</span><br><span class="line">        return Promise.all(tasks)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let hook = new AsyncParallelHook([&#x27;name&#x27;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// hook.tapAsync(&#x27;react&#x27;, function (name, callback) &#123;</span><br><span class="line">//     setTimeout(() =&gt; &#123;</span><br><span class="line">//         console.log(&#x27;react&#x27;, name);</span><br><span class="line">//         callback()</span><br><span class="line">//     &#125;, 1000)</span><br><span class="line">// &#125;)</span><br><span class="line">//</span><br><span class="line">// hook.tapAsync(&#x27;node&#x27;, function (name, callback) &#123;</span><br><span class="line">//     setTimeout(() =&gt; &#123;</span><br><span class="line">//         console.log(&#x27;node&#x27;, name);</span><br><span class="line">//         callback()</span><br><span class="line">//     &#125;, 1000)</span><br><span class="line">// &#125;)</span><br><span class="line"></span><br><span class="line">// hook.tapAsync(&#x27;webpack&#x27;, function (name, callback) &#123;</span><br><span class="line">//     setTimeout(() =&gt; &#123;</span><br><span class="line">//         console.log(&#x27;webpack&#x27;, name);</span><br><span class="line">//         callback()</span><br><span class="line">//     &#125;, 1000)</span><br><span class="line">// &#125;)</span><br><span class="line"></span><br><span class="line">hook.tapPromise(&#x27;react&#x27;, function (name, callback) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            console.log(&#x27;react&#x27;, name);</span><br><span class="line">            resolve()</span><br><span class="line">        &#125;, 1000)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hook.tapPromise(&#x27;node&#x27;, function (name, callback) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            console.log(&#x27;node&#x27;, name);</span><br><span class="line">            resolve()</span><br><span class="line">        &#125;, 1000)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//</span><br><span class="line">// hook.callAsync(&#x27;jw&#x27;, function () &#123;</span><br><span class="line">//     console.log(&#x27;end&#x27;);</span><br><span class="line">// &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hook.promise(&#x27;jw&#x27;).then(function () &#123;</span><br><span class="line">    console.log(&#x27;end&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="AsyncParallelBailHook"><a href="#AsyncParallelBailHook" class="headerlink" title="AsyncParallelBailHook"></a>AsyncParallelBailHook</h4><p>只要监听函数的返回值不为 <code>null</code>，就会忽略后面的监听函数执行，直接跳跃到<code>callAsync</code>等触发函数绑定的回调函数，然后执行这个被绑定的回调函数。</p><p>使用和原理与<code>SyncBailHook</code>相似</p><h2 id="异步串行-——-AsyncSeriesHook"><a href="#异步串行-——-AsyncSeriesHook" class="headerlink" title="异步串行 —— AsyncSeriesHook"></a>异步串行 —— AsyncSeriesHook</h2><p><code>串行 </code>one by one</p><p><code>6.use.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">let &#123;AsyncSeriesHook&#125; = require(&#x27;tapable&#x27;)   // 解构同步勾子</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Lesson &#123;</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        this.index = 0</span><br><span class="line">        this.hooks = &#123;</span><br><span class="line">            // 订阅勾子</span><br><span class="line">            arch: new AsyncSeriesHook([&#x27;name&#x27;]),</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    start() &#123;</span><br><span class="line">        // 发布</span><br><span class="line">        // this.hooks.arch.callAsync(&#x27;may&#x27;, function () &#123;</span><br><span class="line">        //     console.log(&#x27;end&#x27;);</span><br><span class="line">        // &#125;)</span><br><span class="line">        // 另一种发布</span><br><span class="line">        this.hooks.arch.promise(&#x27;may&#x27;).then(function () &#123;</span><br><span class="line">                console.log(&#x27;end&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tap() &#123;   //  注册监听函数,订阅</span><br><span class="line">        // this.hooks.arch.tapAsync(&#x27;node&#x27;,  (name, callback) =&gt; &#123;</span><br><span class="line">        //     setTimeout(() =&gt; &#123;</span><br><span class="line">        //         console.log(&#x27;node&#x27;, name)</span><br><span class="line">        //         callback()</span><br><span class="line">        //     &#125;, 1000)</span><br><span class="line">        // &#125;)</span><br><span class="line">        // this.hooks.arch.tapAsync(&#x27;react&#x27;,  (name, callback) =&gt; &#123;</span><br><span class="line">        //     setTimeout(() =&gt; &#123;</span><br><span class="line">        //         console.log(&#x27;react&#x27;, name)</span><br><span class="line">        //         callback()</span><br><span class="line">        //     &#125;, 1000)</span><br><span class="line">        // &#125;)</span><br><span class="line">        // 另一种订阅</span><br><span class="line">        this.hooks.arch.tapPromise(&#x27;node&#x27;, (name) =&gt; &#123;</span><br><span class="line">            return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">                setTimeout(() =&gt; &#123;</span><br><span class="line">                    console.log(&#x27;node&#x27;, name)</span><br><span class="line">                    resolve()</span><br><span class="line">                &#125;, 1000)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        this.hooks.arch.tapPromise(&#x27;react&#x27;, (name) =&gt; &#123;</span><br><span class="line">            return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">                setTimeout(() =&gt; &#123;</span><br><span class="line">                    console.log(&#x27;react&#x27;, name)</span><br><span class="line">                    resolve()</span><br><span class="line">                &#125;, 1000)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let l = new Lesson()</span><br><span class="line"></span><br><span class="line">l.tap();  //注册两个函数</span><br><span class="line">l.start(); // 启动勾子</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>6.theory.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">class AsyncSeriesHook &#123;  //</span><br><span class="line">    constructor(args) &#123;  // args =&gt; [&#x27;name&#x27;]</span><br><span class="line">        this.tasks = []</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tapAsync(name, task) &#123;</span><br><span class="line">        this.tasks.push(task)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tapPromise(name, task) &#123;</span><br><span class="line">        this.tasks.push(task)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    callAsync(...args) &#123;</span><br><span class="line">        let finalCallback = args.pop()</span><br><span class="line">        let index = 0;</span><br><span class="line">        let next = () =&gt; &#123;</span><br><span class="line">            if (this.tasks.length === index) return finalCallback();</span><br><span class="line">            let task = this.tasks[index++];</span><br><span class="line">            task(...args, next);</span><br><span class="line">        &#125;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    promise(...args) &#123;</span><br><span class="line">        // 将promise串联起来</span><br><span class="line">        let [first, ...other] = this.tasks</span><br><span class="line">        return other.reduce((p, n) =&gt; &#123;</span><br><span class="line">             return p.then(() =&gt; n (...args))</span><br><span class="line">        &#125;, first(...args))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let hook = new AsyncSeriesHook([&#x27;name&#x27;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// hook.tapAsync(&#x27;react&#x27;, function (name, callback) &#123;</span><br><span class="line">//     setTimeout(() =&gt; &#123;</span><br><span class="line">//         console.log(&#x27;react&#x27;, name);</span><br><span class="line">//         callback()</span><br><span class="line">//     &#125;, 1000)</span><br><span class="line">// &#125;)</span><br><span class="line">//</span><br><span class="line">// hook.tapAsync(&#x27;node&#x27;, function (name, callback) &#123;</span><br><span class="line">//     setTimeout(() =&gt; &#123;</span><br><span class="line">//         console.log(&#x27;node&#x27;, name);</span><br><span class="line">//         callback()</span><br><span class="line">//     &#125;, 1000)</span><br><span class="line">// &#125;)</span><br><span class="line">//</span><br><span class="line">// hook.tapAsync(&#x27;webpack&#x27;, function (name, callback) &#123;</span><br><span class="line">//     setTimeout(() =&gt; &#123;</span><br><span class="line">//         console.log(&#x27;webpack&#x27;, name);</span><br><span class="line">//         callback()</span><br><span class="line">//     &#125;, 1000)</span><br><span class="line">// &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hook.tapPromise(&#x27;react&#x27;, function (name, callback) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            console.log(&#x27;react&#x27;, name);</span><br><span class="line">            resolve()</span><br><span class="line">        &#125;, 1000)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hook.tapPromise(&#x27;node&#x27;, function (name, callback) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            console.log(&#x27;node&#x27;, name);</span><br><span class="line">            resolve()</span><br><span class="line">        &#125;, 1000)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// hook.callAsync(&#x27;jw&#x27;, function () &#123;</span><br><span class="line">//     console.log(&#x27;end&#x27;);</span><br><span class="line">// &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hook.promise(&#x27;jw&#x27;).then(function () &#123;</span><br><span class="line">    console.log(&#x27;end&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="异步串行-——-AsyncSeriesWaterfallHook"><a href="#异步串行-——-AsyncSeriesWaterfallHook" class="headerlink" title="异步串行 —— AsyncSeriesWaterfallHook"></a>异步串行 —— AsyncSeriesWaterfallHook</h2><p>上一个监听函数的中的<code>callback(err, data)</code>的第二个参数,可以作为下一个监听函数的参数</p><p><code>7.use.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">let &#123;AsyncSeriesWaterfallHook&#125; = require(&#x27;tapable&#x27;)   // 解构同步勾子</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Lesson &#123;</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        this.index = 0</span><br><span class="line">        this.hooks = &#123;</span><br><span class="line">            // 订阅勾子</span><br><span class="line">            arch: new AsyncSeriesWaterfallHook([&#x27;name&#x27;]),</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    start() &#123;</span><br><span class="line">        // 发布</span><br><span class="line">        this.hooks.arch.callAsync(&#x27;may&#x27;, function () &#123;</span><br><span class="line">            console.log(&#x27;end&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">        // 另一种发布</span><br><span class="line">        // this.hooks.arch.promise(&#x27;may&#x27;).then(function () &#123;</span><br><span class="line">        //         console.log(&#x27;end&#x27;);</span><br><span class="line">        //     &#125;</span><br><span class="line">        // )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tap() &#123;   //  注册监听函数,订阅</span><br><span class="line">        this.hooks.arch.tapAsync(&#x27;node&#x27;,  (name, callback) =&gt; &#123;</span><br><span class="line">            setTimeout(() =&gt; &#123;</span><br><span class="line">                console.log(&#x27;node&#x27;, name)</span><br><span class="line">                // callback(null, &#x27;result&#x27;)</span><br><span class="line">                callback(&#x27;error&#x27;, &#x27;result&#x27;)   // 如果放error, 会跳过直接后面的勾子，直接走到最终的</span><br><span class="line"></span><br><span class="line">            &#125;, 1000)</span><br><span class="line">        &#125;)</span><br><span class="line">        this.hooks.arch.tapAsync(&#x27;react&#x27;,  (name, callback) =&gt; &#123;</span><br><span class="line">            setTimeout(() =&gt; &#123;</span><br><span class="line">                console.log(&#x27;react&#x27;, name)</span><br><span class="line">                callback()</span><br><span class="line">            &#125;, 1000)</span><br><span class="line">        &#125;)</span><br><span class="line">        // 另一种订阅</span><br><span class="line">        // this.hooks.arch.tapPromise(&#x27;node&#x27;, (name) =&gt; &#123;</span><br><span class="line">        //     return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        //         setTimeout(() =&gt; &#123;</span><br><span class="line">        //             console.log(&#x27;node&#x27;, name)</span><br><span class="line">        //             resolve()</span><br><span class="line">        //         &#125;, 1000)</span><br><span class="line">        //     &#125;)</span><br><span class="line">        // &#125;)</span><br><span class="line">        // this.hooks.arch.tapPromise(&#x27;react&#x27;, (name) =&gt; &#123;</span><br><span class="line">        //     return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        //         setTimeout(() =&gt; &#123;</span><br><span class="line">        //             console.log(&#x27;react&#x27;, name)</span><br><span class="line">        //             resolve()</span><br><span class="line">        //         &#125;, 1000)</span><br><span class="line">        //     &#125;)</span><br><span class="line">        // &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let l = new Lesson()</span><br><span class="line"></span><br><span class="line">l.tap();  //注册两个函数</span><br><span class="line">l.start(); // 启动勾子</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>7.theory.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">class AsyncSeriesWaterfallHook &#123;  //</span><br><span class="line">    constructor(args) &#123;  // args =&gt; [&#x27;name&#x27;]</span><br><span class="line">        this.tasks = []</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tapAsync(name, task) &#123;</span><br><span class="line">        this.tasks.push(task)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tapPromise(name, task) &#123;</span><br><span class="line">        this.tasks.push(task)</span><br><span class="line">    &#125;</span><br><span class="line">    callAsync(...args) &#123;</span><br><span class="line">        let finalCallback = args.pop()</span><br><span class="line">        let index = 0;</span><br><span class="line">        let next = (err, data) =&gt; &#123;</span><br><span class="line">            let task = this.tasks[index]</span><br><span class="line">            if(!task) return finalCallback();</span><br><span class="line">            if (index === 0) &#123;</span><br><span class="line">                // 执行的第一个</span><br><span class="line">                task(...args, next)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                task(data, next)</span><br><span class="line">            &#125;</span><br><span class="line">            index ++</span><br><span class="line">        &#125;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    promise(...args) &#123;</span><br><span class="line">        // 将promise串联起来</span><br><span class="line">        let [first, ...other] = this.tasks</span><br><span class="line">        return other.reduce((p, n) =&gt; &#123;</span><br><span class="line">             return p.then((data) =&gt; n(data))</span><br><span class="line">        &#125;, first(...args))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let hook = new AsyncSeriesWaterfallHook([&#x27;name&#x27;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// hook.tapAsync(&#x27;react&#x27;, function (name, callback) &#123;</span><br><span class="line">//     setTimeout(() =&gt; &#123;</span><br><span class="line">//         console.log(&#x27;react&#x27;, name);</span><br><span class="line">//         callback(null, &#x27;结果1&#x27;)</span><br><span class="line">//     &#125;, 1000)</span><br><span class="line">// &#125;)</span><br><span class="line">//</span><br><span class="line">// hook.tapAsync(&#x27;node&#x27;, function (name, callback) &#123;</span><br><span class="line">//     setTimeout(() =&gt; &#123;</span><br><span class="line">//         console.log(&#x27;node&#x27;, name);</span><br><span class="line">//         callback(null, &#x27;结果2&#x27;)</span><br><span class="line">//     &#125;, 1000)</span><br><span class="line">// &#125;)</span><br><span class="line">//</span><br><span class="line">// hook.tapAsync(&#x27;webpack&#x27;, function (name, callback) &#123;</span><br><span class="line">//     setTimeout(() =&gt; &#123;</span><br><span class="line">//         console.log(&#x27;webpack&#x27;, name);</span><br><span class="line">//         callback()</span><br><span class="line">//     &#125;, 1000)</span><br><span class="line">// &#125;)</span><br><span class="line"></span><br><span class="line">//</span><br><span class="line">hook.tapPromise(&#x27;react&#x27;, function (name, callback) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            console.log(&#x27;react&#x27;, name);</span><br><span class="line">            resolve(&#x27;result&#x27;)</span><br><span class="line">        &#125;, 1000)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">hook.tapPromise(&#x27;node&#x27;, function (name, callback) &#123;</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            console.log(&#x27;node&#x27;, name);</span><br><span class="line">            resolve()</span><br><span class="line">        &#125;, 1000)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//</span><br><span class="line">//</span><br><span class="line">// hook.callAsync(&#x27;jw&#x27;, function () &#123;</span><br><span class="line">//     console.log(&#x27;end&#x27;);</span><br><span class="line">// &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hook.promise(&#x27;jw&#x27;).then(function () &#123;</span><br><span class="line">    console.log(&#x27;end&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="手写webpack"><a href="#手写webpack" class="headerlink" title="手写webpack"></a>手写webpack</h2><p><a href="https://github.com/mayufo/webpack-training">对应的may-pack项目</a></p><p><code>yarn add webpack webpack-cli -D</code></p><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &#x27;development&#x27;,</span><br><span class="line">    entry: &#x27;./src/index.js&#x27;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &#x27;bundle.js&#x27;,</span><br><span class="line">        path: path.resolve(__dirname, &#x27;dist&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>npx webpack</code></p><p>生成文件<code>bundle.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">(function (modules) &#123;</span><br><span class="line">    var installedModules = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    function __webpack_require__(moduleId) &#123;</span><br><span class="line"></span><br><span class="line">        if (installedModules[moduleId]) &#123;</span><br><span class="line">            return installedModules[moduleId].exports;</span><br><span class="line">        &#125;</span><br><span class="line">        var module = installedModules[moduleId] = &#123;</span><br><span class="line">            i: moduleId,</span><br><span class="line">            l: false,</span><br><span class="line">            exports: &#123;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);</span><br><span class="line"></span><br><span class="line">        module.l = true;</span><br><span class="line"></span><br><span class="line">        return module.exports;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // Load entry module and return exports</span><br><span class="line">    return __webpack_require__(__webpack_require__.s = &quot;./src/index.js&quot;);</span><br><span class="line">&#125;)</span><br><span class="line">(&#123;</span><br><span class="line">    &quot;./src/a.js&quot;:</span><br><span class="line">        (function (module, exports, __webpack_require__) &#123;</span><br><span class="line">            eval(&quot;let b = __webpack_require__(/*! ./base/b */ \&quot;./src/base/b.js\&quot;)\n\nmodule.exports = &#x27;a&#x27;+ b\n\n\n\n//# sourceURL=webpack:///./src/a.js?&quot;);</span><br><span class="line">        &#125;),</span><br><span class="line">    &quot;./src/base/b.js&quot;:</span><br><span class="line">        (function (module, exports) &#123;</span><br><span class="line">            eval(&quot;module.exports = &#x27;b&#x27;\n\n\n//# sourceURL=webpack:///./src/base/b.js?&quot;);</span><br><span class="line">        &#125;),</span><br><span class="line">    &quot;./src/index.js&quot;:</span><br><span class="line">        (function (module, exports, __webpack_require__) &#123;</span><br><span class="line">            eval(&quot; let str = __webpack_require__(/*! ./a.js */ \&quot;./src/a.js\&quot;)\n\n console.log(str);\n\n\n//# sourceURL=webpack:///./src/index.js?&quot;);</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>新建项目用于自己的<code>webpack</code>,这里叫<code>may-pack</code></p><p><code>yarn init</code></p><p>如果在node里想执行命令，创建<code>bin</code>文件,再创建<code>may-pack.js</code></p><p>配置<code>package.json</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;may-pack&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;MIT&quot;,</span><br><span class="line">  &quot;bin&quot;: &#123;</span><br><span class="line">    &quot;may-pack&quot;: &quot;./bin/may-pack.js&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>may-pack.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!  /usr/bin/env node </span><br><span class="line"></span><br><span class="line">// node环境</span><br><span class="line"></span><br><span class="line">console.log(&#x27;start&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行<code>npm link</code>将npm 模块链接到对应的运行项目中去，方便地对模块进行调试和测试</p><p>在想运行<code>may-pack</code>的项目中运行，<code>npm link may-pack</code> 得到 <code>start</code></p><h2 id="webpack分析及处理"><a href="#webpack分析及处理" class="headerlink" title="webpack分析及处理"></a>webpack分析及处理</h2><p><code>may-pack.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!  /usr/bin/env node</span><br><span class="line"></span><br><span class="line">// node环境</span><br><span class="line"></span><br><span class="line">console.log(&#x27;start&#x27;);</span><br><span class="line"></span><br><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line">// 拿到配置文件webpack.config.js</span><br><span class="line">let config = require(path.resolve(&#x27;webpack.config.js&#x27;));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let Compiler = require(&#x27;../lib/Compiler.js&#x27;);</span><br><span class="line"></span><br><span class="line">let compiler = new Compiler(config);</span><br><span class="line"></span><br><span class="line">// 标识运行编译</span><br><span class="line">compiler.run()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>创建<code>lib</code>文件<code>Compiler.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line">let fs = require(&#x27;fs&#x27;)</span><br><span class="line"></span><br><span class="line">class Compiler &#123;</span><br><span class="line">    constructor(config) &#123;</span><br><span class="line">        // entry  output</span><br><span class="line">        this.config = config</span><br><span class="line">        // 需要保存入口文件的路径</span><br><span class="line">        this.entryId = &#x27;&#x27;;   // &#x27;./src/index.js&#x27;</span><br><span class="line">        // 需要保存所有的模块依赖</span><br><span class="line">        this.modules = &#123;&#125;;</span><br><span class="line">        this.entry = config.entry  // 入口文件</span><br><span class="line">        // 工作目录</span><br><span class="line">        this.root = process.cwd(); // 当前运行npx的路径</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 构建模块</span><br><span class="line">    buildModule(modulePath, isEntry) &#123;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 发射文件</span><br><span class="line">    emitFile() &#123;</span><br><span class="line">        // 用数据 渲染想要的</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    run() &#123;</span><br><span class="line">        // 执行 创建模块的依赖关系</span><br><span class="line">        this.buildModule(path.resolve(this.root, this.entry), true)  // path.resolve(this.root, this.entry) 得到入口文件的绝对路径</span><br><span class="line">        // 发射打包后的文件</span><br><span class="line">        this.emitFile()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = Compiler</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>主要两个任务</p><ol><li>拿到入口Id</li><li>解析模块，也就是实现<code>buildModule</code>方法</li></ol><h2 id="创建依赖关系"><a href="#创建依赖关系" class="headerlink" title="创建依赖关系"></a>创建依赖关系</h2><p><code>may-pack</code>中<code>Compiler.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line">let fs = require(&#x27;fs&#x27;)</span><br><span class="line">// babylon  主要把源码转成ast Babylon 是 Babel 中使用的 JavaScript 解析器。</span><br><span class="line">// @babel/traverse 对ast解析遍历语法树 负责替换，删除和添加节点</span><br><span class="line">// @babel/types 用于AST节点的Lodash-esque实用程序库</span><br><span class="line">// @babel/generator 结果生成</span><br><span class="line"></span><br><span class="line">let babylon = require(&#x27;babylon&#x27;)</span><br><span class="line">let traverse = require(&#x27;@babel/traverse&#x27;).default;</span><br><span class="line">let type = require(&#x27;@babel/types&#x27;);</span><br><span class="line">let generator = require(&#x27;@babel/generator&#x27;).default</span><br><span class="line">class Compiler &#123;</span><br><span class="line">    constructor(config) &#123;</span><br><span class="line">        // entry  output</span><br><span class="line">        this.config = config</span><br><span class="line">        // 需要保存入口文件的路径</span><br><span class="line">        this.entryId = &#x27;&#x27;;   // &#x27;./src/index.js&#x27;</span><br><span class="line">        // 需要保存所有的模块依赖</span><br><span class="line">        this.modules = &#123;&#125;;</span><br><span class="line">        this.entry = config.entry  // 入口文件</span><br><span class="line">        // 工作目录</span><br><span class="line">        this.root = process.cwd(); // 当前运行npx的路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    // 拿到模块内容</span><br><span class="line">    getSource (modulePath) &#123;</span><br><span class="line">        let content = fs.readFileSync(modulePath, &#x27;utf8&#x27;)</span><br><span class="line">        return content</span><br><span class="line">    &#125;</span><br><span class="line">    parse (source, parentPath) &#123;</span><br><span class="line">        console.log(source, parentPath)</span><br><span class="line">    &#125;</span><br><span class="line">    // 构建模块</span><br><span class="line">    buildModule(modulePath, isEntry) &#123;</span><br><span class="line">        // 拿到模块内容</span><br><span class="line">        let source = this.getSource(modulePath)  // 得到入口文件的内容</span><br><span class="line">        // 模块id modulePath(需要相对路径) = modulePath(模块路径) - this.root(项目工作路径)   src/index.js</span><br><span class="line">        let moduleName = &#x27;./&#x27; + path.relative(this.root, modulePath)</span><br><span class="line">        console.log(source, moduleName);  // 拿到代码 和相对路径 ./src/index.js</span><br><span class="line">        if (isEntry) &#123;</span><br><span class="line">            this.entryId = moduleName</span><br><span class="line">        &#125;</span><br><span class="line">        let &#123;sourceCode, dependencies&#125; = this.parse(source, path.dirname(moduleName))   // ./src</span><br><span class="line">        // 把相对路径和模块中的内容对应起来</span><br><span class="line">        this.modules[moduleName] = sourceCode</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 发射文件</span><br><span class="line">    emitFile() &#123;</span><br><span class="line">        // 用数据 渲染想要的</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    run() &#123;</span><br><span class="line">        // 执行 创建模块的依赖关系</span><br><span class="line">        this.buildModule(path.resolve(this.root, this.entry), true)  // path.resolve(this.root, this.entry) 得到入口文件的绝对路径</span><br><span class="line">        console.log(this.modules, this.entryId);</span><br><span class="line">        // 发射打包后的文件</span><br><span class="line">        this.emitFile()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = Compiler</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ast递归解析"><a href="#ast递归解析" class="headerlink" title="ast递归解析"></a>ast递归解析</h2><p><code>parse</code>方法主要靠解析语法树来进行转义<br><code>babylon</code>  主要把源码转成ast Babylon 是 Babel 中使用的 JavaScript 解析器。<br><code>@babel/traverse</code> 对ast解析遍历语法树 负责替换，删除和添加节点<br><code>@babel/types</code> 用于AST节点的Lodash-esque实用程序库<br><code>@babel/generator</code> 结果生成</p><p><code>yarn add babylon @babel/traverse @babel/types @babel/generator</code></p><p><code>may-pack</code>中<code>Compiler.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line">let fs = require(&#x27;fs&#x27;)</span><br><span class="line">// babylon  主要把源码转成ast Babylon 是 Babel 中使用的 JavaScript 解析器。</span><br><span class="line">// @babel/traverse 对ast解析遍历语法树 负责替换，删除和添加节点</span><br><span class="line">// @babel/types 用于AST节点的Lodash-esque实用程序库</span><br><span class="line">// @babel/generator 结果生成</span><br><span class="line"></span><br><span class="line">let babylon = require(&#x27;babylon&#x27;)</span><br><span class="line">let traverse = require(&#x27;@babel/traverse&#x27;).default;</span><br><span class="line">let type = require(&#x27;@babel/types&#x27;);</span><br><span class="line">let generator = require(&#x27;@babel/generator&#x27;).default</span><br><span class="line">class Compiler &#123;</span><br><span class="line">    constructor(config) &#123;</span><br><span class="line">        // entry  output</span><br><span class="line">        this.config = config</span><br><span class="line">        // 需要保存入口文件的路径</span><br><span class="line">        this.entryId = &#x27;&#x27;;   // &#x27;./src/index.js&#x27;</span><br><span class="line">        // 需要保存所有的模块依赖</span><br><span class="line">        this.modules = &#123;&#125;;</span><br><span class="line">        this.entry = config.entry  // 入口文件</span><br><span class="line">        // 工作目录</span><br><span class="line">        this.root = process.cwd(); // 当前运行npx的路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    // 拿到模块内容</span><br><span class="line">    getSource (modulePath) &#123;</span><br><span class="line">        let content = fs.readFileSync(modulePath, &#x27;utf8&#x27;)</span><br><span class="line">        return content</span><br><span class="line">    &#125;</span><br><span class="line">    parse (source, parentPath) &#123;</span><br><span class="line">        // AST解析语法树</span><br><span class="line">        let ast = babylon.parse(source)</span><br><span class="line">        let dependencies = []; // 依赖的数组</span><br><span class="line">        // https://astexplorer.net/</span><br><span class="line">        traverse(ast, &#123;</span><br><span class="line">            // 调用表达式</span><br><span class="line">            CallExpression(p) &#123;</span><br><span class="line">                let node = p.node; //对应的节点</span><br><span class="line">                if(node.callee.name === &#x27;require&#x27;) &#123;</span><br><span class="line">                   node.callee.name = &#x27;__webpack_require__&#x27;</span><br><span class="line">                    let moduledName = node.arguments[0].value   // 取到模块的引用名字</span><br><span class="line">                    moduledName = moduledName + (path.extname(moduledName) ? &#x27;&#x27;: &#x27;.js&#x27;);  // ./a.js</span><br><span class="line">                    moduledName = &#x27;./&#x27; + path.join(parentPath, moduledName)  // &#x27;./src/a.js&#x27;</span><br><span class="line">                    dependencies.push(moduledName)</span><br><span class="line">                    node.arguments = [type.stringLiteral(moduledName)] // 改掉源码</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        let sourceCode = generator(ast).code</span><br><span class="line">        return &#123; sourceCode, dependencies &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 构建模块</span><br><span class="line">    buildModule(modulePath, isEntry) &#123;</span><br><span class="line">        // 拿到模块内容</span><br><span class="line">        let source = this.getSource(modulePath)  // 得到入口文件的内容</span><br><span class="line">        // 模块id modulePath(需要相对路径) = modulePath(模块路径) - this.root(项目工作路径)   src/index.js</span><br><span class="line">        let moduleName = &#x27;./&#x27; + path.relative(this.root, modulePath)</span><br><span class="line">        // console.log(source, moduleName);  // 拿到代码 和相对路径 ./src/index.js</span><br><span class="line">        if (isEntry) &#123;</span><br><span class="line">            this.entryId = moduleName</span><br><span class="line">        &#125;</span><br><span class="line">        // 解析把source源码进行改造， 返回一个依赖列表</span><br><span class="line">        let &#123;sourceCode, dependencies&#125; = this.parse(source, path.dirname(moduleName))   // ./src</span><br><span class="line">        // 把相对路径和模块中的内容对应起来</span><br><span class="line">        this.modules[moduleName] = sourceCode</span><br><span class="line">        dependencies.forEach(dep =&gt; &#123;  // 附模块的加载 递归加载</span><br><span class="line">            this.buildModule(path.join(this.root, dep), false)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 发射文件</span><br><span class="line">    emitFile() &#123;</span><br><span class="line">        // 用数据 渲染想要的</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    run() &#123;</span><br><span class="line">        // 执行 创建模块的依赖关系</span><br><span class="line">        this.buildModule(path.resolve(this.root, this.entry), true)  // path.resolve(this.root, this.entry) 得到入口文件的绝对路径</span><br><span class="line">        console.log(this.modules, this.entryId);</span><br><span class="line">        // 发射打包后的文件</span><br><span class="line">        this.emitFile()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = Compiler</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="生成打包工具"><a href="#生成打包工具" class="headerlink" title="生成打包工具"></a>生成打包工具</h2><p>使用ejs模板</p><p><code>may-pack</code>中<code>main.ejs</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">(function (modules) &#123;</span><br><span class="line">var installedModules = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">function __webpack_require__(moduleId) &#123;</span><br><span class="line"></span><br><span class="line">if (installedModules[moduleId]) &#123;</span><br><span class="line">return installedModules[moduleId].exports;</span><br><span class="line">&#125;</span><br><span class="line">var module = installedModules[moduleId] = &#123;</span><br><span class="line">i: moduleId,</span><br><span class="line">l: false,</span><br><span class="line">exports: &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);</span><br><span class="line"></span><br><span class="line">module.l = true;</span><br><span class="line"></span><br><span class="line">return module.exports;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// Load entry module and return exports</span><br><span class="line">return __webpack_require__(__webpack_require__.s = &quot;&lt;%-entryId %&gt;&quot;);</span><br><span class="line">&#125;)(&#123;</span><br><span class="line">&lt;% for(let key in modules)&#123; %&gt;</span><br><span class="line">    &quot;&lt;%- key %&gt;&quot;:</span><br><span class="line">    (function (module, exports,__webpack_require__) &#123;</span><br><span class="line">eval(`&lt;%-modules[key] %&gt;`);</span><br><span class="line">&#125;),</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://ejs.bootcss.com/">ejs入门</a></p><p><code>yarn add ejs</code></p><p><code>may-pack</code>中<code>Compiler.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let ejs = require(&#x27;ejs&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 发射文件</span><br><span class="line">    emitFile() &#123;</span><br><span class="line">        // 用数据 渲染想要的</span><br><span class="line">        // 输出到那个目录下</span><br><span class="line">        let main = path.join(this.config.output.path, this.config.output.filename)</span><br><span class="line">        let templateStr = this.getSource(path.join(__dirname, &#x27;main.ejs&#x27;))</span><br><span class="line">        let code = ejs.render(templateStr, &#123; entryId: this.entryId, modules: this.modules&#125;)</span><br><span class="line">        this.assets = &#123;&#125;</span><br><span class="line">        // 路径对应的代码</span><br><span class="line">        this.assets[main] = code</span><br><span class="line">        fs.writeFileSync(main, this.assets[main])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在<code>webpack-training</code>项目中运行<code>npx may-pack</code>, 得到<code>bundle.js</code>,运行得到结果</p><h2 id="增加loader"><a href="#增加loader" class="headerlink" title="增加loader"></a>增加loader</h2><p>创建<code>loader</code>文件夹，创建<code>less-loader1.js</code>和<code>style-loader1.js</code></p><p><code>yarn add less</code></p><p><a href="http://lesscss.cn/#using-less">less使用</a></p><p><code>less-loader1.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 将less转为css</span><br><span class="line">let less = require(&#x27;less&#x27;)</span><br><span class="line"></span><br><span class="line">function loader(source) &#123;</span><br><span class="line">    let css = &#x27;&#x27;</span><br><span class="line">    less.render(source, function (err, output) &#123;</span><br><span class="line">        css = output.css</span><br><span class="line">    &#125;)</span><br><span class="line">    css = css.replace(/\n/g, &#x27;\\n&#x27;);</span><br><span class="line">    return css</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>style-loader1.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 将css插入到html头部</span><br><span class="line">function loader(source) &#123;</span><br><span class="line">    console.log(111);</span><br><span class="line">    let style = `</span><br><span class="line">    let style = document.createElement(&#x27;style&#x27;)</span><br><span class="line">    style.innerHTML = $&#123;JSON.stringify(source)&#125;</span><br><span class="line">    document.head.appendChild(style)</span><br><span class="line">   `</span><br><span class="line">    return style</span><br><span class="line">&#125;</span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// JSON.stringify(source) 可以将代码转为一行</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &#x27;development&#x27;,</span><br><span class="line">    entry: &#x27;./src/index.js&#x27;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &#x27;bundle.js&#x27;,</span><br><span class="line">        path: path.resolve(__dirname, &#x27;dist&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.less$/,</span><br><span class="line">                use: [</span><br><span class="line">                    path.resolve(__dirname, &#x27;loader&#x27;, &#x27;style-loader1&#x27;),</span><br><span class="line">                    path.resolve(__dirname, &#x27;loader&#x27;, &#x27;less-loader1&#x27;)</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>创建<code>index.less</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">  background: red</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>index.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let str = require(&#x27;./a.js&#x27;)</span><br><span class="line"></span><br><span class="line">require(&#x27;./index.less&#x27;)</span><br><span class="line"></span><br><span class="line">console.log(str);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>may-pack</code>中<code>Compiler.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// 拿到模块内容</span><br><span class="line">    getSource (modulePath) &#123;</span><br><span class="line">        // 匹配各种文件的规则</span><br><span class="line">        let rules= this.config.module.rules;   // webpack.config.js 中rules的数组</span><br><span class="line">        let content = fs.readFileSync(modulePath, &#x27;utf8&#x27;)</span><br><span class="line"></span><br><span class="line">        for (let i = 0; i &lt; rules.length; i++) &#123;</span><br><span class="line">            let rule = rules[i]</span><br><span class="line">            let &#123;test, use&#125; = rule</span><br><span class="line">            let len = use.length - 1</span><br><span class="line"></span><br><span class="line">            if (test.test(modulePath)) &#123;</span><br><span class="line">                // console.log(use[len]);</span><br><span class="line">                function normalLoader () &#123;</span><br><span class="line">                    // console.log(use[len--]);</span><br><span class="line">                    let loader = require(use[len--])</span><br><span class="line">                    content = loader(content)</span><br><span class="line">                    // 递归调用loader 实现转化</span><br><span class="line">                    if (len &gt;= 0) &#123;</span><br><span class="line">                        normalLoader()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                normalLoader()</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        return content</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行<code>npx may-pack</code></p><h2 id="增加plugins"><a href="#增加plugins" class="headerlink" title="增加plugins"></a>增加plugins</h2><p><code>yarn add tapable</code></p><p><code>may-pack</code>中<code>Compiler.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">constructor(config) &#123;</span><br><span class="line">        // entry  output</span><br><span class="line">        this.config = config</span><br><span class="line">        // 需要保存入口文件的路径</span><br><span class="line">        this.entryId = &#x27;&#x27;;   // &#x27;./src/index.js&#x27;</span><br><span class="line">        // 需要保存所有的模块依赖</span><br><span class="line">        this.modules = &#123;&#125;;</span><br><span class="line">        this.entry = config.entry  // 入口文件</span><br><span class="line">        // 工作目录</span><br><span class="line">        this.root = process.cwd(); // 当前运行npx的路径</span><br><span class="line"></span><br><span class="line">        this.hooks = &#123;</span><br><span class="line">            entryOption: new SyncHook(),  // 入口选项</span><br><span class="line">            compile: new SyncHook(),      // 编译</span><br><span class="line">            afterCompile: new SyncHook(),  // 编译完成</span><br><span class="line">            afterPlugins: new SyncHook(),   // 编译完插件</span><br><span class="line">            run: new SyncHook(),         // 运行</span><br><span class="line">            emit: new SyncHook(),        // 发射</span><br><span class="line">            done: new SyncHook()         // 完成</span><br><span class="line">        &#125;</span><br><span class="line">        // 如果传递了plugins参数</span><br><span class="line">        let plugins = this.config.plugins</span><br><span class="line">        if (Array.isArray(plugins)) &#123;</span><br><span class="line">            plugins.forEach(plugin =&gt; &#123;</span><br><span class="line">                plugin.apply(this); // 这里只是appLy方法不是改变this指向</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        this.hooks.afterPlugins.call()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在<code>webpack.config.js</code>中写插件方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">class P &#123;</span><br><span class="line">    apply(compiler) &#123;   // 这里只是appLy方法不是改变this指向</span><br><span class="line">        // 绑定</span><br><span class="line">        compiler.hooks.emit.tap(&#x27;emit&#x27;, function () &#123;</span><br><span class="line">            console.log(&#x27;emit&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class P1 &#123;</span><br><span class="line">    apply(compiler) &#123;   // 这里只是appLy方法不是改变this指向</span><br><span class="line">        // 绑定</span><br><span class="line">        compiler.hooks.afterPlugins.tap(&#x27;emit&#x27;, function () &#123;</span><br><span class="line">            console.log(&#x27;afterPlugins&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &#x27;development&#x27;,</span><br><span class="line">    entry: &#x27;./src/index.js&#x27;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &#x27;bundle.js&#x27;,</span><br><span class="line">        path: path.resolve(__dirname, &#x27;dist&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.less$/,</span><br><span class="line">                use: [</span><br><span class="line">                    path.resolve(__dirname, &#x27;loader&#x27;, &#x27;style-loader&#x27;),</span><br><span class="line">                    path.resolve(__dirname, &#x27;loader&#x27;, &#x27;less-loader&#x27;)</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new P(),</span><br><span class="line">        new P1()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后在各个地方调用</p><p><code>may-pack</code>中<code>may-pack.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">// 调用</span><br><span class="line">compiler.hooks.entryOption.call()</span><br><span class="line">// 标识运行编译</span><br><span class="line">compiler.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>may-pack</code>中<code>Compiler.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">run() &#123;</span><br><span class="line">        this.hooks.run.call()</span><br><span class="line"></span><br><span class="line">        this.hooks.compile.call()</span><br><span class="line">        // 执行 创建模块的依赖关系</span><br><span class="line">        this.buildModule(path.resolve(this.root, this.entry), true)  // path.resolve(this.root, this.entry) 得到入口文件的绝对路径</span><br><span class="line">        // console.log(this.modules, this.entryId);</span><br><span class="line">        this.hooks.afterCompile.call()</span><br><span class="line">        // 发射打包后的文件</span><br><span class="line">        this.emitFile()</span><br><span class="line">        this.hooks.emit.call()</span><br><span class="line">        this.hooks.done.call()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行<code>npx may-pack</code></p><h2 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h2><p><a href="https://juejin.im/post/59e6a5de518825469c7461da">手写loader</a></p><p><code>webapck.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &#x27;development&#x27;,</span><br><span class="line">    entry: &#x27;./src/index&#x27;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &#x27;build.js&#x27;,</span><br><span class="line">        path: path.resolve(__dirname, &#x27;dist&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.js/,</span><br><span class="line">                use: &#x27;loader1&#x27; // 如何找到这个loader1</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>创建<code>loader</code>文件<code>loader1.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">console.log(22);</span><br><span class="line"></span><br><span class="line">function loader(source) &#123;  // loader的参数就是源代码</span><br><span class="line">    return source</span><br><span class="line">&#125;</span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &#x27;development&#x27;,</span><br><span class="line">    entry: &#x27;./src/index.js&#x27;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &#x27;build.js&#x27;,</span><br><span class="line">        path: path.resolve(__dirname, &#x27;dist&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    resolveLoader: &#123;</span><br><span class="line">      // 别名</span><br><span class="line">      // alias: &#123;</span><br><span class="line">      //     loader1: path.resolve(__dirname, &#x27;loader&#x27;, &#x27;loader1&#x27;)</span><br><span class="line">      // &#125;</span><br><span class="line">        modules: [&#x27;node_modules&#x27;, path.resolve(__dirname, &#x27;loader&#x27;)]  // 先找node_modules, 再去loader中去找</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.js$/,</span><br><span class="line">                // use: [path.resolve(__dirname, &#x27;loader&#x27;, &#x27;loader1&#x27;)]</span><br><span class="line">                use: &#x27;loader1&#x27; // 如何找到这个loader1</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line">            // &#123;</span><br><span class="line">            //     test: /\.less$/,</span><br><span class="line">            //     use: [</span><br><span class="line">            //         path.resolve(__dirname, &#x27;loader&#x27;, &#x27;style-loader&#x27;),</span><br><span class="line">            //         path.resolve(__dirname, &#x27;loader&#x27;, &#x27;less-loader&#x27;)</span><br><span class="line">            //     ]</span><br><span class="line">            // &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如何找到这个<code>loader1</code></p><ol><li>通过配别名<code>alias</code></li><li>通过<code>modules</code></li></ol><p><code>npx webpack</code></p><h2 id="配置多个loader"><a href="#配置多个loader" class="headerlink" title="配置多个loader"></a>配置多个loader</h2><ol><li>数组方式</li></ol><p>先分别在<code>loader</code>文件下创建，<code>loader2.js</code>和<code>loader3.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function loader(source) &#123;  // loader的参数就是源代码</span><br><span class="line">    console.log(&#x27;loader2&#x27;);  // loader3.js 类似</span><br><span class="line">    return source</span><br><span class="line">&#125;</span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">    &#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        use: [&#x27;loader3&#x27;, &#x27;loader2&#x27;, &#x27;loader1&#x27;]</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行<code>npx webpack</code>,分别打出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">loader1</span><br><span class="line">loader2</span><br><span class="line">loader3</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>对象方式</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">    &#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        use: [&#x27;loader3&#x27;]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        use: [&#x27;loader2&#x27;]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        use: [&#x27;loader1&#x27;]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行<code>npx webpack</code>,分别打出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">loader1</span><br><span class="line">loader2</span><br><span class="line">loader3</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><code>loader</code>的顺序: 从右到左, 从下到上</p></blockquote><p>也可以通过配置不同的参数改变<code>loader</code>的执行顺序，<code>pre</code> 前面的， <code>post</code>在后面的， <code>normal</code>正常</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /\.js$/,</span><br><span class="line">    use: [&#x27;loader1&#x27;],</span><br><span class="line">    enforce: &quot;pre&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    test: /\.js$/,</span><br><span class="line">    use: [&#x27;loader2&#x27;]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    test: /\.js$/,</span><br><span class="line">    use: [&#x27;loader3&#x27;],</span><br><span class="line">    enforce: &quot;post&quot;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>loader</code> 带参数执行的顺序: <code>pre  -&gt; normal -&gt; inline -&gt; post</code></p><p><code>inline</code>为行内<code>loader</code></p><p>在<code>loader</code>文件中新建<code>inlin-loader</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function loader(source) &#123;  // loader的参数就是源代码</span><br><span class="line">    console.log(&#x27;inline&#x27;);</span><br><span class="line">    return source</span><br><span class="line">&#125;</span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>src/a.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#x27;may&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>src/index</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#x27;hello&#x27;)</span><br><span class="line">let srt = require(&#x27;-!inline-loader!./a&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li><code>-!</code>禁用<code>pre-loader</code>和 <code>normal-loader</code>来处理了</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">loader1</span><br><span class="line">loader2</span><br><span class="line">loader3</span><br><span class="line">inline</span><br><span class="line">loader3</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><code>!</code>禁用<code>normal-loader</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">loader1</span><br><span class="line">loader2</span><br><span class="line">loader3</span><br><span class="line">loader1</span><br><span class="line">inline</span><br><span class="line">loader3</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li><code>!!</code> 禁用<code>pre-loader</code>、<code>normal-loader</code>、<code>post-loader</code>,只能行内处理</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">loader1</span><br><span class="line">loader2</span><br><span class="line">loader3</span><br><span class="line">inline</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>loader 默认由两部分组成<code>pitch</code>和<code>normal</code></p><p><code>user: [loader3, loader2, loader1]</code></p><p>无返回值: 先执行pitch方法,从左到右，再获取资源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    pitch loader - 无返回值</span><br><span class="line">    </span><br><span class="line">pitch   loader3 → loader2 → loader1  </span><br><span class="line">                                    ↘</span><br><span class="line">                                      资源</span><br><span class="line">                                    ↙</span><br><span class="line">normal   loader3 ← loader2 ← loader1 </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>有返回值: 直接跳过后续所有的<code>loader</code>包括自己的,跳到之前的<code>loader</code>, 可用于阻断</p><p><a href="https://webpack.docschina.org/api/loaders/">loader</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user: [loader3, loader2, loader1]</span><br><span class="line"></span><br><span class="line">    pitch loader - 有返回值</span><br><span class="line">    </span><br><span class="line">pitch   loader3 → loader2  loader1  </span><br><span class="line">                     ↙               </span><br><span class="line">               有返回值               资源</span><br><span class="line">               ↙                      </span><br><span class="line">normal  loader3  loader2  loader1 </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>loadeer2.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function loader(source) &#123;  // loader的参数就是源代码</span><br><span class="line">    console.log(&#x27;loader2&#x27;);</span><br><span class="line">    return source</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loader.pitch = function () &#123;</span><br><span class="line">    return &#x27;111&#x27;</span><br><span class="line">&#125;</span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">loader3</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="babel-loader实现"><a href="#babel-loader实现" class="headerlink" title="babel-loader实现"></a><code>babel-loader</code>实现</h2><p><code>yarn add @babel/core @babel/preset-env</code></p><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: &#x27;\.js$/&#x27;,</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: &#x27;babel-loader2&#x27;,</span><br><span class="line">        options: &#123;</span><br><span class="line">            presets: [</span><br><span class="line">                &#x27;@babel/preset-env&#x27;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在<code>loader</code>文件创建<code>babel-loader2.js</code>(如果你已经装过<code>babel-loader</code>)</p><p>拿到<code>babel</code>的参数</p><p><code>yarn add loader-utils</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 需要在webpack.config.js拿到babel的预设, 通过预设转换模块, 先引入babel</span><br><span class="line">let babel = require(&#x27;@babel/core&#x27;)</span><br><span class="line"></span><br><span class="line">// 拿到babel的参数 需要工具 loaderUtils</span><br><span class="line">let loaderUtils =require(&#x27;loader-utils&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function loader(source) &#123;  // loader的参数就是源代码  这里的this就是loader的上下文</span><br><span class="line">    let options = loaderUtils.getOptions(this)</span><br><span class="line">    console.log(this.resourcePath, 444);   // [./src/index.js]</span><br><span class="line">    let callback = this.async(); // babel的转换是异步的,同步的返回是不行的， 不能用return  同步就是直接掉用 异步会在async中</span><br><span class="line">    babel.transform(source, &#123;</span><br><span class="line">        ...options,</span><br><span class="line">        sourceMap: true,         // 是否设置sourceMap 还需要再webpack.config.js 中配置  devtool: &#x27;source-map&#x27;</span><br><span class="line">        filename: this.resourcePath.split(&#x27;/&#x27;).pop()   //  给生成的`source-map`指定名字</span><br><span class="line">    &#125;, function (err, result) &#123;</span><br><span class="line">        callback(err, result.code, result.map)   // 异步 参数分别是「错误 转化后的代码 和 sourceMap」</span><br><span class="line">    &#125;)</span><br><span class="line">    console.log(options);</span><br><span class="line">    // return source  失效</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>index.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class May &#123;</span><br><span class="line">    constructor () &#123;</span><br><span class="line">        this.name = &#x27;may&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    getName () &#123;</span><br><span class="line">        return this.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let may = new May()</span><br><span class="line"></span><br><span class="line">console.log(may.getName());</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>npx webpack</code></p><h2 id="banner-loader实现-自创"><a href="#banner-loader实现-自创" class="headerlink" title="banner-loader实现(自创)"></a><code>banner-loader</code>实现(自创)</h2><p>给所有匹配的<code>js</code>加一个注释</p><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;    // 给所有匹配的`js`加一个注释</span><br><span class="line">    test: /\.js$/,</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: &#x27;banner-loader&#x27;,</span><br><span class="line">        options: &#123;</span><br><span class="line">           text: &#x27;may&#x27;,</span><br><span class="line">           filename: path.resolve(__dirname, &#x27;banner.js&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>banner.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">二次星球中毒</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在<code>loader</code>文件创建<code>banner-loader.js</code></p><p><code>yarn add schema-utils</code> 校验自己写的<code>loader</code>格式是否正确</p><p><a href="https://github.com/webpack-contrib/schema-utils">schema-utils</a></p><p><code>banner-loader.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">// 拿到loader的配置</span><br><span class="line">let loaderUtils = require(&#x27;loader-utils&#x27;)</span><br><span class="line">// 校验loader</span><br><span class="line">let validateOptions = require(&#x27;schema-utils&#x27;)</span><br><span class="line">// 读取文件</span><br><span class="line">let fs = require(&#x27;fs&#x27;)  // 异步</span><br><span class="line"></span><br><span class="line">function loader(source) &#123;  // loader的参数就是源代码</span><br><span class="line">    let options = loaderUtils.getOptions(this)</span><br><span class="line">    let callback = this.async()  // 读取文件是异步</span><br><span class="line">    let schema = &#123;</span><br><span class="line">        type: &#x27;object&#x27;,</span><br><span class="line">        properties: &#123;</span><br><span class="line">            text: &#123;</span><br><span class="line">                type: &#x27;string&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            filename: &#123;</span><br><span class="line">                type: &#x27;string&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    validateOptions(schema, options, &#x27;banner-loader&#x27;)  // 自己的校验格式， 自己的写的配置， 对应的loader名字</span><br><span class="line">    if (options.filename) &#123;</span><br><span class="line">        this.cacheable(false)  // 不要缓存  如果有大量计算 推荐缓存</span><br><span class="line">        // this.cacheable &amp;&amp; this.cacheable()</span><br><span class="line">        this.addDependency(options.filename) // 自动增加依赖</span><br><span class="line">        fs.readFile(options.filename, &#x27;utf8&#x27;, function (err, data) &#123;</span><br><span class="line">            callback(err, `/**$&#123;data&#125;**/$&#123;source&#125;`)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        callback(null, `/**$&#123;options.text&#125;**/$&#123;source&#125;`)</span><br><span class="line">    &#125;</span><br><span class="line">    return source</span><br><span class="line">&#125;</span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>优化:</p><ol><li>修改<code>banner.js</code>的内容后, <code>webpack</code>进行监控，打包<code>webapck.config.js</code>配置<code>watch: true</code></li><li><code>loader</code>缓存</li></ol><h2 id="实现file-loader和url-loader"><a href="#实现file-loader和url-loader" class="headerlink" title="实现file-loader和url-loader"></a>实现<code>file-loader</code>和<code>url-loader</code></h2><p><code>yarn add mime</code></p><p>其主要用途是设置某种扩展名的文件的响应程序类型</p><p><a href="https://github.com/broofa/node-mime#readme">mime</a></p><p>创建<code>file-loader.js1</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 拿到babel的参数 需要工具 loaderUtils</span><br><span class="line">let loaderUtils = require(&#x27;loader-utils&#x27;)</span><br><span class="line"></span><br><span class="line">function loader(source) &#123;  // loader的参数就是源代码</span><br><span class="line">    // file-loader需要返回路径</span><br><span class="line">    let filename = loaderUtils.interpolateName(this, &#x27;[hash].[ext]&#x27;, &#123;content: source &#125;)</span><br><span class="line">    this.emitFile(filename, source) // 发射文件</span><br><span class="line">    console.log(&#x27;loader1&#x27;);</span><br><span class="line">    return `module.exports=&quot;$&#123;filename&#125;&quot;`</span><br><span class="line">&#125;</span><br><span class="line">loader.raw = true // 二进制</span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>创建<code>url-loader1.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 拿到babel的参数 需要工具 loaderUtils</span><br><span class="line">let loaderUtils = require(&#x27;loader-utils&#x27;)</span><br><span class="line">let mime = require(&#x27;mime&#x27;)  // 途是设置某种扩展名的文件的响应程序类型</span><br><span class="line"></span><br><span class="line">function loader(source) &#123;  // loader的参数就是源代码</span><br><span class="line">    let &#123;limit&#125; = loaderUtils.getOptions(this)</span><br><span class="line">    console.log(this.resourcePath);</span><br><span class="line">    if (limit &amp;&amp; limit &gt; source.length) &#123;</span><br><span class="line">        return `module.exports=&quot;data:$&#123;mime.getType(this.resourcePath)&#125;;base64,$&#123;source.toString(&#x27;base64&#x27;)&#125;&quot;`</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return require(&#x27;./file-loader1&#x27;).call(this, source)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">loader.raw = true // 二进制</span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /\.png$/,</span><br><span class="line">    // 目的是根据图片生成md5 发射到dist目录下，file-loader 返回当前图片路径</span><br><span class="line">    // use: &#x27;file-loader&#x27;</span><br><span class="line">    // 处理路径</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: &#x27;url-loader1&#x27;,</span><br><span class="line">        options: &#123;</span><br><span class="line">            limit: 200 * 1024</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>index.js</code>引入图片</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import p from &#x27;./photo.png&#x27;</span><br><span class="line"></span><br><span class="line">let img = document.createElement(&#x27;img&#x27;)</span><br><span class="line">img.src = p</span><br><span class="line">document.body.appendChild(img);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="less-loader和css-loader"><a href="#less-loader和css-loader" class="headerlink" title="less-loader和css-loader"></a><code>less-loader</code>和<code>css-loader</code></h2><p>先安装<code>less</code></p><p>分别创建<code>style-loader2</code> <code>css-loader2</code> <code>less-loader2</code></p><p><code>style-loader1</code> 与 <code>less-loader1</code> 同之前的</p><h2 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a><code>css-loader</code></h2><p>主要用来处理<code>css</code>中的图片链接，需要把<code>url</code>转换成<code>require</code></p><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /\.png$/,</span><br><span class="line">    // 目的是根据图片生成md5 发射到dist目录下，file-loader 返回当前图片路径</span><br><span class="line">    // use: &#x27;file-loader&#x27;</span><br><span class="line">    // 处理路径</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader: &#x27;url-loader1&#x27;,</span><br><span class="line">        options: &#123;</span><br><span class="line">            limit: 200 * 1024</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    test: /\.less$/,</span><br><span class="line">    use: [&#x27;style-loader2&#x27;, &#x27;css-loader2&#x27;, &#x27;less-loader2&#x27;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>创建<code>index.less</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@base: #f938ab;</span><br><span class="line">body &#123;</span><br><span class="line">  background: @base;</span><br><span class="line">  background: url(&quot;./photo.png&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>less-loader2.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 将less转为css</span><br><span class="line">let less = require(&#x27;less&#x27;)</span><br><span class="line"></span><br><span class="line">function loader(source) &#123;</span><br><span class="line">    let css = &#x27;&#x27;</span><br><span class="line">    // console.log(source, 2222);</span><br><span class="line">    less.render(source, function (err, output) &#123;</span><br><span class="line">        // console.log(output);</span><br><span class="line">        css = output.css</span><br><span class="line">    &#125;)</span><br><span class="line">    // css = css.replace(/\n/g, &#x27;\\n&#x27;);</span><br><span class="line">    return css</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>css-loader2.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// css-loader 用来解析@import这种语法,包括css中引入的图片</span><br><span class="line">function loader(source) &#123;</span><br><span class="line">    let reg = /url\((.+?)\)/g   // 匹配括号</span><br><span class="line"></span><br><span class="line">    let pos = 0;</span><br><span class="line">    let current;</span><br><span class="line"></span><br><span class="line">    let arr = [&#x27;let list = []&#x27;]</span><br><span class="line"></span><br><span class="line">    while (current = reg.exec(source)) &#123;</span><br><span class="line">        let [matchUrl, g] = current   // matchUrl -&gt; &#x27;url(&quot;./photo.png&quot;)&#x27;, g  -&gt; &#x27;&quot;./photo.png&quot;&#x27;</span><br><span class="line">        // console.log(matchUrl, g, 88);</span><br><span class="line">        let lastIndex = reg.lastIndex - matchUrl.length    // 拿到css从开通到地址链接之前的index</span><br><span class="line">        arr.push(`list.push($&#123;JSON.stringify(source.slice(pos, lastIndex))&#125;)`)  // 拼入开始和地址之前的代码</span><br><span class="line">        pos = reg.lastIndex</span><br><span class="line">        arr.push(`list.push(&#x27;url(&#x27;+ require($&#123;g&#125;) +&#x27;)&#x27;)`)    // 拼入图片地址</span><br><span class="line">    &#125;</span><br><span class="line">    arr.push(`list.push($&#123;JSON.stringify(source.slice(pos))&#125;)`)  // 拼入地址到结尾的代码</span><br><span class="line">    arr.push(`module.exports = list.join(&#x27;&#x27;)`)</span><br><span class="line">    console.log(arr.join(&#x27;\r\n&#x27;));</span><br><span class="line">    // let list = []</span><br><span class="line">    // list.push(&quot;body &#123;\\n  background: #f938ab;\\n  background: &quot;)</span><br><span class="line">    // list.push(&#x27;url(&#x27;+ require(&quot;./photo.png&quot;) +&#x27;)&#x27;)</span><br><span class="line">    // list.push(&quot;;\\n&#125;\\n&quot;)</span><br><span class="line">    // module.exports = list.join(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">    return arr.join(&#x27;\r\n&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>style-loader2.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">let loaderUtils = require(&#x27;loader-utils&#x27;)</span><br><span class="line"></span><br><span class="line">// 将css插入到html头部</span><br><span class="line">function loader(source) &#123;</span><br><span class="line">    let str = `</span><br><span class="line">    let style = document.createElement(&#x27;style&#x27;)</span><br><span class="line">    style.innerHTML = $&#123;JSON.stringify(source)&#125;</span><br><span class="line">    document.head.appendChild(style)</span><br><span class="line">   `</span><br><span class="line">    return str</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// style-loader写了pitch,有返回后面的跳过，自己的写不会走</span><br><span class="line">loader.pitch = function (remainingRequest) &#123;  // 剩余的请求</span><br><span class="line">    console.log(loaderUtils.stringifyRequest(this, &#x27;!!&#x27; + remainingRequest, 99999999))</span><br><span class="line">    // 让style-loader 处理 less-loader 和css-loader拼接的结果</span><br><span class="line">    // 得到 /Users/liuhuimin/work/webpack/loader/css-loader2.js!/Users/liuhuimin/work/webpack/loader/less-loader2.js!/Users/liuhuimin/work/webpack/src/index.less</span><br><span class="line">    // 剩余的请求 less-loader!css-loader!./index.less</span><br><span class="line">    // console.log(remainingRequest, 1223);</span><br><span class="line">    // require返回的就是css-loader处理好的结果require(&#x27;!!css-loader!less-loader!./index.less&#x27;)</span><br><span class="line">    let str = `</span><br><span class="line">    let style = document.createElement(&#x27;style&#x27;)</span><br><span class="line">    style.innerHTML = require($&#123;loaderUtils.stringifyRequest(this, &#x27;!!&#x27; + remainingRequest)&#125;)</span><br><span class="line">    document.head.appendChild(style)</span><br><span class="line">   `</span><br><span class="line">    // stringifyRequest 绝对路径转相对路径</span><br><span class="line">    return str</span><br><span class="line">&#125;</span><br><span class="line">module.exports = loader</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user: [&#x27;style-loader2&#x27;, &#x27;css-loader2&#x27;, &#x27;less-loader2&#x27;]</span><br><span class="line"></span><br><span class="line">    pitch loader - 有返回值</span><br><span class="line">    </span><br><span class="line">pitch   style-loader2 → css-loader2  less-loader2  </span><br><span class="line">                     ↙               </span><br><span class="line">               有返回值               资源</span><br><span class="line">               ↙                      </span><br><span class="line">normal  style-loader2  css-loader2  less-loader2</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在<code>style-loader2</code>中 引用了<code>less-loader</code> <code>css-loader</code> 和<code>less</code>文件</p><h2 id="webpack-中的插件"><a href="#webpack-中的插件" class="headerlink" title="webpack 中的插件"></a>webpack 中的插件</h2><p><code>yarn add webpack webpack-cil -D</code></p><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line">let DonePlugin = require(&#x27;./plugins/DonePlugins&#x27;)</span><br><span class="line">let AsyncPlugins = require(&#x27;./plugins/AsyncPlugins&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &#x27;development&#x27;,</span><br><span class="line">    entry: &#x27;./src/index.js&#x27;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &#x27;build.js&#x27;,</span><br><span class="line">        path: path.resolve(__dirname, &#x27;dist&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new DonePlugin(),    // 同步</span><br><span class="line">        new AsyncPlugins()   // 异步</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>node_modules/webpack/lib</code>中查看<code>Compiler.js</code></p><ol><li>同步<code>plugins/DonePlugins</code></li></ol><p>打包完成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class DonePlugins &#123;</span><br><span class="line">    apply (compiler) &#123;</span><br><span class="line">        console.log(1);</span><br><span class="line">        compiler.hooks.done.tap(&#x27;DonePlugin&#x27;, (stats) =&gt; &#123;</span><br><span class="line">            console.log(&#x27;编译完成&#x27;);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module.exports = DonePlugins</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>异步<code>plugins/AsyncPlugins</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class AsyncPlugins &#123;</span><br><span class="line">    apply (compiler) &#123;</span><br><span class="line">        console.log(2);</span><br><span class="line">        compiler.hooks.emit.tapAsync(&#x27;AsyncPlugin&#x27;, (complete, callback) =&gt; &#123;</span><br><span class="line">            setTimeout(() =&gt; &#123;</span><br><span class="line">                console.log(&#x27;文件发射出来&#x27;);</span><br><span class="line">                callback()</span><br><span class="line">            &#125;, 1000)</span><br><span class="line">        &#125;)</span><br><span class="line">        compiler.hooks.emit.tapPromise(&#x27;AsyncPlugin&#x27;, (complete, callback) =&gt; &#123;</span><br><span class="line">            return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">                setTimeout(() =&gt; &#123;</span><br><span class="line">                    console.log(&#x27;文件发射出来 222&#x27;);</span><br><span class="line">                    resolve()</span><br><span class="line">                &#125;, 1000)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module.exports = AsyncPlugins</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="文件列表插件"><a href="#文件列表插件" class="headerlink" title="文件列表插件"></a>文件列表插件</h2><p>希望生成一个文件描述打包出来的文件</p><p>在<code>plugins</code>中新建<code>FileListPlugin</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">class FileListPlugin &#123;</span><br><span class="line">    constructor (&#123;filename&#125;) &#123;</span><br><span class="line">        this.filename = filename</span><br><span class="line">    &#125;</span><br><span class="line">    apply (compiler) &#123;</span><br><span class="line">        // 文件已经准备好了 要进行发射</span><br><span class="line">        // emit</span><br><span class="line">        compiler.hooks.emit.tap(&#x27;FileListPlugin&#x27;, (compilation) =&gt; &#123;</span><br><span class="line">            let assets = compilation.assets;</span><br><span class="line">            console.log(assets, 55);</span><br><span class="line">            let content = `## 文件名  资源大小\r\n`</span><br><span class="line">            // [ [bundls.js, &#123;&#125;], [index.html, &#123;&#125;]]</span><br><span class="line">            Object.entries(assets).forEach(([filename, stateObj]) =&gt; &#123;</span><br><span class="line">                content += `- $&#123;filename&#125;    $&#123;stateObj.size()&#125;\r\n`</span><br><span class="line">            &#125;)</span><br><span class="line">            // 资源对象</span><br><span class="line">            assets[this.filename] = &#123;</span><br><span class="line">                source () &#123;</span><br><span class="line">                    return content;</span><br><span class="line">                &#125;,</span><br><span class="line">                size () &#123;</span><br><span class="line">                    return content.length</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = FileListPlugin</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line">let DonePlugin = require(&#x27;./plugins/DonePlugins&#x27;)</span><br><span class="line">let AsyncPlugins = require(&#x27;./plugins/AsyncPlugins&#x27;)</span><br><span class="line">let HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">let FileListPlugin = require(&#x27;./plugins/FileListPlugin&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &#x27;development&#x27;,</span><br><span class="line">    entry: &#x27;./src/index.js&#x27;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &#x27;build.js&#x27;,</span><br><span class="line">        path: path.resolve(__dirname, &#x27;dist&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new DonePlugin(),</span><br><span class="line">        new AsyncPlugins(),</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: &#x27;./src/index.html&#x27;,</span><br><span class="line">            filename: &#x27;index.html&#x27;</span><br><span class="line">        &#125;),</span><br><span class="line">        new FileListPlugin(&#123;</span><br><span class="line">            filename: &#x27;list.md&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>生成<code>list.md</code></p><h2 id="内联的webpack插件"><a href="#内联的webpack插件" class="headerlink" title="内联的webpack插件"></a>内联的<code>webpack</code>插件</h2><p>新建<code>index.css</code>引入<code>index.js</code></p><p><code>yarn add css-loader mini-css-extract-plugin -D</code></p><p>希望打包后<code>css、js</code>内联在<code>index.html</code>文件中</p><p>创建<code>plugins</code>中<code>InlineSourcePlugins.js</code></p><p><code>yarn add --dev html-webpack-plugin@next</code></p><p><a href="https://github.com/jantimon/html-webpack-plugin">HTML Webpack Plugin</a></p><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line">let DonePlugin = require(&#x27;./plugins/DonePlugins&#x27;)</span><br><span class="line">let AsyncPlugins = require(&#x27;./plugins/AsyncPlugins&#x27;)</span><br><span class="line">let HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">let FileListPlugin = require(&#x27;./plugins/FileListPlugin&#x27;)</span><br><span class="line"></span><br><span class="line">let InlineSourcePlugins = require(&#x27;./plugins/InlineSourcePlugins&#x27;)</span><br><span class="line"></span><br><span class="line">let MiniCssExtractPlugin = require(&#x27;mini-css-extract-plugin&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &#x27;production&#x27;,</span><br><span class="line">    entry: &#x27;./src/index.js&#x27;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &#x27;bundle.js&#x27;,</span><br><span class="line">        path: path.resolve(__dirname, &#x27;dist&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.css$/,</span><br><span class="line">                use: [MiniCssExtractPlugin.loader, &#x27;css-loader&#x27;]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        // new DonePlugin(),</span><br><span class="line">        // new AsyncPlugins(),</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: &#x27;./src/index.html&#x27;,</span><br><span class="line">            filename: &#x27;index.html&#x27;</span><br><span class="line">        &#125;),</span><br><span class="line">        new MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: &#x27;index.css&#x27;</span><br><span class="line">        &#125;),</span><br><span class="line">        new InlineSourcePlugins(&#123;</span><br><span class="line">            match: /\.(js|css)/</span><br><span class="line">        &#125;),</span><br><span class="line">        // new FileListPlugin(&#123;</span><br><span class="line">        //     filename: &#x27;list.md&#x27;</span><br><span class="line">        // &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>InlineSourcePlugins.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line"></span><br><span class="line">// 把外链的标签编程内联的标签</span><br><span class="line">class InlineSourcePlugins &#123;</span><br><span class="line">    constructor(&#123;match&#125;) &#123;</span><br><span class="line">        this.reg = match  // 正则</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 处理某一个标签</span><br><span class="line">    processTag(tag, compilation) &#123;</span><br><span class="line">        let newTag = &#123;&#125;</span><br><span class="line">        let url = &#x27;&#x27;</span><br><span class="line">        if (tag.tagName === &#x27;link&#x27; &amp;&amp; this.reg.test(tag.attributes.href)) &#123;</span><br><span class="line">            newTag = &#123;</span><br><span class="line">                tagName: &#x27;style&#x27;,</span><br><span class="line">                attributes: &#123;type: &#x27;text/css&#x27;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            url = tag.attributes.href</span><br><span class="line">        &#125; else if (tag.tagName === &#x27;script&#x27; &amp;&amp; this.reg.test(tag.attributes.src)) &#123;</span><br><span class="line">            newTag = &#123;</span><br><span class="line">                tagName: &#x27;script&#x27;,</span><br><span class="line">                attributes: &#123;type: &#x27;application/javascript&#x27;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            url = tag.attributes.src</span><br><span class="line">        &#125;</span><br><span class="line">        if (url) &#123;</span><br><span class="line">            newTag.innerHTML = compilation.assets[url].source(); // 文件内容放到innerHTML属性中</span><br><span class="line">            delete compilation.assets[url]   // 删除原有的资源</span><br><span class="line">            return newTag</span><br><span class="line">            // console.log(compilation.assets[url].source());</span><br><span class="line">        &#125;</span><br><span class="line">        return tag</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 处理引入标签的数据</span><br><span class="line">    processTags(data, compilation) &#123;</span><br><span class="line">        let headTags = []</span><br><span class="line">        let bodyTags = []</span><br><span class="line">        data.headTags.forEach(headTag =&gt; &#123;</span><br><span class="line">            headTags.push(this.processTag(headTag, compilation))</span><br><span class="line">        &#125;)</span><br><span class="line">        data.bodyTags.forEach(bodyTag =&gt; &#123;</span><br><span class="line">            bodyTags.push(this.processTag(bodyTag, compilation))</span><br><span class="line">        &#125;)</span><br><span class="line">        console.log(&#123;...data, headTags, bodyTags&#125;)</span><br><span class="line">        return &#123;...data, headTags, bodyTags&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    apply(compiler) &#123;</span><br><span class="line">        // 通过webpackPlugin来实现  npm搜索  html-webpack-plugin</span><br><span class="line">        compiler.hooks.compilation.tap(&#x27;InlineSourcePlugins&#x27;, (compilation) =&gt; &#123;</span><br><span class="line">            HtmlWebpackPlugin.getHooks(compilation).alterAssetTagGroups.tapAsync(</span><br><span class="line">                &#x27;alertPlugin&#x27;,</span><br><span class="line">                (data, callback) =&gt; &#123;</span><br><span class="line">                    // console.log(&#x27;======&#x27;);</span><br><span class="line">                    // console.log(data) // 插入html标签的数据</span><br><span class="line">                    // console.log(&#x27;======&#x27;);</span><br><span class="line">                    data = this.processTags(data, compilation)   // compilation.assets 资源的链接</span><br><span class="line">                    callback(null, data)</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = InlineSourcePlugins</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="打包后自动发布"><a href="#打包后自动发布" class="headerlink" title="打包后自动发布"></a>打包后自动发布</h2><p>打包好的文件自动上传致七牛</p><p>需要这几个参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bucket: &#x27;&#x27;  // 七牛的存储空间</span><br><span class="line">domain: &#x27;&#x27;,</span><br><span class="line">accessKey: &#x27;&#x27;, // 七牛云的两对密匙</span><br><span class="line">secretKey: &#x27;&#x27; // 七牛云的两对密匙</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>注册七牛，并在对象存储里面,新建存储空间列表<code>test</code>,<code>bucket: &#39;test&#39;</code></p><p>内容管理外链接默认域名 <code>domain: &#39;xxxxxxxx&#39;</code></p><p>右上角个人面板里面个人中心,密钥管理分别对应<code>accessKey</code>和<code>secretKey</code></p><p><a href="https://developer.qiniu.com/">进入开发者中心</a> -&gt; SDK&amp;工具 -&gt; 官方SDK -&gt; Node服务端文档 —&gt; 文件上传</p><p><a href="https://developer.qiniu.com/kodo/sdk/1289/nodejs">node文件上传</a></p><p><code>npm install qiniu</code></p><p><a href="https://webpack.docschina.org/api/compiler-hooks">compiler-hooks</a></p><p><code>webpack.config.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: &#x27;./src/index.html&#x27;,</span><br><span class="line">            filename: &#x27;index.html&#x27;</span><br><span class="line">        &#125;),</span><br><span class="line">        new MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: &#x27;index.css&#x27;</span><br><span class="line">        &#125;),</span><br><span class="line">        new UploadPlugin(&#123;</span><br><span class="line">            bucket: &#x27;test&#x27;,  // 七牛的存储空间</span><br><span class="line">            domain: &#x27;poyrjyh1b.bkt.clouddn.com&#x27;,</span><br><span class="line">            accessKey: &#x27;xxxxxx&#x27;, // 七牛云的两对密匙</span><br><span class="line">            secretKey: &#x27;yyyyyy&#x27; // 七牛云的两对密匙</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>UploadPlugin.js</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">let qiniu = require(&#x27;qiniu&#x27;)</span><br><span class="line">let path = require(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line">class UploadPlugin &#123;</span><br><span class="line">    constructor (options = &#123;&#125;) &#123;</span><br><span class="line">        // 参考 https://developer.qiniu.com/kodo/sdk/1289/nodejs</span><br><span class="line">        let &#123; bucket = &#x27;&#x27;, domain = &#x27;&#x27;, accessKey = &#x27;&#x27;, secretKey = &#x27;&#x27;&#125; = options</span><br><span class="line">        let mac = new qiniu.auth.digest.Mac(accessKey, secretKey)</span><br><span class="line">        let putPolicy = new qiniu.rs.PutPolicy(&#123;</span><br><span class="line">            scope: bucket</span><br><span class="line">        &#125;);</span><br><span class="line">        this.uploadToken = putPolicy.uploadToken(mac)</span><br><span class="line">        let config = new qiniu.conf.Config();</span><br><span class="line">        this.formUploader = new qiniu.form_up.FormUploader(config)</span><br><span class="line">        this.putExtra = new qiniu.form_up.PutExtra()</span><br><span class="line">    &#125;</span><br><span class="line">    apply (compiler) &#123;</span><br><span class="line">        compiler.hooks.afterEmit.tapPromise(&#x27;UploadPlugin&#x27;, (complication) =&gt; &#123;</span><br><span class="line">            let assets = complication.assets</span><br><span class="line">            let promise = []</span><br><span class="line">            Object.keys(assets).forEach(filename =&gt; &#123;</span><br><span class="line">                promise.push(this.upload(filename))</span><br><span class="line">            &#125;)</span><br><span class="line">            return Promise.all(promise)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    upload (filename) &#123;</span><br><span class="line">        return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">            let localFile = path.resolve(__dirname, &#x27;../dist&#x27;, filename)</span><br><span class="line">            this.formUploader.putFile(this.uploadToken, filename, localFile, this.putExtra, function(respErr,</span><br><span class="line">                                                                                 respBody, respInfo) &#123;</span><br><span class="line">                if (respErr) &#123;</span><br><span class="line">                    reject(respErr)</span><br><span class="line">                &#125;</span><br><span class="line">                if (respInfo.statusCode == 200) &#123;</span><br><span class="line">                    resolve(respBody)</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    console.log(respInfo.statusCode)</span><br><span class="line">                    console.log(respBody)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = UploadPlugin</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="后续还有持续更新！"><a href="#后续还有持续更新！" class="headerlink" title="后续还有持续更新！"></a>后续还有持续更新！</h3>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 打包工具 </tag>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法和实例</title>
      <link href="/2019/06/12/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
      <url>/2019/06/12/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><a href="http://javascript.ruanyifeng.com/library/sorting.html">阮一峰老师算法讲解</a></p><h2 id="😐排序算法说明："><a href="#😐排序算法说明：" class="headerlink" title="😐排序算法说明："></a>😐排序算法说明：</h2><p><strong>（1）对于评述算法优劣术语的说明</strong></p><ul><li><strong>稳定</strong>：如果a原本在b前面，而a=b，排序之后a仍然在b的前面；</li><li><strong>不稳定</strong>：如果a原本在b的前面，而a=b，排序之后a可能会出现在b的后面；</li><li><strong>内排序</strong>：所有排序操作都在内存中完成；</li><li><strong>外排序</strong>：由于数据太大，因此把数据放在磁盘中，而排序通过磁盘和内存的数据传输才能进行；</li><li><strong>时间复杂度</strong>: 一个算法执行所耗费的时间。</li><li><strong>空间复杂度</strong>: 运行完一个程序所需内存的大小</li></ul><p><a href="https://imgchr.com/i/V2fd9U"><img src="https://s2.ax1x.com/2019/06/12/V2fd9U.png" alt="算法概述"></a></p><span id="more"></span><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ArrayList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> array = [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">insert</span> = <span class="keyword">function</span> (<span class="params">item</span>) &#123;         <span class="comment">//向数据结构添加元素</span></span><br><span class="line">        array.<span class="title function_">push</span>(item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">toString</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;           <span class="comment">//返回字符串结果</span></span><br><span class="line">        <span class="keyword">return</span> array.<span class="title function_">join</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> swap = <span class="keyword">function</span> (<span class="params">array, index1, index2</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> aux = array[index1];                   <span class="comment">//中间值保留被换的位置 j </span></span><br><span class="line">        array[index1] = array[index2];</span><br><span class="line">        array[index2] = aux;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 冒泡排序</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bubbleSort</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> length = array.<span class="property">length</span>;                  <span class="comment">//保存数组长度</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;          <span class="comment">//外循环从数组第一位迭代到最后一位 控制数组排序轮数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; length - <span class="number">1</span>; j++) &#123;      <span class="comment">//内循环从第一位迭代至倒数第二位 </span></span><br><span class="line">                <span class="keyword">if</span> (array[j] &gt; array[j + <span class="number">1</span>]) &#123;          <span class="comment">//内循环实际上进行当前项和下一项比较</span></span><br><span class="line">                    <span class="title function_">swap</span>(array, j, j + <span class="number">1</span>);              <span class="comment">//两项顺序不对则交换他们，位置为 j+1 的值将会被换置到位置 j 处反之如此。</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 冒泡排序 改进</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">modifiedBubbleSort</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> length = array.<span class="property">length</span>;                  <span class="comment">//保存数组长度</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;          <span class="comment">//外循环从数组第一位迭代到最后一位 控制数组排序轮数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j&lt;length-<span class="number">1</span>-i; j++) &#123;      <span class="comment">//内循环 - 外循环 次数 避免内循环不必要比较</span></span><br><span class="line">                <span class="keyword">if</span> (array[j] &gt; array[j + <span class="number">1</span>]) &#123;          <span class="comment">//内循环实际上进行当前项和下一项比较</span></span><br><span class="line">                    <span class="title function_">swap</span>(array,j,j+<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 选择排序 </span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">selectionSort</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> length = array.<span class="property">length</span>,      <span class="comment">//数组长度和声明最小值</span></span><br><span class="line">        indexMin;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; length -<span class="number">1</span>;i++)&#123;   <span class="comment">//</span></span><br><span class="line">            indexMin = i;</span><br><span class="line">            <span class="comment">// console.log(&quot;i&quot;+i) 0 1 2 3</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j = i;j &lt; length;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(array[indexMin] &gt; array[j])&#123;</span><br><span class="line">                    indexMin = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>( i != indexMin)&#123;</span><br><span class="line">                <span class="title function_">swap</span>(array,i,indexMin);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 选择排序 简便</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">modifiedSelectionSort</span>= <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> length = array.<span class="property">length</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>;i &lt; length;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j = i;j &gt; <span class="number">0</span> &amp;&amp; array[j] &lt; array[j-<span class="number">1</span>];j--)&#123;</span><br><span class="line">                <span class="title function_">swap</span>(array,j,j-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createNonSortedArray</span>(<span class="params">size</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> array = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = size; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        array.<span class="title function_">insert</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> array = <span class="title function_">createNonSortedArray</span>(<span class="number">5</span>);</span><br><span class="line"><span class="comment">// console.log(array.toString()); </span></span><br><span class="line"><span class="comment">// array.bubbleSort();              //冒泡排序</span></span><br><span class="line"><span class="comment">// array.modifiedBubbleSort();     //冒泡排序 改进</span></span><br><span class="line"><span class="comment">// array.selectionSort();             //选择排序</span></span><br><span class="line">array.<span class="title function_">modifiedSelectionSort</span>();      <span class="comment">//选择排序 改进</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array.<span class="title function_">toString</span>());</span><br></pre></td></tr></table></figure><h2 id="利用ES6-Set去重"><a href="#利用ES6-Set去重" class="headerlink" title="利用ES6 Set去重"></a>利用ES6 Set去重</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>)&#123;            </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;arr.<span class="property">length</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j=i+<span class="number">1</span>; j&lt;arr.<span class="property">length</span>; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i]==arr[j])&#123;         <span class="comment">//第一个等同于第二个，splice方法删除第二个</span></span><br><span class="line">                    arr.<span class="title function_">splice</span>(j,<span class="number">1</span>);</span><br><span class="line">                    j--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line">    <span class="comment">//[1, &quot;true&quot;, 15, false, undefined, NaN, NaN, &quot;NaN&quot;, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]     //NaN和&#123;&#125;没有去重，两个null直接消失了</span></span><br></pre></td></tr></table></figure><!-- more --><p><code>不考虑兼容性，这种去重的方法代码最少。这种方法还无法去掉“&#123;&#125;”空对象，后面的高阶方法会添加去掉重复“&#123;&#125;”的方法。</code></p><h2 id="利用for嵌套for，然后splice去重"><a href="#利用for嵌套for，然后splice去重" class="headerlink" title="利用for嵌套for，然后splice去重"></a>利用for嵌套for，然后splice去重</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>)&#123;            </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;arr.<span class="property">length</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j=i+<span class="number">1</span>; j&lt;arr.<span class="property">length</span>; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i]==arr[j])&#123;         <span class="comment">//第一个等同于第二个，splice方法删除第二个</span></span><br><span class="line">                    arr.<span class="title function_">splice</span>(j,<span class="number">1</span>);</span><br><span class="line">                    j--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line">    <span class="comment">//[1, &quot;true&quot;, 15, false, undefined, NaN, NaN, &quot;NaN&quot;, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]     //NaN和&#123;&#125;没有去重，两个null直接消失了</span></span><br></pre></td></tr></table></figure><p><code>双层循环，外层循环元素，内层循环时比较值。值相同时，则删去这个值。</code></p><h2 id="利用indexOf去重"><a href="#利用indexOf去重" class="headerlink" title="利用indexOf去重"></a>利用indexOf去重</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> array = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array .<span class="title function_">indexOf</span>(arr[i]) === -<span class="number">1</span>) &#123;</span><br><span class="line">            array .<span class="title function_">push</span>(arr[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line">   <span class="comment">// [1, &quot;true&quot;, true, 15, false, undefined, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]  //NaN、&#123;&#125;没有去重</span></span><br></pre></td></tr></table></figure><p><code>新建一个空的结果数组，for 循环原数组，判断结果数组是否存在当前元素，如果有相同的值则跳过，不相同则push进数组。</code></p><h2 id="利用sort"><a href="#利用sort" class="headerlink" title="利用sort()"></a>利用sort()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    arr = arr.<span class="title function_">sort</span>()</span><br><span class="line">    <span class="keyword">var</span> arrry= [arr[<span class="number">0</span>]];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] !== arr[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            arrry.<span class="title function_">push</span>(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arrry;</span><br><span class="line">&#125;</span><br><span class="line">     <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">// [0, 1, 15, &quot;NaN&quot;, NaN, NaN, &#123;…&#125;, &#123;…&#125;, &quot;a&quot;, false, null, true, &quot;true&quot;, undefined]      //NaN、&#123;&#125;没有去重</span></span><br></pre></td></tr></table></figure><p><code>利用sort()排序方法，然后根据排序后的结果进行遍历及相邻元素比对。</code></p><h2 id="利用对象的属性不能相同的特点进行去重"><a href="#利用对象的属性不能相同的特点进行去重" class="headerlink" title="利用对象的属性不能相同的特点进行去重"></a>利用对象的属性不能相同的特点进行去重</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> arrry= [];</span><br><span class="line">     <span class="keyword">var</span>  obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!obj[arr[i]]) &#123;</span><br><span class="line">            arrry.<span class="title function_">push</span>(arr[i])</span><br><span class="line">            obj[arr[i]] = <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            obj[arr[i]]++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arrry;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;true&quot;, 15, false, undefined, null, NaN, 0, &quot;a&quot;, &#123;…&#125;]    //两个true直接去掉了，NaN和&#123;&#125;去重</span></span><br></pre></td></tr></table></figure><h2 id="利用includes"><a href="#利用includes" class="headerlink" title="利用includes"></a>利用includes</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type error!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> array =[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>( !array.<span class="title function_">includes</span>( arr[i]) ) &#123;<span class="comment">//includes 检测数组是否有某个值</span></span><br><span class="line">                    array.<span class="title function_">push</span>(arr[i]);</span><br><span class="line">              &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line">    <span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]     //&#123;&#125;没有去重</span></span><br></pre></td></tr></table></figure><h2 id="利用hasOwnProperty"><a href="#利用hasOwnProperty" class="headerlink" title="利用hasOwnProperty"></a>利用hasOwnProperty</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">item, index, arr</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> obj.<span class="title function_">hasOwnProperty</span>(<span class="keyword">typeof</span> item + item) ? <span class="literal">false</span> : (obj[<span class="keyword">typeof</span> item + item] = <span class="literal">true</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;]   //所有的都去重了</span></span><br></pre></td></tr></table></figure><p><code>利用hasOwnProperty 判断是否存在对象属性</code></p><h2 id="利用filter"><a href="#利用filter" class="headerlink" title="利用filter"></a>利用filter</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">item, index, arr</span>) &#123;</span><br><span class="line">    <span class="comment">//当前元素，在原始数组中的第一个索引==当前索引值，否则返回当前元素</span></span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">indexOf</span>(item, <span class="number">0</span>) === index;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;true&quot;, true, 15, false, undefined, null, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]</span></span><br></pre></td></tr></table></figure><h2 id="利用递归去重"><a href="#利用递归去重" class="headerlink" title="利用递归去重"></a>利用递归去重</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> array= arr;</span><br><span class="line">        <span class="keyword">var</span> len = array.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">    array.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;   <span class="comment">//排序后更加方便去重</span></span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params">index</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(index &gt;= <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(array[index] === array[index-<span class="number">1</span>])&#123;</span><br><span class="line">                array.<span class="title function_">splice</span>(index,<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">loop</span>(index - <span class="number">1</span>);    <span class="comment">//递归loop，然后数组去重</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">loop</span>(len-<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;a&quot;, &quot;true&quot;, true, 15, false, 1, &#123;…&#125;, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, undefined]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="利用Map数据结构去重"><a href="#利用Map数据结构去重" class="headerlink" title="利用Map数据结构去重"></a>利用Map数据结构去重</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">arrayNonRepeatfy</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">  <span class="keyword">let</span> array = <span class="keyword">new</span> <span class="title class_">Array</span>();  <span class="comment">// 数组用于返回结果</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(map .<span class="title function_">has</span>(arr[i])) &#123;  <span class="comment">// 如果有该key值</span></span><br><span class="line">      map .<span class="title function_">set</span>(arr[i], <span class="literal">true</span>); </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">      map .<span class="title function_">set</span>(arr[i], <span class="literal">false</span>);   <span class="comment">// 如果没有该key值</span></span><br><span class="line">      array .<span class="title function_">push</span>(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">return</span> array ;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr))</span><br><span class="line"><span class="comment">//[1, &quot;a&quot;, &quot;true&quot;, true, 15, false, 1, &#123;…&#125;, null, NaN, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, undefined]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>创建一个空Map数据结构，遍历需要去重的数组，把数组的每一个元素作为key存到Map中。由于Map中不会出现相同的key值，所以最终得到的就是去重后的结果。</code></p><h2 id="利用reduce-includes"><a href="#利用reduce-includes" class="headerlink" title="利用reduce+includes"></a>利用reduce+includes</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev,cur</span>) =&gt;</span> prev.<span class="title function_">includes</span>(cur) ? prev : [...prev,cur],[]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;true&#x27;</span>,<span class="string">&#x27;true&#x27;</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>, <span class="literal">null</span>,<span class="literal">null</span>, <span class="title class_">NaN</span>, <span class="title class_">NaN</span>,<span class="string">&#x27;NaN&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unique</span>(arr));</span><br><span class="line"><span class="comment">// [1, &quot;true&quot;, true, 15, false, undefined, null, NaN, &quot;NaN&quot;, 0, &quot;a&quot;, &#123;…&#125;, &#123;…&#125;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="…new-Set-arr"><a href="#…new-Set-arr" class="headerlink" title="[…new Set(arr)]"></a>[…new Set(arr)]</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)] </span><br><span class="line"><span class="comment">//代码就是这么少----（其实，严格来说并不算是一种，相对于第一种方法来说只是简化了代码）</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 排序算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git</title>
      <link href="/2019/06/11/Git/"/>
      <url>/2019/06/11/Git/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><a href="https://imgchr.com/i/V2iRzD"><img src="https://s2.ax1x.com/2019/06/11/V2iRzD.png" alt="Git流程图"></a></p><span id="more"></span><p><a href="https://git-scm.com/">官方链接</a></p><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600">廖老师Git教程</a></p><p><a href="https://blog.csdn.net/BaQiShiGuang/article/details/78125295">git远程操作详解</a></p><p><a href="https://www.jianshu.com/p/947eaa90d6cf">GitHub上与GitLab的区别以及GitLab的搭建与使用</a></p><h2 id="🤓版本控制工具应该具备的功能"><a href="#🤓版本控制工具应该具备的功能" class="headerlink" title="🤓版本控制工具应该具备的功能"></a>🤓版本控制工具应该具备的功能</h2><ul><li><strong>协同修改</strong><ul><li>多人并行不悖的修改服务器端的同一个文件。</li></ul></li><li><strong>数据备份</strong><ul><li>不仅保存目录和文件的当前状态，还能够保存每一个提交过的历史状态。</li></ul></li><li><strong>版本管理</strong><ul><li>在保存每一个版本的文件的当前状态，还能够保存每一个提交过的历史状态。</li></ul></li><li><strong>权限控制</strong><ul><li>对团队中参与开发的人员进行权限控制。</li><li>对团队外开发者贡献的代码进行审核—git独有</li></ul></li><li><strong>历史记录</strong><ul><li>查看修改人、修改时间、修改内容、日志信息。</li><li>将本地文件恢复到某一个历史状态。</li></ul></li><li><strong>分支管理</strong><ul><li>允许开发团队在工作过程中多条生产线同时推进任务，进一步提高效率。</li></ul></li></ul><h2 id="😕版本控制简介"><a href="#😕版本控制简介" class="headerlink" title="😕版本控制简介"></a>😕版本控制简介</h2><ul><li><strong>版本控制</strong><ul><li>工程设计领域中使用版本控制管理工程蓝图的设计过程。在 IT 开发过程中也可以使用版本控制思想管理代码的版本迭代。</li></ul></li><li><strong>版本控制工具</strong><ul><li>集中式版本控制工具：CVS、SVN、VSS……</li><li>分布式版本控制工具：Git、Mercurial、Bazaar、Darcs……</li></ul></li></ul><h2 id="😟Linux基础命令"><a href="#😟Linux基础命令" class="headerlink" title="😟Linux基础命令"></a>😟Linux基础命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">git config --global color.ui true 设置 git bashhere 颜色作为区别</span><br><span class="line">mkdir ** 创建目录</span><br><span class="line">cd **/ 切换到某个目录</span><br><span class="line">pwd  用于显示当前文件夹中有什么</span><br><span class="line">git init 初始化 初始化本地库</span><br><span class="line">ll 查看目录里有什么 **注意：**不能显示隐藏文件</span><br><span class="line">ll -lA查看所有文件包括隐藏文件（.git默认是隐藏文件）</span><br><span class="line">ll.git/查看隐藏文件夹中有什么</span><br><span class="line">cat  ** 查看文件内容</span><br><span class="line">vim  ** 使用vim编辑器编辑</span><br><span class="line">1.i进入编辑模式</span><br><span class="line">2.或:set nu进入编辑</span><br><span class="line">2.esc键:wq保存退出</span><br><span class="line">一般跟短命令选项（通常是单字母，也有一些命令是例外的），-- 后一般跟长命令选项。如果只有一个单独的--，</span><br><span class="line">后面不紧跟任何选项，则表示命令选项结束，后续的都作为命令的参数而不是选项。</span><br><span class="line">例如：</span><br><span class="line">git checkout -- filename</span><br><span class="line">filename作为git checkout 的参数，而不是选项。</span><br></pre></td></tr></table></figure><h2 id="🤨明确一些概念"><a href="#🤨明确一些概念" class="headerlink" title="🤨明确一些概念"></a>🤨明确一些概念</h2><ul><li>git版本管理工具中四个区域概念：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(1)Workspace：工作区</span><br><span class="line">(2)Stage：暂存区</span><br><span class="line">(3)Repository：仓库区（或本地仓库）</span><br><span class="line">(4)Remote：远程仓库</span><br><span class="line">其中工作区和暂存区在各个不同的分支中是共享的（方便理解stash操作）</span><br><span class="line">-）git中一些</span><br><span class="line"> HEAD   表示当前版本，上一个版本就是HEAD^(可以写为HEAD~1)，上上一个版本就是HEAD^^^^^(可以写为HEAD~5),</span><br><span class="line">-) git中文件状态</span><br><span class="line"> untracked：新建的文件，没有git add [filename] 的都属于未被git追踪到文件</span><br><span class="line"> 未加入到暂存区的文件: 指的是已经被追踪（tracked）过，但是没有加入到暂存区(已经执行过git add的但是这次修改后还没有git add)</span><br><span class="line">-）远程库</span><br><span class="line"> origin : git给远程库起的默认名称是origin</span><br></pre></td></tr></table></figure><h2 id="🤔Git-基础操作"><a href="#🤔Git-基础操作" class="headerlink" title="🤔Git 基础操作"></a>🤔<strong>Git</strong> <strong>基础操作</strong></h2><h3 id="本地库初始化"><a href="#本地库初始化" class="headerlink" title="本地库初始化"></a>本地库初始化</h3><ul><li><p>命令：git init</p><p><img src="https://s2.ax1x.com/2019/05/28/VeIHKJ.png" alt="VeIHKJ.png"></p></li><li><p>注意：.git目录中存放的是本地库相关的子目录和文件，不要<strong>删除</strong>，也不要胡乱<strong>修改</strong>。</p></li></ul><h3 id="设置签名"><a href="#设置签名" class="headerlink" title="设置签名"></a>设置签名</h3><ul><li><p>形式</p><ul><li>用户名：tom</li><li>email地址：<a href="mailto:&#77;&#x69;&#x61;&#x6f;&#x31;&#x32;&#x33;&#x40;&#113;&#x71;&#46;&#x63;&#111;&#109;">&#77;&#x69;&#x61;&#x6f;&#x31;&#x32;&#x33;&#x40;&#113;&#x71;&#46;&#x63;&#111;&#109;</a></li></ul></li><li><p>作用：区别不同开发人员的身份</p></li><li><p>辨析：这里设置的签名和登录远程库（代码托管中心）的账号、密码没有任何关系。</p></li><li><p>命令（就近原则）</p><ul><li><p>项目级别/仓库级别：仅在当前本地库范围有效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name tom_pro</span><br><span class="line">git config user.email Miao123@qq.com</span><br></pre></td></tr></table></figure><ul><li><p>信息保存位置：./git/config文件</p><p><img src="https://s2.ax1x.com/2019/05/28/VmphIU.png" alt="VmphIU.png"></p></li></ul></li><li><p>系统用户级别：登录当前操作系统的用户范围</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name tom_global</span><br><span class="line">git config --global user.email Miao123@qq.com</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/05/28/Vm98oT.png" alt="Vm98oT.png"></p></li><li><p>级别优先级</p><ul><li>就近原则：项目级别优先于系统用户级别，二者都有时采用项目级别的签名</li><li>如果只有系统用户级别的签名，就以系统用户级别为准。</li><li>二者都没有不允许</li></ul></li></ul></li></ul><h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><ul><li><p>状态查看操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line">查看工作区、暂存区状态</span><br></pre></td></tr></table></figure></li><li><p>添加操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add [file name]</span><br><span class="line">将工作区的“新建/修改”添加到暂存区</span><br></pre></td></tr></table></figure></li><li><p>提交操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;commit message&quot; [file name]</span><br><span class="line">将暂存区的内容提交到本地库</span><br></pre></td></tr></table></figure></li><li><p>查看历史记录操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br><span class="line">-多屏显示控制方式：空格向下翻页、b向上翻页、q 退出</span><br><span class="line">- 如果嫌输出信息太多，可以试着添加 pretty=oneline 或者 --oneline </span><br><span class="line">- 只显示提交信息的第一行 git log --pretty=short</span><br><span class="line">- 只显示指定目录、文件的日志    git log **.**文件名</span><br><span class="line">- 只显示文件的改动   git log -p</span><br><span class="line">- 显示指定文件详细改动信息     git log -p **.**</span><br><span class="line"></span><br><span class="line">git log --graph以图表形式查看分支</span><br><span class="line"></span><br><span class="line">git reflog</span><br><span class="line">- HEAD@&#123;移动到当前版本需要多少步&#125;</span><br><span class="line">- git log只能查看以当前时间状态为终点的历史日志。</span><br><span class="line">- reflog查看当前仓库所有历史操作，在日志中可以看到，commit/checkout/reset/merge等git命令的执行记录（哈希值）,只要不进行GC（垃圾回收），都可以查到</span><br><span class="line">- 例：git reset --hadr 83b5s0</span><br></pre></td></tr></table></figure></li><li><p>前进后退</p><ul><li><p>基于索引值操作[推荐]</p><ul><li>```<ul><li>git reset –hard [局部索引值]</li><li>git reset –hard a6ace91<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 使用^符号：只能后退</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    - git reset --hard HEAD^</span><br><span class="line">    - 注：一个^表示后退一步，n 个表示后退 n 步</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>使用~符号：只能后退</p><ul><li>```<ul><li>git reset –hard HEAD~n</li><li>注：表示后退 n 步<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- reset 命令的三个参数对比</span><br><span class="line"></span><br><span class="line">  - --soft 参数</span><br><span class="line">    - 仅仅在本地库移动 HEAD 指针</span><br><span class="line">  - --mixed 参数</span><br><span class="line">    - 在本地库移动 HEAD 指针</span><br><span class="line">    - 重置暂存区</span><br><span class="line">  - --hard 参数</span><br><span class="line">    - 在本地库移动 HEAD 指针</span><br><span class="line">    - 重置暂存区</span><br><span class="line">    - 重置工作区</span><br><span class="line"></span><br><span class="line">- 删除文件并找回</span><br><span class="line"></span><br><span class="line">  - 前提：删除前，文件存在时的状态提交到了本地库。</span><br><span class="line">  - 操作：git reset --hard [指针位置]</span><br><span class="line">    - 删除操作已经提交到本地库：指针位置指向历史记录</span><br><span class="line">    - 删除操作尚未提交到本地库：指针位置使用 HEAD^或HEAD~</span><br><span class="line"></span><br><span class="line">- 比较文件差异</span><br><span class="line"></span><br><span class="line">  - git diff [文件名]</span><br><span class="line">    - 将工作区中的文件和暂存区进行比较</span><br><span class="line">  - git diff [HEAD || 本地库中历史版本] [文件名]</span><br><span class="line">    - 将工作区中的文件和本地库历史记录比较</span><br><span class="line">  - 不带文件名比较多个文件</span><br><span class="line"></span><br><span class="line">- 命令帮助</span><br><span class="line"></span><br><span class="line">### 分支管理</span><br><span class="line"></span><br><span class="line">- **什么是分支？**</span><br><span class="line"></span><br><span class="line">  - 在版本控制过程中，使用多条线同时推进多个任务。</span><br><span class="line"></span><br><span class="line">    [![VnTo7j.md.png](https://s2.ax1x.com/2019/05/29/VnTo7j.md.png)](https://imgchr.com/i/VnTo7j)</span><br><span class="line"></span><br><span class="line">- **分支的好处？**</span><br><span class="line"></span><br><span class="line">  - 同时并行推进多个功能开发，提高开发效率</span><br><span class="line">  - 各个分支在开发过程中，如果某一个分支开发失败，不会对其他分支有任何影响。失败的分支删除重新开始即可。</span><br><span class="line"></span><br><span class="line">- **分支操作**</span><br><span class="line"></span><br><span class="line">  - 创建分支</span><br><span class="line"></span><br><span class="line">    - git branch [分支名]</span><br><span class="line"></span><br><span class="line">  - 查看分支</span><br><span class="line"></span><br><span class="line">    - git branch -v</span><br><span class="line"></span><br><span class="line">  - 切换分支</span><br><span class="line"></span><br><span class="line">    - git checkout [分支名]</span><br><span class="line"></span><br><span class="line">  - 合并分支</span><br><span class="line"></span><br><span class="line">    - 第一步：切换到接受修改的分支（被合并，增加新内容）上 git checkout [被合并分支名]</span><br><span class="line"></span><br><span class="line">    - 第二步：执行 merge 命令 git merge [有新内容分支名]</span><br><span class="line"></span><br><span class="line">    - 解决冲突</span><br><span class="line"></span><br><span class="line">      - 冲突的表现</span><br><span class="line"></span><br><span class="line">        [![VnqvGR.png](https://s2.ax1x.com/2019/05/29/VnqvGR.png)](https://imgchr.com/i/VnqvGR)</span><br><span class="line"></span><br><span class="line">      - 冲突的解决</span><br><span class="line"></span><br><span class="line">        - 第一步：编辑文件，删除特殊符号</span><br><span class="line">        - 第二步：把文件修改到满意的程度，保存退出</span><br><span class="line">        - 第三步：git add [文件名]</span><br><span class="line">        - 第四步：git commit -m &quot;日志信息&quot;</span><br><span class="line">          - **注意：此时 commit 一定不能带具体文件名**</span><br><span class="line"></span><br><span class="line">## 😑基本流程</span><br><span class="line"></span><br><span class="line">- - 创建新仓库</span><br><span class="line">  - 创建仓库文件夹, 并进入文件夹</span><br><span class="line">  - git init : 创建新的git仓库(会生成.git文件夹)</span><br><span class="line">- 克隆远程仓库</span><br><span class="line">  - git clone 远程仓库的地址(git@github.com:baihaojie/0728.git)【注意是 ssh 的地址】</span><br><span class="line">- 工作流</span><br><span class="line">  - 你的本地仓库由 git 维护的三棵“树”组成</span><br><span class="line">  - 第1个: 工作区(working dir) 你的工作目录</span><br><span class="line">  - 第2个: 暂存区（Index/Stage）它像个缓存区域，临时保存你的改动</span><br><span class="line">  - 第3个: 版本区(HEAD), 它指向你最后一次提交的结果</span><br><span class="line">- 添加和提交</span><br><span class="line">  - 将工作区的新增/修改提交到暂存区: git add &lt;filename&gt;/*</span><br><span class="line">  - 将暂存区的更新提交到版本区(HEAD) : git commit -m &quot;代码提交信息&quot;</span><br><span class="line">    - 查看状态: git status</span><br><span class="line">- 推送改动</span><br><span class="line">  - 如果不是克隆的仓库, 第一次需要先关联上远程仓库: git remote add origin url(远程仓库的地址)</span><br><span class="line">  - 推送之前先同步代码，将远程最新版本拉到本地: git pull origin master</span><br><span class="line">  - 将本地版本区的更新推送到远程仓库 : git push origin master</span><br><span class="line">    - 提示输入username</span><br><span class="line">    - 提示输入password</span><br><span class="line">- 分支git</span><br><span class="line">  - 查看所有分支: git branch</span><br><span class="line">  - 创建一个叫做“feature_x”的分支，并切换过去 : git checkout -b feature_x</span><br><span class="line">  - 创建新文件(x.txt),并添加提交: git add * ---&gt;git commit -m &quot;new x file&quot;</span><br><span class="line">  - 切换回主分支 : git checkout master</span><br><span class="line">  - 推送到远程仓库: git push origin feature_x</span><br><span class="line">  - 删掉新建的分支 : git branch -D feature_x</span><br><span class="line">- 更新与合并</span><br><span class="line">  - 将远程最新版本拉到本地: git pull origin master</span><br><span class="line">  - 比较2个分支版本的区别: git diff &lt;source_branch&gt; &lt;target_branch&gt;</span><br><span class="line">  - 合并分支: git merge &lt;branch&gt;</span><br><span class="line">  - 在更新或合并时可能会出现冲突, 解决冲突</span><br><span class="line">    - 打开文件修改文件内容</span><br><span class="line">    - git add *</span><br><span class="line">    - git commit -m &quot;resolve conflict&quot;</span><br><span class="line">- 标签(备份重要版本)</span><br><span class="line">  - 查看提交日志 : git log (按Q退出)</span><br><span class="line">  - 记录每一次命令: git reflog </span><br><span class="line">  - 给重要版本创建标签: git tag 1.0.0 1b2e1d63ff(某个提交ID)</span><br><span class="line">  - 将工作区切换到标签版本: git checkout 1.0.0</span><br><span class="line">- 替换本地改动</span><br><span class="line">  - 回到未来： git reset --hard 1b2e1d63ff(某个提交ID)</span><br><span class="line">  - 使用HEAD中的最新内容替换掉你的工作目录中的文件 : git checkout -- &lt;filename&gt;</span><br><span class="line">  - 取得远程的代码，但是不合并： git fetch origin master</span><br><span class="line">  - 丢弃你在本地的所有改动与提交 :  git fetch origin --&gt; </span><br><span class="line">      git reset --hard origin/master</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- git fetch 与 git pull 的比较</span><br><span class="line">  - pull = fetch + merge</span><br><span class="line"></span><br><span class="line">## 🤤Git命令大全</span><br><span class="line"></span><br><span class="line">- git init</span><br><span class="line"></span><br><span class="line">  git init 初始化git仓库</span><br><span class="line"></span><br></pre></td></tr></table></figure>git init [program-name] 新建一个目录，将其初始化为Git代码库<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git clone（默认 ： clone下来的版本只能看到master分支， 如果，想要在dev分支上开发，就必须创建远程</span><br><span class="line">  origin的dev分支到本地）</span><br><span class="line"></span><br></pre></td></tr></table></figure>git clone <a href="mailto:&#103;&#105;&#x74;&#x40;&#x67;&#105;&#116;&#104;&#117;&#98;&#46;&#x63;&#111;&#x6d;">&#103;&#105;&#x74;&#x40;&#x67;&#105;&#116;&#104;&#117;&#98;&#46;&#x63;&#111;&#x6d;</a>:yanqiangsjz/website.git 将远程仓库克隆到本地开发（多人协作开发）<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  git checkout -b [branch] [remote]/[branch] （创建远程[remote]的[branch]分支到本地。  一般远程仓库和本地仓库分支命名一样）</span><br><span class="line"></span><br><span class="line">- git config （--global参数是全局参数，也就是这些命令在这台电脑的所有Git仓库下都有用。  如果不加，那只针对当前的仓库起作用。）</span><br><span class="line"></span><br><span class="line">  git config --list 显示当前的Git配置</span><br><span class="line"></span><br></pre></td></tr></table></figure>git config user.name 查看用户名</li></ul></li></ul></li></ul><p>git config user.email  </p><p>git config –global user.name [username] 设置全局用户名</p><p>git config –global user.email [email]</p><p>git config –global color.ui true 配置Git显示颜色</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git add </span><br><span class="line"></span><br><span class="line">  git add [filename]  添加指定文件到暂存区(表示添加新文件和编辑过的文件不包括删除的文件)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git add [dir]  添加指定目录到暂存区，包括子目录    </p><p>git add .  添加当前目录的所有文件到暂存区(表示添加新文件和编辑过的文件不包括删除的文件)</p><p>git add -u  表示添加编辑或者删除的文件，不包括新添加的文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git rm filename  </span><br><span class="line"></span><br><span class="line">  git rm [filename] 删除工作区文件并放进暂存区</span><br><span class="line">  如果想从暂存区撤销：git reset HEAD -- [filename]</span><br><span class="line">  如果想撤销工作区的修改：git checkout -- [filename]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>注意区别 : rm [filename]  删除工作区文件, 并没有放进暂存区<br>如果想撤销工作区的修改：git checkout – [filename]</p><p>git rm –cached [filename]    停止追踪文件，但该文件会保留在工作区(untracked状态)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git diff</span><br><span class="line"></span><br><span class="line">  git diff [filename] 比较的是工作区文件与暂存区文件的差异</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git diff –cached [filenam] 比较的是暂存区的文件与上一个commit的差异</p><p>git diff HEAD – [filename] 比较的是工作区与当前分支最新commit之间的差异</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git status</span><br><span class="line"></span><br><span class="line">  git status 查看文件状态; 还可以在分支合并冲突的时候提示哪个文件冲突</span><br><span class="line"></span><br><span class="line">- git commit</span><br><span class="line"></span><br><span class="line">  git commit -m [message]  暂存区提交到仓库区</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git commit [filename1] [filename2] … -m [message]  暂存区的指定文件提交到仓库区</p><p>git commit -a -m [message]  工作区中修改后，还未使用git add . 命令添加到暂存区中的文件也一并提交上去<br>相当于git add . 与git commit –m [message] 两句操作合并为一句进行使用。commit完成过后，git status,<br>下方的工作区是干净的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git log</span><br><span class="line"></span><br><span class="line">  git log 查看当前分支的版本历史</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git log –stat 查看commit历史，以及每次commit发生变更的文件</p><p>git log –pretty=oneline 查看从最近到最远的提交日志简单日志（–pretty=oneline：单行模式）</p><p>git log -1 查看最近一次的提交信息</p><p>git log -n 查看最近n次的提交信息</p><p>git log –graph  查看分支合并图</p><p>git log –graph –pretty=oneline  查看分支合并图；简单日志</p><p>git reflog 查看命令历史，以便确定要回到未来的哪个版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git blame</span><br><span class="line"></span><br><span class="line">  git blame [filename]  查看指定文件是什么人在什么时间修改过</span><br><span class="line"></span><br><span class="line">- git shortlog</span><br><span class="line"></span><br><span class="line">  git shortlog -sn 查看所有提交过的用户，按提交次数排序</span><br><span class="line"></span><br><span class="line">- git show</span><br><span class="line">  git show [commit] 显示某次提交时，文件变化</span><br><span class="line"></span><br><span class="line">  git show [commit]:[filename]  显示某次提交时，某个文件的内容(注意[commit]:[filename]冒号之间没有空格)</span><br><span class="line"></span><br><span class="line">- git checkout (1)</span><br><span class="line"></span><br><span class="line">  git checkout -- [filename]  工作区filename的修改撤销</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git checkout . 撤销工作区的全部修改<br>解释 ：一种是文件修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；<br>一种是文件已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。<br>总之，就是让这个文件回到最近一次git commit或git add时的状态。    </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git checkout (2)</span><br><span class="line"></span><br><span class="line">  git checkout [branch] 切换分支</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git checkout -b [branch] 创建并切换到该分支(如果在切换分支的时候，未commit, 有可能会报错)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git checkout (3) </span><br><span class="line"></span><br><span class="line">  git checkout -b [branch] [remote]/[branch]</span><br><span class="line">  说明：</span><br><span class="line">   多人协作时，如果同事从远程库clone时，默认情况下，你的同事只能看到本地的master分支。如果，你的同事要在（[branch]）分支上开发，</span><br><span class="line">  就必须创建远程([remote])的([branch])到本地</span><br><span class="line"></span><br><span class="line">- git reset (1)</span><br><span class="line"></span><br><span class="line">  git reset [filename] 重置暂存区的指定文件，与上一次commit保持一致，工作区不变</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git reset –hard  重置暂存区与工作区，与上一次commit保持一致</p><p>git reset –hard HEAD~2  回退到某个版本(这里是从当前版本回退两个版本)</p><p>git reset –hard commitID 回退到某个版本（commitID是版本号）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git reset (2)</span><br><span class="line"></span><br><span class="line">  git reset HEAD -- [filename] 把暂存区的修改撤销（unstage），重新放回工作区</span><br><span class="line"></span><br><span class="line">- git branch 分支名称</span><br><span class="line"></span><br><span class="line">  git branch [branch] 创建分支  </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git branch 列出所有本地分支</p><p>git branch -a 列出所有本地分支和远程分支</p><p>git branch -r 列出所有远程分支</p><p>git branch -d [branch] 删除分支</p><p>git branch -D [branch]  强制删除一个还没有合并（已经commit）的分支</p><p>说明：<br>1、如果一个分支在开发完成以后（分支已经commit）待合并，如果出于某种原因这个分支废弃了，但是这个分支必须删除。git branch -D [branch]<br>2、如果一个分支还没有commit， 是可以使用 git branch -d [branch]</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git merge (merge之前必须都先commit，即工作区和暂存区使用git status 应该是干净的工作区域，即是已经是最新的commit)</span><br><span class="line"></span><br><span class="line">  git merge [branch] 合并指定分支([branch])到当前分支</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git merge –no-ff -m [message] [branch] 合并指定分支([branch])到当前分支,禁用Fast forward模式</p><p>解释 : 禁用Fast forward模式,Git就会在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息。</p><p>必要 : 如果merge出现冲突， 则解决冲突以后必须：1、git add 2、git commit。</p><p>建议 :<br>(1 解决完成冲突以后，最好直接将分支删除，如果需要，再新建一条分支。原因是在解决冲突了以后，如果还切换回之前的分支继续开发，<br>分支还是冲突发生前的内容（解决冲突只解决的主分支master的（而且冲突解决不是全部按照分支内容解决的）所以再次提交会报错。<br>(2 如果合并冲突完全放弃原来主分支的冲突采用dev分支的内容，则合并后主分支的内容和现存在dev分支是一样的内容，不删除原来的分<br>支继续在上面开发也是可以的</p><p>冲突判定机制 : 先寻找两个commit的公共祖先，比较同一个文件分别在ours和theirs下对于公共祖先的差异，然后合并这两组差异如果<br>双方同时修改了一处地方且修改内容不同，就判定为合并冲突，依次输出双方修改的内容</p><p>分支策略 : 首先，master分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；那在哪干活呢？干活都在dev分支上,<br>也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本；每个人<br>都在dev分支上干活，每个人都有自己的分支，时不时地往dev分支上合并就可以了。</p><p>补充建议 : 如果在dev分支上正在开发一个功能，但是这是master上需要解决一个bug，这时需要切换回master在开发出一个bug分支  来解决<br>这个bug，但是在dev分支上功能还没有开发完，不能commit。这时解决办法是：第一步、将dev分支上的工作现场  ‘封存’起来(git stash)<br>第二步、 切换到主分支，新建主分支的bug分支，将bug修改完然后切换回主分支将bug分支合并。 第三部、 切换回dev分支，将bug分支同时<br>合并到dev分支（原因是 ： 避免是如果bug分支上修改的东西太多，在最后  dev开发完成以后，master合并dev分支的时候出现大面积的冲突）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git stash</span><br><span class="line">  git stash list 查看使用储藏起来的工作现场</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git stash apply 恢复工作现场（但是stash内容并不删除）</p><p>git stash drop  删除stash内容</p><p>git stash pop  恢复工作现场并删除stash内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>说明：<br>git stash 只能“储藏”已被追踪过的文件。意思就是说如果是新添加的文件还没有执行过<code>git add</code>的文件，在使用git stash后还是会在工作区中出现，<br>并不会别“储藏”。所以要使用git stash, 请将untrack状态的文件执行git add, 使其可被git追踪</p><p>git stash 把当前工作现场“储藏”起来(如果在一个分支上修改了文件但是因为还没有修改完不能提交的时候，  如果要开发出一个新的分支解决一个问题，<br>如果不使用git stash， 那么在另一个分支上也是可以看到这个分支上修改的内容。)</p><p>结论 ：<br>1.工作区和暂存区是共用的，在各个分支里都可以看到没被stash的文件。<br>2.在工作区和暂存区的文件都可以stash，pop之后都会出现在工作区</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>说明 : 假设在dev分支上正在开发，忽然程序出现bug,需要即刻修复，但是dev分支上的任务还没有完成，无法提交合并到master。<br>但是现在就需要在master上创建一个分支bugs去修复这个问题。因为工作区和暂存区对所有分支默认都是共用的，所以在bugs分支<br>上会执行dev分支上未完成的修改。这样是不允许的。所以我们可以在dev分支中git stash 将dev分支<br>中的工作区和暂存区隐藏起来，这样在别的分支中就看不到dev分支工作区中和暂存区中的已有的工作，这意味着工作区是干净的。我们可以在<br>bugs分支中可以看到工作区是干净的，可以执行任意我们的任务。等待bugs分支开发完成，再切换到master分支，接着将bugs分支merge<br>到master。但是现在我们思考一下，现在主分支是最新的（修复了bugs并且merge上去的)，但是我们的dev分支却还是和未修复bugs的<br>master主分支同步的版本。如果这样的话，在我们开发完dev分支并且合并到master分支上时，就有可鞥会出现问题（除非是增加文件，否则就<br>会出现合并冲突）。如果我们的dev分支版本现在不存在master中存在的bug,则我们完全可以放心。但是如果dev中也会出现像master<br>中出现的bug,则当我们将dev合并到master中时，还是会出现同样的bug。主要是在这种情况下，还会发生合并时候冲突。所以在将bugs<br>合并到master以后，我们也可以选择将bugs分支合并到dev分支中，合并完成之后，现在master和dev中的代码是一样的。但是我们之前<br>在dev中执行了git stash, 还有“储藏”的工作区中已经开发但未提交的内容，当我们执行git stash pop 恢复之前的工作现场并删除<br>stash内容，会发现有冲突发生了（因为现在dev分支和master分支是一样的，现在该文件是已经修复完成的， 但是我们释放的工作区中之前就对<br>该文件做了修改：同一个文件不同的内容，这样就会明显的出现冲突）。这是我们就需要解决这些冲突（其实就是将之前修改的删掉，保留和现在<br>master主分支中的文件一样的信息）。解决完成以后。我们就完全解决了以后dev合并到master中可能存在的冲突，并且在合并以后不会再出现同样<br>的错误        </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git remote (git给远程库起的默认名称是origin)</span><br><span class="line"></span><br><span class="line">  git remote -v 查看远程库的信息</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git remote show [remote] 显示某个远程仓库的信息</p><p>git remote add [remote] [url] 增加一个新的远程仓库，并命名 (一般是origin)</p><p>git remote rm [remote]  删除远程库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git push </span><br><span class="line">  git push [remote] master  将主分支推送到远程库</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git push [remote] [branch] 将([branch])分支推送到远程库</p><p>git push [remote] [tagname] 推送某个标签到远程</p><p>git push [remote] –tags 一次性推送全部尚未推送到远程的本地标签</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git pull origin 分支名称 （取回远程仓库的变化，并与本地分支合并）</span><br><span class="line"></span><br><span class="line">  git pull [remote] [branch]  取回远程仓库的变化，并与本地分支合并</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>说明 : 在向远程库推送某个分支的时候，需要先”Git pull”更新本地的代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">即 ： 如果你的同事先在dev分支推送他的提交，接下来你去推送很有可能会失败。因为你的同事最新提交和你试图推送的提交有冲突，</span><br><span class="line">解决办法也很简单，Git已经提示我们，先用git pull把最新的提交从origin/dev抓下来，然后，在本地合并，解决冲突，</span><br><span class="line">git add -&gt; git commit -&gt; 再推送</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果: git pull 也失败了 ： </p><pre><code>        $ git pull        remote: Counting objects: 8, done.        remote: Compressing objects: 100% (6/6), done.        remote: Total 8 (delta 2), reused 8 (delta 2), pack-reused 0        Unpacking objects: 100% (8/8), done.        From github.com:yanqiangsjz/rhjt           6876a33..e2516f8  oneline    -&gt; origin/oneline        There is no tracking information for the current branch.        Please specify which branch you want to merge with.        See git-pull(1) for details.                    git pull &lt;remote&gt; &lt;branch&gt;                If you wish to set tracking information for this branch you can do so with:                    git branch --set-upstream-to=origin/&lt;branch&gt; oneline</code></pre><p>原因 ： 没有指定本地dev分支与远程origin/dev分支的链接，根据提示，设置dev和origin/dev的链接：git branch –set-upstream-to=origin/dev dev</p><p>git pull –rebase origin master 远程库同步到本地库  （解决的问题：error: failed to push some refs to ‘<a href="mailto:&#x67;&#x69;&#116;&#x40;&#103;&#x69;&#x74;&#101;&#x65;&#46;&#99;&#x6f;&#x6d;">&#x67;&#x69;&#116;&#x40;&#103;&#x69;&#x74;&#101;&#x65;&#46;&#99;&#x6f;&#x6d;</a>:name/project.git’）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git branch --set-upstream-to=origin/dev dev</span><br><span class="line"></span><br><span class="line">  git branch --set-upstream-to=origin/dev dev 设置dev和origin/dev的链接。成功以后就可以git pull</span><br><span class="line"></span><br><span class="line">- git tag </span><br><span class="line"></span><br><span class="line">  git tag [tagname] 为当前HEAD打标签（本地tag）</span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git tag [tagname] commitId（commitId 默认未HEAD; 本地tag）</p><p>git tag -a [tagname] -m [message] commitId 为本地tag添加说明</p><p>git tag 查看所有标签信息</p><p>git show [tagname] 查看某个tag信息</p><p>git tag -d [tagname] 删除本地标签</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 删除远程标签</span><br><span class="line"></span><br><span class="line">  git tag -d [tagname] -&gt; git push [remote] :refs/tags/[tagname]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>说明：git tag -d [tagname]（先从本地删除）;  git push [remote] :refs/tags/[tagname]（然后，从远程删除）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- git checkout -b [branch] [tag]</span><br><span class="line"></span><br><span class="line">  git checkout -b[branch] [tagname] 新建一个分支，指向某个tag</span><br><span class="line"></span><br><span class="line">- git fetch (取回远程仓库的变化，但并不会主动与本地分支合并。这个比git pull 更安git全)</span><br><span class="line"></span><br><span class="line">  //方法一 例子</span><br><span class="line">  git fetch origin master //从远程的origin仓库的master分支下载代码到本地的origin master</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>git log -p master.. origin/master//比较本地的仓库和远程参考的区别</p><p>git merge origin/master//把远程下载下来的代码合并到本地仓库，远程的和本地的合并</p><p>//方法二<br>git fetch origin master:temp //从远程的origin仓库的master分支下载到本地并新建一个分支temp</p><p>git diff temp//比较master分支和temp分支的不同</p><p>git merge temp//合并temp分支到master分支</p><p>git branch -d temp//删除temp</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 🙄.gitignore文件</span><br><span class="line"></span><br><span class="line">- 忽略特殊文件</span><br><span class="line"></span><br><span class="line">  有些时候，你必须把某些文件放到Git工作目录中，但又不能提交它们，比如保存了数据库密码的配置文件啦，等等，</span><br><span class="line">  每次git status都会显示Untracked files ...，有强迫症的童鞋心里肯定不爽。好在Git考虑到了大家的感受，</span><br><span class="line">  这个问题解决起来也很简单，在Git工作区的根目录下创建一个特殊的.gitignore文件，然后把要忽略的文件名填</span><br><span class="line">  进去，Git就会自动忽略这些文件不需要从头写.gitignore文件，GitHub已经为我们准备了各种配置文件，</span><br><span class="line">  只需要组合一下就可以使用了。所有配置文件可以直接在线浏览. 查看请点击下面的链接 </span><br><span class="line"></span><br><span class="line">   [https://github.com/github/gitignore](https://github.com/github/gitignore &quot;github&quot;)</span><br><span class="line"></span><br><span class="line">## 🤨本地设置</span><br><span class="line"></span><br><span class="line">由于你的本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以，需要一点设置：</span><br><span class="line"></span><br><span class="line">- 第1步：</span><br><span class="line">  创建SSH Key。在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有id_rsa和id_rsa.pub这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key：</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>$ ssh-keygen -t rsa -C “<a href="mailto:&#x79;&#x6f;&#117;&#x72;&#101;&#109;&#97;&#105;&#x6c;&#64;&#101;&#x78;&#97;&#109;&#x70;&#x6c;&#x65;&#x2e;&#99;&#111;&#x6d;">&#x79;&#x6f;&#117;&#x72;&#101;&#109;&#97;&#105;&#x6c;&#64;&#101;&#x78;&#97;&#109;&#x70;&#x6c;&#x65;&#x2e;&#99;&#111;&#x6d;</a>“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  你需要把邮件地址换成你自己的邮件地址，然后一路回车，使用默认值即可，由于这个Key也不是用于军事目的，所以也无需设置密码。</span><br><span class="line"></span><br><span class="line">  如果一切顺利的话，可以在用户主目录里找到.ssh目录，里面有id_rsa和id_rsa.pub两个文件，这两个就是SSH Key的秘钥对，id_rsa是私钥，不能泄露出去，id_rsa.pub是公钥，可以放心地告诉任何人。</span><br><span class="line"></span><br><span class="line">- 第2步：</span><br><span class="line">  登陆GitHub，打开“settings”，“SSH Keys”页面：</span><br><span class="line">  然后，点“Add SSH Key”，填上任意Title，在Key文本框里粘贴id_rsa.pub文件的内容：</span><br><span class="line">  [![V2Fakt.png](https://s2.ax1x.com/2019/06/11/V2Fakt.png)](https://imgchr.com/i/V2Fakt)</span><br><span class="line">  添加完成</span><br><span class="line">  [![V2FD1S.png](https://s2.ax1x.com/2019/06/11/V2FD1S.png)](https://imgchr.com/i/V2FD1S)</span><br><span class="line">  当前的 ssh key 的使用状态是未使用，我们可以通过 pull 命令专门要一次数据来实现激活。在第一次要数据的时候，系统会提示我们是否同意，我们输入 yes 表示同意即可。</span><br><span class="line"></span><br><span class="line">- 友情提示，在GitHub上免费托管的Git仓库，任何人都可以看到喔（但只有你自己才能改）。所以，不要把敏感信息放进去。</span><br><span class="line">- 如果你不想让别人看到Git库，有两个办法:</span><br><span class="line">  1. 一个是交点保护费，让GitHub把公开的仓库变成私有的，这样别人就看不见了（不可读更不可写）</span><br><span class="line">  2. 一个办法是自己动手，搭一个Git服务器，因为是你自己的Git服务器，所以别人也是看不见的</span><br><span class="line">- 第3步：</span><br><span class="line">  - 测试是否配置成功</span><br><span class="line">    -` ssh  -T git@github.com `</span><br><span class="line">- 第4步：</span><br><span class="line">  - 测试上传文件是否成功</span><br><span class="line">  - 注意：远程仓库必须是使用 ssh 关联方式才能生效， 如果是 https 的方式就不会生效</span><br><span class="line">    - 断开关联</span><br><span class="line">      - `git remote remove origin` </span><br><span class="line">    - 建立关联</span><br><span class="line">      - `git remote add origin &quot;项目的ssh地址&quot;`</span><br><span class="line"></span><br><span class="line">## 😯**GitHub**</span><br><span class="line"></span><br><span class="line">- **创建远程库地址别名**</span><br><span class="line">  - git remote -v 查看当前所有远程地址别名</span><br><span class="line">  - git remote add [别名] [远程地址]</span><br><span class="line">- **推送**</span><br><span class="line">- git push [远程地址别名] [分支名]</span><br><span class="line">- **克隆**</span><br><span class="line">  - git clone [远程地址]</span><br><span class="line">  - 具有三个效果</span><br><span class="line">    - 完整的把远程库下载到本地</span><br><span class="line">    - 创建origin远程地址别名 </span><br><span class="line">    - 初始化本地库</span><br><span class="line">- **拉取**</span><br><span class="line">  - pull = fetch + merge</span><br><span class="line">  - git pull [远程库地址别名] [远程分支名]</span><br><span class="line">  - git fetch [远程库地址别名] [远程分支名]</span><br><span class="line">- git merge [远程库地址别名/远程分支名]      注意：这个合并两个之间加斜杠/</span><br><span class="line">- **团队成员邀请**</span><br><span class="line">  - 在项目中点击**settings**</span><br><span class="line">  - 点击左侧**collaborators** </span><br><span class="line">  - add添加 成员GitHub邮箱</span><br><span class="line">  - 点击**copy invite link** 将链接以其他方式交给成员</span><br><span class="line">  - 被邀请成员登录GitHub点链接**Accept invitation**按钮加入即可</span><br><span class="line">- **SSH登录**</span><br><span class="line">  - 进入当前用户根目录  cd ~</span><br><span class="line">  - 删除.ssh目录 rm - rvf.ssh</span><br><span class="line">  - 运行命令生成.ssh秘钥目录</span><br><span class="line">    - $ ssh-keygen -t rsa -C atguigu2018ybuq@aliyun.com </span><br><span class="line">    - **注意：这里-C 这个参数是大写的** **C**</span><br><span class="line">  - 进入.ssh 目录查看文件列表  $ cd .ssh</span><br><span class="line">    - $ ls -lF</span><br><span class="line">  - 查看id_rsa.pub文件内容</span><br><span class="line">    - $ cat id_rsa.pub</span><br><span class="line">  - 复制 id_rsa.pub 文件内容，登录 GitHub，点击用户头像→Settings→SSH and GPG keys</span><br><span class="line">  - New SSH Key</span><br><span class="line">    - 输入复制的密钥信息</span><br><span class="line">    - 回到 Git bash 创建远程地址别名</span><br><span class="line">    - git remote add origin_ssh git@github.com:atguigu2018ybuq/huashan.git</span><br><span class="line">    - 注意：这时候就用ssh地址即可</span><br><span class="line"></span><br><span class="line">## 😫创建远程仓库货和推送信息</span><br><span class="line"></span><br><span class="line">现在的情景是，你已经在本地创建了一个Git仓库后，又想在GitHub创建一个Git仓库，并且让这两个仓库进行远程同步，这样，GitHub上的仓库既可以作为备份，又可以让其他人通过该仓库来协作，真是一举多得。</span><br><span class="line">首先，登陆GitHub，然后，在右上角找到“Create a new repo”按钮，创建一个新的仓库：</span><br><span class="line">![V2Fc0s.png](https://s2.ax1x.com/2019/06/11/V2Fc0s.png)</span><br><span class="line"></span><br><span class="line">目前，在GitHub上的这个 仓库还是空的，GitHub告诉我们，可以从这个仓库克隆出新的仓库，也可以把一个已有的本地仓库与之关联，然后，把本地仓库的内容推送到GitHub仓库。</span><br><span class="line"></span><br><span class="line">[![V2Fg7n.png](https://s2.ax1x.com/2019/06/11/V2Fg7n.png)](https://imgchr.com/i/V2Fg7n)</span><br><span class="line"></span><br><span class="line">现在，我们根据GitHub的提示，在本地的仓库下运行命令：</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>$ git remote add origin <a href="mailto:&#x67;&#105;&#x74;&#64;&#103;&#105;&#x74;&#x68;&#117;&#x62;&#x2e;&#x63;&#x6f;&#x6d;">&#x67;&#105;&#x74;&#64;&#103;&#105;&#x74;&#x68;&#117;&#x62;&#x2e;&#x63;&#x6f;&#x6d;</a>:baihaojie/test0830.git</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">添加后，远程库的名字就是origin，这是Git默认的叫法，也可以改成别的，但是origin这个名字一看就知道是远程库。</span><br><span class="line"></span><br><span class="line">下一步，就可以把本地库的所有内容推送到远程库上：</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>$ git push -u origin master<br>Warning: Permanently added the RSA host key for IP address ‘192.30.253.112’ to t                 he list of known hosts.<br>Counting objects: 3, done.<br>Writing objects: 100% (3/3), 236 bytes | 0 bytes/s, done.<br>Total 3 (delta 0), reused 0 (delta 0)<br>To <a href="mailto:&#103;&#105;&#x74;&#x40;&#x67;&#x69;&#x74;&#x68;&#117;&#98;&#x2e;&#99;&#111;&#109;">&#103;&#105;&#x74;&#x40;&#x67;&#x69;&#x74;&#x68;&#117;&#98;&#x2e;&#99;&#111;&#109;</a>:baihaojie/test0830.git</p></li></ul><ul><li>[new branch]      master -&gt; master<br>Branch master set up to track remote branch master from origin.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">把本地库的内容推送到远程，用git push命令，实际上是把当前分支master推送到远程。</span><br><span class="line"></span><br><span class="line">由于远程库是空的，我们第一次推送master分支时，加上了-u参数，Git不但会把本地的master分支内容推送的远程新的master分支，还会把本地的master分支和远程的master分支关联起来，在以后的推送或者拉取时就可以简化命令。</span><br><span class="line"></span><br><span class="line">推送成功后，可以立刻在GitHub页面中看到远程库的内容已经和本地一模一样：</span><br><span class="line"></span><br><span class="line">[![V2kZ38.png](https://s2.ax1x.com/2019/06/11/V2kZ38.png)](https://imgchr.com/i/V2kZ38)</span><br><span class="line"></span><br><span class="line">//这个警告只会出现一次，后面的操作就不会有任何警告了。</span><br><span class="line"></span><br><span class="line">从现在起，只要本地作了提交，就可以通过命令：</span><br><span class="line"></span><br></pre></td></tr></table></figure>$ git push origin master<br>```</li></ul><p>把本地master分支的最新修改推送至GitHub，现在，你就拥有了分布式版本库</p><h2 id="GitLab-这个再说吧-😁"><a href="#GitLab-这个再说吧-😁" class="headerlink" title="GitLab 这个再说吧~~   😁"></a>GitLab 这个再说吧~~   😁</h2><ol><li>cd /etc/sysconfig/network-scripts/         切换到这个目录下</li><li>su root 切换到root账号</li><li>vim ifcfg-ens33  用vim编辑器打开此文件<ol><li><img src="C:\Users\Mc\AppData\Roaming\Typora\typora-user-images\1559621416905.png" alt="1559621416905"></li></ol></li><li>service network restart  重启网络服务</li></ol>]]></content>
      
      
      <categories>
          
          <category> 开发必备 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL</title>
      <link href="/2019/06/11/MySQL/"/>
      <url>/2019/06/11/MySQL/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><a href="https://dev.mysql.com/doc/refman/8.0/en/">官网参考手册</a></p><h3 id="数据库的概述"><a href="#数据库的概述" class="headerlink" title="数据库的概述"></a>数据库的概述</h3><p>​        Database（数据库，以特定的结构批量存储数据的软件）<br>​        数据库的发展史：</p><blockquote><p>网状数据库-&gt;层次型数据库-&gt;关系型数据库-&gt;非关系型数据库</p></blockquote><span id="more"></span><p>​        <strong>关系型数据库中数据的逻辑结构：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Server-&gt;Database-&gt;Table-&gt;Row-&gt;Column</span><br><span class="line">服务器-&gt;  数据库 -&gt;   表-&gt;  行-&gt;  列</span><br></pre></td></tr></table></figure><h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><table><thead><tr><th>MySQL DB分支：</th><th><a href="http://www.mysql.com/">http://www.mysql.com/</a></th></tr></thead><tbody><tr><td>Maria DB分支:</td><td><a href="http://mariadb.org/">http://mariadb.org/</a></td></tr><tr><td>xampp官网：</td><td><a href="http://www.aspchefriends.org/">http://www.aspchefriends.org/</a></td></tr><tr><td></td><td>xampp是一个服务器套装，包含多款服务器软件。</td></tr><tr><td>bin:</td><td>bin文件夹下mysqld.exe:等同于启动</td></tr><tr><td></td><td>二进制</td></tr><tr><td></td><td>d-&gt;Deamon精灵，守护者</td></tr><tr><td></td><td>mysqld.exe启动MySQL服务器</td></tr></tbody></table><h3 id="MySQL数据库系统"><a href="#MySQL数据库系统" class="headerlink" title="MySQL数据库系统"></a>MySQL数据库系统</h3><h4 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h4><p>​            <strong>负责存储数据</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C：//xampp/.../MySQLD.exe</span><br></pre></td></tr></table></figure><h4 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h4><p>​            <strong>负责向服务器发起增删改查的命令</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C：//xampp/.../MySQL.exe</span><br></pre></td></tr></table></figure><h4 id="连接MySQL据库服务器"><a href="#连接MySQL据库服务器" class="headerlink" title="连接MySQL据库服务器"></a>连接MySQL据库服务器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql.exe -h127.0.0.1 -P3306 -uroot -p</span><br><span class="line">简写：mysql -uroot</span><br><span class="line">-h服务器的IP地址/域名可以使用localhost</span><br><span class="line">-P端口，MySQL服务使用3306端口</span><br><span class="line">-u用户</span><br><span class="line">-p密码   </span><br></pre></td></tr></table></figure><h4 id="MySQL管理命令（每一个加分号-）"><a href="#MySQL管理命令（每一个加分号-）" class="headerlink" title="MySQL管理命令（每一个加分号;）"></a>MySQL管理命令（每一个加分号;）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">quit; 退出服务器连接</span><br><span class="line">show databases;显示数据库服务器上当前所有数据库</span><br><span class="line">use 数据库名称; 进入到指定的数据库</span><br><span class="line">show tables; 显示当前数据库中的数据表</span><br><span class="line">in set：记录</span><br><span class="line">desc 表名称;描述表中有哪些列（表头）</span><br></pre></td></tr></table></figure><h3 id="常用的sql命令"><a href="#常用的sql命令" class="headerlink" title="常用的sql命令"></a>常用的sql命令</h3><p>SQL：structured query Language    结构化查询语言（用于操作关系型数据库服务器中的数据）</p><h4 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h4><ol><li>SQL语言最早是由IBM提出，后提交给ISO，成为行业内标准语言。</li><li>分为多个版本：<strong>SQL-87</strong>、<strong>SQL-92</strong>、<strong>SQL-99</strong>。</li><li>当前标准SQL语言被绝大多数的关系型数据库所支持。</li></ol><h4 id="SQL命令的两种执行方式"><a href="#SQL命令的两种执行方式" class="headerlink" title="SQL命令的两种执行方式"></a>SQL命令的两种执行方式</h4><ol><li>交互模式：客户端连接Mysql，输入一行，回车，服务器执行一行。<br>​                    —适用于临时性查看数据<br>​                    mysql -uroot 回车</li><li>脚本模式：客户端把要执行的多行命令写在一个脚本文件中，一次性的提交给服务器执行。<br>​                    —适用于<strong>批量操作</strong>数据。<br>​                    mysql -uroot &lt;C：/xampp/…/02.sql<br>​                    SQL syntax:语法的意思</li></ol><h4 id="SQL语法规范"><a href="#SQL语法规范" class="headerlink" title="SQL语法规范"></a>SQL语法规范</h4><ol><li>每条SQL语句以英文分号为结尾，一条语句可以跨越多行，见到（;）分号结束。</li></ol><p>若第N条SQL语句有语法错误，则后续所有语句不会再执行。</p><p>在SQL语句中不区分大小写。习惯上数据库关键字用大写，非关键字用小写。</p><p>SQL语句中还可以使用单行注释：#…或多行注释：/<em>….</em>/</p><p>注释的内容不会被服务器所执行。</p><h4 id="日常开发中常用的SQL命令"><a href="#日常开发中常用的SQL命令" class="headerlink" title="日常开发中常用的SQL命令"></a>日常开发中常用的SQL命令</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）丢弃数据库，如果存在的话;</span><br><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> jd；</span><br><span class="line">（<span class="number">2</span>）创建新的数据库;</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE jd；</span><br><span class="line">（<span class="number">3</span>）进入刚刚创建的数据库;</span><br><span class="line">USE jd;</span><br><span class="line">（<span class="number">4</span>）创建数据表;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student（</span><br><span class="line"> sid <span class="type">INT</span>,</span><br><span class="line"> name <span class="type">VARCHAR</span>(<span class="number">6</span>),</span><br><span class="line"> sex <span class="type">VARCHAR</span>(<span class="number">1</span>),</span><br><span class="line"> score <span class="type">INT</span></span><br><span class="line"> ）;</span><br><span class="line"> （<span class="number">5</span>）向数据表中插入纪录;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student（表名称） <span class="keyword">VALUES</span>(<span class="string">&#x27;10&#x27;</span>,<span class="string">&#x27;TOM&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;89&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;gren&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;92&#x27;</span>),</span><br><span class="line">      (<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;Kate&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;89&#x27;</span>);</span><br><span class="line">（<span class="number">6</span>）查询数据表中所有的记录;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> FORM student（表名称）;</span><br></pre></td></tr></table></figure><h4 id="增删改查—更改和删除"><a href="#增删改查—更改和删除" class="headerlink" title="增删改查—更改和删除"></a>增删改查—更改和删除</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>)更改记录</span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span></span><br><span class="line">upwd<span class="operator">=</span><span class="string">&#x27;123&#x27;</span>,email<span class="operator">=</span><span class="string">&#x27;123@qq.com&#x27;</span> <span class="keyword">WHERE</span> uid<span class="operator">=</span><span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">(<span class="number">2</span>)删除记录</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> uid<span class="operator">=</span><span class="string">&#x27;3&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="数据库中的中文乱码问题"><a href="#数据库中的中文乱码问题" class="headerlink" title="数据库中的中文乱码问题"></a>数据库中的中文乱码问题</h3><table><thead><tr><th align="right">计算机中如何存储英文字符：</th><th align="left"></th></tr></thead><tbody><tr><td align="right">ASCII：</td><td align="left">总共有128个，对所有的英文字符及符号进行了编码。</td></tr><tr><td align="right">Latin-1：</td><td align="left">总共有256个，兼容ASCII，同时对欧洲符号进行编码</td></tr></tbody></table><table><thead><tr><th align="right">计算机存储中文字符：</th><th></th></tr></thead><tbody><tr><td align="right">GB2312：</td><td>对6000多常用的汉字进行编码，兼容ASCII码。</td></tr><tr><td align="right">GBK：</td><td>对20000多汉字进行编码，同时兼容GB2312。</td></tr><tr><td align="right">BIG5：</td><td>台湾繁体字编码，不兼容GB2312和GBK，兼容ASCII码。</td></tr><tr><td align="right">Unicode：</td><td>对世界上主要的语言的字符进行编码，兼容ASCII码，不兼容GBK，GB2312,BIG5等。</td></tr><tr><td align="right"></td><td>具体分为Utf-8，UTF-16，UTF-32三种存储方案。</td></tr></tbody></table><table><thead><tr><th>中文乱码产生的根源：</th></tr></thead><tbody><tr><td>MySQL默认使用latin-1编码，而这个编码不能存储中文的。</td></tr></tbody></table><table><thead><tr><th>解决MySQL存储中文乱码：</th></tr></thead><tbody><tr><td>（1）sql脚本文件另存为的编码</td></tr><tr><td>（2）客户端连接服务器使用的编码</td></tr><tr><td>（3）服务器端数据库存储数据使用的编码</td></tr><tr><td>（4）都统一使用UTF8编码。</td></tr><tr><td>（5）设置<strong>编辑器</strong>的默认编码：</td></tr><tr><td>Tools-&gt;preference-&gt;file-&gt;default encoding</td></tr></tbody></table><h3 id="MySQL列类型"><a href="#MySQL列类型" class="headerlink" title="MySQL列类型"></a>MySQL列类型</h3><p>​        <strong>列类型：在创建表的时候，指定列可以存储的数据类型。</strong><br>​        <strong>CREATE TABLE book (bid 列类型)；</strong></p><h4 id="数值类型—可以不加引号"><a href="#数值类型—可以不加引号" class="headerlink" title="数值类型—可以不加引号"></a><strong>数值类型—可以不加引号</strong></h4><table><thead><tr><th align="right">数值类型：</th><th></th></tr></thead><tbody><tr><td align="right">TINYINT：</td><td>微整型，占用一个字节，-128~127。</td></tr><tr><td align="right">SMALLINT：</td><td>小整型 占用2个字节，-32768~32767。</td></tr><tr><td align="right">INT：</td><td>整型    占用4个字节，-2147483648~2147483647。</td></tr><tr><td align="right">BIGINT：</td><td>大整型，占用8个字节，1byte=8bit</td></tr><tr><td align="right">FLOAT：</td><td>单精度浮点型，占4个字节，3.4*10的8次方或3.4E38，范围比INT大的多，但是精度不如INT，可能产生误差。</td></tr><tr><td align="right">DOUBLE：</td><td>双精度浮点型，占8个字节，占1.79E308，范围比BIGINT大的多，但是精度不如BGINT，可能产生误差。</td></tr><tr><td align="right">DECIMAL(M,D)：</td><td>定点小数，不会产生计算误差舍入，M代表总的有效位数，D代表小数点后有效位数。</td></tr><tr><td align="right">BOOL：</td><td>布尔型，取值只能是TRUE/1、FALSE/0,数据库在存储的时候使用TINYINT（1或0）</td></tr><tr><td align="right"></td><td><strong>TRUE</strong>和<strong>FALSE</strong>不能加引号。</td></tr></tbody></table><h4 id="字符串类型—必须加引号"><a href="#字符串类型—必须加引号" class="headerlink" title="字符串类型—必须加引号"></a><strong>字符串类型—必须加引号</strong></h4><table><thead><tr><th align="right">字符串类型：</th><th></th></tr></thead><tbody><tr><td align="right">VARCHAR（M）：</td><td>变长字符串，不会产生空间浪费，操作速度相对较慢，M不能超过65535。</td></tr><tr><td align="right">CHAR（M）：</td><td>定长字符串，可能产生空间浪费，操作速度相对较快，M不能超过255。</td></tr><tr><td align="right">TEXT（M）：</td><td>大型变长字符串，M不超过2G。</td></tr></tbody></table><h4 id="日期时间类型—必须加引号"><a href="#日期时间类型—必须加引号" class="headerlink" title="日期时间类型—必须加引号"></a><strong>日期时间类型—必须加引号</strong></h4><table><thead><tr><th>日期时间类型</th><th></th></tr></thead><tbody><tr><td>DATETIME：</td><td>日期时间类型     ;2018-11-2 15:18:30’</td></tr><tr><td>DATE:</td><td>日期类型 ‘2018-11-2’</td></tr><tr><td>time：</td><td>时间类型  ‘15:18:30’</td></tr></tbody></table><h4 id="null"><a href="#null" class="headerlink" title="null"></a>null</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MySQL中的NULL含义：空的，空缺的；</span><br><span class="line">指应该有某个数据，但暂时还不能确定具体的值；</span><br><span class="line">例如：还没到发年终奖，未决定员工的部门，未确定部门经理是谁？</span><br></pre></td></tr></table></figure><h3 id="列约束"><a href="#列约束" class="headerlink" title="列约束"></a>列约束</h3><p>​    <strong>MySQL可以对插入的数据进行特定的检验，只有满足条件的数据才能插入成功，否则会提示”非法插入”，”禁止插入”</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例如：插入人的年龄范围是0~100之间。商品的价格大于0...</span><br></pre></td></tr></table></figure><h4 id="MySQL提供了六种列约束"><a href="#MySQL提供了六种列约束" class="headerlink" title="MySQL提供了六种列约束"></a><strong>MySQL提供了六种列约束</strong></h4><h5 id="（1）主键约束—PRIMARY-KEY"><a href="#（1）主键约束—PRIMARY-KEY" class="headerlink" title="（1）主键约束—PRIMARY KEY"></a>（1）主键约束—<font color="#1E90FF"><strong>PRIMARY KEY</strong></font></h5><p>​    声明了主键约束的列不能插入重复的值，如果主键上的数据是数值会自动按照由小到大的顺序排列—加快查找速度。注意：一个表中只能有一个主键。</p><h5 id="（2）唯一约束—UNIQUE"><a href="#（2）唯一约束—UNIQUE" class="headerlink" title="（2）唯一约束—UNIQUE"></a>（2）唯一约束—<font color="#1E90FF"><strong>UNIQUE</strong></font></h5><p>声明了唯一约束的列不能插入重复的值,但可以插入NULL，而且可以插入多个NULL。</p><p>NULL：关键字不能加引号</p><h5 id="（3）非空约束—NOT-NULL"><a href="#（3）非空约束—NOT-NULL" class="headerlink" title="（3）非空约束—NOT NULL"></a>（3）非空约束—<font color="#1E90FF"><strong>NOT NULL</strong></font></h5><p>声明非空约束的列上不能插入NULL值，如果插入的是NULL也不会报错，只是会显示空内容。</p><h5 id="（4）默认值约束—DEFAULT"><a href="#（4）默认值约束—DEFAULT" class="headerlink" title="（4）默认值约束—DEFAULT"></a>（4）默认值约束—<font color="#1E90FF"><strong>DEFAULT</strong></font></h5><p>可使用default关键字为列声明默认值；有以下两种用法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> xz_laptop <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;小米AIR&#x27;</span>,<span class="keyword">DEFAULT</span>);直接写<span class="keyword">default</span>，或者不写</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> xz_laptop(lid,title)<span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;苹果pro&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="（5）检查约束"><a href="#（5）检查约束" class="headerlink" title="（5）检查约束"></a>（5）检查约束</h5><p>检查约束可以对插入的数据范围进行验证</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student(</span><br><span class="line">age TINYINT <span class="keyword">CHECK</span>(age<span class="operator">&gt;</span><span class="number">18</span> <span class="keyword">AND</span> age<span class="operator">&lt;</span><span class="number">60</span>)</span><br><span class="line">);</span><br><span class="line">注意：MySQL不支持,会降低插入和更新等操作速度效率。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="（6）外键约束—FOREIGN-KEY"><a href="#（6）外键约束—FOREIGN-KEY" class="headerlink" title="（6）外键约束—FOREIGN KEY"></a>（6）外键约束—<font color="#1E90FF"><strong>FOREIGN KEY</strong></font></h5><ol><li><p>声明了外键约束的列，取值必须在另一个表的主键上出现过</p></li><li><p>取值可以是NULL</p><p>注意：外键的列类型要和另外一个表主键的列类型一致。<br>​   FOREIGN KEY(familyid) REFERENCES xz_laptop_family(fid)</p></li><li><p>所有的列约束中，主键约束推荐使用—可以提高查询效率；但是其他的列约束是否使用根据项目而定，可以不用—会影响数据的插入和更新效率。</p></li></ol><h3 id="MySQL中的自增列"><a href="#MySQL中的自增列" class="headerlink" title="MySQL中的自增列"></a>MySQL中的自增列</h3><p>​    AUTO_INCREMENT：自动增加,假如一个列声明了自增列，无需手动赋值，直接指定为NULL，会自动获取当前的最大值，新纪录会执行+1然后插入。<br>​            <strong>注意：</strong><br>​                1.允许手动赋值<br>​                2.只用于整数型的主键列上</p><h3 id="项目中存储日期时间数据"><a href="#项目中存储日期时间数据" class="headerlink" title="项目中存储日期时间数据"></a>项目中存储日期时间数据</h3><p>​    储存的是距离计算机元年的毫秒数,使用BIGINT类型。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">计算机元年 1970-1-10:0:0</span><br><span class="line">1秒=1000毫秒</span><br><span class="line">数据库存储10001970-1-1  0:0:1</span><br><span class="line">1000*601970-1-10:1:0</span><br><span class="line">1000*60*601970-1-11:0:0</span><br><span class="line">2018年距离计算机元年的毫秒：48*365*24*60*60*1000</span><br></pre></td></tr></table></figure><h3 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）查询所有的列</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp;</span><br><span class="line">    <span class="operator">*</span>代表所有的列</span><br><span class="line">（<span class="number">2</span>）查询特定的列</span><br><span class="line">示例：查询所有员工的姓名，生日，工资</span><br><span class="line">    <span class="keyword">SELECT</span> ename,birthday,salary <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：查询所有员工的编号，姓名，性别，工资</span><br><span class="line">        <span class="keyword">SELECT</span> eid,ename,sex,salary <span class="keyword">FROM</span> emp;</span><br><span class="line">（<span class="number">3</span>）给列取别名</span><br><span class="line">示例：查询所有员工的姓名和工资，列名使用汉字。</span><br><span class="line"><span class="keyword">SELECT</span> ename <span class="keyword">AS</span> 姓名,salary <span class="keyword">AS</span> 工资 <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：查询所有员工编号，姓名，性别，生日，全部使用中文别名。</span><br><span class="line"><span class="keyword">SELECT</span> eid <span class="keyword">AS</span> 编号,ename <span class="keyword">AS</span> 姓名,sex <span class="keyword">AS</span> 性别,birthday <span class="keyword">AS</span> 生日 <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：查询所有员工的编号，姓名，性别，生日，使用一个英文字母作为别名。</span><br><span class="line"><span class="keyword">SELECT</span> eid e,ename n,sex s,birthday b <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="keyword">AS</span>关键字可以省略</span><br><span class="line">（<span class="number">4</span>）只显示不同的值<span class="operator">/</span>合并相同的项</span><br><span class="line">练习：查询公司都有哪些性别的员工</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> sex <span class="keyword">FROM</span> emp;</span><br><span class="line">   （合并）</span><br><span class="line">练习：公司员工都分布在哪些部门</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> deptid <span class="keyword">FROM</span> emp;</span><br><span class="line">（<span class="number">5</span>）查询时执行运算</span><br><span class="line">示例：计算<span class="number">5</span><span class="operator">+</span><span class="number">3</span><span class="number">-7</span><span class="operator">/</span><span class="number">2</span><span class="operator">*</span><span class="number">9</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">5</span><span class="operator">+</span><span class="number">3</span><span class="number">-7</span><span class="operator">/</span><span class="number">2</span><span class="operator">*</span><span class="number">9</span> 结果;</span><br><span class="line">练习：查询所有员工的工资及其年薪。</span><br><span class="line"><span class="keyword">SELECT</span> ename 姓名,salary<span class="operator">*</span><span class="number">12</span> 年薪 <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：假设所有员工工资加<span class="number">500</span>，年终奖<span class="number">5000</span>元，查询出姓名和年薪起别名</span><br><span class="line"><span class="keyword">SELECT</span> ename 姓名,(salary<span class="operator">+</span><span class="number">500</span>)<span class="operator">*</span><span class="number">12</span><span class="operator">+</span><span class="number">5000</span> 工资 <span class="keyword">FROM</span> emp;</span><br><span class="line">（<span class="number">6</span>）对查询的结果排序</span><br><span class="line">示例：查询所有员工的信息，结果按照由低到高排序</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">ASC</span>; </span><br><span class="line">  （升序 ascend）</span><br><span class="line">   <span class="keyword">DESC</span></span><br><span class="line">示例：查询所有员工的信息，结果按照由高到低排序</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span>; </span><br><span class="line">   （降序 descend）</span><br><span class="line">练习：查询所有员工的信息，结果按照年龄由大到小排序</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> birthday <span class="keyword">ASC</span>;</span><br><span class="line">练习：查询所有员工的信息，结果按照姓名的排序。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> ename <span class="keyword">ASC</span>;</span><br><span class="line">练习：查询所有员工的信息，按生日由大到小，若生日相同，再按照姓名升序排。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> birthday <span class="keyword">ASC</span>,ename <span class="keyword">ASC</span>;</span><br><span class="line">多个之间用逗号隔开</span><br><span class="line">练习：查询所有员工信息，按照工资由大到小排列，要求女员工必须排在男员工的前边。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> sex <span class="keyword">ASC</span>,salary <span class="keyword">DESC</span>;</span><br><span class="line">如果不加排序规则默认是按照升序排列。</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 可以按照数值、日期、字符串（字符串的编码）来排序。</span><br><span class="line">（<span class="number">7</span>）条件查询</span><br><span class="line">示例：查询编号为<span class="number">5</span>的员工工资。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">where</span> eid<span class="operator">=</span><span class="number">5</span>;</span><br><span class="line"><span class="keyword">SQL</span>语句中支持的比较运算符：</span><br><span class="line"><span class="operator">=</span><span class="operator">&gt;</span>      <span class="operator">&lt;</span>     <span class="operator">=</span>     <span class="operator">&gt;=</span>         <span class="operator">&lt;=</span>       <span class="operator">!=</span> </span><br><span class="line">大于 小于 等于 大于等于 小于等于 不等于</span><br><span class="line">练习：查询出工资大于等于<span class="number">6000</span>的员工所有信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> salary<span class="operator">&gt;=</span><span class="number">6000</span>;</span><br><span class="line">练习：查询出所有女员工的信息；</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sex<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">练习：查询出员工姓名为king的所有信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename<span class="operator">=</span><span class="string">&#x27;king&#x27;</span>;</span><br><span class="line">练习：查询出不在<span class="number">10</span>部门的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid<span class="operator">!=</span><span class="number">10</span>;</span><br><span class="line">练习：查询出<span class="number">1990</span>年之前出生的信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> birthday<span class="operator">&lt;</span><span class="string">&#x27;1990-1-1&#x27;</span>;</span><br><span class="line">练习：查询<span class="number">1993</span>年之后的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> birthday<span class="operator">&gt;</span><span class="string">&#x27;1993-12-31&#x27;</span>;</span><br><span class="line">练习：查询出没有明确部门的员工信息</span><br><span class="line">#<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid<span class="operator">=</span><span class="keyword">NULL</span> 错误;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid <span class="keyword">is</span> <span class="keyword">NULL</span>;</span><br><span class="line">注意:<span class="keyword">NULL</span>不能和任何值进行等于<span class="operator">/</span>不等于判定，包括<span class="keyword">NULL</span>自己。可以使用<span class="keyword">is</span> <span class="keyword">NULL</span>和<span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">NULL</span></span><br><span class="line">练习：查询所有有明确部门的员工信息。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">练习：查询出<span class="number">10</span>号部门所有女员工的信息。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid<span class="operator">=</span><span class="number">10</span> <span class="keyword">AND</span> sex<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="keyword">AND</span>（并且） <span class="keyword">OR</span>（或者）</span><br><span class="line">练习：查询出<span class="number">10</span>号部门和<span class="number">30</span>号部门所有的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid<span class="operator">=</span><span class="number">10</span> <span class="keyword">OR</span> deptid<span class="operator">=</span><span class="number">30</span>;</span><br><span class="line">练习：查询出工资在<span class="number">6000</span><span class="operator">~</span><span class="number">8000</span>之间所有员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> salary<span class="operator">&gt;=</span><span class="number">6000</span> <span class="keyword">AND</span> salary<span class="operator">&lt;=</span><span class="number">8000</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> salary <span class="keyword">BETWEEN</span> <span class="number">6000</span> <span class="keyword">AND</span> <span class="number">8000</span>;</span><br><span class="line">between...and... 大于等于第一个值，小于等于第二个值</span><br><span class="line">not....between...and</span><br><span class="line">练习：查询出工资不在<span class="number">6000</span><span class="operator">~</span><span class="number">8000</span>之间的所有员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> salary<span class="operator">&lt;</span><span class="number">6000</span> <span class="keyword">OR</span> salary<span class="operator">&gt;</span><span class="number">8000</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> salary <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">6000</span> <span class="keyword">and</span> <span class="number">8000</span>;</span><br><span class="line">练习：查询出<span class="number">1990</span>年出生的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> birthday <span class="keyword">between</span> <span class="string">&#x27;1990-1-1&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;1990-12-31&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> birthday<span class="operator">&gt;=</span><span class="string">&#x27;1990-1-1&#x27;</span> <span class="keyword">AND</span> birthday<span class="operator">&lt;=</span><span class="string">&#x27;1990-12-31&#x27;</span>;</span><br><span class="line">练习：查询<span class="number">10</span>号和<span class="number">20</span>号部门的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid<span class="operator">=</span><span class="number">10</span> <span class="keyword">OR</span> deptid<span class="operator">=</span><span class="number">20</span> <span class="keyword">OR</span> deptid<span class="operator">=</span><span class="number">30</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid <span class="keyword">IN</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>);</span><br><span class="line">练习：查询出不在<span class="number">10</span>号和<span class="number">20</span>号部门的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid <span class="keyword">NOT</span> <span class="keyword">IN</span>(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line">（<span class="number">8</span>）模糊条件查询</span><br><span class="line">示例：查出姓名中含有字母e的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="keyword">LIKE</span> <span class="string">&#x27;%e%&#x27;</span>;</span><br><span class="line">练习：查询出姓名以e结尾的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="keyword">LIKE</span> <span class="string">&#x27;%e&#x27;</span>;</span><br><span class="line">练习：查询出姓名中倒数第二个字符为e的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename <span class="keyword">LIKE</span> <span class="string">&#x27;%e_&#x27;</span>;</span><br><span class="line"><span class="operator">%</span> 任意多个字符 大于等于<span class="number">0</span> 用<span class="keyword">LIKE</span>关键字</span><br><span class="line">_ 任意一个字符  等于<span class="number">1</span></span><br><span class="line">上述两个符号不能和等号<span class="operator">=</span>连用，必须使用<span class="keyword">LIKE</span></span><br><span class="line">（<span class="number">9</span>）分页查询</span><br><span class="line">分页显示：假如查询的结果集中有太多的记录，一次显示不完，可以分多页显示。</span><br><span class="line">第一页  开始 结束</span><br><span class="line">第一页   <span class="number">0</span>   <span class="number">4</span></span><br><span class="line">第二页   <span class="number">5</span>   <span class="number">9</span></span><br><span class="line">第三页   <span class="number">10</span>   <span class="number">14</span></span><br><span class="line">第四页   <span class="number">15</span>   <span class="number">19</span></span><br><span class="line">开始<span class="operator">=</span>(页面<span class="number">-1</span>)<span class="operator">*</span>每页数量</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp LIMIT <span class="keyword">start</span>,count;</span><br><span class="line"><span class="keyword">start</span>:开始的值</span><br><span class="line">count：查询的数量</span><br><span class="line">示例：每页大小是<span class="number">5</span>，查询第<span class="number">1</span>页的数据</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp LIMIT <span class="number">0</span>,<span class="number">5</span>;</span><br><span class="line">练习：每页大小是<span class="number">5</span>，查询第<span class="number">2</span>页的数据</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp LIMIT <span class="number">5</span>,<span class="number">5</span>;</span><br><span class="line">练习：每页大小是<span class="number">5</span>，查询第三页的数据</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp LIMIT <span class="number">10</span>,<span class="number">5</span>;</span><br><span class="line">练习：每页大小是<span class="number">5</span>，查询第四页的数据</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp LIMIT <span class="number">15</span>,<span class="number">5</span>;</span><br><span class="line">注意：LIMIT后边的两个数值不能加引号。</span><br><span class="line">SYNTAX语法错误提示</span><br><span class="line">综合：</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp</span><br><span class="line">WHERE...</span><br><span class="line"><span class="keyword">ORDER</span> BY...</span><br><span class="line">LIMIT...</span><br><span class="line">练习：查询出所有的男员工工资最高的前三人。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sex<span class="operator">=</span><span class="number">1</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span> LIMIT <span class="number">0</span>,<span class="number">3</span>;  </span><br></pre></td></tr></table></figure><h3 id="复杂查询"><a href="#复杂查询" class="headerlink" title="复杂查询"></a>复杂查询</h3><h4 id="聚合查询-分组查询"><a href="#聚合查询-分组查询" class="headerlink" title="聚合查询/分组查询"></a>聚合查询/分组查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">示例：查询出所有员工的数量</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(eid) <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：使用员工的姓名这一列来查询员工数量</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(ename) <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：使用员工的部门编号这一列来查询员工数量</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：查询所有男员工的数量</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> sex<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">聚合函数：</span><br><span class="line">函数，就是一个功能体，提供数据，产出结果。</span><br><span class="line"><span class="built_in">COUNT</span>(....)<span class="operator">/</span><span class="built_in">SUM</span>(...)<span class="operator">/</span><span class="built_in">AVG</span>(...)<span class="operator">/</span><span class="built_in">MAX</span>(...)<span class="operator">/</span><span class="built_in">MIN</span>(...)</span><br><span class="line">练习：查询所有员工工资综合多少</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(salary) <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：查询出所有员工平均工资</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(salary)<span class="operator">/</span><span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：查询出工资最高的员工</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：查询出工资最低的员工</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary) <span class="keyword">FROM</span> emp;</span><br><span class="line">练习：查询出年龄最大的员工</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(birthday) <span class="keyword">FROM</span> emp;</span><br><span class="line">分组查询：只能查询分组条件和聚合函数</span><br><span class="line">示例：查询出每个部门的员工数量是多少</span><br><span class="line"><span class="keyword">SELECT</span> deptid,<span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line">练习：查询出男女员工的平均工资，还有最高工资，最低工资</span><br><span class="line"><span class="keyword">SELECT</span> sex,<span class="built_in">AVG</span>(salary),<span class="built_in">MAX</span>(salary),<span class="built_in">MIN</span>(salary) <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line">函数补充：<span class="keyword">YEAR</span>(...) 获取日期中的年份</span><br><span class="line"> <span class="keyword">MONTH</span>(...)获取日期中的月份</span><br><span class="line"> <span class="keyword">DAY</span>(....)获取日期中的日</span><br><span class="line">示例：查询出<span class="number">1991</span>年出生的员工所有信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> <span class="keyword">YEAR</span>(birthday)<span class="operator">=</span><span class="number">1991</span>;</span><br><span class="line">练习：查询出三月份出生的员工所有信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> <span class="keyword">MONTH</span>(birthday)<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line">练习：查询出<span class="number">5</span>号出生的员工所有信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> <span class="keyword">DAY</span>(birthday)<span class="operator">=</span><span class="number">5</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> <span class="keyword">YEAR</span><span class="operator">-</span><span class="keyword">MONTH</span><span class="operator">-</span><span class="keyword">DAY</span>(birthday)<span class="operator">=</span><span class="number">1990</span><span class="number">-05</span><span class="number">-5</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">把一个<span class="keyword">SQL</span>语句的查询结果作为另一个<span class="keyword">SQL</span>语句的查询条件</span><br><span class="line">示例：查询出研发部所有的员工信息</span><br><span class="line">步骤<span class="number">1</span>：查询出研发部的部门编号—<span class="number">10</span></span><br><span class="line"><span class="keyword">SELECT</span> did <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> dname<span class="operator">=</span><span class="string">&#x27;研发部&#x27;</span>;</span><br><span class="line">步骤<span class="number">2</span>：根据研发部的部门编号查询员工信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span><span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid<span class="operator">=</span><span class="number">10</span>;</span><br><span class="line">综合：</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> deptid<span class="operator">=</span>(</span><br><span class="line"><span class="keyword">SELECT</span> did <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> dname<span class="operator">=</span><span class="string">&#x27;研发部&#x27;</span></span><br><span class="line">);</span><br><span class="line">练习：查询出比tom工资高的员工的所有信息</span><br><span class="line">步骤<span class="number">1</span>：查询出TOM的工资</span><br><span class="line"><span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename<span class="operator">=</span><span class="string">&#x27;tom&#x27;</span>;</span><br><span class="line">步骤<span class="number">2</span>：查询出工资比<span class="number">6000</span>高的员工所有信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> salary<span class="operator">&gt;</span><span class="number">6000</span>;</span><br><span class="line"></span><br><span class="line">综合：<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> salary<span class="operator">&gt;</span>(</span><br><span class="line"><span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename<span class="operator">=</span><span class="string">&#x27;tom&#x27;</span></span><br><span class="line">);</span><br><span class="line">练习：查询出和tom同一年出生的员工信息</span><br><span class="line">步骤<span class="number">1</span>：<span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(birthday) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename<span class="operator">=</span><span class="string">&#x27;tom&#x27;</span>;</span><br><span class="line">步骤<span class="number">2</span>：<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> <span class="keyword">YEAR</span>(birthday)<span class="operator">=</span><span class="number">1990</span>;</span><br><span class="line">综合：<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> <span class="keyword">YEAR</span>(birthday)<span class="operator">=</span>(</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(birthday) <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> ename<span class="operator">=</span><span class="string">&#x27;tom&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">示例：查询出所有员工的姓名及其部门名称。</span><br><span class="line"><span class="keyword">SELECT</span> ename,dname <span class="keyword">FROM</span> emp,dept;</span><br><span class="line">错误：产生笛卡尔积两个表里数据自由组合。</span><br><span class="line">多表查询如何避免产生笛卡尔积，添加查询条件</span><br><span class="line"><span class="keyword">SELECT</span> ename,dname <span class="keyword">FROM</span> emp,dept <span class="keyword">WHERE</span> deptid<span class="operator">=</span>did;</span><br><span class="line">上述多表查询语法是<span class="keyword">SQL</span><span class="number">-92</span>中，无法查询出没有部门的员工，也无法查询出没有员工的部门。</span><br><span class="line"><span class="keyword">SQL</span><span class="number">-99</span>中提出了新的多表查询方法。</span><br><span class="line">（<span class="number">1</span>）内连接INNER....JOIN....ON和SQL92结果一致</span><br><span class="line"><span class="keyword">SELECT</span> ename,dname <span class="keyword">FROM</span> emp <span class="keyword">INNER</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> deptid<span class="operator">=</span>did;</span><br><span class="line">（<span class="number">2</span>）左外连接 <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> JOIN.....ON....</span><br><span class="line"><span class="keyword">SELECT</span> ename,dname <span class="keyword">FROM</span> emp <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> deptid<span class="operator">=</span>did;</span><br><span class="line">查询结果是左侧所有的记录都显示；<span class="keyword">outer</span>可以省略</span><br><span class="line">（<span class="number">3</span>）右外连接<span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> JOIN....ON....</span><br><span class="line"><span class="keyword">SELECT</span> ename,dname <span class="keyword">FROM</span> emp <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> deptid<span class="operator">=</span>did;</span><br><span class="line">查询结果是右侧所有记录都显示；<span class="keyword">outer</span>可以省略</span><br><span class="line">（<span class="number">4</span>）全连接 <span class="keyword">FULL</span> <span class="keyword">JOIN</span></span><br><span class="line">显示左侧和右侧所有记录—MySQL不支持</span><br><span class="line"><span class="keyword">UNION</span> 合并相同的项;</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span> 不合并相同的项;</span><br><span class="line">(<span class="keyword">SELECT</span> ename,dname <span class="keyword">FROM</span> emp <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> deptid<span class="operator">=</span>did)</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line">(<span class="keyword">SELECT</span> ename,dname <span class="keyword">FROM</span> emp <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> deptid<span class="operator">=</span>did);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 后端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
